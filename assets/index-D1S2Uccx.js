function qy(o,r){for(var i=0;i<r.length;i++){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){for(const u in s)if(u!=="default"&&!(u in o)){const g=Object.getOwnPropertyDescriptor(s,u);g&&Object.defineProperty(o,u,g.get?g:{enumerable:!0,get:()=>s[u]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const g of u)if(g.type==="childList")for(const A of g.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&s(A)}).observe(document,{childList:!0,subtree:!0});function i(u){const g={};return u.integrity&&(g.integrity=u.integrity),u.referrerPolicy&&(g.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?g.credentials="include":u.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function s(u){if(u.ep)return;u.ep=!0;const g=i(u);fetch(u.href,g)}})();var Uy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vl(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function Ly(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var r=o.default;if(typeof r=="function"){var i=function s(){var u=!1;try{u=this instanceof s}catch{}return u?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};i.prototype=r.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(o).forEach(function(s){var u=Object.getOwnPropertyDescriptor(o,s);Object.defineProperty(i,s,u.get?u:{enumerable:!0,get:function(){return o[s]}})}),i}var Sf={exports:{}},dl={};var up;function zy(){if(up)return dl;up=1;var o=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(s,u,g){var A=null;if(g!==void 0&&(A=""+g),u.key!==void 0&&(A=""+u.key),"key"in u){g={};for(var M in u)M!=="key"&&(g[M]=u[M])}else g=u;return u=g.ref,{$$typeof:o,type:s,key:A,ref:u!==void 0?u:null,props:g}}return dl.Fragment=r,dl.jsx=i,dl.jsxs=i,dl}var fp;function Yy(){return fp||(fp=1,Sf.exports=zy()),Sf.exports}var m=Yy(),Af={exports:{}},Xt={};var dp;function Ky(){if(dp)return Xt;dp=1;var o=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),A=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),I=Symbol.iterator;function X(K){return K===null||typeof K!="object"?null:(K=I&&K[I]||K["@@iterator"],typeof K=="function"?K:null)}var fe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pe=Object.assign,Pe={};function ot(K,me,_e){this.props=K,this.context=me,this.refs=Pe,this.updater=_e||fe}ot.prototype.isReactComponent={},ot.prototype.setState=function(K,me){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,me,"setState")},ot.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function st(){}st.prototype=ot.prototype;function He(K,me,_e){this.props=K,this.context=me,this.refs=Pe,this.updater=_e||fe}var mt=He.prototype=new st;mt.constructor=He,pe(mt,ot.prototype),mt.isPureReactComponent=!0;var Oe=Array.isArray;function We(){}var Xe={H:null,A:null,T:null,S:null},Bt=Object.prototype.hasOwnProperty;function Pt(K,me,_e){var Ke=_e.ref;return{$$typeof:o,type:K,key:me,ref:Ke!==void 0?Ke:null,props:_e}}function Me(K,me){return Pt(K.type,me,K.props)}function Ue(K){return typeof K=="object"&&K!==null&&K.$$typeof===o}function Ce(K){var me={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(_e){return me[_e]})}var xe=/\/+/g;function Tt(K,me){return typeof K=="object"&&K!==null&&K.key!=null?Ce(""+K.key):me.toString(36)}function Ze(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(We,We):(K.status="pending",K.then(function(me){K.status==="pending"&&(K.status="fulfilled",K.value=me)},function(me){K.status==="pending"&&(K.status="rejected",K.reason=me)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function se(K,me,_e,Ke,Ge){var rt=typeof K;(rt==="undefined"||rt==="boolean")&&(K=null);var qt=!1;if(K===null)qt=!0;else switch(rt){case"bigint":case"string":case"number":qt=!0;break;case"object":switch(K.$$typeof){case o:case r:qt=!0;break;case _:return qt=K._init,se(qt(K._payload),me,_e,Ke,Ge)}}if(qt)return Ge=Ge(K),qt=Ke===""?"."+Tt(K,0):Ke,Oe(Ge)?(_e="",qt!=null&&(_e=qt.replace(xe,"$&/")+"/"),se(Ge,me,_e,"",function(Fe){return Fe})):Ge!=null&&(Ue(Ge)&&(Ge=Me(Ge,_e+(Ge.key==null||K&&K.key===Ge.key?"":(""+Ge.key).replace(xe,"$&/")+"/")+qt)),me.push(Ge)),1;qt=0;var sn=Ke===""?".":Ke+":";if(Oe(K))for(var Ve=0;Ve<K.length;Ve++)Ke=K[Ve],rt=sn+Tt(Ke,Ve),qt+=se(Ke,me,_e,rt,Ge);else if(Ve=X(K),typeof Ve=="function")for(K=Ve.call(K),Ve=0;!(Ke=K.next()).done;)Ke=Ke.value,rt=sn+Tt(Ke,Ve++),qt+=se(Ke,me,_e,rt,Ge);else if(rt==="object"){if(typeof K.then=="function")return se(Ze(K),me,_e,Ke,Ge);throw me=String(K),Error("Objects are not valid as a React child (found: "+(me==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":me)+"). If you meant to render a collection of children, use an array instead.")}return qt}function Ye(K,me,_e){if(K==null)return K;var Ke=[],Ge=0;return se(K,Ke,"","",function(rt){return me.call(_e,rt,Ge++)}),Ke}function Ie(K){if(K._status===-1){var me=K._result;me=me(),me.then(function(_e){(K._status===0||K._status===-1)&&(K._status=1,K._result=_e)},function(_e){(K._status===0||K._status===-1)&&(K._status=2,K._result=_e)}),K._status===-1&&(K._status=0,K._result=me)}if(K._status===1)return K._result.default;throw K._result}var Re=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var me=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(me))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},Qe={map:Ye,forEach:function(K,me,_e){Ye(K,function(){me.apply(this,arguments)},_e)},count:function(K){var me=0;return Ye(K,function(){me++}),me},toArray:function(K){return Ye(K,function(me){return me})||[]},only:function(K){if(!Ue(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return Xt.Activity=j,Xt.Children=Qe,Xt.Component=ot,Xt.Fragment=i,Xt.Profiler=u,Xt.PureComponent=He,Xt.StrictMode=s,Xt.Suspense=b,Xt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Xe,Xt.__COMPILER_RUNTIME={__proto__:null,c:function(K){return Xe.H.useMemoCache(K)}},Xt.cache=function(K){return function(){return K.apply(null,arguments)}},Xt.cacheSignal=function(){return null},Xt.cloneElement=function(K,me,_e){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var Ke=pe({},K.props),Ge=K.key;if(me!=null)for(rt in me.key!==void 0&&(Ge=""+me.key),me)!Bt.call(me,rt)||rt==="key"||rt==="__self"||rt==="__source"||rt==="ref"&&me.ref===void 0||(Ke[rt]=me[rt]);var rt=arguments.length-2;if(rt===1)Ke.children=_e;else if(1<rt){for(var qt=Array(rt),sn=0;sn<rt;sn++)qt[sn]=arguments[sn+2];Ke.children=qt}return Pt(K.type,Ge,Ke)},Xt.createContext=function(K){return K={$$typeof:A,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:g,_context:K},K},Xt.createElement=function(K,me,_e){var Ke,Ge={},rt=null;if(me!=null)for(Ke in me.key!==void 0&&(rt=""+me.key),me)Bt.call(me,Ke)&&Ke!=="key"&&Ke!=="__self"&&Ke!=="__source"&&(Ge[Ke]=me[Ke]);var qt=arguments.length-2;if(qt===1)Ge.children=_e;else if(1<qt){for(var sn=Array(qt),Ve=0;Ve<qt;Ve++)sn[Ve]=arguments[Ve+2];Ge.children=sn}if(K&&K.defaultProps)for(Ke in qt=K.defaultProps,qt)Ge[Ke]===void 0&&(Ge[Ke]=qt[Ke]);return Pt(K,rt,Ge)},Xt.createRef=function(){return{current:null}},Xt.forwardRef=function(K){return{$$typeof:M,render:K}},Xt.isValidElement=Ue,Xt.lazy=function(K){return{$$typeof:_,_payload:{_status:-1,_result:K},_init:Ie}},Xt.memo=function(K,me){return{$$typeof:S,type:K,compare:me===void 0?null:me}},Xt.startTransition=function(K){var me=Xe.T,_e={};Xe.T=_e;try{var Ke=K(),Ge=Xe.S;Ge!==null&&Ge(_e,Ke),typeof Ke=="object"&&Ke!==null&&typeof Ke.then=="function"&&Ke.then(We,Re)}catch(rt){Re(rt)}finally{me!==null&&_e.types!==null&&(me.types=_e.types),Xe.T=me}},Xt.unstable_useCacheRefresh=function(){return Xe.H.useCacheRefresh()},Xt.use=function(K){return Xe.H.use(K)},Xt.useActionState=function(K,me,_e){return Xe.H.useActionState(K,me,_e)},Xt.useCallback=function(K,me){return Xe.H.useCallback(K,me)},Xt.useContext=function(K){return Xe.H.useContext(K)},Xt.useDebugValue=function(){},Xt.useDeferredValue=function(K,me){return Xe.H.useDeferredValue(K,me)},Xt.useEffect=function(K,me){return Xe.H.useEffect(K,me)},Xt.useEffectEvent=function(K){return Xe.H.useEffectEvent(K)},Xt.useId=function(){return Xe.H.useId()},Xt.useImperativeHandle=function(K,me,_e){return Xe.H.useImperativeHandle(K,me,_e)},Xt.useInsertionEffect=function(K,me){return Xe.H.useInsertionEffect(K,me)},Xt.useLayoutEffect=function(K,me){return Xe.H.useLayoutEffect(K,me)},Xt.useMemo=function(K,me){return Xe.H.useMemo(K,me)},Xt.useOptimistic=function(K,me){return Xe.H.useOptimistic(K,me)},Xt.useReducer=function(K,me,_e){return Xe.H.useReducer(K,me,_e)},Xt.useRef=function(K){return Xe.H.useRef(K)},Xt.useState=function(K){return Xe.H.useState(K)},Xt.useSyncExternalStore=function(K,me,_e){return Xe.H.useSyncExternalStore(K,me,_e)},Xt.useTransition=function(){return Xe.H.useTransition()},Xt.version="19.2.0",Xt}var hp;function id(){return hp||(hp=1,Af.exports=Ky()),Af.exports}var Le=id();const Wn=vl(Le);var Ef={exports:{}},hl={},Tf={exports:{}},Mf={};var pp;function Gy(){return pp||(pp=1,(function(o){function r(se,Ye){var Ie=se.length;se.push(Ye);e:for(;0<Ie;){var Re=Ie-1>>>1,Qe=se[Re];if(0<u(Qe,Ye))se[Re]=Ye,se[Ie]=Qe,Ie=Re;else break e}}function i(se){return se.length===0?null:se[0]}function s(se){if(se.length===0)return null;var Ye=se[0],Ie=se.pop();if(Ie!==Ye){se[0]=Ie;e:for(var Re=0,Qe=se.length,K=Qe>>>1;Re<K;){var me=2*(Re+1)-1,_e=se[me],Ke=me+1,Ge=se[Ke];if(0>u(_e,Ie))Ke<Qe&&0>u(Ge,_e)?(se[Re]=Ge,se[Ke]=Ie,Re=Ke):(se[Re]=_e,se[me]=Ie,Re=me);else if(Ke<Qe&&0>u(Ge,Ie))se[Re]=Ge,se[Ke]=Ie,Re=Ke;else break e}}return Ye}function u(se,Ye){var Ie=se.sortIndex-Ye.sortIndex;return Ie!==0?Ie:se.id-Ye.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;o.unstable_now=function(){return g.now()}}else{var A=Date,M=A.now();o.unstable_now=function(){return A.now()-M}}var b=[],S=[],_=1,j=null,I=3,X=!1,fe=!1,pe=!1,Pe=!1,ot=typeof setTimeout=="function"?setTimeout:null,st=typeof clearTimeout=="function"?clearTimeout:null,He=typeof setImmediate<"u"?setImmediate:null;function mt(se){for(var Ye=i(S);Ye!==null;){if(Ye.callback===null)s(S);else if(Ye.startTime<=se)s(S),Ye.sortIndex=Ye.expirationTime,r(b,Ye);else break;Ye=i(S)}}function Oe(se){if(pe=!1,mt(se),!fe)if(i(b)!==null)fe=!0,We||(We=!0,Ce());else{var Ye=i(S);Ye!==null&&Ze(Oe,Ye.startTime-se)}}var We=!1,Xe=-1,Bt=5,Pt=-1;function Me(){return Pe?!0:!(o.unstable_now()-Pt<Bt)}function Ue(){if(Pe=!1,We){var se=o.unstable_now();Pt=se;var Ye=!0;try{e:{fe=!1,pe&&(pe=!1,st(Xe),Xe=-1),X=!0;var Ie=I;try{t:{for(mt(se),j=i(b);j!==null&&!(j.expirationTime>se&&Me());){var Re=j.callback;if(typeof Re=="function"){j.callback=null,I=j.priorityLevel;var Qe=Re(j.expirationTime<=se);if(se=o.unstable_now(),typeof Qe=="function"){j.callback=Qe,mt(se),Ye=!0;break t}j===i(b)&&s(b),mt(se)}else s(b);j=i(b)}if(j!==null)Ye=!0;else{var K=i(S);K!==null&&Ze(Oe,K.startTime-se),Ye=!1}}break e}finally{j=null,I=Ie,X=!1}Ye=void 0}}finally{Ye?Ce():We=!1}}}var Ce;if(typeof He=="function")Ce=function(){He(Ue)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Tt=xe.port2;xe.port1.onmessage=Ue,Ce=function(){Tt.postMessage(null)}}else Ce=function(){ot(Ue,0)};function Ze(se,Ye){Xe=ot(function(){se(o.unstable_now())},Ye)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(se){se.callback=null},o.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Bt=0<se?Math.floor(1e3/se):5},o.unstable_getCurrentPriorityLevel=function(){return I},o.unstable_next=function(se){switch(I){case 1:case 2:case 3:var Ye=3;break;default:Ye=I}var Ie=I;I=Ye;try{return se()}finally{I=Ie}},o.unstable_requestPaint=function(){Pe=!0},o.unstable_runWithPriority=function(se,Ye){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var Ie=I;I=se;try{return Ye()}finally{I=Ie}},o.unstable_scheduleCallback=function(se,Ye,Ie){var Re=o.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?Re+Ie:Re):Ie=Re,se){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=Ie+Qe,se={id:_++,callback:Ye,priorityLevel:se,startTime:Ie,expirationTime:Qe,sortIndex:-1},Ie>Re?(se.sortIndex=Ie,r(S,se),i(b)===null&&se===i(S)&&(pe?(st(Xe),Xe=-1):pe=!0,Ze(Oe,Ie-Re))):(se.sortIndex=Qe,r(b,se),fe||X||(fe=!0,We||(We=!0,Ce()))),se},o.unstable_shouldYield=Me,o.unstable_wrapCallback=function(se){var Ye=I;return function(){var Ie=I;I=Ye;try{return se.apply(this,arguments)}finally{I=Ie}}}})(Mf)),Mf}var gp;function Vy(){return gp||(gp=1,Tf.exports=Gy()),Tf.exports}var _f={exports:{}},Ir={};var mp;function Fy(){if(mp)return Ir;mp=1;var o=id();function r(b){var S="https://react.dev/errors/"+b;if(1<arguments.length){S+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)S+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+b+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},u=Symbol.for("react.portal");function g(b,S,_){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:j==null?null:""+j,children:b,containerInfo:S,implementation:_}}var A=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function M(b,S){if(b==="font")return"";if(typeof S=="string")return S==="use-credentials"?S:""}return Ir.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ir.createPortal=function(b,S){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S||S.nodeType!==1&&S.nodeType!==9&&S.nodeType!==11)throw Error(r(299));return g(b,S,null,_)},Ir.flushSync=function(b){var S=A.T,_=s.p;try{if(A.T=null,s.p=2,b)return b()}finally{A.T=S,s.p=_,s.d.f()}},Ir.preconnect=function(b,S){typeof b=="string"&&(S?(S=S.crossOrigin,S=typeof S=="string"?S==="use-credentials"?S:"":void 0):S=null,s.d.C(b,S))},Ir.prefetchDNS=function(b){typeof b=="string"&&s.d.D(b)},Ir.preinit=function(b,S){if(typeof b=="string"&&S&&typeof S.as=="string"){var _=S.as,j=M(_,S.crossOrigin),I=typeof S.integrity=="string"?S.integrity:void 0,X=typeof S.fetchPriority=="string"?S.fetchPriority:void 0;_==="style"?s.d.S(b,typeof S.precedence=="string"?S.precedence:void 0,{crossOrigin:j,integrity:I,fetchPriority:X}):_==="script"&&s.d.X(b,{crossOrigin:j,integrity:I,fetchPriority:X,nonce:typeof S.nonce=="string"?S.nonce:void 0})}},Ir.preinitModule=function(b,S){if(typeof b=="string")if(typeof S=="object"&&S!==null){if(S.as==null||S.as==="script"){var _=M(S.as,S.crossOrigin);s.d.M(b,{crossOrigin:_,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0})}}else S==null&&s.d.M(b)},Ir.preload=function(b,S){if(typeof b=="string"&&typeof S=="object"&&S!==null&&typeof S.as=="string"){var _=S.as,j=M(_,S.crossOrigin);s.d.L(b,_,{crossOrigin:j,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0,type:typeof S.type=="string"?S.type:void 0,fetchPriority:typeof S.fetchPriority=="string"?S.fetchPriority:void 0,referrerPolicy:typeof S.referrerPolicy=="string"?S.referrerPolicy:void 0,imageSrcSet:typeof S.imageSrcSet=="string"?S.imageSrcSet:void 0,imageSizes:typeof S.imageSizes=="string"?S.imageSizes:void 0,media:typeof S.media=="string"?S.media:void 0})}},Ir.preloadModule=function(b,S){if(typeof b=="string")if(S){var _=M(S.as,S.crossOrigin);s.d.m(b,{as:typeof S.as=="string"&&S.as!=="script"?S.as:void 0,crossOrigin:_,integrity:typeof S.integrity=="string"?S.integrity:void 0})}else s.d.m(b)},Ir.requestFormReset=function(b){s.d.r(b)},Ir.unstable_batchedUpdates=function(b,S){return b(S)},Ir.useFormState=function(b,S,_){return A.H.useFormState(b,S,_)},Ir.useFormStatus=function(){return A.H.useHostTransitionStatus()},Ir.version="19.2.0",Ir}var yp;function Hy(){if(yp)return _f.exports;yp=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(r){console.error(r)}}return o(),_f.exports=Fy(),_f.exports}var vp;function Py(){if(vp)return hl;vp=1;var o=Vy(),r=id(),i=Hy();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function g(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function A(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function M(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(g(e)!==e)throw Error(s(188))}function S(e){var t=e.alternate;if(!t){if(t=g(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,a=t;;){var c=n.return;if(c===null)break;var d=c.alternate;if(d===null){if(a=c.return,a!==null){n=a;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===n)return b(c),e;if(d===a)return b(c),t;d=d.sibling}throw Error(s(188))}if(n.return!==a.return)n=c,a=d;else{for(var C=!1,N=c.child;N;){if(N===n){C=!0,n=c,a=d;break}if(N===a){C=!0,a=c,n=d;break}N=N.sibling}if(!C){for(N=d.child;N;){if(N===n){C=!0,n=d,a=c;break}if(N===a){C=!0,a=d,n=c;break}N=N.sibling}if(!C)throw Error(s(189))}}if(n.alternate!==a)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function _(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=_(e),t!==null)return t;e=e.sibling}return null}var j=Object.assign,I=Symbol.for("react.element"),X=Symbol.for("react.transitional.element"),fe=Symbol.for("react.portal"),pe=Symbol.for("react.fragment"),Pe=Symbol.for("react.strict_mode"),ot=Symbol.for("react.profiler"),st=Symbol.for("react.consumer"),He=Symbol.for("react.context"),mt=Symbol.for("react.forward_ref"),Oe=Symbol.for("react.suspense"),We=Symbol.for("react.suspense_list"),Xe=Symbol.for("react.memo"),Bt=Symbol.for("react.lazy"),Pt=Symbol.for("react.activity"),Me=Symbol.for("react.memo_cache_sentinel"),Ue=Symbol.iterator;function Ce(e){return e===null||typeof e!="object"?null:(e=Ue&&e[Ue]||e["@@iterator"],typeof e=="function"?e:null)}var xe=Symbol.for("react.client.reference");function Tt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===xe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case pe:return"Fragment";case ot:return"Profiler";case Pe:return"StrictMode";case Oe:return"Suspense";case We:return"SuspenseList";case Pt:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case fe:return"Portal";case He:return e.displayName||"Context";case st:return(e._context.displayName||"Context")+".Consumer";case mt:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xe:return t=e.displayName||null,t!==null?t:Tt(e.type)||"Memo";case Bt:t=e._payload,e=e._init;try{return Tt(e(t))}catch{}}return null}var Ze=Array.isArray,se=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ye=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie={pending:!1,data:null,method:null,action:null},Re=[],Qe=-1;function K(e){return{current:e}}function me(e){0>Qe||(e.current=Re[Qe],Re[Qe]=null,Qe--)}function _e(e,t){Qe++,Re[Qe]=e.current,e.current=t}var Ke=K(null),Ge=K(null),rt=K(null),qt=K(null);function sn(e,t){switch(_e(rt,t),_e(Ge,e),_e(Ke,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?D0(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=D0(t),e=j0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}me(Ke),_e(Ke,e)}function Ve(){me(Ke),me(Ge),me(rt)}function Fe(e){e.memoizedState!==null&&_e(qt,e);var t=Ke.current,n=j0(t,e.type);t!==n&&(_e(Ge,e),_e(Ke,n))}function Mt(e){Ge.current===e&&(me(Ke),me(Ge)),qt.current===e&&(me(qt),ll._currentValue=Ie)}var ft,fn;function Wt(e){if(ft===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ft=t&&t[1]||"",fn=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ft+e+fn}var Ct=!1;function qe(e,t){if(!e||Ct)return"";Ct=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(be){var ge=be}Reflect.construct(e,[],je)}else{try{je.call()}catch(be){ge=be}e.call(je.prototype)}}else{try{throw Error()}catch(be){ge=be}(je=e())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(be){if(be&&ge&&typeof be.stack=="string")return[be.stack,ge.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=a.DetermineComponentFrameRoot(),C=d[0],N=d[1];if(C&&N){var F=C.split(`
`),ue=N.split(`
`);for(c=a=0;a<F.length&&!F[a].includes("DetermineComponentFrameRoot");)a++;for(;c<ue.length&&!ue[c].includes("DetermineComponentFrameRoot");)c++;if(a===F.length||c===ue.length)for(a=F.length-1,c=ue.length-1;1<=a&&0<=c&&F[a]!==ue[c];)c--;for(;1<=a&&0<=c;a--,c--)if(F[a]!==ue[c]){if(a!==1||c!==1)do if(a--,c--,0>c||F[a]!==ue[c]){var Te=`
`+F[a].replace(" at new "," at ");return e.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",e.displayName)),Te}while(1<=a&&0<=c);break}}}finally{Ct=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Wt(n):""}function Vt(e,t){switch(e.tag){case 26:case 27:case 5:return Wt(e.type);case 16:return Wt("Lazy");case 13:return e.child!==t&&t!==null?Wt("Suspense Fallback"):Wt("Suspense");case 19:return Wt("SuspenseList");case 0:case 15:return qe(e.type,!1);case 11:return qe(e.type.render,!1);case 1:return qe(e.type,!0);case 31:return Wt("Activity");default:return""}}function Ft(e){try{var t="",n=null;do t+=Vt(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var En=Object.prototype.hasOwnProperty,nn=o.unstable_scheduleCallback,xn=o.unstable_cancelCallback,Qr=o.unstable_shouldYield,wr=o.unstable_requestPaint,Un=o.unstable_now,zr=o.unstable_getCurrentPriorityLevel,yr=o.unstable_ImmediatePriority,Sr=o.unstable_UserBlockingPriority,Jr=o.unstable_NormalPriority,ha=o.unstable_LowPriority,Ua=o.unstable_IdlePriority,pa=o.log,Yr=o.unstable_setDisableYieldValue,sr=null,Ln=null;function kn(e){if(typeof pa=="function"&&Yr(e),Ln&&typeof Ln.setStrictMode=="function")try{Ln.setStrictMode(sr,e)}catch{}}var tt=Math.clz32?Math.clz32:Zr,or=Math.log,lr=Math.LN2;function Zr(e){return e>>>=0,e===0?32:31-(or(e)/lr|0)|0}var $e=256,vr=262144,Aa=4194304;function Kr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xr(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var c=0,d=e.suspendedLanes,C=e.pingedLanes;e=e.warmLanes;var N=a&134217727;return N!==0?(a=N&~d,a!==0?c=Kr(a):(C&=N,C!==0?c=Kr(C):n||(n=N&~e,n!==0&&(c=Kr(n))))):(N=a&~d,N!==0?c=Kr(N):C!==0?c=Kr(C):n||(n=a&~e,n!==0&&(c=Kr(n)))),c===0?0:t!==0&&t!==c&&(t&d)===0&&(d=c&-c,n=t&-t,d>=n||d===32&&(n&4194048)!==0)?t:c}function cr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Gn(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xr(){var e=Aa;return Aa<<=1,(Aa&62914560)===0&&(Aa=4194304),e}function Zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _r(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ar(e,t,n,a,c,d){var C=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var N=e.entanglements,F=e.expirationTimes,ue=e.hiddenUpdates;for(n=C&~n;0<n;){var Te=31-tt(n),je=1<<Te;N[Te]=0,F[Te]=-1;var ge=ue[Te];if(ge!==null)for(ue[Te]=null,Te=0;Te<ge.length;Te++){var be=ge[Te];be!==null&&(be.lane&=-536870913)}n&=~je}a!==0&&Tn(e,a,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(C&~t))}function Tn(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-tt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function Cn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-tt(n),c=1<<a;c&t|e[a]&t&&(e[a]|=t),n&=~c}}function w(e,t){var n=t&-t;return n=(n&42)!==0?1:R(n),(n&(e.suspendedLanes|t))!==0?0:n}function R(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function B(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function h(){var e=Ye.p;return e!==0?e:(e=window.event,e===void 0?32:rp(e.type))}function O(e,t){var n=Ye.p;try{return Ye.p=e,t()}finally{Ye.p=n}}var te=Math.random().toString(36).slice(2),W="__reactFiber$"+te,we="__reactProps$"+te,ze="__reactContainer$"+te,ht="__reactEvents$"+te,lt="__reactListeners$"+te,Qt="__reactHandles$"+te,dt="__reactResources$"+te,At="__reactMarker$"+te;function Nt(e){delete e[W],delete e[we],delete e[ht],delete e[lt],delete e[Qt]}function Dt(e){var t=e[W];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ze]||n[W]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Y0(e);e!==null;){if(n=e[W])return n;e=Y0(e)}return t}e=n,n=e.parentNode}return null}function pt(e){if(e=e[W]||e[ze]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function wt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function xt(e){var t=e[dt];return t||(t=e[dt]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function yt(e){e[At]=!0}var ct=new Set,vt={};function nt(e,t){ut(e,t),ut(e+"Capture",t)}function ut(e,t){for(vt[e]=t,e=0;e<t.length;e++)ct.add(t[e])}var gt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},he={};function ye(e){return En.call(he,e)?!0:En.call(it,e)?!1:gt.test(e)?he[e]=!0:(it[e]=!0,!1)}function ve(e,t,n){if(ye(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Ee(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Ae(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function De(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function St(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function at(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,d=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(C){n=""+C,d.call(this,C)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(C){n=""+C},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Lt(e){if(!e._valueTracker){var t=St(e)?"checked":"value";e._valueTracker=at(e,t,""+e[t])}}function zt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=St(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function z(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Yt=/[\n"\\]/g;function jt(e){return e.replace(Yt,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Kt(e,t,n,a,c,d,C,N){e.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.type=C:e.removeAttribute("type"),t!=null?C==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+De(t)):e.value!==""+De(t)&&(e.value=""+De(t)):C!=="submit"&&C!=="reset"||e.removeAttribute("value"),t!=null?Jt(e,C,De(t)):n!=null?Jt(e,C,De(n)):a!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?e.name=""+De(N):e.removeAttribute("name")}function Gt(e,t,n,a,c,d,C,N){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||n!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){Lt(e);return}n=n!=null?""+De(n):"",t=t!=null?""+De(t):n,N||t===e.value||(e.value=t),e.defaultValue=t}a=a??c,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=N?e.checked:!!a,e.defaultChecked=!!a,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(e.name=C),Lt(e)}function Jt(e,t,n){t==="number"&&z(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ht(e,t,n,a){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&a&&(e[n].defaultSelected=!0)}else{for(n=""+De(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Mn(e,t,n){if(t!=null&&(t=""+De(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+De(n):""}function on(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(s(92));if(Ze(a)){if(1<a.length)throw Error(s(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=De(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),Lt(e)}function pn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var jn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _t(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||jn.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function bn(e,t,n){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var c in t)a=t[c],t.hasOwnProperty(c)&&n[c]!==a&&_t(e,c,a)}else for(var d in t)t.hasOwnProperty(d)&&_t(e,d,t[d])}function Vn(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oa(e){return gn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Or(){}var Wr=null;function Ci(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ea=null,zn=null;function Gr(e){var t=pt(e);if(t&&(e=t.stateNode)){var n=e[we]||null;e:switch(e=t.stateNode,t.type){case"input":if(Kt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+jt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var c=a[we]||null;if(!c)throw Error(s(90));Kt(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&zt(a)}break e;case"textarea":Mn(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ht(e,!!n.multiple,t,!1)}}}var Ta=!1;function La(e,t,n){if(Ta)return e(t,n);Ta=!0;try{var a=e(t);return a}finally{if(Ta=!1,(Ea!==null||zn!==null)&&(Ql(),Ea&&(t=Ea,e=zn,zn=Ea=null,Gr(t),e)))for(t=0;t<e.length;t++)Gr(e[t])}}function Ma(e,t){var n=e.stateNode;if(n===null)return null;var a=n[we]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wi=!1;if(Hn)try{var br={};Object.defineProperty(br,"passive",{get:function(){wi=!0}}),window.addEventListener("test",br,br),window.removeEventListener("test",br,br)}catch{wi=!1}var Vr=null,Si=null,za=null;function _a(){if(za)return za;var e,t=Si,n=t.length,a,c="value"in Vr?Vr.value:Vr.textContent,d=c.length;for(e=0;e<n&&t[e]===c[e];e++);var C=n-e;for(a=1;a<=C&&t[n-a]===c[d-a];a++);return za=c.slice(e,1<a?1-a:void 0)}function Ya(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $a(){return!0}function zs(){return!1}function $n(e){function t(n,a,c,d,C){this._reactName=n,this._targetInst=c,this.type=a,this.nativeEvent=d,this.target=C,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(n=e[N],this[N]=n?n(d):d[N]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?$a:zs,this.isPropagationStopped=zs,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),t}var ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=$n(ka),ga=j({},ka,{view:0,detail:0}),Ei=$n(ga),ei,ls,Ba,Ti=j({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ra,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ba&&(Ba&&e.type==="mousemove"?(ei=e.screenX-Ba.screenX,ls=e.screenY-Ba.screenY):ls=ei=0,Ba=e),ei)},movementY:function(e){return"movementY"in e?e.movementY:ls}}),Mi=$n(Ti),cs=j({},Ti,{dataTransfer:0}),us=$n(cs),_i=j({},ga,{relatedTarget:0}),Ka=$n(_i),ti=j({},ka,{animationName:0,elapsedTime:0,pseudoElement:0}),Ys=$n(ti),_o=j({},ka,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ga=$n(_o),fs=j({},ka,{data:0}),ki=$n(fs),ds={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ur={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ni(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ur[e])?!!t[e]:!1}function Ra(){return ni}var Ks=j({},ga,{key:function(e){if(e.key){var t=ds[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ya(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hs[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ra,charCode:function(e){return e.type==="keypress"?Ya(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ya(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Bi=$n(Ks),Ri=j({},Ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ps=$n(Ri),ma=j({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ra}),gs=$n(ma),Na=j({},ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),ms=$n(Na),ys=j({},Ti,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ni=$n(ys),vs=j({},ka,{newState:0,oldState:0}),Gs=$n(vs),ko=[9,13,27,32],ri=Hn&&"CompositionEvent"in window,mn=null;Hn&&"documentMode"in document&&(mn=document.documentMode);var Bo=Hn&&"TextEvent"in window&&!mn,$r=Hn&&(!ri||mn&&8<mn&&11>=mn),ai=" ",Vs=!1;function $t(e,t){switch(e){case"keyup":return ko.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fs(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Da=!1;function Hs(e,t){switch(e){case"compositionend":return Fs(t);case"keypress":return t.which!==32?null:(Vs=!0,ai);case"textInput":return e=t.data,e===ai&&Vs?null:e;default:return null}}function Ro(e,t){if(Da)return e==="compositionend"||!ri&&$t(e,t)?(e=_a(),za=Si=Vr=null,Da=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $r&&t.locale!=="ko"?null:t.data;default:return null}}var Ps={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ps[e.type]:t==="textarea"}function xs(e,t,n,a){Ea?zn?zn.push(a):zn=[a]:Ea=a,t=tc(t,"onChange"),0<t.length&&(n=new Ai("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Va=null,ii=null;function No(e){M0(e,0)}function ji(e){var t=wt(e);if(zt(t))return e}function si(e,t){if(e==="change")return t}var ea=!1;if(Hn){var Yn;if(Hn){var Fa="oninput"in document;if(!Fa){var kr=document.createElement("div");kr.setAttribute("oninput","return;"),Fa=typeof kr.oninput=="function"}Yn=Fa}else Yn=!1;ea=Yn&&(!document.documentMode||9<document.documentMode)}function Qs(){Va&&(Va.detachEvent("onpropertychange",Oi),ii=Va=null)}function Oi(e){if(e.propertyName==="value"&&ji(ii)){var t=[];xs(t,ii,e,Ci(e)),La(No,t)}}function Js(e,t,n){e==="focusin"?(Qs(),Va=t,ii=n,Va.attachEvent("onpropertychange",Oi)):e==="focusout"&&Qs()}function ja(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ji(ii)}function bs(e,t){if(e==="click")return ji(t)}function Ha(e,t){if(e==="input"||e==="change")return ji(t)}function ya(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Er=typeof Object.is=="function"?Object.is:ya;function l(e,t){if(Er(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var c=n[a];if(!En.call(t,c)||!Er(e[c],t[c]))return!1}return!0}function f(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function p(e,t){var n=f(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=f(n)}}function x(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?x(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function E(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=z(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=z(e.document)}return t}function k(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var U=Hn&&"documentMode"in document&&11>=document.documentMode,Y=null,P=null,Q=null,ne=!1;function V(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ne||Y==null||Y!==z(a)||(a=Y,"selectionStart"in a&&k(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Q&&l(Q,a)||(Q=a,a=tc(P,"onSelect"),0<a.length&&(t=new Ai("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=Y)))}function ae(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var J={animationend:ae("Animation","AnimationEnd"),animationiteration:ae("Animation","AnimationIteration"),animationstart:ae("Animation","AnimationStart"),transitionrun:ae("Transition","TransitionRun"),transitionstart:ae("Transition","TransitionStart"),transitioncancel:ae("Transition","TransitionCancel"),transitionend:ae("Transition","TransitionEnd")},$={},ee={};Hn&&(ee=document.createElement("div").style,"AnimationEvent"in window||(delete J.animationend.animation,delete J.animationiteration.animation,delete J.animationstart.animation),"TransitionEvent"in window||delete J.transitionend.transition);function re(e){if($[e])return $[e];if(!J[e])return e;var t=J[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ee)return $[e]=t[n];return e}var oe=re("animationend"),de=re("animationiteration"),Se=re("animationstart"),Ne=re("transitionrun"),v=re("transitionstart"),y=re("transitioncancel"),T=re("transitionend"),D=new Map,q="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");q.push("scrollEnd");function L(e,t){D.set(e,t),nt(t,[e])}var G=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},H=[],le=0,ke=0;function et(){for(var e=le,t=ke=le=0;t<e;){var n=H[t];H[t++]=null;var a=H[t];H[t++]=null;var c=H[t];H[t++]=null;var d=H[t];if(H[t++]=null,a!==null&&c!==null){var C=a.pending;C===null?c.next=c:(c.next=C.next,C.next=c),a.pending=c}d!==0&&wn(n,c,d)}}function Je(e,t,n,a){H[le++]=e,H[le++]=t,H[le++]=n,H[le++]=a,ke|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function It(e,t,n,a){return Je(e,t,n,a),an(e)}function Rt(e,t){return Je(e,null,null,t),an(e)}function wn(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var c=!1,d=e.return;d!==null;)d.childLanes|=n,a=d.alternate,a!==null&&(a.childLanes|=n),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&t!==null&&(c=31-tt(n),e=d.hiddenUpdates,a=e[c],a===null?e[c]=[t]:a.push(t),t.lane=n|536870912),d):null}function an(e){if(50<tl)throw tl=0,Hu=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var yn={};function Jn(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(e,t,n,a){return new Jn(e,t,n,a)}function Tr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function er(e,t){var n=e.alternate;return n===null?(n=Xn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Cs(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Zs(e,t,n,a,c,d){var C=0;if(a=e,typeof e=="function")Tr(e)&&(C=1);else if(typeof e=="string")C=Ey(e,n,Ke.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Pt:return e=Xn(31,n,t,c),e.elementType=Pt,e.lanes=d,e;case pe:return Pa(n.children,c,d,t);case Pe:C=8,c|=24;break;case ot:return e=Xn(12,n,t,c|2),e.elementType=ot,e.lanes=d,e;case Oe:return e=Xn(13,n,t,c),e.elementType=Oe,e.lanes=d,e;case We:return e=Xn(19,n,t,c),e.elementType=We,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case He:C=10;break e;case st:C=9;break e;case mt:C=11;break e;case Xe:C=14;break e;case Bt:C=16,a=null;break e}C=29,n=Error(s(130,e===null?"null":typeof e,"")),a=null}return t=Xn(C,n,t,c),t.elementType=e,t.type=a,t.lanes=d,t}function Pa(e,t,n,a){return e=Xn(7,e,a,t),e.lanes=n,e}function Xs(e,t,n){return e=Xn(6,e,null,t),e.lanes=n,e}function Do(e){var t=Xn(18,null,null,0);return t.stateNode=e,t}function Ii(e,t,n){return t=Xn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ws=new WeakMap;function Fr(e,t){if(typeof e=="object"&&e!==null){var n=ws.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Ft(t)},ws.set(e,t),t)}return{value:e,source:t,stack:Ft(t)}}var Ws=[],$s=0,xl=null,jo=0,va=[],xa=0,qi=null,Qa=1,Ja="";function oi(e,t){Ws[$s++]=jo,Ws[$s++]=xl,xl=e,jo=t}function dd(e,t,n){va[xa++]=Qa,va[xa++]=Ja,va[xa++]=qi,qi=e;var a=Qa;e=Ja;var c=32-tt(a)-1;a&=~(1<<c),n+=1;var d=32-tt(t)+c;if(30<d){var C=c-c%5;d=(a&(1<<C)-1).toString(32),a>>=C,c-=C,Qa=1<<32-tt(t)+c|n<<c|a,Ja=d+e}else Qa=1<<d|n<<c|a,Ja=e}function Yc(e){e.return!==null&&(oi(e,1),dd(e,1,0))}function Kc(e){for(;e===xl;)xl=Ws[--$s],Ws[$s]=null,jo=Ws[--$s],Ws[$s]=null;for(;e===qi;)qi=va[--xa],va[xa]=null,Ja=va[--xa],va[xa]=null,Qa=va[--xa],va[xa]=null}function hd(e,t){va[xa++]=Qa,va[xa++]=Ja,va[xa++]=qi,Qa=t.id,Ja=t.overflow,qi=e}var Br=null,Pn=null,vn=!1,Ui=null,ba=!1,Gc=Error(s(519));function Li(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oo(Fr(t,e)),Gc}function pd(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[W]=e,t[we]=a,n){case"dialog":cn("cancel",t),cn("close",t);break;case"iframe":case"object":case"embed":cn("load",t);break;case"video":case"audio":for(n=0;n<rl.length;n++)cn(rl[n],t);break;case"source":cn("error",t);break;case"img":case"image":case"link":cn("error",t),cn("load",t);break;case"details":cn("toggle",t);break;case"input":cn("invalid",t),Gt(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":cn("invalid",t);break;case"textarea":cn("invalid",t),on(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||R0(t.textContent,n)?(a.popover!=null&&(cn("beforetoggle",t),cn("toggle",t)),a.onScroll!=null&&cn("scroll",t),a.onScrollEnd!=null&&cn("scrollend",t),a.onClick!=null&&(t.onclick=Or),t=!0):t=!1,t||Li(e,!0)}function gd(e){for(Br=e.return;Br;)switch(Br.tag){case 5:case 31:case 13:ba=!1;return;case 27:case 3:ba=!0;return;default:Br=Br.return}}function eo(e){if(e!==Br)return!1;if(!vn)return gd(e),vn=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||lf(e.type,e.memoizedProps)),n=!n),n&&Pn&&Li(e),gd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Pn=z0(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Pn=z0(e)}else t===27?(t=Pn,$i(e.type)?(e=hf,hf=null,Pn=e):Pn=t):Pn=Br?wa(e.stateNode.nextSibling):null;return!0}function Ss(){Pn=Br=null,vn=!1}function Vc(){var e=Ui;return e!==null&&(aa===null?aa=e:aa.push.apply(aa,e),Ui=null),e}function Oo(e){Ui===null?Ui=[e]:Ui.push(e)}var Fc=K(null),As=null,li=null;function zi(e,t,n){_e(Fc,t._currentValue),t._currentValue=n}function ci(e){e._currentValue=Fc.current,me(Fc)}function Hc(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Pc(e,t,n,a){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var C=c.child;d=d.firstContext;e:for(;d!==null;){var N=d;d=c;for(var F=0;F<t.length;F++)if(N.context===t[F]){d.lanes|=n,N=d.alternate,N!==null&&(N.lanes|=n),Hc(d.return,n,e),a||(C=null);break e}d=N.next}}else if(c.tag===18){if(C=c.return,C===null)throw Error(s(341));C.lanes|=n,d=C.alternate,d!==null&&(d.lanes|=n),Hc(C,n,e),C=null}else C=c.child;if(C!==null)C.return=c;else for(C=c;C!==null;){if(C===e){C=null;break}if(c=C.sibling,c!==null){c.return=C.return,C=c;break}C=C.return}c=C}}function to(e,t,n,a){e=null;for(var c=t,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var C=c.alternate;if(C===null)throw Error(s(387));if(C=C.memoizedProps,C!==null){var N=c.type;Er(c.pendingProps.value,C.value)||(e!==null?e.push(N):e=[N])}}else if(c===qt.current){if(C=c.alternate,C===null)throw Error(s(387));C.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(ll):e=[ll])}c=c.return}e!==null&&Pc(t,e,n,a),t.flags|=262144}function bl(e){for(e=e.firstContext;e!==null;){if(!Er(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Es(e){As=e,li=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Rr(e){return md(As,e)}function Cl(e,t){return As===null&&Es(e),md(e,t)}function md(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},li===null){if(e===null)throw Error(s(308));li=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else li=li.next=t;return n}var Cm=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},wm=o.unstable_scheduleCallback,Sm=o.unstable_NormalPriority,fr={$$typeof:He,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qc(){return{controller:new Cm,data:new Map,refCount:0}}function Io(e){e.refCount--,e.refCount===0&&wm(Sm,function(){e.controller.abort()})}var qo=null,Jc=0,no=0,ro=null;function Am(e,t){if(qo===null){var n=qo=[];Jc=0,no=Wu(),ro={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Jc++,t.then(yd,yd),t}function yd(){if(--Jc===0&&qo!==null){ro!==null&&(ro.status="fulfilled");var e=qo;qo=null,no=0,ro=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Em(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(c){n.push(c)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var c=0;c<n.length;c++)(0,n[c])(t)},function(c){for(a.status="rejected",a.reason=c,c=0;c<n.length;c++)(0,n[c])(void 0)}),a}var vd=se.S;se.S=function(e,t){t0=Un(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Am(e,t),vd!==null&&vd(e,t)};var Ts=K(null);function Zc(){var e=Ts.current;return e!==null?e:Kn.pooledCache}function wl(e,t){t===null?_e(Ts,Ts.current):_e(Ts,t.pool)}function xd(){var e=Zc();return e===null?null:{parent:fr._currentValue,pool:e}}var ao=Error(s(460)),Xc=Error(s(474)),Sl=Error(s(542)),Al={then:function(){}};function bd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Cd(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Or,Or),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Sd(e),e;default:if(typeof t.status=="string")t.then(Or,Or);else{if(e=Kn,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=a}},function(a){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Sd(e),e}throw _s=t,ao}}function Ms(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(_s=n,ao):n}}var _s=null;function wd(){if(_s===null)throw Error(s(459));var e=_s;return _s=null,e}function Sd(e){if(e===ao||e===Sl)throw Error(s(483))}var io=null,Uo=0;function El(e){var t=Uo;return Uo+=1,io===null&&(io=[]),Cd(io,e,t)}function Lo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Tl(e,t){throw t.$$typeof===I?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ad(e){function t(ie,Z){if(e){var ce=ie.deletions;ce===null?(ie.deletions=[Z],ie.flags|=16):ce.push(Z)}}function n(ie,Z){if(!e)return null;for(;Z!==null;)t(ie,Z),Z=Z.sibling;return null}function a(ie){for(var Z=new Map;ie!==null;)ie.key!==null?Z.set(ie.key,ie):Z.set(ie.index,ie),ie=ie.sibling;return Z}function c(ie,Z){return ie=er(ie,Z),ie.index=0,ie.sibling=null,ie}function d(ie,Z,ce){return ie.index=ce,e?(ce=ie.alternate,ce!==null?(ce=ce.index,ce<Z?(ie.flags|=67108866,Z):ce):(ie.flags|=67108866,Z)):(ie.flags|=1048576,Z)}function C(ie){return e&&ie.alternate===null&&(ie.flags|=67108866),ie}function N(ie,Z,ce,Be){return Z===null||Z.tag!==6?(Z=Xs(ce,ie.mode,Be),Z.return=ie,Z):(Z=c(Z,ce),Z.return=ie,Z)}function F(ie,Z,ce,Be){var Ot=ce.type;return Ot===pe?Te(ie,Z,ce.props.children,Be,ce.key):Z!==null&&(Z.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===Bt&&Ms(Ot)===Z.type)?(Z=c(Z,ce.props),Lo(Z,ce),Z.return=ie,Z):(Z=Zs(ce.type,ce.key,ce.props,null,ie.mode,Be),Lo(Z,ce),Z.return=ie,Z)}function ue(ie,Z,ce,Be){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ce.containerInfo||Z.stateNode.implementation!==ce.implementation?(Z=Ii(ce,ie.mode,Be),Z.return=ie,Z):(Z=c(Z,ce.children||[]),Z.return=ie,Z)}function Te(ie,Z,ce,Be,Ot){return Z===null||Z.tag!==7?(Z=Pa(ce,ie.mode,Be,Ot),Z.return=ie,Z):(Z=c(Z,ce),Z.return=ie,Z)}function je(ie,Z,ce){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Xs(""+Z,ie.mode,ce),Z.return=ie,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case X:return ce=Zs(Z.type,Z.key,Z.props,null,ie.mode,ce),Lo(ce,Z),ce.return=ie,ce;case fe:return Z=Ii(Z,ie.mode,ce),Z.return=ie,Z;case Bt:return Z=Ms(Z),je(ie,Z,ce)}if(Ze(Z)||Ce(Z))return Z=Pa(Z,ie.mode,ce,null),Z.return=ie,Z;if(typeof Z.then=="function")return je(ie,El(Z),ce);if(Z.$$typeof===He)return je(ie,Cl(ie,Z),ce);Tl(ie,Z)}return null}function ge(ie,Z,ce,Be){var Ot=Z!==null?Z.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Ot!==null?null:N(ie,Z,""+ce,Be);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case X:return ce.key===Ot?F(ie,Z,ce,Be):null;case fe:return ce.key===Ot?ue(ie,Z,ce,Be):null;case Bt:return ce=Ms(ce),ge(ie,Z,ce,Be)}if(Ze(ce)||Ce(ce))return Ot!==null?null:Te(ie,Z,ce,Be,null);if(typeof ce.then=="function")return ge(ie,Z,El(ce),Be);if(ce.$$typeof===He)return ge(ie,Z,Cl(ie,ce),Be);Tl(ie,ce)}return null}function be(ie,Z,ce,Be,Ot){if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return ie=ie.get(ce)||null,N(Z,ie,""+Be,Ot);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case X:return ie=ie.get(Be.key===null?ce:Be.key)||null,F(Z,ie,Be,Ot);case fe:return ie=ie.get(Be.key===null?ce:Be.key)||null,ue(Z,ie,Be,Ot);case Bt:return Be=Ms(Be),be(ie,Z,ce,Be,Ot)}if(Ze(Be)||Ce(Be))return ie=ie.get(ce)||null,Te(Z,ie,Be,Ot,null);if(typeof Be.then=="function")return be(ie,Z,ce,El(Be),Ot);if(Be.$$typeof===He)return be(ie,Z,ce,Cl(Z,Be),Ot);Tl(Z,Be)}return null}function bt(ie,Z,ce,Be){for(var Ot=null,Sn=null,kt=Z,rn=Z=0,hn=null;kt!==null&&rn<ce.length;rn++){kt.index>rn?(hn=kt,kt=null):hn=kt.sibling;var An=ge(ie,kt,ce[rn],Be);if(An===null){kt===null&&(kt=hn);break}e&&kt&&An.alternate===null&&t(ie,kt),Z=d(An,Z,rn),Sn===null?Ot=An:Sn.sibling=An,Sn=An,kt=hn}if(rn===ce.length)return n(ie,kt),vn&&oi(ie,rn),Ot;if(kt===null){for(;rn<ce.length;rn++)kt=je(ie,ce[rn],Be),kt!==null&&(Z=d(kt,Z,rn),Sn===null?Ot=kt:Sn.sibling=kt,Sn=kt);return vn&&oi(ie,rn),Ot}for(kt=a(kt);rn<ce.length;rn++)hn=be(kt,ie,rn,ce[rn],Be),hn!==null&&(e&&hn.alternate!==null&&kt.delete(hn.key===null?rn:hn.key),Z=d(hn,Z,rn),Sn===null?Ot=hn:Sn.sibling=hn,Sn=hn);return e&&kt.forEach(function(as){return t(ie,as)}),vn&&oi(ie,rn),Ot}function Ut(ie,Z,ce,Be){if(ce==null)throw Error(s(151));for(var Ot=null,Sn=null,kt=Z,rn=Z=0,hn=null,An=ce.next();kt!==null&&!An.done;rn++,An=ce.next()){kt.index>rn?(hn=kt,kt=null):hn=kt.sibling;var as=ge(ie,kt,An.value,Be);if(as===null){kt===null&&(kt=hn);break}e&&kt&&as.alternate===null&&t(ie,kt),Z=d(as,Z,rn),Sn===null?Ot=as:Sn.sibling=as,Sn=as,kt=hn}if(An.done)return n(ie,kt),vn&&oi(ie,rn),Ot;if(kt===null){for(;!An.done;rn++,An=ce.next())An=je(ie,An.value,Be),An!==null&&(Z=d(An,Z,rn),Sn===null?Ot=An:Sn.sibling=An,Sn=An);return vn&&oi(ie,rn),Ot}for(kt=a(kt);!An.done;rn++,An=ce.next())An=be(kt,ie,rn,An.value,Be),An!==null&&(e&&An.alternate!==null&&kt.delete(An.key===null?rn:An.key),Z=d(An,Z,rn),Sn===null?Ot=An:Sn.sibling=An,Sn=An);return e&&kt.forEach(function(Iy){return t(ie,Iy)}),vn&&oi(ie,rn),Ot}function qn(ie,Z,ce,Be){if(typeof ce=="object"&&ce!==null&&ce.type===pe&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case X:e:{for(var Ot=ce.key;Z!==null;){if(Z.key===Ot){if(Ot=ce.type,Ot===pe){if(Z.tag===7){n(ie,Z.sibling),Be=c(Z,ce.props.children),Be.return=ie,ie=Be;break e}}else if(Z.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===Bt&&Ms(Ot)===Z.type){n(ie,Z.sibling),Be=c(Z,ce.props),Lo(Be,ce),Be.return=ie,ie=Be;break e}n(ie,Z);break}else t(ie,Z);Z=Z.sibling}ce.type===pe?(Be=Pa(ce.props.children,ie.mode,Be,ce.key),Be.return=ie,ie=Be):(Be=Zs(ce.type,ce.key,ce.props,null,ie.mode,Be),Lo(Be,ce),Be.return=ie,ie=Be)}return C(ie);case fe:e:{for(Ot=ce.key;Z!==null;){if(Z.key===Ot)if(Z.tag===4&&Z.stateNode.containerInfo===ce.containerInfo&&Z.stateNode.implementation===ce.implementation){n(ie,Z.sibling),Be=c(Z,ce.children||[]),Be.return=ie,ie=Be;break e}else{n(ie,Z);break}else t(ie,Z);Z=Z.sibling}Be=Ii(ce,ie.mode,Be),Be.return=ie,ie=Be}return C(ie);case Bt:return ce=Ms(ce),qn(ie,Z,ce,Be)}if(Ze(ce))return bt(ie,Z,ce,Be);if(Ce(ce)){if(Ot=Ce(ce),typeof Ot!="function")throw Error(s(150));return ce=Ot.call(ce),Ut(ie,Z,ce,Be)}if(typeof ce.then=="function")return qn(ie,Z,El(ce),Be);if(ce.$$typeof===He)return qn(ie,Z,Cl(ie,ce),Be);Tl(ie,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,Z!==null&&Z.tag===6?(n(ie,Z.sibling),Be=c(Z,ce),Be.return=ie,ie=Be):(n(ie,Z),Be=Xs(ce,ie.mode,Be),Be.return=ie,ie=Be),C(ie)):n(ie,Z)}return function(ie,Z,ce,Be){try{Uo=0;var Ot=qn(ie,Z,ce,Be);return io=null,Ot}catch(kt){if(kt===ao||kt===Sl)throw kt;var Sn=Xn(29,kt,null,ie.mode);return Sn.lanes=Be,Sn.return=ie,Sn}finally{}}}var ks=Ad(!0),Ed=Ad(!1),Yi=!1;function Wc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $c(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ki(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Gi(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(_n&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,t=an(e),wn(e,null,n),t}return Je(e,a,t,n),an(e)}function zo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Cn(e,n)}}function eu(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var c=null,d=null;if(n=n.firstBaseUpdate,n!==null){do{var C={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};d===null?c=d=C:d=d.next=C,n=n.next}while(n!==null);d===null?c=d=t:d=d.next=t}else c=d=t;n={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var tu=!1;function Yo(){if(tu){var e=ro;if(e!==null)throw e}}function Ko(e,t,n,a){tu=!1;var c=e.updateQueue;Yi=!1;var d=c.firstBaseUpdate,C=c.lastBaseUpdate,N=c.shared.pending;if(N!==null){c.shared.pending=null;var F=N,ue=F.next;F.next=null,C===null?d=ue:C.next=ue,C=F;var Te=e.alternate;Te!==null&&(Te=Te.updateQueue,N=Te.lastBaseUpdate,N!==C&&(N===null?Te.firstBaseUpdate=ue:N.next=ue,Te.lastBaseUpdate=F))}if(d!==null){var je=c.baseState;C=0,Te=ue=F=null,N=d;do{var ge=N.lane&-536870913,be=ge!==N.lane;if(be?(dn&ge)===ge:(a&ge)===ge){ge!==0&&ge===no&&(tu=!0),Te!==null&&(Te=Te.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var bt=e,Ut=N;ge=t;var qn=n;switch(Ut.tag){case 1:if(bt=Ut.payload,typeof bt=="function"){je=bt.call(qn,je,ge);break e}je=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=Ut.payload,ge=typeof bt=="function"?bt.call(qn,je,ge):bt,ge==null)break e;je=j({},je,ge);break e;case 2:Yi=!0}}ge=N.callback,ge!==null&&(e.flags|=64,be&&(e.flags|=8192),be=c.callbacks,be===null?c.callbacks=[ge]:be.push(ge))}else be={lane:ge,tag:N.tag,payload:N.payload,callback:N.callback,next:null},Te===null?(ue=Te=be,F=je):Te=Te.next=be,C|=ge;if(N=N.next,N===null){if(N=c.shared.pending,N===null)break;be=N,N=be.next,be.next=null,c.lastBaseUpdate=be,c.shared.pending=null}}while(!0);Te===null&&(F=je),c.baseState=F,c.firstBaseUpdate=ue,c.lastBaseUpdate=Te,d===null&&(c.shared.lanes=0),Qi|=C,e.lanes=C,e.memoizedState=je}}function Td(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Md(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Td(n[e],t)}var so=K(null),Ml=K(0);function _d(e,t){e=vi,_e(Ml,e),_e(so,t),vi=e|t.baseLanes}function nu(){_e(Ml,vi),_e(so,so.current)}function ru(){vi=Ml.current,me(so),me(Ml)}var la=K(null),Ca=null;function Vi(e){var t=e.alternate;_e(ar,ar.current&1),_e(la,e),Ca===null&&(t===null||so.current!==null||t.memoizedState!==null)&&(Ca=e)}function au(e){_e(ar,ar.current),_e(la,e),Ca===null&&(Ca=e)}function kd(e){e.tag===22?(_e(ar,ar.current),_e(la,e),Ca===null&&(Ca=e)):Fi()}function Fi(){_e(ar,ar.current),_e(la,la.current)}function ca(e){me(la),Ca===e&&(Ca=null),me(ar)}var ar=K(0);function _l(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||ff(n)||df(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ui=0,en=null,On=null,dr=null,kl=!1,oo=!1,Bs=!1,Bl=0,Go=0,lo=null,Tm=0;function tr(){throw Error(s(321))}function iu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Er(e[n],t[n]))return!1;return!0}function su(e,t,n,a,c,d){return ui=d,en=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,se.H=e===null||e.memoizedState===null?dh:Cu,Bs=!1,d=n(a,c),Bs=!1,oo&&(d=Rd(t,n,a,c)),Bd(e),d}function Bd(e){se.H=Ho;var t=On!==null&&On.next!==null;if(ui=0,dr=On=en=null,kl=!1,Go=0,lo=null,t)throw Error(s(300));e===null||hr||(e=e.dependencies,e!==null&&bl(e)&&(hr=!0))}function Rd(e,t,n,a){en=e;var c=0;do{if(oo&&(lo=null),Go=0,oo=!1,25<=c)throw Error(s(301));if(c+=1,dr=On=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}se.H=hh,d=t(n,a)}while(oo);return d}function Mm(){var e=se.H,t=e.useState()[0];return t=typeof t.then=="function"?Vo(t):t,e=e.useState()[0],(On!==null?On.memoizedState:null)!==e&&(en.flags|=1024),t}function ou(){var e=Bl!==0;return Bl=0,e}function lu(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function cu(e){if(kl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}kl=!1}ui=0,dr=On=en=null,oo=!1,Go=Bl=0,lo=null}function Hr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?en.memoizedState=dr=e:dr=dr.next=e,dr}function ir(){if(On===null){var e=en.alternate;e=e!==null?e.memoizedState:null}else e=On.next;var t=dr===null?en.memoizedState:dr.next;if(t!==null)dr=t,On=e;else{if(e===null)throw en.alternate===null?Error(s(467)):Error(s(310));On=e,e={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},dr===null?en.memoizedState=dr=e:dr=dr.next=e}return dr}function Rl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vo(e){var t=Go;return Go+=1,lo===null&&(lo=[]),e=Cd(lo,e,t),t=en,(dr===null?t.memoizedState:dr.next)===null&&(t=t.alternate,se.H=t===null||t.memoizedState===null?dh:Cu),e}function Nl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Vo(e);if(e.$$typeof===He)return Rr(e)}throw Error(s(438,String(e)))}function uu(e){var t=null,n=en.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=en.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Rl(),en.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=Me;return t.index++,n}function fi(e,t){return typeof t=="function"?t(e):t}function Dl(e){var t=ir();return fu(t,On,e)}function fu(e,t,n){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var c=e.baseQueue,d=a.pending;if(d!==null){if(c!==null){var C=c.next;c.next=d.next,d.next=C}t.baseQueue=c=d,a.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{t=c.next;var N=C=null,F=null,ue=t,Te=!1;do{var je=ue.lane&-536870913;if(je!==ue.lane?(dn&je)===je:(ui&je)===je){var ge=ue.revertLane;if(ge===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),je===no&&(Te=!0);else if((ui&ge)===ge){ue=ue.next,ge===no&&(Te=!0);continue}else je={lane:0,revertLane:ue.revertLane,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},F===null?(N=F=je,C=d):F=F.next=je,en.lanes|=ge,Qi|=ge;je=ue.action,Bs&&n(d,je),d=ue.hasEagerState?ue.eagerState:n(d,je)}else ge={lane:je,revertLane:ue.revertLane,gesture:ue.gesture,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},F===null?(N=F=ge,C=d):F=F.next=ge,en.lanes|=je,Qi|=je;ue=ue.next}while(ue!==null&&ue!==t);if(F===null?C=d:F.next=N,!Er(d,e.memoizedState)&&(hr=!0,Te&&(n=ro,n!==null)))throw n;e.memoizedState=d,e.baseState=C,e.baseQueue=F,a.lastRenderedState=d}return c===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function du(e){var t=ir(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var a=n.dispatch,c=n.pending,d=t.memoizedState;if(c!==null){n.pending=null;var C=c=c.next;do d=e(d,C.action),C=C.next;while(C!==c);Er(d,t.memoizedState)||(hr=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),n.lastRenderedState=d}return[d,a]}function Nd(e,t,n){var a=en,c=ir(),d=vn;if(d){if(n===void 0)throw Error(s(407));n=n()}else n=t();var C=!Er((On||c).memoizedState,n);if(C&&(c.memoizedState=n,hr=!0),c=c.queue,gu(Od.bind(null,a,c,e),[e]),c.getSnapshot!==t||C||dr!==null&&dr.memoizedState.tag&1){if(a.flags|=2048,co(9,{destroy:void 0},jd.bind(null,a,c,n,t),null),Kn===null)throw Error(s(349));d||(ui&127)!==0||Dd(a,t,n)}return n}function Dd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=en.updateQueue,t===null?(t=Rl(),en.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function jd(e,t,n,a){t.value=n,t.getSnapshot=a,Id(t)&&qd(e)}function Od(e,t,n){return n(function(){Id(t)&&qd(e)})}function Id(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Er(e,n)}catch{return!0}}function qd(e){var t=Rt(e,2);t!==null&&ia(t,e,2)}function hu(e){var t=Hr();if(typeof e=="function"){var n=e;if(e=n(),Bs){kn(!0);try{n()}finally{kn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:e},t}function Ud(e,t,n,a){return e.baseState=n,fu(e,On,typeof a=="function"?a:fi)}function _m(e,t,n,a,c){if(Il(e))throw Error(s(485));if(e=t.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){d.listeners.push(C)}};se.T!==null?n(!0):d.isTransition=!1,a(d),n=t.pending,n===null?(d.next=t.pending=d,Ld(t,d)):(d.next=n.next,t.pending=n.next=d)}}function Ld(e,t){var n=t.action,a=t.payload,c=e.state;if(t.isTransition){var d=se.T,C={};se.T=C;try{var N=n(c,a),F=se.S;F!==null&&F(C,N),zd(e,t,N)}catch(ue){pu(e,t,ue)}finally{d!==null&&C.types!==null&&(d.types=C.types),se.T=d}}else try{d=n(c,a),zd(e,t,d)}catch(ue){pu(e,t,ue)}}function zd(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Yd(e,t,a)},function(a){return pu(e,t,a)}):Yd(e,t,n)}function Yd(e,t,n){t.status="fulfilled",t.value=n,Kd(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Ld(e,n)))}function pu(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,Kd(t),t=t.next;while(t!==a)}e.action=null}function Kd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Gd(e,t){return t}function Vd(e,t){if(vn){var n=Kn.formState;if(n!==null){e:{var a=en;if(vn){if(Pn){t:{for(var c=Pn,d=ba;c.nodeType!==8;){if(!d){c=null;break t}if(c=wa(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){Pn=wa(c.nextSibling),a=c.data==="F!";break e}}Li(a)}a=!1}a&&(t=n[0])}}return n=Hr(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gd,lastRenderedState:t},n.queue=a,n=ch.bind(null,en,a),a.dispatch=n,a=hu(!1),d=bu.bind(null,en,!1,a.queue),a=Hr(),c={state:t,dispatch:null,action:e,pending:null},a.queue=c,n=_m.bind(null,en,c,d,n),c.dispatch=n,a.memoizedState=e,[t,n,!1]}function Fd(e){var t=ir();return Hd(t,On,e)}function Hd(e,t,n){if(t=fu(e,t,Gd)[0],e=Dl(fi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=Vo(t)}catch(C){throw C===ao?Sl:C}else a=t;t=ir();var c=t.queue,d=c.dispatch;return n!==t.memoizedState&&(en.flags|=2048,co(9,{destroy:void 0},km.bind(null,c,n),null)),[a,d,e]}function km(e,t){e.action=t}function Pd(e){var t=ir(),n=On;if(n!==null)return Hd(t,n,e);ir(),t=t.memoizedState,n=ir();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function co(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=en.updateQueue,t===null&&(t=Rl(),en.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Qd(){return ir().memoizedState}function jl(e,t,n,a){var c=Hr();en.flags|=e,c.memoizedState=co(1|t,{destroy:void 0},n,a===void 0?null:a)}function Ol(e,t,n,a){var c=ir();a=a===void 0?null:a;var d=c.memoizedState.inst;On!==null&&a!==null&&iu(a,On.memoizedState.deps)?c.memoizedState=co(t,d,n,a):(en.flags|=e,c.memoizedState=co(1|t,d,n,a))}function Jd(e,t){jl(8390656,8,e,t)}function gu(e,t){Ol(2048,8,e,t)}function Bm(e){en.flags|=4;var t=en.updateQueue;if(t===null)t=Rl(),en.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Zd(e){var t=ir().memoizedState;return Bm({ref:t,nextImpl:e}),function(){if((_n&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Xd(e,t){return Ol(4,2,e,t)}function Wd(e,t){return Ol(4,4,e,t)}function $d(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function eh(e,t,n){n=n!=null?n.concat([e]):null,Ol(4,4,$d.bind(null,t,e),n)}function mu(){}function th(e,t){var n=ir();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&iu(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function nh(e,t){var n=ir();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&iu(t,a[1]))return a[0];if(a=e(),Bs){kn(!0);try{e()}finally{kn(!1)}}return n.memoizedState=[a,t],a}function yu(e,t,n){return n===void 0||(ui&1073741824)!==0&&(dn&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=r0(),en.lanes|=e,Qi|=e,n)}function rh(e,t,n,a){return Er(n,t)?n:so.current!==null?(e=yu(e,n,a),Er(e,t)||(hr=!0),e):(ui&42)===0||(ui&1073741824)!==0&&(dn&261930)===0?(hr=!0,e.memoizedState=n):(e=r0(),en.lanes|=e,Qi|=e,t)}function ah(e,t,n,a,c){var d=Ye.p;Ye.p=d!==0&&8>d?d:8;var C=se.T,N={};se.T=N,bu(e,!1,t,n);try{var F=c(),ue=se.S;if(ue!==null&&ue(N,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var Te=Em(F,a);Fo(e,t,Te,da(e))}else Fo(e,t,a,da(e))}catch(je){Fo(e,t,{then:function(){},status:"rejected",reason:je},da())}finally{Ye.p=d,C!==null&&N.types!==null&&(C.types=N.types),se.T=C}}function Rm(){}function vu(e,t,n,a){if(e.tag!==5)throw Error(s(476));var c=ih(e).queue;ah(e,c,t,Ie,n===null?Rm:function(){return sh(e),n(a)})}function ih(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ie,baseState:Ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:Ie},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function sh(e){var t=ih(e);t.next===null&&(t=e.alternate.memoizedState),Fo(e,t.next.queue,{},da())}function xu(){return Rr(ll)}function oh(){return ir().memoizedState}function lh(){return ir().memoizedState}function Nm(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=da();e=Ki(n);var a=Gi(t,e,n);a!==null&&(ia(a,t,n),zo(a,t,n)),t={cache:Qc()},e.payload=t;return}t=t.return}}function Dm(e,t,n){var a=da();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Il(e)?uh(t,n):(n=It(e,t,n,a),n!==null&&(ia(n,e,a),fh(n,t,a)))}function ch(e,t,n){var a=da();Fo(e,t,n,a)}function Fo(e,t,n,a){var c={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Il(e))uh(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var C=t.lastRenderedState,N=d(C,n);if(c.hasEagerState=!0,c.eagerState=N,Er(N,C))return Je(e,t,c,0),Kn===null&&et(),!1}catch{}finally{}if(n=It(e,t,c,a),n!==null)return ia(n,e,a),fh(n,t,a),!0}return!1}function bu(e,t,n,a){if(a={lane:2,revertLane:Wu(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Il(e)){if(t)throw Error(s(479))}else t=It(e,n,a,2),t!==null&&ia(t,e,2)}function Il(e){var t=e.alternate;return e===en||t!==null&&t===en}function uh(e,t){oo=kl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fh(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Cn(e,n)}}var Ho={readContext:Rr,use:Nl,useCallback:tr,useContext:tr,useEffect:tr,useImperativeHandle:tr,useLayoutEffect:tr,useInsertionEffect:tr,useMemo:tr,useReducer:tr,useRef:tr,useState:tr,useDebugValue:tr,useDeferredValue:tr,useTransition:tr,useSyncExternalStore:tr,useId:tr,useHostTransitionStatus:tr,useFormState:tr,useActionState:tr,useOptimistic:tr,useMemoCache:tr,useCacheRefresh:tr};Ho.useEffectEvent=tr;var dh={readContext:Rr,use:Nl,useCallback:function(e,t){return Hr().memoizedState=[e,t===void 0?null:t],e},useContext:Rr,useEffect:Jd,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,jl(4194308,4,$d.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jl(4194308,4,e,t)},useInsertionEffect:function(e,t){jl(4,2,e,t)},useMemo:function(e,t){var n=Hr();t=t===void 0?null:t;var a=e();if(Bs){kn(!0);try{e()}finally{kn(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=Hr();if(n!==void 0){var c=n(t);if(Bs){kn(!0);try{n(t)}finally{kn(!1)}}}else c=t;return a.memoizedState=a.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},a.queue=e,e=e.dispatch=Dm.bind(null,en,e),[a.memoizedState,e]},useRef:function(e){var t=Hr();return e={current:e},t.memoizedState=e},useState:function(e){e=hu(e);var t=e.queue,n=ch.bind(null,en,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:mu,useDeferredValue:function(e,t){var n=Hr();return yu(n,e,t)},useTransition:function(){var e=hu(!1);return e=ah.bind(null,en,e.queue,!0,!1),Hr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=en,c=Hr();if(vn){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),Kn===null)throw Error(s(349));(dn&127)!==0||Dd(a,t,n)}c.memoizedState=n;var d={value:n,getSnapshot:t};return c.queue=d,Jd(Od.bind(null,a,d,e),[e]),a.flags|=2048,co(9,{destroy:void 0},jd.bind(null,a,d,n,t),null),n},useId:function(){var e=Hr(),t=Kn.identifierPrefix;if(vn){var n=Ja,a=Qa;n=(a&~(1<<32-tt(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Bl++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Tm++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:xu,useFormState:Vd,useActionState:Vd,useOptimistic:function(e){var t=Hr();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=bu.bind(null,en,!0,n),n.dispatch=t,[e,t]},useMemoCache:uu,useCacheRefresh:function(){return Hr().memoizedState=Nm.bind(null,en)},useEffectEvent:function(e){var t=Hr(),n={impl:e};return t.memoizedState=n,function(){if((_n&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},Cu={readContext:Rr,use:Nl,useCallback:th,useContext:Rr,useEffect:gu,useImperativeHandle:eh,useInsertionEffect:Xd,useLayoutEffect:Wd,useMemo:nh,useReducer:Dl,useRef:Qd,useState:function(){return Dl(fi)},useDebugValue:mu,useDeferredValue:function(e,t){var n=ir();return rh(n,On.memoizedState,e,t)},useTransition:function(){var e=Dl(fi)[0],t=ir().memoizedState;return[typeof e=="boolean"?e:Vo(e),t]},useSyncExternalStore:Nd,useId:oh,useHostTransitionStatus:xu,useFormState:Fd,useActionState:Fd,useOptimistic:function(e,t){var n=ir();return Ud(n,On,e,t)},useMemoCache:uu,useCacheRefresh:lh};Cu.useEffectEvent=Zd;var hh={readContext:Rr,use:Nl,useCallback:th,useContext:Rr,useEffect:gu,useImperativeHandle:eh,useInsertionEffect:Xd,useLayoutEffect:Wd,useMemo:nh,useReducer:du,useRef:Qd,useState:function(){return du(fi)},useDebugValue:mu,useDeferredValue:function(e,t){var n=ir();return On===null?yu(n,e,t):rh(n,On.memoizedState,e,t)},useTransition:function(){var e=du(fi)[0],t=ir().memoizedState;return[typeof e=="boolean"?e:Vo(e),t]},useSyncExternalStore:Nd,useId:oh,useHostTransitionStatus:xu,useFormState:Pd,useActionState:Pd,useOptimistic:function(e,t){var n=ir();return On!==null?Ud(n,On,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:uu,useCacheRefresh:lh};hh.useEffectEvent=Zd;function wu(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:j({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Su={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=da(),c=Ki(a);c.payload=t,n!=null&&(c.callback=n),t=Gi(e,c,a),t!==null&&(ia(t,e,a),zo(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=da(),c=Ki(a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=Gi(e,c,a),t!==null&&(ia(t,e,a),zo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=da(),a=Ki(n);a.tag=2,t!=null&&(a.callback=t),t=Gi(e,a,n),t!==null&&(ia(t,e,n),zo(t,e,n))}};function ph(e,t,n,a,c,d,C){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,C):t.prototype&&t.prototype.isPureReactComponent?!l(n,a)||!l(c,d):!0}function gh(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Su.enqueueReplaceState(t,t.state,null)}function Rs(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=j({},n));for(var c in e)n[c]===void 0&&(n[c]=e[c])}return n}function mh(e){G(e)}function yh(e){console.error(e)}function vh(e){G(e)}function ql(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function xh(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Au(e,t,n){return n=Ki(n),n.tag=3,n.payload={element:null},n.callback=function(){ql(e,t)},n}function bh(e){return e=Ki(e),e.tag=3,e}function Ch(e,t,n,a){var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=a.value;e.payload=function(){return c(d)},e.callback=function(){xh(t,n,a)}}var C=n.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(e.callback=function(){xh(t,n,a),typeof c!="function"&&(Ji===null?Ji=new Set([this]):Ji.add(this));var N=a.stack;this.componentDidCatch(a.value,{componentStack:N!==null?N:""})})}function jm(e,t,n,a,c){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&to(t,n,c,!0),n=la.current,n!==null){switch(n.tag){case 31:case 13:return Ca===null?Jl():n.alternate===null&&nr===0&&(nr=3),n.flags&=-257,n.flags|=65536,n.lanes=c,a===Al?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Ju(e,a,c)),!1;case 22:return n.flags|=65536,a===Al?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Ju(e,a,c)),!1}throw Error(s(435,n.tag))}return Ju(e,a,c),Jl(),!1}if(vn)return t=la.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,a!==Gc&&(e=Error(s(422),{cause:a}),Oo(Fr(e,n)))):(a!==Gc&&(t=Error(s(423),{cause:a}),Oo(Fr(t,n))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,a=Fr(a,n),c=Au(e.stateNode,a,c),eu(e,c),nr!==4&&(nr=2)),!1;var d=Error(s(520),{cause:a});if(d=Fr(d,n),el===null?el=[d]:el.push(d),nr!==4&&(nr=2),t===null)return!0;a=Fr(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=c&-c,n.lanes|=e,e=Au(n.stateNode,a,e),eu(n,e),!1;case 1:if(t=n.type,d=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ji===null||!Ji.has(d))))return n.flags|=65536,c&=-c,n.lanes|=c,c=bh(c),Ch(c,e,n,a),eu(n,c),!1}n=n.return}while(n!==null);return!1}var Eu=Error(s(461)),hr=!1;function Nr(e,t,n,a){t.child=e===null?Ed(t,null,n,a):ks(t,e.child,n,a)}function wh(e,t,n,a,c){n=n.render;var d=t.ref;if("ref"in a){var C={};for(var N in a)N!=="ref"&&(C[N]=a[N])}else C=a;return Es(t),a=su(e,t,n,C,d,c),N=ou(),e!==null&&!hr?(lu(e,t,c),di(e,t,c)):(vn&&N&&Yc(t),t.flags|=1,Nr(e,t,a,c),t.child)}function Sh(e,t,n,a,c){if(e===null){var d=n.type;return typeof d=="function"&&!Tr(d)&&d.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=d,Ah(e,t,d,a,c)):(e=Zs(n.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!Du(e,c)){var C=d.memoizedProps;if(n=n.compare,n=n!==null?n:l,n(C,a)&&e.ref===t.ref)return di(e,t,c)}return t.flags|=1,e=er(d,a),e.ref=t.ref,e.return=t,t.child=e}function Ah(e,t,n,a,c){if(e!==null){var d=e.memoizedProps;if(l(d,a)&&e.ref===t.ref)if(hr=!1,t.pendingProps=a=d,Du(e,c))(e.flags&131072)!==0&&(hr=!0);else return t.lanes=e.lanes,di(e,t,c)}return Tu(e,t,n,a,c)}function Eh(e,t,n,a){var c=a.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|n:n,e!==null){for(a=t.child=e.child,c=0;a!==null;)c=c|a.lanes|a.childLanes,a=a.sibling;a=c&~d}else a=0,t.child=null;return Th(e,t,d,n,a)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&wl(t,d!==null?d.cachePool:null),d!==null?_d(t,d):nu(),kd(t);else return a=t.lanes=536870912,Th(e,t,d!==null?d.baseLanes|n:n,n,a)}else d!==null?(wl(t,d.cachePool),_d(t,d),Fi(),t.memoizedState=null):(e!==null&&wl(t,null),nu(),Fi());return Nr(e,t,c,n),t.child}function Po(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Th(e,t,n,a,c){var d=Zc();return d=d===null?null:{parent:fr._currentValue,pool:d},t.memoizedState={baseLanes:n,cachePool:d},e!==null&&wl(t,null),nu(),kd(t),e!==null&&to(e,t,a,!0),t.childLanes=c,null}function Ul(e,t){return t=zl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Mh(e,t,n){return ks(t,e.child,null,n),e=Ul(t,t.pendingProps),e.flags|=2,ca(t),t.memoizedState=null,e}function Om(e,t,n){var a=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(vn){if(a.mode==="hidden")return e=Ul(t,a),t.lanes=536870912,Po(null,e);if(au(t),(e=Pn)?(e=L0(e,ba),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:qi!==null?{id:Qa,overflow:Ja}:null,retryLane:536870912,hydrationErrors:null},n=Do(e),n.return=t,t.child=n,Br=t,Pn=null)):e=null,e===null)throw Li(t);return t.lanes=536870912,null}return Ul(t,a)}var d=e.memoizedState;if(d!==null){var C=d.dehydrated;if(au(t),c)if(t.flags&256)t.flags&=-257,t=Mh(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(hr||to(e,t,n,!1),c=(n&e.childLanes)!==0,hr||c){if(a=Kn,a!==null&&(C=w(a,n),C!==0&&C!==d.retryLane))throw d.retryLane=C,Rt(e,C),ia(a,e,C),Eu;Jl(),t=Mh(e,t,n)}else e=d.treeContext,Pn=wa(C.nextSibling),Br=t,vn=!0,Ui=null,ba=!1,e!==null&&hd(t,e),t=Ul(t,a),t.flags|=4096;return t}return e=er(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ll(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(s(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Tu(e,t,n,a,c){return Es(t),n=su(e,t,n,a,void 0,c),a=ou(),e!==null&&!hr?(lu(e,t,c),di(e,t,c)):(vn&&a&&Yc(t),t.flags|=1,Nr(e,t,n,c),t.child)}function _h(e,t,n,a,c,d){return Es(t),t.updateQueue=null,n=Rd(t,a,n,c),Bd(e),a=ou(),e!==null&&!hr?(lu(e,t,d),di(e,t,d)):(vn&&a&&Yc(t),t.flags|=1,Nr(e,t,n,d),t.child)}function kh(e,t,n,a,c){if(Es(t),t.stateNode===null){var d=yn,C=n.contextType;typeof C=="object"&&C!==null&&(d=Rr(C)),d=new n(a,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Su,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=a,d.state=t.memoizedState,d.refs={},Wc(t),C=n.contextType,d.context=typeof C=="object"&&C!==null?Rr(C):yn,d.state=t.memoizedState,C=n.getDerivedStateFromProps,typeof C=="function"&&(wu(t,n,C,a),d.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(C=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),C!==d.state&&Su.enqueueReplaceState(d,d.state,null),Ko(t,a,d,c),Yo(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){d=t.stateNode;var N=t.memoizedProps,F=Rs(n,N);d.props=F;var ue=d.context,Te=n.contextType;C=yn,typeof Te=="object"&&Te!==null&&(C=Rr(Te));var je=n.getDerivedStateFromProps;Te=typeof je=="function"||typeof d.getSnapshotBeforeUpdate=="function",N=t.pendingProps!==N,Te||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(N||ue!==C)&&gh(t,d,a,C),Yi=!1;var ge=t.memoizedState;d.state=ge,Ko(t,a,d,c),Yo(),ue=t.memoizedState,N||ge!==ue||Yi?(typeof je=="function"&&(wu(t,n,je,a),ue=t.memoizedState),(F=Yi||ph(t,n,F,a,ge,ue,C))?(Te||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=ue),d.props=a,d.state=ue,d.context=C,a=F):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{d=t.stateNode,$c(e,t),C=t.memoizedProps,Te=Rs(n,C),d.props=Te,je=t.pendingProps,ge=d.context,ue=n.contextType,F=yn,typeof ue=="object"&&ue!==null&&(F=Rr(ue)),N=n.getDerivedStateFromProps,(ue=typeof N=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(C!==je||ge!==F)&&gh(t,d,a,F),Yi=!1,ge=t.memoizedState,d.state=ge,Ko(t,a,d,c),Yo();var be=t.memoizedState;C!==je||ge!==be||Yi||e!==null&&e.dependencies!==null&&bl(e.dependencies)?(typeof N=="function"&&(wu(t,n,N,a),be=t.memoizedState),(Te=Yi||ph(t,n,Te,a,ge,be,F)||e!==null&&e.dependencies!==null&&bl(e.dependencies))?(ue||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,be,F),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,be,F)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||C===e.memoizedProps&&ge===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&ge===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=be),d.props=a,d.state=be,d.context=F,a=Te):(typeof d.componentDidUpdate!="function"||C===e.memoizedProps&&ge===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&ge===e.memoizedState||(t.flags|=1024),a=!1)}return d=a,Ll(e,t),a=(t.flags&128)!==0,d||a?(d=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&a?(t.child=ks(t,e.child,null,c),t.child=ks(t,null,n,c)):Nr(e,t,n,c),t.memoizedState=d.state,e=t.child):e=di(e,t,c),e}function Bh(e,t,n,a){return Ss(),t.flags|=256,Nr(e,t,n,a),t.child}var Mu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _u(e){return{baseLanes:e,cachePool:xd()}}function ku(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=fa),e}function Rh(e,t,n){var a=t.pendingProps,c=!1,d=(t.flags&128)!==0,C;if((C=d)||(C=e!==null&&e.memoizedState===null?!1:(ar.current&2)!==0),C&&(c=!0,t.flags&=-129),C=(t.flags&32)!==0,t.flags&=-33,e===null){if(vn){if(c?Vi(t):Fi(),(e=Pn)?(e=L0(e,ba),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:qi!==null?{id:Qa,overflow:Ja}:null,retryLane:536870912,hydrationErrors:null},n=Do(e),n.return=t,t.child=n,Br=t,Pn=null)):e=null,e===null)throw Li(t);return df(e)?t.lanes=32:t.lanes=536870912,null}var N=a.children;return a=a.fallback,c?(Fi(),c=t.mode,N=zl({mode:"hidden",children:N},c),a=Pa(a,c,n,null),N.return=t,a.return=t,N.sibling=a,t.child=N,a=t.child,a.memoizedState=_u(n),a.childLanes=ku(e,C,n),t.memoizedState=Mu,Po(null,a)):(Vi(t),Bu(t,N))}var F=e.memoizedState;if(F!==null&&(N=F.dehydrated,N!==null)){if(d)t.flags&256?(Vi(t),t.flags&=-257,t=Ru(e,t,n)):t.memoizedState!==null?(Fi(),t.child=e.child,t.flags|=128,t=null):(Fi(),N=a.fallback,c=t.mode,a=zl({mode:"visible",children:a.children},c),N=Pa(N,c,n,null),N.flags|=2,a.return=t,N.return=t,a.sibling=N,t.child=a,ks(t,e.child,null,n),a=t.child,a.memoizedState=_u(n),a.childLanes=ku(e,C,n),t.memoizedState=Mu,t=Po(null,a));else if(Vi(t),df(N)){if(C=N.nextSibling&&N.nextSibling.dataset,C)var ue=C.dgst;C=ue,a=Error(s(419)),a.stack="",a.digest=C,Oo({value:a,source:null,stack:null}),t=Ru(e,t,n)}else if(hr||to(e,t,n,!1),C=(n&e.childLanes)!==0,hr||C){if(C=Kn,C!==null&&(a=w(C,n),a!==0&&a!==F.retryLane))throw F.retryLane=a,Rt(e,a),ia(C,e,a),Eu;ff(N)||Jl(),t=Ru(e,t,n)}else ff(N)?(t.flags|=192,t.child=e.child,t=null):(e=F.treeContext,Pn=wa(N.nextSibling),Br=t,vn=!0,Ui=null,ba=!1,e!==null&&hd(t,e),t=Bu(t,a.children),t.flags|=4096);return t}return c?(Fi(),N=a.fallback,c=t.mode,F=e.child,ue=F.sibling,a=er(F,{mode:"hidden",children:a.children}),a.subtreeFlags=F.subtreeFlags&65011712,ue!==null?N=er(ue,N):(N=Pa(N,c,n,null),N.flags|=2),N.return=t,a.return=t,a.sibling=N,t.child=a,Po(null,a),a=t.child,N=e.child.memoizedState,N===null?N=_u(n):(c=N.cachePool,c!==null?(F=fr._currentValue,c=c.parent!==F?{parent:F,pool:F}:c):c=xd(),N={baseLanes:N.baseLanes|n,cachePool:c}),a.memoizedState=N,a.childLanes=ku(e,C,n),t.memoizedState=Mu,Po(e.child,a)):(Vi(t),n=e.child,e=n.sibling,n=er(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(C=t.deletions,C===null?(t.deletions=[e],t.flags|=16):C.push(e)),t.child=n,t.memoizedState=null,n)}function Bu(e,t){return t=zl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function zl(e,t){return e=Xn(22,e,null,t),e.lanes=0,e}function Ru(e,t,n){return ks(t,e.child,null,n),e=Bu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Nh(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Hc(e.return,t,n)}function Nu(e,t,n,a,c,d){var C=e.memoizedState;C===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:c,treeForkCount:d}:(C.isBackwards=t,C.rendering=null,C.renderingStartTime=0,C.last=a,C.tail=n,C.tailMode=c,C.treeForkCount=d)}function Dh(e,t,n){var a=t.pendingProps,c=a.revealOrder,d=a.tail;a=a.children;var C=ar.current,N=(C&2)!==0;if(N?(C=C&1|2,t.flags|=128):C&=1,_e(ar,C),Nr(e,t,a,n),a=vn?jo:0,!N&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nh(e,n,t);else if(e.tag===19)Nh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&_l(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),Nu(t,!1,c,n,d,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&_l(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}Nu(t,!0,n,null,d,a);break;case"together":Nu(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function di(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Qi|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(to(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=er(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=er(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Du(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&bl(e)))}function Im(e,t,n){switch(t.tag){case 3:sn(t,t.stateNode.containerInfo),zi(t,fr,e.memoizedState.cache),Ss();break;case 27:case 5:Fe(t);break;case 4:sn(t,t.stateNode.containerInfo);break;case 10:zi(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,au(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(Vi(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Rh(e,t,n):(Vi(t),e=di(e,t,n),e!==null?e.sibling:null);Vi(t);break;case 19:var c=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(to(e,t,n,!1),a=(n&t.childLanes)!==0),c){if(a)return Dh(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),_e(ar,ar.current),a)break;return null;case 22:return t.lanes=0,Eh(e,t,n,t.pendingProps);case 24:zi(t,fr,e.memoizedState.cache)}return di(e,t,n)}function jh(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)hr=!0;else{if(!Du(e,n)&&(t.flags&128)===0)return hr=!1,Im(e,t,n);hr=(e.flags&131072)!==0}else hr=!1,vn&&(t.flags&1048576)!==0&&dd(t,jo,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=Ms(t.elementType),t.type=e,typeof e=="function")Tr(e)?(a=Rs(e,a),t.tag=1,t=kh(null,t,e,a,n)):(t.tag=0,t=Tu(null,t,e,a,n));else{if(e!=null){var c=e.$$typeof;if(c===mt){t.tag=11,t=wh(null,t,e,a,n);break e}else if(c===Xe){t.tag=14,t=Sh(null,t,e,a,n);break e}}throw t=Tt(e)||e,Error(s(306,t,""))}}return t;case 0:return Tu(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,c=Rs(a,t.pendingProps),kh(e,t,a,c,n);case 3:e:{if(sn(t,t.stateNode.containerInfo),e===null)throw Error(s(387));a=t.pendingProps;var d=t.memoizedState;c=d.element,$c(e,t),Ko(t,a,null,n);var C=t.memoizedState;if(a=C.cache,zi(t,fr,a),a!==d.cache&&Pc(t,[fr],n,!0),Yo(),a=C.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:C.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=Bh(e,t,a,n);break e}else if(a!==c){c=Fr(Error(s(424)),t),Oo(c),t=Bh(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Pn=wa(e.firstChild),Br=t,vn=!0,Ui=null,ba=!0,n=Ed(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ss(),a===c){t=di(e,t,n);break e}Nr(e,t,a,n)}t=t.child}return t;case 26:return Ll(e,t),e===null?(n=F0(t.type,null,t.pendingProps,null))?t.memoizedState=n:vn||(n=t.type,e=t.pendingProps,a=nc(rt.current).createElement(n),a[W]=t,a[we]=e,Dr(a,n,e),yt(a),t.stateNode=a):t.memoizedState=F0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Fe(t),e===null&&vn&&(a=t.stateNode=K0(t.type,t.pendingProps,rt.current),Br=t,ba=!0,c=Pn,$i(t.type)?(hf=c,Pn=wa(a.firstChild)):Pn=c),Nr(e,t,t.pendingProps.children,n),Ll(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&vn&&((c=a=Pn)&&(a=dy(a,t.type,t.pendingProps,ba),a!==null?(t.stateNode=a,Br=t,Pn=wa(a.firstChild),ba=!1,c=!0):c=!1),c||Li(t)),Fe(t),c=t.type,d=t.pendingProps,C=e!==null?e.memoizedProps:null,a=d.children,lf(c,d)?a=null:C!==null&&lf(c,C)&&(t.flags|=32),t.memoizedState!==null&&(c=su(e,t,Mm,null,null,n),ll._currentValue=c),Ll(e,t),Nr(e,t,a,n),t.child;case 6:return e===null&&vn&&((e=n=Pn)&&(n=hy(n,t.pendingProps,ba),n!==null?(t.stateNode=n,Br=t,Pn=null,e=!0):e=!1),e||Li(t)),null;case 13:return Rh(e,t,n);case 4:return sn(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ks(t,null,a,n):Nr(e,t,a,n),t.child;case 11:return wh(e,t,t.type,t.pendingProps,n);case 7:return Nr(e,t,t.pendingProps,n),t.child;case 8:return Nr(e,t,t.pendingProps.children,n),t.child;case 12:return Nr(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,zi(t,t.type,a.value),Nr(e,t,a.children,n),t.child;case 9:return c=t.type._context,a=t.pendingProps.children,Es(t),c=Rr(c),a=a(c),t.flags|=1,Nr(e,t,a,n),t.child;case 14:return Sh(e,t,t.type,t.pendingProps,n);case 15:return Ah(e,t,t.type,t.pendingProps,n);case 19:return Dh(e,t,n);case 31:return Om(e,t,n);case 22:return Eh(e,t,n,t.pendingProps);case 24:return Es(t),a=Rr(fr),e===null?(c=Zc(),c===null&&(c=Kn,d=Qc(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=n),c=d),t.memoizedState={parent:a,cache:c},Wc(t),zi(t,fr,c)):((e.lanes&n)!==0&&($c(e,t),Ko(t,null,null,n),Yo()),c=e.memoizedState,d=t.memoizedState,c.parent!==a?(c={parent:a,cache:a},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),zi(t,fr,a)):(a=d.cache,zi(t,fr,a),a!==c.cache&&Pc(t,[fr],n,!0))),Nr(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function hi(e){e.flags|=4}function ju(e,t,n,a,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(o0())e.flags|=8192;else throw _s=Al,Xc}else e.flags&=-16777217}function Oh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Z0(t))if(o0())e.flags|=8192;else throw _s=Al,Xc}function Yl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Xr():536870912,e.lanes|=t,po|=t)}function Qo(e,t){if(!vn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Qn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags&65011712,a|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function qm(e,t,n){var a=t.pendingProps;switch(Kc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(t),null;case 1:return Qn(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ci(fr),Ve(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(eo(t)?hi(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Vc())),Qn(t),null;case 26:var c=t.type,d=t.memoizedState;return e===null?(hi(t),d!==null?(Qn(t),Oh(t,d)):(Qn(t),ju(t,c,null,a,n))):d?d!==e.memoizedState?(hi(t),Qn(t),Oh(t,d)):(Qn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&hi(t),Qn(t),ju(t,c,e,a,n)),null;case 27:if(Mt(t),n=rt.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&hi(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Qn(t),null}e=Ke.current,eo(t)?pd(t):(e=K0(c,a,n),t.stateNode=e,hi(t))}return Qn(t),null;case 5:if(Mt(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&hi(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Qn(t),null}if(d=Ke.current,eo(t))pd(t);else{var C=nc(rt.current);switch(d){case 1:d=C.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:d=C.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":d=C.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":d=C.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":d=C.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof a.is=="string"?C.createElement("select",{is:a.is}):C.createElement("select"),a.multiple?d.multiple=!0:a.size&&(d.size=a.size);break;default:d=typeof a.is=="string"?C.createElement(c,{is:a.is}):C.createElement(c)}}d[W]=t,d[we]=a;e:for(C=t.child;C!==null;){if(C.tag===5||C.tag===6)d.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===t)break e;for(;C.sibling===null;){if(C.return===null||C.return===t)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}t.stateNode=d;e:switch(Dr(d,c,a),c){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&hi(t)}}return Qn(t),ju(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&hi(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(e=rt.current,eo(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,c=Br,c!==null)switch(c.tag){case 27:case 5:a=c.memoizedProps}e[W]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||R0(e.nodeValue,n)),e||Li(t,!0)}else e=nc(e).createTextNode(a),e[W]=t,t.stateNode=e}return Qn(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=eo(t),n!==null){if(e===null){if(!a)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[W]=t}else Ss(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qn(t),e=!1}else n=Vc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(ca(t),t):(ca(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Qn(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=eo(t),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(s(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));c[W]=t}else Ss(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qn(t),c=!1}else c=Vc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(ca(t),t):(ca(t),null)}return ca(t),(t.flags&128)!==0?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,c=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(c=a.alternate.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==c&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Yl(t,t.updateQueue),Qn(t),null);case 4:return Ve(),e===null&&nf(t.stateNode.containerInfo),Qn(t),null;case 10:return ci(t.type),Qn(t),null;case 19:if(me(ar),a=t.memoizedState,a===null)return Qn(t),null;if(c=(t.flags&128)!==0,d=a.rendering,d===null)if(c)Qo(a,!1);else{if(nr!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=_l(e),d!==null){for(t.flags|=128,Qo(a,!1),e=d.updateQueue,t.updateQueue=e,Yl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Cs(n,e),n=n.sibling;return _e(ar,ar.current&1|2),vn&&oi(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&Un()>Hl&&(t.flags|=128,c=!0,Qo(a,!1),t.lanes=4194304)}else{if(!c)if(e=_l(d),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Yl(t,e),Qo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!d.alternate&&!vn)return Qn(t),null}else 2*Un()-a.renderingStartTime>Hl&&n!==536870912&&(t.flags|=128,c=!0,Qo(a,!1),t.lanes=4194304);a.isBackwards?(d.sibling=t.child,t.child=d):(e=a.last,e!==null?e.sibling=d:t.child=d,a.last=d)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Un(),e.sibling=null,n=ar.current,_e(ar,c?n&1|2:n&1),vn&&oi(t,a.treeForkCount),e):(Qn(t),null);case 22:case 23:return ca(t),ru(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(Qn(t),t.subtreeFlags&6&&(t.flags|=8192)):Qn(t),n=t.updateQueue,n!==null&&Yl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&me(Ts),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ci(fr),Qn(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Um(e,t){switch(Kc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ci(fr),Ve(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Mt(t),null;case 31:if(t.memoizedState!==null){if(ca(t),t.alternate===null)throw Error(s(340));Ss()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ca(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Ss()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return me(ar),null;case 4:return Ve(),null;case 10:return ci(t.type),null;case 22:case 23:return ca(t),ru(),e!==null&&me(Ts),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ci(fr),null;case 25:return null;default:return null}}function Ih(e,t){switch(Kc(t),t.tag){case 3:ci(fr),Ve();break;case 26:case 27:case 5:Mt(t);break;case 4:Ve();break;case 31:t.memoizedState!==null&&ca(t);break;case 13:ca(t);break;case 19:me(ar);break;case 10:ci(t.type);break;case 22:case 23:ca(t),ru(),e!==null&&me(Ts);break;case 24:ci(fr)}}function Jo(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var c=a.next;n=c;do{if((n.tag&e)===e){a=void 0;var d=n.create,C=n.inst;a=d(),C.destroy=a}n=n.next}while(n!==c)}}catch(N){Dn(t,t.return,N)}}function Hi(e,t,n){try{var a=t.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var d=c.next;a=d;do{if((a.tag&e)===e){var C=a.inst,N=C.destroy;if(N!==void 0){C.destroy=void 0,c=t;var F=n,ue=N;try{ue()}catch(Te){Dn(c,F,Te)}}}a=a.next}while(a!==d)}}catch(Te){Dn(t,t.return,Te)}}function qh(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Md(t,n)}catch(a){Dn(e,e.return,a)}}}function Uh(e,t,n){n.props=Rs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Dn(e,t,a)}}function Zo(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(c){Dn(e,t,c)}}function Za(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(c){Dn(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(c){Dn(e,t,c)}else n.current=null}function Lh(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(c){Dn(e,e.return,c)}}function Ou(e,t,n){try{var a=e.stateNode;sy(a,e.type,n,t),a[we]=t}catch(c){Dn(e,e.return,c)}}function zh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&$i(e.type)||e.tag===4}function Iu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&$i(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qu(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Or));else if(a!==4&&(a===27&&$i(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(qu(e,t,n),e=e.sibling;e!==null;)qu(e,t,n),e=e.sibling}function Kl(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&$i(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Kl(e,t,n),e=e.sibling;e!==null;)Kl(e,t,n),e=e.sibling}function Yh(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Dr(t,a,n),t[W]=e,t[we]=n}catch(d){Dn(e,e.return,d)}}var pi=!1,pr=!1,Uu=!1,Kh=typeof WeakSet=="function"?WeakSet:Set,Mr=null;function Lm(e,t){if(e=e.containerInfo,sf=cc,e=E(e),k(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var c=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{n.nodeType,d.nodeType}catch{n=null;break e}var C=0,N=-1,F=-1,ue=0,Te=0,je=e,ge=null;t:for(;;){for(var be;je!==n||c!==0&&je.nodeType!==3||(N=C+c),je!==d||a!==0&&je.nodeType!==3||(F=C+a),je.nodeType===3&&(C+=je.nodeValue.length),(be=je.firstChild)!==null;)ge=je,je=be;for(;;){if(je===e)break t;if(ge===n&&++ue===c&&(N=C),ge===d&&++Te===a&&(F=C),(be=je.nextSibling)!==null)break;je=ge,ge=je.parentNode}je=be}n=N===-1||F===-1?null:{start:N,end:F}}else n=null}n=n||{start:0,end:0}}else n=null;for(of={focusedElem:e,selectionRange:n},cc=!1,Mr=t;Mr!==null;)if(t=Mr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Mr=e;else for(;Mr!==null;){switch(t=Mr,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)c=e[n],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,n=t,c=d.memoizedProps,d=d.memoizedState,a=n.stateNode;try{var bt=Rs(n.type,c);e=a.getSnapshotBeforeUpdate(bt,d),a.__reactInternalSnapshotBeforeUpdate=e}catch(Ut){Dn(n,n.return,Ut)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)uf(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":uf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,Mr=e;break}Mr=t.return}}function Gh(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:mi(e,n),a&4&&Jo(5,n);break;case 1:if(mi(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(C){Dn(n,n.return,C)}else{var c=Rs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(C){Dn(n,n.return,C)}}a&64&&qh(n),a&512&&Zo(n,n.return);break;case 3:if(mi(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Md(e,t)}catch(C){Dn(n,n.return,C)}}break;case 27:t===null&&a&4&&Yh(n);case 26:case 5:mi(e,n),t===null&&a&4&&Lh(n),a&512&&Zo(n,n.return);break;case 12:mi(e,n);break;case 31:mi(e,n),a&4&&Hh(e,n);break;case 13:mi(e,n),a&4&&Ph(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Qm.bind(null,n),py(e,n))));break;case 22:if(a=n.memoizedState!==null||pi,!a){t=t!==null&&t.memoizedState!==null||pr,c=pi;var d=pr;pi=a,(pr=t)&&!d?yi(e,n,(n.subtreeFlags&8772)!==0):mi(e,n),pi=c,pr=d}break;case 30:break;default:mi(e,n)}}function Vh(e){var t=e.alternate;t!==null&&(e.alternate=null,Vh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Nt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Zn=null,ta=!1;function gi(e,t,n){for(n=n.child;n!==null;)Fh(e,t,n),n=n.sibling}function Fh(e,t,n){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(sr,n)}catch{}switch(n.tag){case 26:pr||Za(n,t),gi(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:pr||Za(n,t);var a=Zn,c=ta;$i(n.type)&&(Zn=n.stateNode,ta=!1),gi(e,t,n),il(n.stateNode),Zn=a,ta=c;break;case 5:pr||Za(n,t);case 6:if(a=Zn,c=ta,Zn=null,gi(e,t,n),Zn=a,ta=c,Zn!==null)if(ta)try{(Zn.nodeType===9?Zn.body:Zn.nodeName==="HTML"?Zn.ownerDocument.body:Zn).removeChild(n.stateNode)}catch(d){Dn(n,t,d)}else try{Zn.removeChild(n.stateNode)}catch(d){Dn(n,t,d)}break;case 18:Zn!==null&&(ta?(e=Zn,q0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),wo(e)):q0(Zn,n.stateNode));break;case 4:a=Zn,c=ta,Zn=n.stateNode.containerInfo,ta=!0,gi(e,t,n),Zn=a,ta=c;break;case 0:case 11:case 14:case 15:Hi(2,n,t),pr||Hi(4,n,t),gi(e,t,n);break;case 1:pr||(Za(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&Uh(n,t,a)),gi(e,t,n);break;case 21:gi(e,t,n);break;case 22:pr=(a=pr)||n.memoizedState!==null,gi(e,t,n),pr=a;break;default:gi(e,t,n)}}function Hh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{wo(e)}catch(n){Dn(t,t.return,n)}}}function Ph(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{wo(e)}catch(n){Dn(t,t.return,n)}}function zm(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Kh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Kh),t;default:throw Error(s(435,e.tag))}}function Gl(e,t){var n=zm(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var c=Jm.bind(null,e,a);a.then(c,c)}})}function na(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var c=n[a],d=e,C=t,N=C;e:for(;N!==null;){switch(N.tag){case 27:if($i(N.type)){Zn=N.stateNode,ta=!1;break e}break;case 5:Zn=N.stateNode,ta=!1;break e;case 3:case 4:Zn=N.stateNode.containerInfo,ta=!0;break e}N=N.return}if(Zn===null)throw Error(s(160));Fh(d,C,c),Zn=null,ta=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Qh(t,e),t=t.sibling}var Oa=null;function Qh(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:na(t,e),ra(e),a&4&&(Hi(3,e,e.return),Jo(3,e),Hi(5,e,e.return));break;case 1:na(t,e),ra(e),a&512&&(pr||n===null||Za(n,n.return)),a&64&&pi&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var c=Oa;if(na(t,e),ra(e),a&512&&(pr||n===null||Za(n,n.return)),a&4){var d=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,c=c.ownerDocument||c;t:switch(a){case"title":d=c.getElementsByTagName("title")[0],(!d||d[At]||d[W]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(a),c.head.insertBefore(d,c.querySelector("head > title"))),Dr(d,a,n),d[W]=e,yt(d),a=d;break e;case"link":var C=Q0("link","href",c).get(a+(n.href||""));if(C){for(var N=0;N<C.length;N++)if(d=C[N],d.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&d.getAttribute("rel")===(n.rel==null?null:n.rel)&&d.getAttribute("title")===(n.title==null?null:n.title)&&d.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){C.splice(N,1);break t}}d=c.createElement(a),Dr(d,a,n),c.head.appendChild(d);break;case"meta":if(C=Q0("meta","content",c).get(a+(n.content||""))){for(N=0;N<C.length;N++)if(d=C[N],d.getAttribute("content")===(n.content==null?null:""+n.content)&&d.getAttribute("name")===(n.name==null?null:n.name)&&d.getAttribute("property")===(n.property==null?null:n.property)&&d.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&d.getAttribute("charset")===(n.charSet==null?null:n.charSet)){C.splice(N,1);break t}}d=c.createElement(a),Dr(d,a,n),c.head.appendChild(d);break;default:throw Error(s(468,a))}d[W]=e,yt(d),a=d}e.stateNode=a}else J0(c,e.type,e.stateNode);else e.stateNode=P0(c,a,e.memoizedProps);else d!==a?(d===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):d.count--,a===null?J0(c,e.type,e.stateNode):P0(c,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Ou(e,e.memoizedProps,n.memoizedProps)}break;case 27:na(t,e),ra(e),a&512&&(pr||n===null||Za(n,n.return)),n!==null&&a&4&&Ou(e,e.memoizedProps,n.memoizedProps);break;case 5:if(na(t,e),ra(e),a&512&&(pr||n===null||Za(n,n.return)),e.flags&32){c=e.stateNode;try{pn(c,"")}catch(bt){Dn(e,e.return,bt)}}a&4&&e.stateNode!=null&&(c=e.memoizedProps,Ou(e,c,n!==null?n.memoizedProps:c)),a&1024&&(Uu=!0);break;case 6:if(na(t,e),ra(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(bt){Dn(e,e.return,bt)}}break;case 3:if(ic=null,c=Oa,Oa=rc(t.containerInfo),na(t,e),Oa=c,ra(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{wo(t.containerInfo)}catch(bt){Dn(e,e.return,bt)}Uu&&(Uu=!1,Jh(e));break;case 4:a=Oa,Oa=rc(e.stateNode.containerInfo),na(t,e),ra(e),Oa=a;break;case 12:na(t,e),ra(e);break;case 31:na(t,e),ra(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Gl(e,a)));break;case 13:na(t,e),ra(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Fl=Un()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Gl(e,a)));break;case 22:c=e.memoizedState!==null;var F=n!==null&&n.memoizedState!==null,ue=pi,Te=pr;if(pi=ue||c,pr=Te||F,na(t,e),pr=Te,pi=ue,ra(e),a&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(n===null||F||pi||pr||Ns(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){F=n=t;try{if(d=F.stateNode,c)C=d.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{N=F.stateNode;var je=F.memoizedProps.style,ge=je!=null&&je.hasOwnProperty("display")?je.display:null;N.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(bt){Dn(F,F.return,bt)}}}else if(t.tag===6){if(n===null){F=t;try{F.stateNode.nodeValue=c?"":F.memoizedProps}catch(bt){Dn(F,F.return,bt)}}}else if(t.tag===18){if(n===null){F=t;try{var be=F.stateNode;c?U0(be,!0):U0(F.stateNode,!1)}catch(bt){Dn(F,F.return,bt)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Gl(e,n))));break;case 19:na(t,e),ra(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Gl(e,a)));break;case 30:break;case 21:break;default:na(t,e),ra(e)}}function ra(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(zh(a)){n=a;break}a=a.return}if(n==null)throw Error(s(160));switch(n.tag){case 27:var c=n.stateNode,d=Iu(e);Kl(e,d,c);break;case 5:var C=n.stateNode;n.flags&32&&(pn(C,""),n.flags&=-33);var N=Iu(e);Kl(e,N,C);break;case 3:case 4:var F=n.stateNode.containerInfo,ue=Iu(e);qu(e,ue,F);break;default:throw Error(s(161))}}catch(Te){Dn(e,e.return,Te)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Jh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function mi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Gh(e,t.alternate,t),t=t.sibling}function Ns(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Hi(4,t,t.return),Ns(t);break;case 1:Za(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Uh(t,t.return,n),Ns(t);break;case 27:il(t.stateNode);case 26:case 5:Za(t,t.return),Ns(t);break;case 22:t.memoizedState===null&&Ns(t);break;case 30:Ns(t);break;default:Ns(t)}e=e.sibling}}function yi(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,c=e,d=t,C=d.flags;switch(d.tag){case 0:case 11:case 15:yi(c,d,n),Jo(4,d);break;case 1:if(yi(c,d,n),a=d,c=a.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(ue){Dn(a,a.return,ue)}if(a=d,c=a.updateQueue,c!==null){var N=a.stateNode;try{var F=c.shared.hiddenCallbacks;if(F!==null)for(c.shared.hiddenCallbacks=null,c=0;c<F.length;c++)Td(F[c],N)}catch(ue){Dn(a,a.return,ue)}}n&&C&64&&qh(d),Zo(d,d.return);break;case 27:Yh(d);case 26:case 5:yi(c,d,n),n&&a===null&&C&4&&Lh(d),Zo(d,d.return);break;case 12:yi(c,d,n);break;case 31:yi(c,d,n),n&&C&4&&Hh(c,d);break;case 13:yi(c,d,n),n&&C&4&&Ph(c,d);break;case 22:d.memoizedState===null&&yi(c,d,n),Zo(d,d.return);break;case 30:break;default:yi(c,d,n)}t=t.sibling}}function Lu(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Io(n))}function zu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Io(e))}function Ia(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zh(e,t,n,a),t=t.sibling}function Zh(e,t,n,a){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Ia(e,t,n,a),c&2048&&Jo(9,t);break;case 1:Ia(e,t,n,a);break;case 3:Ia(e,t,n,a),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Io(e)));break;case 12:if(c&2048){Ia(e,t,n,a),e=t.stateNode;try{var d=t.memoizedProps,C=d.id,N=d.onPostCommit;typeof N=="function"&&N(C,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(F){Dn(t,t.return,F)}}else Ia(e,t,n,a);break;case 31:Ia(e,t,n,a);break;case 13:Ia(e,t,n,a);break;case 23:break;case 22:d=t.stateNode,C=t.alternate,t.memoizedState!==null?d._visibility&2?Ia(e,t,n,a):Xo(e,t):d._visibility&2?Ia(e,t,n,a):(d._visibility|=2,uo(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Lu(C,t);break;case 24:Ia(e,t,n,a),c&2048&&zu(t.alternate,t);break;default:Ia(e,t,n,a)}}function uo(e,t,n,a,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,C=t,N=n,F=a,ue=C.flags;switch(C.tag){case 0:case 11:case 15:uo(d,C,N,F,c),Jo(8,C);break;case 23:break;case 22:var Te=C.stateNode;C.memoizedState!==null?Te._visibility&2?uo(d,C,N,F,c):Xo(d,C):(Te._visibility|=2,uo(d,C,N,F,c)),c&&ue&2048&&Lu(C.alternate,C);break;case 24:uo(d,C,N,F,c),c&&ue&2048&&zu(C.alternate,C);break;default:uo(d,C,N,F,c)}t=t.sibling}}function Xo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,c=a.flags;switch(a.tag){case 22:Xo(n,a),c&2048&&Lu(a.alternate,a);break;case 24:Xo(n,a),c&2048&&zu(a.alternate,a);break;default:Xo(n,a)}t=t.sibling}}var Wo=8192;function fo(e,t,n){if(e.subtreeFlags&Wo)for(e=e.child;e!==null;)Xh(e,t,n),e=e.sibling}function Xh(e,t,n){switch(e.tag){case 26:fo(e,t,n),e.flags&Wo&&e.memoizedState!==null&&Ty(n,Oa,e.memoizedState,e.memoizedProps);break;case 5:fo(e,t,n);break;case 3:case 4:var a=Oa;Oa=rc(e.stateNode.containerInfo),fo(e,t,n),Oa=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Wo,Wo=16777216,fo(e,t,n),Wo=a):fo(e,t,n));break;default:fo(e,t,n)}}function Wh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function $o(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];Mr=a,e0(a,e)}Wh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$h(e),e=e.sibling}function $h(e){switch(e.tag){case 0:case 11:case 15:$o(e),e.flags&2048&&Hi(9,e,e.return);break;case 3:$o(e);break;case 12:$o(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Vl(e)):$o(e);break;default:$o(e)}}function Vl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];Mr=a,e0(a,e)}Wh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Hi(8,t,t.return),Vl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Vl(t));break;default:Vl(t)}e=e.sibling}}function e0(e,t){for(;Mr!==null;){var n=Mr;switch(n.tag){case 0:case 11:case 15:Hi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Io(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,Mr=a;else e:for(n=e;Mr!==null;){a=Mr;var c=a.sibling,d=a.return;if(Vh(a),a===n){Mr=null;break e}if(c!==null){c.return=d,Mr=c;break e}Mr=d}}}var Ym={getCacheForType:function(e){var t=Rr(fr),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Rr(fr).controller.signal}},Km=typeof WeakMap=="function"?WeakMap:Map,_n=0,Kn=null,ln=null,dn=0,Nn=0,ua=null,Pi=!1,ho=!1,Yu=!1,vi=0,nr=0,Qi=0,Ds=0,Ku=0,fa=0,po=0,el=null,aa=null,Gu=!1,Fl=0,t0=0,Hl=1/0,Pl=null,Ji=null,Cr=0,Zi=null,go=null,xi=0,Vu=0,Fu=null,n0=null,tl=0,Hu=null;function da(){return(_n&2)!==0&&dn!==0?dn&-dn:se.T!==null?Wu():h()}function r0(){if(fa===0)if((dn&536870912)===0||vn){var e=vr;vr<<=1,(vr&3932160)===0&&(vr=262144),fa=e}else fa=536870912;return e=la.current,e!==null&&(e.flags|=32),fa}function ia(e,t,n){(e===Kn&&(Nn===2||Nn===9)||e.cancelPendingCommit!==null)&&(mo(e,0),Xi(e,dn,fa,!1)),_r(e,n),((_n&2)===0||e!==Kn)&&(e===Kn&&((_n&2)===0&&(Ds|=n),nr===4&&Xi(e,dn,fa,!1)),Xa(e))}function a0(e,t,n){if((_n&6)!==0)throw Error(s(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||cr(e,t),c=a?Fm(e,t):Qu(e,t,!0),d=a;do{if(c===0){ho&&!a&&Xi(e,t,0,!1);break}else{if(n=e.current.alternate,d&&!Gm(n)){c=Qu(e,t,!1),d=!1;continue}if(c===2){if(d=t,e.errorRecoveryDisabledLanes&d)var C=0;else C=e.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){t=C;e:{var N=e;c=el;var F=N.current.memoizedState.isDehydrated;if(F&&(mo(N,C).flags|=256),C=Qu(N,C,!1),C!==2){if(Yu&&!F){N.errorRecoveryDisabledLanes|=d,Ds|=d,c=4;break e}d=aa,aa=c,d!==null&&(aa===null?aa=d:aa.push.apply(aa,d))}c=C}if(d=!1,c!==2)continue}}if(c===1){mo(e,0),Xi(e,t,0,!0);break}e:{switch(a=e,d=c,d){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Xi(a,t,fa,!Pi);break e;case 2:aa=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(c=Fl+300-Un(),10<c)){if(Xi(a,t,fa,!Pi),xr(a,0,!0)!==0)break e;xi=t,a.timeoutHandle=O0(i0.bind(null,a,n,aa,Pl,Gu,t,fa,Ds,po,Pi,d,"Throttled",-0,0),c);break e}i0(a,n,aa,Pl,Gu,t,fa,Ds,po,Pi,d,null,-0,0)}}break}while(!0);Xa(e)}function i0(e,t,n,a,c,d,C,N,F,ue,Te,je,ge,be){if(e.timeoutHandle=-1,je=t.subtreeFlags,je&8192||(je&16785408)===16785408){je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Or},Xh(t,d,je);var bt=(d&62914560)===d?Fl-Un():(d&4194048)===d?t0-Un():0;if(bt=My(je,bt),bt!==null){xi=d,e.cancelPendingCommit=bt(h0.bind(null,e,t,d,n,a,c,C,N,F,Te,je,null,ge,be)),Xi(e,d,C,!ue);return}}h0(e,t,d,n,a,c,C,N,F)}function Gm(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var c=n[a],d=c.getSnapshot;c=c.value;try{if(!Er(d(),c))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xi(e,t,n,a){t&=~Ku,t&=~Ds,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var c=t;0<c;){var d=31-tt(c),C=1<<d;a[d]=-1,c&=~C}n!==0&&Tn(e,n,t)}function Ql(){return(_n&6)===0?(nl(0),!1):!0}function Pu(){if(ln!==null){if(Nn===0)var e=ln.return;else e=ln,li=As=null,cu(e),io=null,Uo=0,e=ln;for(;e!==null;)Ih(e.alternate,e),e=e.return;ln=null}}function mo(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,cy(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),xi=0,Pu(),Kn=e,ln=n=er(e.current,null),dn=t,Nn=0,ua=null,Pi=!1,ho=cr(e,t),Yu=!1,po=fa=Ku=Ds=Qi=nr=0,aa=el=null,Gu=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var c=31-tt(a),d=1<<c;t|=e[c],a&=~d}return vi=t,et(),n}function s0(e,t){en=null,se.H=Ho,t===ao||t===Sl?(t=wd(),Nn=3):t===Xc?(t=wd(),Nn=4):Nn=t===Eu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ua=t,ln===null&&(nr=1,ql(e,Fr(t,e.current)))}function o0(){var e=la.current;return e===null?!0:(dn&4194048)===dn?Ca===null:(dn&62914560)===dn||(dn&536870912)!==0?e===Ca:!1}function l0(){var e=se.H;return se.H=Ho,e===null?Ho:e}function c0(){var e=se.A;return se.A=Ym,e}function Jl(){nr=4,Pi||(dn&4194048)!==dn&&la.current!==null||(ho=!0),(Qi&134217727)===0&&(Ds&134217727)===0||Kn===null||Xi(Kn,dn,fa,!1)}function Qu(e,t,n){var a=_n;_n|=2;var c=l0(),d=c0();(Kn!==e||dn!==t)&&(Pl=null,mo(e,t)),t=!1;var C=nr;e:do try{if(Nn!==0&&ln!==null){var N=ln,F=ua;switch(Nn){case 8:Pu(),C=6;break e;case 3:case 2:case 9:case 6:la.current===null&&(t=!0);var ue=Nn;if(Nn=0,ua=null,yo(e,N,F,ue),n&&ho){C=0;break e}break;default:ue=Nn,Nn=0,ua=null,yo(e,N,F,ue)}}Vm(),C=nr;break}catch(Te){s0(e,Te)}while(!0);return t&&e.shellSuspendCounter++,li=As=null,_n=a,se.H=c,se.A=d,ln===null&&(Kn=null,dn=0,et()),C}function Vm(){for(;ln!==null;)u0(ln)}function Fm(e,t){var n=_n;_n|=2;var a=l0(),c=c0();Kn!==e||dn!==t?(Pl=null,Hl=Un()+500,mo(e,t)):ho=cr(e,t);e:do try{if(Nn!==0&&ln!==null){t=ln;var d=ua;t:switch(Nn){case 1:Nn=0,ua=null,yo(e,t,d,1);break;case 2:case 9:if(bd(d)){Nn=0,ua=null,f0(t);break}t=function(){Nn!==2&&Nn!==9||Kn!==e||(Nn=7),Xa(e)},d.then(t,t);break e;case 3:Nn=7;break e;case 4:Nn=5;break e;case 7:bd(d)?(Nn=0,ua=null,f0(t)):(Nn=0,ua=null,yo(e,t,d,7));break;case 5:var C=null;switch(ln.tag){case 26:C=ln.memoizedState;case 5:case 27:var N=ln;if(C?Z0(C):N.stateNode.complete){Nn=0,ua=null;var F=N.sibling;if(F!==null)ln=F;else{var ue=N.return;ue!==null?(ln=ue,Zl(ue)):ln=null}break t}}Nn=0,ua=null,yo(e,t,d,5);break;case 6:Nn=0,ua=null,yo(e,t,d,6);break;case 8:Pu(),nr=6;break e;default:throw Error(s(462))}}Hm();break}catch(Te){s0(e,Te)}while(!0);return li=As=null,se.H=a,se.A=c,_n=n,ln!==null?0:(Kn=null,dn=0,et(),nr)}function Hm(){for(;ln!==null&&!Qr();)u0(ln)}function u0(e){var t=jh(e.alternate,e,vi);e.memoizedProps=e.pendingProps,t===null?Zl(e):ln=t}function f0(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=_h(n,t,t.pendingProps,t.type,void 0,dn);break;case 11:t=_h(n,t,t.pendingProps,t.type.render,t.ref,dn);break;case 5:cu(t);default:Ih(n,t),t=ln=Cs(t,vi),t=jh(n,t,vi)}e.memoizedProps=e.pendingProps,t===null?Zl(e):ln=t}function yo(e,t,n,a){li=As=null,cu(t),io=null,Uo=0;var c=t.return;try{if(jm(e,c,t,n,dn)){nr=1,ql(e,Fr(n,e.current)),ln=null;return}}catch(d){if(c!==null)throw ln=c,d;nr=1,ql(e,Fr(n,e.current)),ln=null;return}t.flags&32768?(vn||a===1?e=!0:ho||(dn&536870912)!==0?e=!1:(Pi=e=!0,(a===2||a===9||a===3||a===6)&&(a=la.current,a!==null&&a.tag===13&&(a.flags|=16384))),d0(t,e)):Zl(t)}function Zl(e){var t=e;do{if((t.flags&32768)!==0){d0(t,Pi);return}e=t.return;var n=qm(t.alternate,t,vi);if(n!==null){ln=n;return}if(t=t.sibling,t!==null){ln=t;return}ln=t=e}while(t!==null);nr===0&&(nr=5)}function d0(e,t){do{var n=Um(e.alternate,e);if(n!==null){n.flags&=32767,ln=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ln=e;return}ln=e=n}while(e!==null);nr=6,ln=null}function h0(e,t,n,a,c,d,C,N,F){e.cancelPendingCommit=null;do Xl();while(Cr!==0);if((_n&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(d=t.lanes|t.childLanes,d|=ke,Ar(e,n,d,C,N,F),e===Kn&&(ln=Kn=null,dn=0),go=t,Zi=e,xi=n,Vu=d,Fu=c,n0=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Zm(Jr,function(){return v0(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=se.T,se.T=null,c=Ye.p,Ye.p=2,C=_n,_n|=4;try{Lm(e,t,n)}finally{_n=C,Ye.p=c,se.T=a}}Cr=1,p0(),g0(),m0()}}function p0(){if(Cr===1){Cr=0;var e=Zi,t=go,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=se.T,se.T=null;var a=Ye.p;Ye.p=2;var c=_n;_n|=4;try{Qh(t,e);var d=of,C=E(e.containerInfo),N=d.focusedElem,F=d.selectionRange;if(C!==N&&N&&N.ownerDocument&&x(N.ownerDocument.documentElement,N)){if(F!==null&&k(N)){var ue=F.start,Te=F.end;if(Te===void 0&&(Te=ue),"selectionStart"in N)N.selectionStart=ue,N.selectionEnd=Math.min(Te,N.value.length);else{var je=N.ownerDocument||document,ge=je&&je.defaultView||window;if(ge.getSelection){var be=ge.getSelection(),bt=N.textContent.length,Ut=Math.min(F.start,bt),qn=F.end===void 0?Ut:Math.min(F.end,bt);!be.extend&&Ut>qn&&(C=qn,qn=Ut,Ut=C);var ie=p(N,Ut),Z=p(N,qn);if(ie&&Z&&(be.rangeCount!==1||be.anchorNode!==ie.node||be.anchorOffset!==ie.offset||be.focusNode!==Z.node||be.focusOffset!==Z.offset)){var ce=je.createRange();ce.setStart(ie.node,ie.offset),be.removeAllRanges(),Ut>qn?(be.addRange(ce),be.extend(Z.node,Z.offset)):(ce.setEnd(Z.node,Z.offset),be.addRange(ce))}}}}for(je=[],be=N;be=be.parentNode;)be.nodeType===1&&je.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<je.length;N++){var Be=je[N];Be.element.scrollLeft=Be.left,Be.element.scrollTop=Be.top}}cc=!!sf,of=sf=null}finally{_n=c,Ye.p=a,se.T=n}}e.current=t,Cr=2}}function g0(){if(Cr===2){Cr=0;var e=Zi,t=go,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=se.T,se.T=null;var a=Ye.p;Ye.p=2;var c=_n;_n|=4;try{Gh(e,t.alternate,t)}finally{_n=c,Ye.p=a,se.T=n}}Cr=3}}function m0(){if(Cr===4||Cr===3){Cr=0,wr();var e=Zi,t=go,n=xi,a=n0;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Cr=5:(Cr=0,go=Zi=null,y0(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ji=null),B(n),t=t.stateNode,Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(sr,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=se.T,c=Ye.p,Ye.p=2,se.T=null;try{for(var d=e.onRecoverableError,C=0;C<a.length;C++){var N=a[C];d(N.value,{componentStack:N.stack})}}finally{se.T=t,Ye.p=c}}(xi&3)!==0&&Xl(),Xa(e),c=e.pendingLanes,(n&261930)!==0&&(c&42)!==0?e===Hu?tl++:(tl=0,Hu=e):tl=0,nl(0)}}function y0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Io(t)))}function Xl(){return p0(),g0(),m0(),v0()}function v0(){if(Cr!==5)return!1;var e=Zi,t=Vu;Vu=0;var n=B(xi),a=se.T,c=Ye.p;try{Ye.p=32>n?32:n,se.T=null,n=Fu,Fu=null;var d=Zi,C=xi;if(Cr=0,go=Zi=null,xi=0,(_n&6)!==0)throw Error(s(331));var N=_n;if(_n|=4,$h(d.current),Zh(d,d.current,C,n),_n=N,nl(0,!1),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(sr,d)}catch{}return!0}finally{Ye.p=c,se.T=a,y0(e,t)}}function x0(e,t,n){t=Fr(n,t),t=Au(e.stateNode,t,2),e=Gi(e,t,2),e!==null&&(_r(e,2),Xa(e))}function Dn(e,t,n){if(e.tag===3)x0(e,e,n);else for(;t!==null;){if(t.tag===3){x0(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ji===null||!Ji.has(a))){e=Fr(n,e),n=bh(2),a=Gi(t,n,2),a!==null&&(Ch(n,a,t,e),_r(a,2),Xa(a));break}}t=t.return}}function Ju(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new Km;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(n)||(Yu=!0,c.add(n),e=Pm.bind(null,e,t,n),t.then(e,e))}function Pm(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Kn===e&&(dn&n)===n&&(nr===4||nr===3&&(dn&62914560)===dn&&300>Un()-Fl?(_n&2)===0&&mo(e,0):Ku|=n,po===dn&&(po=0)),Xa(e)}function b0(e,t){t===0&&(t=Xr()),e=Rt(e,t),e!==null&&(_r(e,t),Xa(e))}function Qm(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),b0(e,n)}function Jm(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(t),b0(e,n)}function Zm(e,t){return nn(e,t)}var Wl=null,vo=null,Zu=!1,$l=!1,Xu=!1,Wi=0;function Xa(e){e!==vo&&e.next===null&&(vo===null?Wl=vo=e:vo=vo.next=e),$l=!0,Zu||(Zu=!0,Wm())}function nl(e,t){if(!Xu&&$l){Xu=!0;do for(var n=!1,a=Wl;a!==null;){if(e!==0){var c=a.pendingLanes;if(c===0)var d=0;else{var C=a.suspendedLanes,N=a.pingedLanes;d=(1<<31-tt(42|e)+1)-1,d&=c&~(C&~N),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(n=!0,A0(a,d))}else d=dn,d=xr(a,a===Kn?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(d&3)===0||cr(a,d)||(n=!0,A0(a,d));a=a.next}while(n);Xu=!1}}function Xm(){C0()}function C0(){$l=Zu=!1;var e=0;Wi!==0&&ly()&&(e=Wi);for(var t=Un(),n=null,a=Wl;a!==null;){var c=a.next,d=w0(a,t);d===0?(a.next=null,n===null?Wl=c:n.next=c,c===null&&(vo=n)):(n=a,(e!==0||(d&3)!==0)&&($l=!0)),a=c}Cr!==0&&Cr!==5||nl(e),Wi!==0&&(Wi=0)}function w0(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var C=31-tt(d),N=1<<C,F=c[C];F===-1?((N&n)===0||(N&a)!==0)&&(c[C]=Gn(N,t)):F<=t&&(e.expiredLanes|=N),d&=~N}if(t=Kn,n=dn,n=xr(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(Nn===2||Nn===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&xn(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||cr(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&xn(a),B(n)){case 2:case 8:n=Sr;break;case 32:n=Jr;break;case 268435456:n=Ua;break;default:n=Jr}return a=S0.bind(null,e),n=nn(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&xn(a),e.callbackPriority=2,e.callbackNode=null,2}function S0(e,t){if(Cr!==0&&Cr!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Xl()&&e.callbackNode!==n)return null;var a=dn;return a=xr(e,e===Kn?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(a0(e,a,t),w0(e,Un()),e.callbackNode!=null&&e.callbackNode===n?S0.bind(null,e):null)}function A0(e,t){if(Xl())return null;a0(e,t,!0)}function Wm(){uy(function(){(_n&6)!==0?nn(yr,Xm):C0()})}function Wu(){if(Wi===0){var e=no;e===0&&(e=$e,$e<<=1,($e&261888)===0&&($e=256)),Wi=e}return Wi}function E0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:oa(""+e)}function T0(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function $m(e,t,n,a,c){if(t==="submit"&&n&&n.stateNode===c){var d=E0((c[we]||null).action),C=a.submitter;C&&(t=(t=C[we]||null)?E0(t.formAction):C.getAttribute("formAction"),t!==null&&(d=t,C=null));var N=new Ai("action","action",null,a,c);e.push({event:N,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Wi!==0){var F=C?T0(c,C):new FormData(c);vu(n,{pending:!0,data:F,method:c.method,action:d},null,F)}}else typeof d=="function"&&(N.preventDefault(),F=C?T0(c,C):new FormData(c),vu(n,{pending:!0,data:F,method:c.method,action:d},d,F))},currentTarget:c}]})}}for(var $u=0;$u<q.length;$u++){var ef=q[$u],ey=ef.toLowerCase(),ty=ef[0].toUpperCase()+ef.slice(1);L(ey,"on"+ty)}L(oe,"onAnimationEnd"),L(de,"onAnimationIteration"),L(Se,"onAnimationStart"),L("dblclick","onDoubleClick"),L("focusin","onFocus"),L("focusout","onBlur"),L(Ne,"onTransitionRun"),L(v,"onTransitionStart"),L(y,"onTransitionCancel"),L(T,"onTransitionEnd"),ut("onMouseEnter",["mouseout","mouseover"]),ut("onMouseLeave",["mouseout","mouseover"]),ut("onPointerEnter",["pointerout","pointerover"]),ut("onPointerLeave",["pointerout","pointerover"]),nt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nt("onBeforeInput",["compositionend","keypress","textInput","paste"]),nt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ny=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rl));function M0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],c=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var C=a.length-1;0<=C;C--){var N=a[C],F=N.instance,ue=N.currentTarget;if(N=N.listener,F!==d&&c.isPropagationStopped())break e;d=N,c.currentTarget=ue;try{d(c)}catch(Te){G(Te)}c.currentTarget=null,d=F}else for(C=0;C<a.length;C++){if(N=a[C],F=N.instance,ue=N.currentTarget,N=N.listener,F!==d&&c.isPropagationStopped())break e;d=N,c.currentTarget=ue;try{d(c)}catch(Te){G(Te)}c.currentTarget=null,d=F}}}}function cn(e,t){var n=t[ht];n===void 0&&(n=t[ht]=new Set);var a=e+"__bubble";n.has(a)||(_0(t,e,2,!1),n.add(a))}function tf(e,t,n){var a=0;t&&(a|=4),_0(n,e,a,t)}var ec="_reactListening"+Math.random().toString(36).slice(2);function nf(e){if(!e[ec]){e[ec]=!0,ct.forEach(function(n){n!=="selectionchange"&&(ny.has(n)||tf(n,!1,e),tf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ec]||(t[ec]=!0,tf("selectionchange",!1,t))}}function _0(e,t,n,a){switch(rp(t)){case 2:var c=By;break;case 8:c=Ry;break;default:c=vf}n=c.bind(null,t,n,e),c=void 0,!wi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function rf(e,t,n,a,c){var d=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var C=a.tag;if(C===3||C===4){var N=a.stateNode.containerInfo;if(N===c)break;if(C===4)for(C=a.return;C!==null;){var F=C.tag;if((F===3||F===4)&&C.stateNode.containerInfo===c)return;C=C.return}for(;N!==null;){if(C=Dt(N),C===null)return;if(F=C.tag,F===5||F===6||F===26||F===27){a=d=C;continue e}N=N.parentNode}}a=a.return}La(function(){var ue=d,Te=Ci(n),je=[];e:{var ge=D.get(e);if(ge!==void 0){var be=Ai,bt=e;switch(e){case"keypress":if(Ya(n)===0)break e;case"keydown":case"keyup":be=Bi;break;case"focusin":bt="focus",be=Ka;break;case"focusout":bt="blur",be=Ka;break;case"beforeblur":case"afterblur":be=Ka;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=Mi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=us;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=gs;break;case oe:case de:case Se:be=Ys;break;case T:be=ms;break;case"scroll":case"scrollend":be=Ei;break;case"wheel":be=Ni;break;case"copy":case"cut":case"paste":be=Ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=ps;break;case"toggle":case"beforetoggle":be=Gs}var Ut=(t&4)!==0,qn=!Ut&&(e==="scroll"||e==="scrollend"),ie=Ut?ge!==null?ge+"Capture":null:ge;Ut=[];for(var Z=ue,ce;Z!==null;){var Be=Z;if(ce=Be.stateNode,Be=Be.tag,Be!==5&&Be!==26&&Be!==27||ce===null||ie===null||(Be=Ma(Z,ie),Be!=null&&Ut.push(al(Z,Be,ce))),qn)break;Z=Z.return}0<Ut.length&&(ge=new be(ge,bt,null,n,Te),je.push({event:ge,listeners:Ut}))}}if((t&7)===0){e:{if(ge=e==="mouseover"||e==="pointerover",be=e==="mouseout"||e==="pointerout",ge&&n!==Wr&&(bt=n.relatedTarget||n.fromElement)&&(Dt(bt)||bt[ze]))break e;if((be||ge)&&(ge=Te.window===Te?Te:(ge=Te.ownerDocument)?ge.defaultView||ge.parentWindow:window,be?(bt=n.relatedTarget||n.toElement,be=ue,bt=bt?Dt(bt):null,bt!==null&&(qn=g(bt),Ut=bt.tag,bt!==qn||Ut!==5&&Ut!==27&&Ut!==6)&&(bt=null)):(be=null,bt=ue),be!==bt)){if(Ut=Mi,Be="onMouseLeave",ie="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(Ut=ps,Be="onPointerLeave",ie="onPointerEnter",Z="pointer"),qn=be==null?ge:wt(be),ce=bt==null?ge:wt(bt),ge=new Ut(Be,Z+"leave",be,n,Te),ge.target=qn,ge.relatedTarget=ce,Be=null,Dt(Te)===ue&&(Ut=new Ut(ie,Z+"enter",bt,n,Te),Ut.target=ce,Ut.relatedTarget=qn,Be=Ut),qn=Be,be&&bt)t:{for(Ut=ry,ie=be,Z=bt,ce=0,Be=ie;Be;Be=Ut(Be))ce++;Be=0;for(var Ot=Z;Ot;Ot=Ut(Ot))Be++;for(;0<ce-Be;)ie=Ut(ie),ce--;for(;0<Be-ce;)Z=Ut(Z),Be--;for(;ce--;){if(ie===Z||Z!==null&&ie===Z.alternate){Ut=ie;break t}ie=Ut(ie),Z=Ut(Z)}Ut=null}else Ut=null;be!==null&&k0(je,ge,be,Ut,!1),bt!==null&&qn!==null&&k0(je,qn,bt,Ut,!0)}}e:{if(ge=ue?wt(ue):window,be=ge.nodeName&&ge.nodeName.toLowerCase(),be==="select"||be==="input"&&ge.type==="file")var Sn=si;else if(Di(ge))if(ea)Sn=Ha;else{Sn=ja;var kt=Js}else be=ge.nodeName,!be||be.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?ue&&Vn(ue.elementType)&&(Sn=si):Sn=bs;if(Sn&&(Sn=Sn(e,ue))){xs(je,Sn,n,Te);break e}kt&&kt(e,ge,ue),e==="focusout"&&ue&&ge.type==="number"&&ue.memoizedProps.value!=null&&Jt(ge,"number",ge.value)}switch(kt=ue?wt(ue):window,e){case"focusin":(Di(kt)||kt.contentEditable==="true")&&(Y=kt,P=ue,Q=null);break;case"focusout":Q=P=Y=null;break;case"mousedown":ne=!0;break;case"contextmenu":case"mouseup":case"dragend":ne=!1,V(je,n,Te);break;case"selectionchange":if(U)break;case"keydown":case"keyup":V(je,n,Te)}var rn;if(ri)e:{switch(e){case"compositionstart":var hn="onCompositionStart";break e;case"compositionend":hn="onCompositionEnd";break e;case"compositionupdate":hn="onCompositionUpdate";break e}hn=void 0}else Da?$t(e,n)&&(hn="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(hn="onCompositionStart");hn&&($r&&n.locale!=="ko"&&(Da||hn!=="onCompositionStart"?hn==="onCompositionEnd"&&Da&&(rn=_a()):(Vr=Te,Si="value"in Vr?Vr.value:Vr.textContent,Da=!0)),kt=tc(ue,hn),0<kt.length&&(hn=new ki(hn,e,null,n,Te),je.push({event:hn,listeners:kt}),rn?hn.data=rn:(rn=Fs(n),rn!==null&&(hn.data=rn)))),(rn=Bo?Hs(e,n):Ro(e,n))&&(hn=tc(ue,"onBeforeInput"),0<hn.length&&(kt=new ki("onBeforeInput","beforeinput",null,n,Te),je.push({event:kt,listeners:hn}),kt.data=rn)),$m(je,e,ue,n,Te)}M0(je,t)})}function al(e,t,n){return{instance:e,listener:t,currentTarget:n}}function tc(e,t){for(var n=t+"Capture",a=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=Ma(e,n),c!=null&&a.unshift(al(e,c,d)),c=Ma(e,t),c!=null&&a.push(al(e,c,d))),e.tag===3)return a;e=e.return}return[]}function ry(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function k0(e,t,n,a,c){for(var d=t._reactName,C=[];n!==null&&n!==a;){var N=n,F=N.alternate,ue=N.stateNode;if(N=N.tag,F!==null&&F===a)break;N!==5&&N!==26&&N!==27||ue===null||(F=ue,c?(ue=Ma(n,d),ue!=null&&C.unshift(al(n,ue,F))):c||(ue=Ma(n,d),ue!=null&&C.push(al(n,ue,F)))),n=n.return}C.length!==0&&e.push({event:t,listeners:C})}var ay=/\r\n?/g,iy=/\u0000|\uFFFD/g;function B0(e){return(typeof e=="string"?e:""+e).replace(ay,`
`).replace(iy,"")}function R0(e,t){return t=B0(t),B0(e)===t}function In(e,t,n,a,c,d){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||pn(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&pn(e,""+a);break;case"className":Ee(e,"class",a);break;case"tabIndex":Ee(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Ee(e,n,a);break;case"style":bn(e,a,d);break;case"data":if(t!=="object"){Ee(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=oa(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(n==="formAction"?(t!=="input"&&In(e,t,"name",c.name,c,null),In(e,t,"formEncType",c.formEncType,c,null),In(e,t,"formMethod",c.formMethod,c,null),In(e,t,"formTarget",c.formTarget,c,null)):(In(e,t,"encType",c.encType,c,null),In(e,t,"method",c.method,c,null),In(e,t,"target",c.target,c,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=oa(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Or);break;case"onScroll":a!=null&&cn("scroll",e);break;case"onScrollEnd":a!=null&&cn("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=oa(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":cn("beforetoggle",e),cn("toggle",e),ve(e,"popover",a);break;case"xlinkActuate":Ae(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Ae(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Ae(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Ae(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Ae(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Ae(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Ae(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Ae(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Ae(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":ve(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Bn.get(n)||n,ve(e,n,a))}}function af(e,t,n,a,c,d){switch(n){case"style":bn(e,a,d);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"children":typeof a=="string"?pn(e,a):(typeof a=="number"||typeof a=="bigint")&&pn(e,""+a);break;case"onScroll":a!=null&&cn("scroll",e);break;case"onScrollEnd":a!=null&&cn("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Or);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vt.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(c=n.endsWith("Capture"),t=n.slice(2,c?n.length-7:void 0),d=e[we]||null,d=d!=null?d[n]:null,typeof d=="function"&&e.removeEventListener(t,d,c),typeof a=="function")){typeof d!="function"&&d!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,c);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):ve(e,n,a)}}}function Dr(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":cn("error",e),cn("load",e);var a=!1,c=!1,d;for(d in n)if(n.hasOwnProperty(d)){var C=n[d];if(C!=null)switch(d){case"src":a=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:In(e,t,d,C,n,null)}}c&&In(e,t,"srcSet",n.srcSet,n,null),a&&In(e,t,"src",n.src,n,null);return;case"input":cn("invalid",e);var N=d=C=c=null,F=null,ue=null;for(a in n)if(n.hasOwnProperty(a)){var Te=n[a];if(Te!=null)switch(a){case"name":c=Te;break;case"type":C=Te;break;case"checked":F=Te;break;case"defaultChecked":ue=Te;break;case"value":d=Te;break;case"defaultValue":N=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(s(137,t));break;default:In(e,t,a,Te,n,null)}}Gt(e,d,N,F,ue,C,c,!1);return;case"select":cn("invalid",e),a=C=d=null;for(c in n)if(n.hasOwnProperty(c)&&(N=n[c],N!=null))switch(c){case"value":d=N;break;case"defaultValue":C=N;break;case"multiple":a=N;default:In(e,t,c,N,n,null)}t=d,n=C,e.multiple=!!a,t!=null?Ht(e,!!a,t,!1):n!=null&&Ht(e,!!a,n,!0);return;case"textarea":cn("invalid",e),d=c=a=null;for(C in n)if(n.hasOwnProperty(C)&&(N=n[C],N!=null))switch(C){case"value":a=N;break;case"defaultValue":c=N;break;case"children":d=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(s(91));break;default:In(e,t,C,N,n,null)}on(e,a,c,d);return;case"option":for(F in n)if(n.hasOwnProperty(F)&&(a=n[F],a!=null))switch(F){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:In(e,t,F,a,n,null)}return;case"dialog":cn("beforetoggle",e),cn("toggle",e),cn("cancel",e),cn("close",e);break;case"iframe":case"object":cn("load",e);break;case"video":case"audio":for(a=0;a<rl.length;a++)cn(rl[a],e);break;case"image":cn("error",e),cn("load",e);break;case"details":cn("toggle",e);break;case"embed":case"source":case"link":cn("error",e),cn("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in n)if(n.hasOwnProperty(ue)&&(a=n[ue],a!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:In(e,t,ue,a,n,null)}return;default:if(Vn(t)){for(Te in n)n.hasOwnProperty(Te)&&(a=n[Te],a!==void 0&&af(e,t,Te,a,n,void 0));return}}for(N in n)n.hasOwnProperty(N)&&(a=n[N],a!=null&&In(e,t,N,a,n,null))}function sy(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,C=null,N=null,F=null,ue=null,Te=null;for(be in n){var je=n[be];if(n.hasOwnProperty(be)&&je!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":F=je;default:a.hasOwnProperty(be)||In(e,t,be,null,a,je)}}for(var ge in a){var be=a[ge];if(je=n[ge],a.hasOwnProperty(ge)&&(be!=null||je!=null))switch(ge){case"type":d=be;break;case"name":c=be;break;case"checked":ue=be;break;case"defaultChecked":Te=be;break;case"value":C=be;break;case"defaultValue":N=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(s(137,t));break;default:be!==je&&In(e,t,ge,be,a,je)}}Kt(e,C,N,F,ue,Te,d,c);return;case"select":be=C=N=ge=null;for(d in n)if(F=n[d],n.hasOwnProperty(d)&&F!=null)switch(d){case"value":break;case"multiple":be=F;default:a.hasOwnProperty(d)||In(e,t,d,null,a,F)}for(c in a)if(d=a[c],F=n[c],a.hasOwnProperty(c)&&(d!=null||F!=null))switch(c){case"value":ge=d;break;case"defaultValue":N=d;break;case"multiple":C=d;default:d!==F&&In(e,t,c,d,a,F)}t=N,n=C,a=be,ge!=null?Ht(e,!!n,ge,!1):!!a!=!!n&&(t!=null?Ht(e,!!n,t,!0):Ht(e,!!n,n?[]:"",!1));return;case"textarea":be=ge=null;for(N in n)if(c=n[N],n.hasOwnProperty(N)&&c!=null&&!a.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:In(e,t,N,null,a,c)}for(C in a)if(c=a[C],d=n[C],a.hasOwnProperty(C)&&(c!=null||d!=null))switch(C){case"value":ge=c;break;case"defaultValue":be=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(s(91));break;default:c!==d&&In(e,t,C,c,a,d)}Mn(e,ge,be);return;case"option":for(var bt in n)if(ge=n[bt],n.hasOwnProperty(bt)&&ge!=null&&!a.hasOwnProperty(bt))switch(bt){case"selected":e.selected=!1;break;default:In(e,t,bt,null,a,ge)}for(F in a)if(ge=a[F],be=n[F],a.hasOwnProperty(F)&&ge!==be&&(ge!=null||be!=null))switch(F){case"selected":e.selected=ge&&typeof ge!="function"&&typeof ge!="symbol";break;default:In(e,t,F,ge,a,be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ut in n)ge=n[Ut],n.hasOwnProperty(Ut)&&ge!=null&&!a.hasOwnProperty(Ut)&&In(e,t,Ut,null,a,ge);for(ue in a)if(ge=a[ue],be=n[ue],a.hasOwnProperty(ue)&&ge!==be&&(ge!=null||be!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(s(137,t));break;default:In(e,t,ue,ge,a,be)}return;default:if(Vn(t)){for(var qn in n)ge=n[qn],n.hasOwnProperty(qn)&&ge!==void 0&&!a.hasOwnProperty(qn)&&af(e,t,qn,void 0,a,ge);for(Te in a)ge=a[Te],be=n[Te],!a.hasOwnProperty(Te)||ge===be||ge===void 0&&be===void 0||af(e,t,Te,ge,a,be);return}}for(var ie in n)ge=n[ie],n.hasOwnProperty(ie)&&ge!=null&&!a.hasOwnProperty(ie)&&In(e,t,ie,null,a,ge);for(je in a)ge=a[je],be=n[je],!a.hasOwnProperty(je)||ge===be||ge==null&&be==null||In(e,t,je,ge,a,be)}function N0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var c=n[a],d=c.transferSize,C=c.initiatorType,N=c.duration;if(d&&N&&N0(C)){for(C=0,N=c.responseEnd,a+=1;a<n.length;a++){var F=n[a],ue=F.startTime;if(ue>N)break;var Te=F.transferSize,je=F.initiatorType;Te&&N0(je)&&(F=F.responseEnd,C+=Te*(F<N?1:(N-ue)/(F-ue)))}if(--a,t+=8*(d+C)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var sf=null,of=null;function nc(e){return e.nodeType===9?e:e.ownerDocument}function D0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function j0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function lf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cf=null;function ly(){var e=window.event;return e&&e.type==="popstate"?e===cf?!1:(cf=e,!0):(cf=null,!1)}var O0=typeof setTimeout=="function"?setTimeout:void 0,cy=typeof clearTimeout=="function"?clearTimeout:void 0,I0=typeof Promise=="function"?Promise:void 0,uy=typeof queueMicrotask=="function"?queueMicrotask:typeof I0<"u"?function(e){return I0.resolve(null).then(e).catch(fy)}:O0;function fy(e){setTimeout(function(){throw e})}function $i(e){return e==="head"}function q0(e,t){var n=t,a=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(c),wo(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")il(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,il(n);for(var d=n.firstChild;d;){var C=d.nextSibling,N=d.nodeName;d[At]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&d.rel.toLowerCase()==="stylesheet"||n.removeChild(d),d=C}}else n==="body"&&il(e.ownerDocument.body);n=c}while(n);wo(t)}function U0(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function uf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":uf(n),Nt(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function dy(e,t,n,a){for(;e.nodeType===1;){var c=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[At])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=wa(e.nextSibling),e===null)break}return null}function hy(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=wa(e.nextSibling),e===null))return null;return e}function L0(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=wa(e.nextSibling),e===null))return null;return e}function ff(e){return e.data==="$?"||e.data==="$~"}function df(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function py(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function wa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var hf=null;function z0(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return wa(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Y0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function K0(e,t,n){switch(t=nc(n),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function il(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Nt(e)}var Sa=new Map,G0=new Set;function rc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var bi=Ye.d;Ye.d={f:gy,r:my,D:yy,C:vy,L:xy,m:by,X:wy,S:Cy,M:Sy};function gy(){var e=bi.f(),t=Ql();return e||t}function my(e){var t=pt(e);t!==null&&t.tag===5&&t.type==="form"?sh(t):bi.r(e)}var xo=typeof document>"u"?null:document;function V0(e,t,n){var a=xo;if(a&&typeof t=="string"&&t){var c=jt(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof n=="string"&&(c+='[crossorigin="'+n+'"]'),G0.has(c)||(G0.add(c),e={rel:e,crossOrigin:n,href:t},a.querySelector(c)===null&&(t=a.createElement("link"),Dr(t,"link",e),yt(t),a.head.appendChild(t)))}}function yy(e){bi.D(e),V0("dns-prefetch",e,null)}function vy(e,t){bi.C(e,t),V0("preconnect",e,t)}function xy(e,t,n){bi.L(e,t,n);var a=xo;if(a&&e&&t){var c='link[rel="preload"][as="'+jt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(c+='[imagesrcset="'+jt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(c+='[imagesizes="'+jt(n.imageSizes)+'"]')):c+='[href="'+jt(e)+'"]';var d=c;switch(t){case"style":d=bo(e);break;case"script":d=Co(e)}Sa.has(d)||(e=j({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Sa.set(d,e),a.querySelector(c)!==null||t==="style"&&a.querySelector(sl(d))||t==="script"&&a.querySelector(ol(d))||(t=a.createElement("link"),Dr(t,"link",e),yt(t),a.head.appendChild(t)))}}function by(e,t){bi.m(e,t);var n=xo;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+jt(a)+'"][href="'+jt(e)+'"]',d=c;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Co(e)}if(!Sa.has(d)&&(e=j({rel:"modulepreload",href:e},t),Sa.set(d,e),n.querySelector(c)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ol(d)))return}a=n.createElement("link"),Dr(a,"link",e),yt(a),n.head.appendChild(a)}}}function Cy(e,t,n){bi.S(e,t,n);var a=xo;if(a&&e){var c=xt(a).hoistableStyles,d=bo(e);t=t||"default";var C=c.get(d);if(!C){var N={loading:0,preload:null};if(C=a.querySelector(sl(d)))N.loading=5;else{e=j({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sa.get(d))&&pf(e,n);var F=C=a.createElement("link");yt(F),Dr(F,"link",e),F._p=new Promise(function(ue,Te){F.onload=ue,F.onerror=Te}),F.addEventListener("load",function(){N.loading|=1}),F.addEventListener("error",function(){N.loading|=2}),N.loading|=4,ac(C,t,a)}C={type:"stylesheet",instance:C,count:1,state:N},c.set(d,C)}}}function wy(e,t){bi.X(e,t);var n=xo;if(n&&e){var a=xt(n).hoistableScripts,c=Co(e),d=a.get(c);d||(d=n.querySelector(ol(c)),d||(e=j({src:e,async:!0},t),(t=Sa.get(c))&&gf(e,t),d=n.createElement("script"),yt(d),Dr(d,"link",e),n.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},a.set(c,d))}}function Sy(e,t){bi.M(e,t);var n=xo;if(n&&e){var a=xt(n).hoistableScripts,c=Co(e),d=a.get(c);d||(d=n.querySelector(ol(c)),d||(e=j({src:e,async:!0,type:"module"},t),(t=Sa.get(c))&&gf(e,t),d=n.createElement("script"),yt(d),Dr(d,"link",e),n.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},a.set(c,d))}}function F0(e,t,n,a){var c=(c=rt.current)?rc(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=bo(n.href),n=xt(c).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=bo(n.href);var d=xt(c).hoistableStyles,C=d.get(e);if(C||(c=c.ownerDocument||c,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,C),(d=c.querySelector(sl(e)))&&!d._p&&(C.instance=d,C.state.loading=5),Sa.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sa.set(e,n),d||Ay(c,e,n,C.state))),t&&a===null)throw Error(s(528,""));return C}if(t&&a!==null)throw Error(s(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Co(n),n=xt(c).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function bo(e){return'href="'+jt(e)+'"'}function sl(e){return'link[rel="stylesheet"]['+e+"]"}function H0(e){return j({},e,{"data-precedence":e.precedence,precedence:null})}function Ay(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),Dr(t,"link",n),yt(t),e.head.appendChild(t))}function Co(e){return'[src="'+jt(e)+'"]'}function ol(e){return"script[async]"+e}function P0(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+jt(n.href)+'"]');if(a)return t.instance=a,yt(a),a;var c=j({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),yt(a),Dr(a,"style",c),ac(a,n.precedence,e),t.instance=a;case"stylesheet":c=bo(n.href);var d=e.querySelector(sl(c));if(d)return t.state.loading|=4,t.instance=d,yt(d),d;a=H0(n),(c=Sa.get(c))&&pf(a,c),d=(e.ownerDocument||e).createElement("link"),yt(d);var C=d;return C._p=new Promise(function(N,F){C.onload=N,C.onerror=F}),Dr(d,"link",a),t.state.loading|=4,ac(d,n.precedence,e),t.instance=d;case"script":return d=Co(n.src),(c=e.querySelector(ol(d)))?(t.instance=c,yt(c),c):(a=n,(c=Sa.get(d))&&(a=j({},n),gf(a,c)),e=e.ownerDocument||e,c=e.createElement("script"),yt(c),Dr(c,"link",a),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,ac(a,n.precedence,e));return t.instance}function ac(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=a.length?a[a.length-1]:null,d=c,C=0;C<a.length;C++){var N=a[C];if(N.dataset.precedence===t)d=N;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function pf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function gf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ic=null;function Q0(e,t,n){if(ic===null){var a=new Map,c=ic=new Map;c.set(n,a)}else c=ic,a=c.get(n),a||(a=new Map,c.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),c=0;c<n.length;c++){var d=n[c];if(!(d[At]||d[W]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var C=d.getAttribute(t)||"";C=e+C;var N=a.get(C);N?N.push(d):a.set(C,[d])}}return a}function J0(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Ey(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Z0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ty(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=bo(a.href),d=t.querySelector(sl(c));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=sc.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=d,yt(d);return}d=t.ownerDocument||t,a=H0(a),(c=Sa.get(c))&&pf(a,c),d=d.createElement("link"),yt(d);var C=d;C._p=new Promise(function(N,F){C.onload=N,C.onerror=F}),Dr(d,"link",a),n.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=sc.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var mf=0;function My(e,t){return e.stylesheets&&e.count===0&&lc(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&lc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&mf===0&&(mf=62500*oy());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&lc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>mf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(c)}}:null}function sc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)lc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var oc=null;function lc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,oc=new Map,t.forEach(_y,e),oc=null,sc.call(e))}function _y(e,t){if(!(t.state.loading&4)){var n=oc.get(e);if(n)var a=n.get(null);else{n=new Map,oc.set(e,n);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var C=c[d];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(n.set(C.dataset.precedence,C),a=C)}a&&n.set(null,a)}c=t.instance,C=c.getAttribute("data-precedence"),d=n.get(C)||a,d===a&&n.set(null,c),n.set(C,c),this.count++,a=sc.bind(this),c.addEventListener("load",a),c.addEventListener("error",a),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var ll={$$typeof:He,Provider:null,Consumer:null,_currentValue:Ie,_currentValue2:Ie,_threadCount:0};function ky(e,t,n,a,c,d,C,N,F){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zt(0),this.hiddenUpdates=Zt(null),this.identifierPrefix=a,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function X0(e,t,n,a,c,d,C,N,F,ue,Te,je){return e=new ky(e,t,n,C,F,ue,Te,je,N),t=1,d===!0&&(t|=24),d=Xn(3,null,null,t),e.current=d,d.stateNode=e,t=Qc(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:a,isDehydrated:n,cache:t},Wc(d),e}function W0(e){return e?(e=yn,e):yn}function $0(e,t,n,a,c,d){c=W0(c),a.context===null?a.context=c:a.pendingContext=c,a=Ki(t),a.payload={element:n},d=d===void 0?null:d,d!==null&&(a.callback=d),n=Gi(e,a,t),n!==null&&(ia(n,e,t),zo(n,e,t))}function ep(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function yf(e,t){ep(e,t),(e=e.alternate)&&ep(e,t)}function tp(e){if(e.tag===13||e.tag===31){var t=Rt(e,67108864);t!==null&&ia(t,e,67108864),yf(e,67108864)}}function np(e){if(e.tag===13||e.tag===31){var t=da();t=R(t);var n=Rt(e,t);n!==null&&ia(n,e,t),yf(e,t)}}var cc=!0;function By(e,t,n,a){var c=se.T;se.T=null;var d=Ye.p;try{Ye.p=2,vf(e,t,n,a)}finally{Ye.p=d,se.T=c}}function Ry(e,t,n,a){var c=se.T;se.T=null;var d=Ye.p;try{Ye.p=8,vf(e,t,n,a)}finally{Ye.p=d,se.T=c}}function vf(e,t,n,a){if(cc){var c=xf(a);if(c===null)rf(e,t,a,uc,n),ap(e,a);else if(Dy(c,e,t,n,a))a.stopPropagation();else if(ap(e,a),t&4&&-1<Ny.indexOf(e)){for(;c!==null;){var d=pt(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var C=Kr(d.pendingLanes);if(C!==0){var N=d;for(N.pendingLanes|=2,N.entangledLanes|=2;C;){var F=1<<31-tt(C);N.entanglements[1]|=F,C&=~F}Xa(d),(_n&6)===0&&(Hl=Un()+500,nl(0))}}break;case 31:case 13:N=Rt(d,2),N!==null&&ia(N,d,2),Ql(),yf(d,2)}if(d=xf(a),d===null&&rf(e,t,a,uc,n),d===c)break;c=d}c!==null&&a.stopPropagation()}else rf(e,t,a,null,n)}}function xf(e){return e=Ci(e),bf(e)}var uc=null;function bf(e){if(uc=null,e=Dt(e),e!==null){var t=g(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=A(t),e!==null)return e;e=null}else if(n===31){if(e=M(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return uc=e,null}function rp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zr()){case yr:return 2;case Sr:return 8;case Jr:case ha:return 32;case Ua:return 268435456;default:return 32}default:return 32}}var Cf=!1,es=null,ts=null,ns=null,cl=new Map,ul=new Map,rs=[],Ny="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ap(e,t){switch(e){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":cl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ul.delete(t.pointerId)}}function fl(e,t,n,a,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:d,targetContainers:[c]},t!==null&&(t=pt(t),t!==null&&tp(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Dy(e,t,n,a,c){switch(t){case"focusin":return es=fl(es,e,t,n,a,c),!0;case"dragenter":return ts=fl(ts,e,t,n,a,c),!0;case"mouseover":return ns=fl(ns,e,t,n,a,c),!0;case"pointerover":var d=c.pointerId;return cl.set(d,fl(cl.get(d)||null,e,t,n,a,c)),!0;case"gotpointercapture":return d=c.pointerId,ul.set(d,fl(ul.get(d)||null,e,t,n,a,c)),!0}return!1}function ip(e){var t=Dt(e.target);if(t!==null){var n=g(t);if(n!==null){if(t=n.tag,t===13){if(t=A(n),t!==null){e.blockedOn=t,O(e.priority,function(){np(n)});return}}else if(t===31){if(t=M(n),t!==null){e.blockedOn=t,O(e.priority,function(){np(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=xf(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Wr=a,n.target.dispatchEvent(a),Wr=null}else return t=pt(n),t!==null&&tp(t),e.blockedOn=n,!1;t.shift()}return!0}function sp(e,t,n){fc(e)&&n.delete(t)}function jy(){Cf=!1,es!==null&&fc(es)&&(es=null),ts!==null&&fc(ts)&&(ts=null),ns!==null&&fc(ns)&&(ns=null),cl.forEach(sp),ul.forEach(sp)}function dc(e,t){e.blockedOn===t&&(e.blockedOn=null,Cf||(Cf=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,jy)))}var hc=null;function op(e){hc!==e&&(hc=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){hc===e&&(hc=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],c=e[t+2];if(typeof a!="function"){if(bf(a||n)===null)continue;break}var d=pt(n);d!==null&&(e.splice(t,3),t-=3,vu(d,{pending:!0,data:c,method:n.method,action:a},a,c))}}))}function wo(e){function t(F){return dc(F,e)}es!==null&&dc(es,e),ts!==null&&dc(ts,e),ns!==null&&dc(ns,e),cl.forEach(t),ul.forEach(t);for(var n=0;n<rs.length;n++){var a=rs[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<rs.length&&(n=rs[0],n.blockedOn===null);)ip(n),n.blockedOn===null&&rs.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var c=n[a],d=n[a+1],C=c[we]||null;if(typeof d=="function")C||op(n);else if(C){var N=null;if(d&&d.hasAttribute("formAction")){if(c=d,C=d[we]||null)N=C.formAction;else if(bf(c)!==null)continue}else N=C.action;typeof N=="function"?n[a+1]=N:(n.splice(a,3),a-=3),op(n)}}}function lp(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(C){return c=C})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function wf(e){this._internalRoot=e}pc.prototype.render=wf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var n=t.current,a=da();$0(n,a,e,t,null,null)},pc.prototype.unmount=wf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$0(e.current,2,null,e,null,null),Ql(),t[ze]=null}};function pc(e){this._internalRoot=e}pc.prototype.unstable_scheduleHydration=function(e){if(e){var t=h();e={blockedOn:null,target:e,priority:t};for(var n=0;n<rs.length&&t!==0&&t<rs[n].priority;n++);rs.splice(n,0,e),n===0&&ip(e)}};var cp=r.version;if(cp!=="19.2.0")throw Error(s(527,cp,"19.2.0"));Ye.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=S(t),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var Oy={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{sr=gc.inject(Oy),Ln=gc}catch{}}return hl.createRoot=function(e,t){if(!u(e))throw Error(s(299));var n=!1,a="",c=mh,d=yh,C=vh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(C=t.onRecoverableError)),t=X0(e,1,!1,null,null,n,a,null,c,d,C,lp),e[ze]=t.current,nf(e),new wf(t)},hl.hydrateRoot=function(e,t,n){if(!u(e))throw Error(s(299));var a=!1,c="",d=mh,C=yh,N=vh,F=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(C=n.onCaughtError),n.onRecoverableError!==void 0&&(N=n.onRecoverableError),n.formState!==void 0&&(F=n.formState)),t=X0(e,1,!0,t,n??null,a,c,F,d,C,N,lp),t.context=W0(null),n=t.current,a=da(),a=R(a),c=Ki(a),c.callback=null,Gi(n,c,a),n=a,t.current.lanes=n,_r(t,n),Xa(t),e[ze]=t.current,nf(e),new pc(t)},hl.version="19.2.0",hl}var xp;function Qy(){if(xp)return Ef.exports;xp=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(r){console.error(r)}}return o(),Ef.exports=Py(),Ef.exports}var Jy=Qy();const Zy="modulepreload",Xy=function(o){return"/"+o},bp={},kf=function(r,i,s){let u=Promise.resolve();if(i&&i.length>0){let S=function(_){return Promise.all(_.map(j=>Promise.resolve(j).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};var A=S;document.getElementsByTagName("link");const M=document.querySelector("meta[property=csp-nonce]"),b=M?.nonce||M?.getAttribute("nonce");u=S(i.map(_=>{if(_=Xy(_),_ in bp)return;bp[_]=!0;const j=_.endsWith(".css"),I=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${I}`))return;const X=document.createElement("link");if(X.rel=j?"stylesheet":Zy,j||(X.as="script"),X.crossOrigin="",X.href=_,b&&X.setAttribute("nonce",b),document.head.appendChild(X),j)return new Promise((fe,pe)=>{X.addEventListener("load",fe),X.addEventListener("error",()=>pe(new Error(`Unable to preload CSS for ${_}`)))})}))}function g(M){const b=new Event("vite:preloadError",{cancelable:!0});if(b.payload=M,window.dispatchEvent(b),!b.defaultPrevented)throw M}return u.then(M=>{for(const b of M||[])b.status==="rejected"&&g(b.reason);return r().catch(g)})},Cp=o=>{let r;const i=new Set,s=(S,_)=>{const j=typeof S=="function"?S(r):S;if(!Object.is(j,r)){const I=r;r=_??(typeof j!="object"||j===null)?j:Object.assign({},r,j),i.forEach(X=>X(r,I))}},u=()=>r,M={setState:s,getState:u,getInitialState:()=>b,subscribe:S=>(i.add(S),()=>i.delete(S))},b=r=o(s,u,M);return M},Wy=(o=>o?Cp(o):Cp),$y=o=>o;function ev(o,r=$y){const i=Wn.useSyncExternalStore(o.subscribe,Wn.useCallback(()=>r(o.getState()),[o,r]),Wn.useCallback(()=>r(o.getInitialState()),[o,r]));return Wn.useDebugValue(i),i}const wp=o=>{const r=Wy(o),i=s=>ev(r,s);return Object.assign(i,r),i},sd=(o=>o?wp(o):wp);function tv(o,r){let i;try{i=o()}catch{return}return{getItem:u=>{var g;const A=b=>b===null?null:JSON.parse(b,void 0),M=(g=i.getItem(u))!=null?g:null;return M instanceof Promise?M.then(A):A(M)},setItem:(u,g)=>i.setItem(u,JSON.stringify(g,void 0)),removeItem:u=>i.removeItem(u)}}const Lf=o=>r=>{try{const i=o(r);return i instanceof Promise?i:{then(s){return Lf(s)(i)},catch(s){return this}}}catch(i){return{then(s){return this},catch(s){return Lf(s)(i)}}}},nv=(o,r)=>(i,s,u)=>{let g={storage:tv(()=>localStorage),partialize:pe=>pe,version:0,merge:(pe,Pe)=>({...Pe,...pe}),...r},A=!1;const M=new Set,b=new Set;let S=g.storage;if(!S)return o((...pe)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),i(...pe)},s,u);const _=()=>{const pe=g.partialize({...s()});return S.setItem(g.name,{state:pe,version:g.version})},j=u.setState;u.setState=(pe,Pe)=>(j(pe,Pe),_());const I=o((...pe)=>(i(...pe),_()),s,u);u.getInitialState=()=>I;let X;const fe=()=>{var pe,Pe;if(!S)return;A=!1,M.forEach(st=>{var He;return st((He=s())!=null?He:I)});const ot=((Pe=g.onRehydrateStorage)==null?void 0:Pe.call(g,(pe=s())!=null?pe:I))||void 0;return Lf(S.getItem.bind(S))(g.name).then(st=>{if(st)if(typeof st.version=="number"&&st.version!==g.version){if(g.migrate){const He=g.migrate(st.state,st.version);return He instanceof Promise?He.then(mt=>[!0,mt]):[!0,He]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,st.state];return[!1,void 0]}).then(st=>{var He;const[mt,Oe]=st;if(X=g.merge(Oe,(He=s())!=null?He:I),i(X,!0),mt)return _()}).then(()=>{ot?.(X,void 0),X=s(),A=!0,b.forEach(st=>st(X))}).catch(st=>{ot?.(void 0,st)})};return u.persist={setOptions:pe=>{g={...g,...pe},pe.storage&&(S=pe.storage)},clearStorage:()=>{S?.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>fe(),hasHydrated:()=>A,onHydrate:pe=>(M.add(pe),()=>{M.delete(pe)}),onFinishHydration:pe=>(b.add(pe),()=>{b.delete(pe)})},g.skipHydration||fe(),X||I},rv=nv,Wa=sd()(rv(o=>({identity:null,isInitialized:!1,activeView:"setup",activeContactId:null,firebaseEnabled:!1,firebaseConfigured:!1,miniChatVisibility:"never",setIdentity:r=>o({identity:r,isInitialized:!0}),setInitialized:r=>o({isInitialized:r}),setActiveView:r=>o({activeView:r}),setActiveContact:r=>o({activeContactId:r}),setFirebaseEnabled:r=>o({firebaseEnabled:r}),setFirebaseConfigured:r=>o({firebaseConfigured:r}),setMiniChatVisibility:r=>o({miniChatVisibility:r}),clearIdentity:()=>o({identity:null,isInitialized:!1,activeView:"setup",activeContactId:null}),updateProfile:r=>o(i=>({identity:i.identity?{...i.identity,profile:r}:null}))}),{name:"chat-app-storage",partialize:o=>({identity:o.identity,isInitialized:o.isInitialized,firebaseEnabled:o.firebaseEnabled,firebaseConfigured:o.firebaseConfigured,miniChatVisibility:o.miniChatVisibility})})),mc="chat-identity";class Os{static save(r){try{const i=JSON.stringify(r);localStorage.setItem(mc,i)}catch(i){throw console.error("Failed to save identity:",i),new Error("Failed to save identity to storage")}}static load(){try{const r=localStorage.getItem(mc);if(!r)return null;const i=JSON.parse(r),s=i.secretKey||i.privateKey;return!i.userId||!i.publicKey||!s?(console.error("Invalid identity in storage"),null):{userId:i.userId,publicKey:i.publicKey,secretKey:s,profile:i.profile??{}}}catch(r){return console.error("Failed to load identity:",r),null}}static exists(){return localStorage.getItem(mc)!==null}static delete(){localStorage.removeItem(mc)}static exportToJSON(r){return JSON.stringify(r,null,2)}static importFromJSON(r){try{let i=JSON.parse(r);i.version&&i.data&&(i=JSON.parse(i.data));const s=i.secretKey||i.privateKey;if(!i.userId||!i.publicKey||!s)throw new Error("Invalid identity format");return{userId:i.userId,publicKey:i.publicKey,secretKey:s,profile:i.profile??{}}}catch(i){throw console.error("Failed to import identity:",i),new Error("Invalid identity JSON")}}}const av={peerjs:{enabled:!0,host:"0.peerjs.com",port:443,secure:!0},gun:{enabled:!1,relays:["https://gun-manhattan.herokuapp.com/gun","https://gun-us.herokuapp.com/gun"]},webtorrent:{enabled:!1,trackers:["wss://tracker.openwebtorrent.com","wss://tracker.btorrent.xyz"]},firebase:{enabled:!1},custom:{enabled:!1,url:"",protocol:"websocket"}};class iv{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(r){this.flush(),this._parts.push(r)}append(r){this._pieces.push(r)}flush(){if(this._pieces.length>0){const r=new Uint8Array(this._pieces);this._parts.push(r),this._pieces=[]}}toArrayBuffer(){const r=[];for(const i of this._parts)r.push(i);return sv(r).buffer}}function sv(o){let r=0;for(const u of o)r+=u.byteLength;const i=new Uint8Array(r);let s=0;for(const u of o){const g=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);i.set(g,s),s+=u.byteLength}return i}function Jp(o){return new ov(o).unpack()}function Zp(o){const r=new lv,i=r.pack(o);return i instanceof Promise?i.then(()=>r.getBuffer()):r.getBuffer()}class ov{constructor(r){this.index=0,this.dataBuffer=r,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const r=this.unpack_uint8();if(r<128)return r;if((r^224)<32)return(r^224)-32;let i;if((i=r^160)<=15)return this.unpack_raw(i);if((i=r^176)<=15)return this.unpack_string(i);if((i=r^144)<=15)return this.unpack_array(i);if((i=r^128)<=15)return this.unpack_map(i);switch(r){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return i=this.unpack_uint16(),this.unpack_string(i);case 217:return i=this.unpack_uint32(),this.unpack_string(i);case 218:return i=this.unpack_uint16(),this.unpack_raw(i);case 219:return i=this.unpack_uint32(),this.unpack_raw(i);case 220:return i=this.unpack_uint16(),this.unpack_array(i);case 221:return i=this.unpack_uint32(),this.unpack_array(i);case 222:return i=this.unpack_uint16(),this.unpack_map(i);case 223:return i=this.unpack_uint32(),this.unpack_map(i)}}unpack_uint8(){const r=this.dataView[this.index]&255;return this.index++,r}unpack_uint16(){const r=this.read(2),i=(r[0]&255)*256+(r[1]&255);return this.index+=2,i}unpack_uint32(){const r=this.read(4),i=((r[0]*256+r[1])*256+r[2])*256+r[3];return this.index+=4,i}unpack_uint64(){const r=this.read(8),i=((((((r[0]*256+r[1])*256+r[2])*256+r[3])*256+r[4])*256+r[5])*256+r[6])*256+r[7];return this.index+=8,i}unpack_int8(){const r=this.unpack_uint8();return r<128?r:r-256}unpack_int16(){const r=this.unpack_uint16();return r<32768?r:r-65536}unpack_int32(){const r=this.unpack_uint32();return r<2**31?r:r-2**32}unpack_int64(){const r=this.unpack_uint64();return r<2**63?r:r-2**64}unpack_raw(r){if(this.length<this.index+r)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${r} ${this.length}`);const i=this.dataBuffer.slice(this.index,this.index+r);return this.index+=r,i}unpack_string(r){const i=this.read(r);let s=0,u="",g,A;for(;s<r;)g=i[s],g<160?(A=g,s++):(g^192)<32?(A=(g&31)<<6|i[s+1]&63,s+=2):(g^224)<16?(A=(g&15)<<12|(i[s+1]&63)<<6|i[s+2]&63,s+=3):(A=(g&7)<<18|(i[s+1]&63)<<12|(i[s+2]&63)<<6|i[s+3]&63,s+=4),u+=String.fromCodePoint(A);return this.index+=r,u}unpack_array(r){const i=new Array(r);for(let s=0;s<r;s++)i[s]=this.unpack();return i}unpack_map(r){const i={};for(let s=0;s<r;s++){const u=this.unpack();i[u]=this.unpack()}return i}unpack_float(){const r=this.unpack_uint32(),i=r>>31,s=(r>>23&255)-127,u=r&8388607|8388608;return(i===0?1:-1)*u*2**(s-23)}unpack_double(){const r=this.unpack_uint32(),i=this.unpack_uint32(),s=r>>31,u=(r>>20&2047)-1023,A=(r&1048575|1048576)*2**(u-20)+i*2**(u-52);return(s===0?1:-1)*A}read(r){const i=this.index;if(i+r<=this.length)return this.dataView.subarray(i,i+r);throw new Error("BinaryPackFailure: read index out of range")}}class lv{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(r){if(typeof r=="string")this.pack_string(r);else if(typeof r=="number")Math.floor(r)===r?this.pack_integer(r):this.pack_double(r);else if(typeof r=="boolean")r===!0?this._bufferBuilder.append(195):r===!1&&this._bufferBuilder.append(194);else if(r===void 0)this._bufferBuilder.append(192);else if(typeof r=="object")if(r===null)this._bufferBuilder.append(192);else{const i=r.constructor;if(r instanceof Array){const s=this.pack_array(r);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else if(r instanceof ArrayBuffer)this.pack_bin(new Uint8Array(r));else if("BYTES_PER_ELEMENT"in r){const s=r;this.pack_bin(new Uint8Array(s.buffer,s.byteOffset,s.byteLength))}else if(r instanceof Date)this.pack_string(r.toString());else{if(r instanceof Blob)return r.arrayBuffer().then(s=>{this.pack_bin(new Uint8Array(s)),this._bufferBuilder.flush()});if(i==Object||i.toString().startsWith("class")){const s=this.pack_object(r);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${i.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof r}" not yet supported`);this._bufferBuilder.flush()}pack_bin(r){const i=r.length;if(i<=15)this.pack_uint8(160+i);else if(i<=65535)this._bufferBuilder.append(218),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(i);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(r)}pack_string(r){const i=this._textEncoder.encode(r),s=i.length;if(s<=15)this.pack_uint8(176+s);else if(s<=65535)this._bufferBuilder.append(216),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(s);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(i)}pack_array(r){const i=r.length;if(i<=15)this.pack_uint8(144+i);else if(i<=65535)this._bufferBuilder.append(220),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(i);else throw new Error("Invalid length");const s=u=>{if(u<i){const g=this.pack(r[u]);return g instanceof Promise?g.then(()=>s(u+1)):s(u+1)}};return s(0)}pack_integer(r){if(r>=-32&&r<=127)this._bufferBuilder.append(r&255);else if(r>=0&&r<=255)this._bufferBuilder.append(204),this.pack_uint8(r);else if(r>=-128&&r<=127)this._bufferBuilder.append(208),this.pack_int8(r);else if(r>=0&&r<=65535)this._bufferBuilder.append(205),this.pack_uint16(r);else if(r>=-32768&&r<=32767)this._bufferBuilder.append(209),this.pack_int16(r);else if(r>=0&&r<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(r);else if(r>=-2147483648&&r<=2147483647)this._bufferBuilder.append(210),this.pack_int32(r);else if(r>=-9223372036854776e3&&r<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(r);else if(r>=0&&r<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(r);else throw new Error("Invalid integer")}pack_double(r){let i=0;r<0&&(i=1,r=-r);const s=Math.floor(Math.log(r)/Math.LN2),u=r/2**s-1,g=Math.floor(u*2**52),A=2**32,M=i<<31|s+1023<<20|g/A&1048575,b=g%A;this._bufferBuilder.append(203),this.pack_int32(M),this.pack_int32(b)}pack_object(r){const i=Object.keys(r),s=i.length;if(s<=15)this.pack_uint8(128+s);else if(s<=65535)this._bufferBuilder.append(222),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(s);else throw new Error("Invalid length");const u=g=>{if(g<i.length){const A=i[g];if(r.hasOwnProperty(A)){this.pack(A);const M=this.pack(r[A]);if(M instanceof Promise)return M.then(()=>u(g+1))}return u(g+1)}};return u(0)}pack_uint8(r){this._bufferBuilder.append(r)}pack_uint16(r){this._bufferBuilder.append(r>>8),this._bufferBuilder.append(r&255)}pack_uint32(r){const i=r&4294967295;this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}pack_uint64(r){const i=r/4294967296,s=r%2**32;this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}pack_int8(r){this._bufferBuilder.append(r&255)}pack_int16(r){this._bufferBuilder.append((r&65280)>>8),this._bufferBuilder.append(r&255)}pack_int32(r){this._bufferBuilder.append(r>>>24&255),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int64(r){const i=Math.floor(r/4294967296),s=r%2**32;this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}constructor(){this._bufferBuilder=new iv,this._textEncoder=new TextEncoder}}let Xp=!0,Wp=!0;function gl(o,r,i){const s=o.match(r);return s&&s.length>=i&&parseFloat(s[i],10)}function qs(o,r,i){if(!o.RTCPeerConnection)return;const s=o.RTCPeerConnection.prototype,u=s.addEventListener;s.addEventListener=function(A,M){if(A!==r)return u.apply(this,arguments);const b=S=>{const _=i(S);_&&(M.handleEvent?M.handleEvent(_):M(_))};return this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(M,b),u.apply(this,[A,b])};const g=s.removeEventListener;s.removeEventListener=function(A,M){if(A!==r||!this._eventMap||!this._eventMap[r])return g.apply(this,arguments);if(!this._eventMap[r].has(M))return g.apply(this,arguments);const b=this._eventMap[r].get(M);return this._eventMap[r].delete(M),this._eventMap[r].size===0&&delete this._eventMap[r],Object.keys(this._eventMap).length===0&&delete this._eventMap,g.apply(this,[A,b])},Object.defineProperty(s,"on"+r,{get(){return this["_on"+r]},set(A){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),A&&this.addEventListener(r,this["_on"+r]=A)},enumerable:!0,configurable:!0})}function cv(o){return typeof o!="boolean"?new Error("Argument type: "+typeof o+". Please use a boolean."):(Xp=o,o?"adapter.js logging disabled":"adapter.js logging enabled")}function uv(o){return typeof o!="boolean"?new Error("Argument type: "+typeof o+". Please use a boolean."):(Wp=!o,"adapter.js deprecation warnings "+(o?"disabled":"enabled"))}function $p(){if(typeof window=="object"){if(Xp)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function od(o,r){Wp&&console.warn(o+" is deprecated, please use "+r+" instead.")}function fv(o){const r={browser:null,version:null};if(typeof o>"u"||!o.navigator||!o.navigator.userAgent)return r.browser="Not a browser.",r;const{navigator:i}=o;if(i.userAgentData&&i.userAgentData.brands){const s=i.userAgentData.brands.find(u=>u.brand==="Chromium");if(s)return{browser:"chrome",version:parseInt(s.version,10)}}if(i.mozGetUserMedia)r.browser="firefox",r.version=parseInt(gl(i.userAgent,/Firefox\/(\d+)\./,1));else if(i.webkitGetUserMedia||o.isSecureContext===!1&&o.webkitRTCPeerConnection)r.browser="chrome",r.version=parseInt(gl(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(o.RTCPeerConnection&&i.userAgent.match(/AppleWebKit\/(\d+)\./))r.browser="safari",r.version=parseInt(gl(i.userAgent,/AppleWebKit\/(\d+)\./,1)),r.supportsUnifiedPlan=o.RTCRtpTransceiver&&"currentDirection"in o.RTCRtpTransceiver.prototype,r._safariVersion=gl(i.userAgent,/Version\/(\d+(\.?\d+))/,1);else return r.browser="Not a supported browser.",r;return r}function Sp(o){return Object.prototype.toString.call(o)==="[object Object]"}function eg(o){return Sp(o)?Object.keys(o).reduce(function(r,i){const s=Sp(o[i]),u=s?eg(o[i]):o[i],g=s&&!Object.keys(u).length;return u===void 0||g?r:Object.assign(r,{[i]:u})},{}):o}function zf(o,r,i){!r||i.has(r.id)||(i.set(r.id,r),Object.keys(r).forEach(s=>{s.endsWith("Id")?zf(o,o.get(r[s]),i):s.endsWith("Ids")&&r[s].forEach(u=>{zf(o,o.get(u),i)})}))}function Ap(o,r,i){const s=i?"outbound-rtp":"inbound-rtp",u=new Map;if(r===null)return u;const g=[];return o.forEach(A=>{A.type==="track"&&A.trackIdentifier===r.id&&g.push(A)}),g.forEach(A=>{o.forEach(M=>{M.type===s&&M.trackId===A.id&&zf(o,M,u)})}),u}const Ep=$p;function tg(o,r){const i=o&&o.navigator;if(!i.mediaDevices)return;const s=function(M){if(typeof M!="object"||M.mandatory||M.optional)return M;const b={};return Object.keys(M).forEach(S=>{if(S==="require"||S==="advanced"||S==="mediaSource")return;const _=typeof M[S]=="object"?M[S]:{ideal:M[S]};_.exact!==void 0&&typeof _.exact=="number"&&(_.min=_.max=_.exact);const j=function(I,X){return I?I+X.charAt(0).toUpperCase()+X.slice(1):X==="deviceId"?"sourceId":X};if(_.ideal!==void 0){b.optional=b.optional||[];let I={};typeof _.ideal=="number"?(I[j("min",S)]=_.ideal,b.optional.push(I),I={},I[j("max",S)]=_.ideal,b.optional.push(I)):(I[j("",S)]=_.ideal,b.optional.push(I))}_.exact!==void 0&&typeof _.exact!="number"?(b.mandatory=b.mandatory||{},b.mandatory[j("",S)]=_.exact):["min","max"].forEach(I=>{_[I]!==void 0&&(b.mandatory=b.mandatory||{},b.mandatory[j(I,S)]=_[I])})}),M.advanced&&(b.optional=(b.optional||[]).concat(M.advanced)),b},u=function(M,b){if(r.version>=61)return b(M);if(M=JSON.parse(JSON.stringify(M)),M&&typeof M.audio=="object"){const S=function(_,j,I){j in _&&!(I in _)&&(_[I]=_[j],delete _[j])};M=JSON.parse(JSON.stringify(M)),S(M.audio,"autoGainControl","googAutoGainControl"),S(M.audio,"noiseSuppression","googNoiseSuppression"),M.audio=s(M.audio)}if(M&&typeof M.video=="object"){let S=M.video.facingMode;S=S&&(typeof S=="object"?S:{ideal:S});const _=r.version<66;if(S&&(S.exact==="user"||S.exact==="environment"||S.ideal==="user"||S.ideal==="environment")&&!(i.mediaDevices.getSupportedConstraints&&i.mediaDevices.getSupportedConstraints().facingMode&&!_)){delete M.video.facingMode;let j;if(S.exact==="environment"||S.ideal==="environment"?j=["back","rear"]:(S.exact==="user"||S.ideal==="user")&&(j=["front"]),j)return i.mediaDevices.enumerateDevices().then(I=>{I=I.filter(fe=>fe.kind==="videoinput");let X=I.find(fe=>j.some(pe=>fe.label.toLowerCase().includes(pe)));return!X&&I.length&&j.includes("back")&&(X=I[I.length-1]),X&&(M.video.deviceId=S.exact?{exact:X.deviceId}:{ideal:X.deviceId}),M.video=s(M.video),Ep("chrome: "+JSON.stringify(M)),b(M)})}M.video=s(M.video)}return Ep("chrome: "+JSON.stringify(M)),b(M)},g=function(M){return r.version>=64?M:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[M.name]||M.name,message:M.message,constraint:M.constraint||M.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},A=function(M,b,S){u(M,_=>{i.webkitGetUserMedia(_,b,j=>{S&&S(g(j))})})};if(i.getUserMedia=A.bind(i),i.mediaDevices.getUserMedia){const M=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(b){return u(b,S=>M(S).then(_=>{if(S.audio&&!_.getAudioTracks().length||S.video&&!_.getVideoTracks().length)throw _.getTracks().forEach(j=>{j.stop()}),new DOMException("","NotFoundError");return _},_=>Promise.reject(g(_))))}}}function ng(o){o.MediaStream=o.MediaStream||o.webkitMediaStream}function rg(o){if(typeof o=="object"&&o.RTCPeerConnection&&!("ontrack"in o.RTCPeerConnection.prototype)){Object.defineProperty(o.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});const r=o.RTCPeerConnection.prototype.setRemoteDescription;o.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",u=>{let g;o.RTCPeerConnection.prototype.getReceivers?g=this.getReceivers().find(M=>M.track&&M.track.id===u.track.id):g={track:u.track};const A=new Event("track");A.track=u.track,A.receiver=g,A.transceiver={receiver:g},A.streams=[s.stream],this.dispatchEvent(A)}),s.stream.getTracks().forEach(u=>{let g;o.RTCPeerConnection.prototype.getReceivers?g=this.getReceivers().find(M=>M.track&&M.track.id===u.id):g={track:u};const A=new Event("track");A.track=u,A.receiver=g,A.transceiver={receiver:g},A.streams=[s.stream],this.dispatchEvent(A)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}else qs(o,"track",r=>(r.transceiver||Object.defineProperty(r,"transceiver",{value:{receiver:r.receiver}}),r))}function ag(o){if(typeof o=="object"&&o.RTCPeerConnection&&!("getSenders"in o.RTCPeerConnection.prototype)&&"createDTMFSender"in o.RTCPeerConnection.prototype){const r=function(u,g){return{track:g,get dtmf(){return this._dtmf===void 0&&(g.kind==="audio"?this._dtmf=u.createDTMFSender(g):this._dtmf=null),this._dtmf},_pc:u}};if(!o.RTCPeerConnection.prototype.getSenders){o.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const u=o.RTCPeerConnection.prototype.addTrack;o.RTCPeerConnection.prototype.addTrack=function(M,b){let S=u.apply(this,arguments);return S||(S=r(this,M),this._senders.push(S)),S};const g=o.RTCPeerConnection.prototype.removeTrack;o.RTCPeerConnection.prototype.removeTrack=function(M){g.apply(this,arguments);const b=this._senders.indexOf(M);b!==-1&&this._senders.splice(b,1)}}const i=o.RTCPeerConnection.prototype.addStream;o.RTCPeerConnection.prototype.addStream=function(g){this._senders=this._senders||[],i.apply(this,[g]),g.getTracks().forEach(A=>{this._senders.push(r(this,A))})};const s=o.RTCPeerConnection.prototype.removeStream;o.RTCPeerConnection.prototype.removeStream=function(g){this._senders=this._senders||[],s.apply(this,[g]),g.getTracks().forEach(A=>{const M=this._senders.find(b=>b.track===A);M&&this._senders.splice(this._senders.indexOf(M),1)})}}else if(typeof o=="object"&&o.RTCPeerConnection&&"getSenders"in o.RTCPeerConnection.prototype&&"createDTMFSender"in o.RTCPeerConnection.prototype&&o.RTCRtpSender&&!("dtmf"in o.RTCRtpSender.prototype)){const r=o.RTCPeerConnection.prototype.getSenders;o.RTCPeerConnection.prototype.getSenders=function(){const s=r.apply(this,[]);return s.forEach(u=>u._pc=this),s},Object.defineProperty(o.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ig(o){if(!(typeof o=="object"&&o.RTCPeerConnection&&o.RTCRtpSender&&o.RTCRtpReceiver))return;if(!("getStats"in o.RTCRtpSender.prototype)){const i=o.RTCPeerConnection.prototype.getSenders;i&&(o.RTCPeerConnection.prototype.getSenders=function(){const g=i.apply(this,[]);return g.forEach(A=>A._pc=this),g});const s=o.RTCPeerConnection.prototype.addTrack;s&&(o.RTCPeerConnection.prototype.addTrack=function(){const g=s.apply(this,arguments);return g._pc=this,g}),o.RTCRtpSender.prototype.getStats=function(){const g=this;return this._pc.getStats().then(A=>Ap(A,g.track,!0))}}if(!("getStats"in o.RTCRtpReceiver.prototype)){const i=o.RTCPeerConnection.prototype.getReceivers;i&&(o.RTCPeerConnection.prototype.getReceivers=function(){const u=i.apply(this,[]);return u.forEach(g=>g._pc=this),u}),qs(o,"track",s=>(s.receiver._pc=s.srcElement,s)),o.RTCRtpReceiver.prototype.getStats=function(){const u=this;return this._pc.getStats().then(g=>Ap(g,u.track,!1))}}if(!("getStats"in o.RTCRtpSender.prototype&&"getStats"in o.RTCRtpReceiver.prototype))return;const r=o.RTCPeerConnection.prototype.getStats;o.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof o.MediaStreamTrack){const s=arguments[0];let u,g,A;return this.getSenders().forEach(M=>{M.track===s&&(u?A=!0:u=M)}),this.getReceivers().forEach(M=>(M.track===s&&(g?A=!0:g=M),M.track===s)),A||u&&g?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):u?u.getStats():g?g.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return r.apply(this,arguments)}}function sg(o){o.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(A=>this._shimmedLocalStreams[A][0])};const r=o.RTCPeerConnection.prototype.addTrack;o.RTCPeerConnection.prototype.addTrack=function(A,M){if(!M)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const b=r.apply(this,arguments);return this._shimmedLocalStreams[M.id]?this._shimmedLocalStreams[M.id].indexOf(b)===-1&&this._shimmedLocalStreams[M.id].push(b):this._shimmedLocalStreams[M.id]=[M,b],b};const i=o.RTCPeerConnection.prototype.addStream;o.RTCPeerConnection.prototype.addStream=function(A){this._shimmedLocalStreams=this._shimmedLocalStreams||{},A.getTracks().forEach(S=>{if(this.getSenders().find(j=>j.track===S))throw new DOMException("Track already exists.","InvalidAccessError")});const M=this.getSenders();i.apply(this,arguments);const b=this.getSenders().filter(S=>M.indexOf(S)===-1);this._shimmedLocalStreams[A.id]=[A].concat(b)};const s=o.RTCPeerConnection.prototype.removeStream;o.RTCPeerConnection.prototype.removeStream=function(A){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[A.id],s.apply(this,arguments)};const u=o.RTCPeerConnection.prototype.removeTrack;o.RTCPeerConnection.prototype.removeTrack=function(A){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},A&&Object.keys(this._shimmedLocalStreams).forEach(M=>{const b=this._shimmedLocalStreams[M].indexOf(A);b!==-1&&this._shimmedLocalStreams[M].splice(b,1),this._shimmedLocalStreams[M].length===1&&delete this._shimmedLocalStreams[M]}),u.apply(this,arguments)}}function og(o,r){if(!o.RTCPeerConnection)return;if(o.RTCPeerConnection.prototype.addTrack&&r.version>=65)return sg(o);const i=o.RTCPeerConnection.prototype.getLocalStreams;o.RTCPeerConnection.prototype.getLocalStreams=function(){const _=i.apply(this);return this._reverseStreams=this._reverseStreams||{},_.map(j=>this._reverseStreams[j.id])};const s=o.RTCPeerConnection.prototype.addStream;o.RTCPeerConnection.prototype.addStream=function(_){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},_.getTracks().forEach(j=>{if(this.getSenders().find(X=>X.track===j))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[_.id]){const j=new o.MediaStream(_.getTracks());this._streams[_.id]=j,this._reverseStreams[j.id]=_,_=j}s.apply(this,[_])};const u=o.RTCPeerConnection.prototype.removeStream;o.RTCPeerConnection.prototype.removeStream=function(_){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.apply(this,[this._streams[_.id]||_]),delete this._reverseStreams[this._streams[_.id]?this._streams[_.id].id:_.id],delete this._streams[_.id]},o.RTCPeerConnection.prototype.addTrack=function(_,j){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const I=[].slice.call(arguments,1);if(I.length!==1||!I[0].getTracks().find(pe=>pe===_))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(pe=>pe.track===_))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const fe=this._streams[j.id];if(fe)fe.addTrack(_),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const pe=new o.MediaStream([_]);this._streams[j.id]=pe,this._reverseStreams[pe.id]=j,this.addStream(pe)}return this.getSenders().find(pe=>pe.track===_)};function g(S,_){let j=_.sdp;return Object.keys(S._reverseStreams||[]).forEach(I=>{const X=S._reverseStreams[I],fe=S._streams[X.id];j=j.replace(new RegExp(fe.id,"g"),X.id)}),new RTCSessionDescription({type:_.type,sdp:j})}function A(S,_){let j=_.sdp;return Object.keys(S._reverseStreams||[]).forEach(I=>{const X=S._reverseStreams[I],fe=S._streams[X.id];j=j.replace(new RegExp(X.id,"g"),fe.id)}),new RTCSessionDescription({type:_.type,sdp:j})}["createOffer","createAnswer"].forEach(function(S){const _=o.RTCPeerConnection.prototype[S],j={[S](){const I=arguments;return arguments.length&&typeof arguments[0]=="function"?_.apply(this,[fe=>{const pe=g(this,fe);I[0].apply(null,[pe])},fe=>{I[1]&&I[1].apply(null,fe)},arguments[2]]):_.apply(this,arguments).then(fe=>g(this,fe))}};o.RTCPeerConnection.prototype[S]=j[S]});const M=o.RTCPeerConnection.prototype.setLocalDescription;o.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?M.apply(this,arguments):(arguments[0]=A(this,arguments[0]),M.apply(this,arguments))};const b=Object.getOwnPropertyDescriptor(o.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(o.RTCPeerConnection.prototype,"localDescription",{get(){const S=b.get.apply(this);return S.type===""?S:g(this,S)}}),o.RTCPeerConnection.prototype.removeTrack=function(_){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!_._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(_._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let I;Object.keys(this._streams).forEach(X=>{this._streams[X].getTracks().find(pe=>_.track===pe)&&(I=this._streams[X])}),I&&(I.getTracks().length===1?this.removeStream(this._reverseStreams[I.id]):I.removeTrack(_.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Yf(o,r){!o.RTCPeerConnection&&o.webkitRTCPeerConnection&&(o.RTCPeerConnection=o.webkitRTCPeerConnection),o.RTCPeerConnection&&r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=o.RTCPeerConnection.prototype[i],u={[i](){return arguments[0]=new(i==="addIceCandidate"?o.RTCIceCandidate:o.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};o.RTCPeerConnection.prototype[i]=u[i]})}function lg(o,r){qs(o,"negotiationneeded",i=>{const s=i.target;if(!((r.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")&&s.signalingState!=="stable"))return i})}const Tp=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:lg,shimAddTrackRemoveTrack:og,shimAddTrackRemoveTrackWithNative:sg,shimGetSendersWithDtmf:ag,shimGetUserMedia:tg,shimMediaStream:ng,shimOnTrack:rg,shimPeerConnection:Yf,shimSenderReceiverGetStats:ig},Symbol.toStringTag,{value:"Module"}));function cg(o,r){const i=o&&o.navigator,s=o&&o.MediaStreamTrack;if(i.getUserMedia=function(u,g,A){od("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(u).then(g,A)},!(r.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const u=function(A,M,b){M in A&&!(b in A)&&(A[b]=A[M],delete A[M])},g=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(A){return typeof A=="object"&&typeof A.audio=="object"&&(A=JSON.parse(JSON.stringify(A)),u(A.audio,"autoGainControl","mozAutoGainControl"),u(A.audio,"noiseSuppression","mozNoiseSuppression")),g(A)},s&&s.prototype.getSettings){const A=s.prototype.getSettings;s.prototype.getSettings=function(){const M=A.apply(this,arguments);return u(M,"mozAutoGainControl","autoGainControl"),u(M,"mozNoiseSuppression","noiseSuppression"),M}}if(s&&s.prototype.applyConstraints){const A=s.prototype.applyConstraints;s.prototype.applyConstraints=function(M){return this.kind==="audio"&&typeof M=="object"&&(M=JSON.parse(JSON.stringify(M)),u(M,"autoGainControl","mozAutoGainControl"),u(M,"noiseSuppression","mozNoiseSuppression")),A.apply(this,[M])}}}}function dv(o,r){o.navigator.mediaDevices&&"getDisplayMedia"in o.navigator.mediaDevices||o.navigator.mediaDevices&&(o.navigator.mediaDevices.getDisplayMedia=function(s){if(!(s&&s.video)){const u=new DOMException("getDisplayMedia without video constraints is undefined");return u.name="NotFoundError",u.code=8,Promise.reject(u)}return s.video===!0?s.video={mediaSource:r}:s.video.mediaSource=r,o.navigator.mediaDevices.getUserMedia(s)})}function ug(o){typeof o=="object"&&o.RTCTrackEvent&&"receiver"in o.RTCTrackEvent.prototype&&!("transceiver"in o.RTCTrackEvent.prototype)&&Object.defineProperty(o.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Kf(o,r){if(typeof o!="object"||!(o.RTCPeerConnection||o.mozRTCPeerConnection))return;!o.RTCPeerConnection&&o.mozRTCPeerConnection&&(o.RTCPeerConnection=o.mozRTCPeerConnection),r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(u){const g=o.RTCPeerConnection.prototype[u],A={[u](){return arguments[0]=new(u==="addIceCandidate"?o.RTCIceCandidate:o.RTCSessionDescription)(arguments[0]),g.apply(this,arguments)}};o.RTCPeerConnection.prototype[u]=A[u]});const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=o.RTCPeerConnection.prototype.getStats;o.RTCPeerConnection.prototype.getStats=function(){const[g,A,M]=arguments;return s.apply(this,[g||null]).then(b=>{if(r.version<53&&!A)try{b.forEach(S=>{S.type=i[S.type]||S.type})}catch(S){if(S.name!=="TypeError")throw S;b.forEach((_,j)=>{b.set(j,Object.assign({},_,{type:i[_.type]||_.type}))})}return b}).then(A,M)}}function fg(o){if(!(typeof o=="object"&&o.RTCPeerConnection&&o.RTCRtpSender)||o.RTCRtpSender&&"getStats"in o.RTCRtpSender.prototype)return;const r=o.RTCPeerConnection.prototype.getSenders;r&&(o.RTCPeerConnection.prototype.getSenders=function(){const u=r.apply(this,[]);return u.forEach(g=>g._pc=this),u});const i=o.RTCPeerConnection.prototype.addTrack;i&&(o.RTCPeerConnection.prototype.addTrack=function(){const u=i.apply(this,arguments);return u._pc=this,u}),o.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function dg(o){if(!(typeof o=="object"&&o.RTCPeerConnection&&o.RTCRtpSender)||o.RTCRtpSender&&"getStats"in o.RTCRtpReceiver.prototype)return;const r=o.RTCPeerConnection.prototype.getReceivers;r&&(o.RTCPeerConnection.prototype.getReceivers=function(){const s=r.apply(this,[]);return s.forEach(u=>u._pc=this),s}),qs(o,"track",i=>(i.receiver._pc=i.srcElement,i)),o.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function hg(o){!o.RTCPeerConnection||"removeStream"in o.RTCPeerConnection.prototype||(o.RTCPeerConnection.prototype.removeStream=function(i){od("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&i.getTracks().includes(s.track)&&this.removeTrack(s)})})}function pg(o){o.DataChannel&&!o.RTCDataChannel&&(o.RTCDataChannel=o.DataChannel)}function gg(o){if(!(typeof o=="object"&&o.RTCPeerConnection))return;const r=o.RTCPeerConnection.prototype.addTransceiver;r&&(o.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let s=arguments[1]&&arguments[1].sendEncodings;s===void 0&&(s=[]),s=[...s];const u=s.length>0;u&&s.forEach(A=>{if("rid"in A&&!/^[a-z0-9]{0,16}$/i.test(A.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in A&&!(parseFloat(A.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in A&&!(parseFloat(A.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const g=r.apply(this,arguments);if(u){const{sender:A}=g,M=A.getParameters();(!("encodings"in M)||M.encodings.length===1&&Object.keys(M.encodings[0]).length===0)&&(M.encodings=s,A.sendEncodings=s,this.setParametersPromises.push(A.setParameters(M).then(()=>{delete A.sendEncodings}).catch(()=>{delete A.sendEncodings})))}return g})}function mg(o){if(!(typeof o=="object"&&o.RTCRtpSender))return;const r=o.RTCRtpSender.prototype.getParameters;r&&(o.RTCRtpSender.prototype.getParameters=function(){const s=r.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function yg(o){if(!(typeof o=="object"&&o.RTCPeerConnection))return;const r=o.RTCPeerConnection.prototype.createOffer;o.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}function vg(o){if(!(typeof o=="object"&&o.RTCPeerConnection))return;const r=o.RTCPeerConnection.prototype.createAnswer;o.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}const Mp=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:gg,shimCreateAnswer:vg,shimCreateOffer:yg,shimGetDisplayMedia:dv,shimGetParameters:mg,shimGetUserMedia:cg,shimOnTrack:ug,shimPeerConnection:Kf,shimRTCDataChannel:pg,shimReceiverGetStats:dg,shimRemoveStream:hg,shimSenderGetStats:fg},Symbol.toStringTag,{value:"Module"}));function xg(o){if(!(typeof o!="object"||!o.RTCPeerConnection)){if("getLocalStreams"in o.RTCPeerConnection.prototype||(o.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in o.RTCPeerConnection.prototype)){const r=o.RTCPeerConnection.prototype.addTrack;o.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(u=>r.call(this,u,s)),s.getVideoTracks().forEach(u=>r.call(this,u,s))},o.RTCPeerConnection.prototype.addTrack=function(s,...u){return u&&u.forEach(g=>{this._localStreams?this._localStreams.includes(g)||this._localStreams.push(g):this._localStreams=[g]}),r.apply(this,arguments)}}"removeStream"in o.RTCPeerConnection.prototype||(o.RTCPeerConnection.prototype.removeStream=function(i){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(i);if(s===-1)return;this._localStreams.splice(s,1);const u=i.getTracks();this.getSenders().forEach(g=>{u.includes(g.track)&&this.removeTrack(g)})})}}function bg(o){if(!(typeof o!="object"||!o.RTCPeerConnection)&&("getRemoteStreams"in o.RTCPeerConnection.prototype||(o.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in o.RTCPeerConnection.prototype))){Object.defineProperty(o.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(u=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(u))return;this._remoteStreams.push(u);const g=new Event("addstream");g.stream=u,this.dispatchEvent(g)})})}});const r=o.RTCPeerConnection.prototype.setRemoteDescription;o.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(u){u.streams.forEach(g=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(g)>=0)return;s._remoteStreams.push(g);const A=new Event("addstream");A.stream=g,s.dispatchEvent(A)})}),r.apply(s,arguments)}}}function Cg(o){if(typeof o!="object"||!o.RTCPeerConnection)return;const r=o.RTCPeerConnection.prototype,i=r.createOffer,s=r.createAnswer,u=r.setLocalDescription,g=r.setRemoteDescription,A=r.addIceCandidate;r.createOffer=function(S,_){const j=arguments.length>=2?arguments[2]:arguments[0],I=i.apply(this,[j]);return _?(I.then(S,_),Promise.resolve()):I},r.createAnswer=function(S,_){const j=arguments.length>=2?arguments[2]:arguments[0],I=s.apply(this,[j]);return _?(I.then(S,_),Promise.resolve()):I};let M=function(b,S,_){const j=u.apply(this,[b]);return _?(j.then(S,_),Promise.resolve()):j};r.setLocalDescription=M,M=function(b,S,_){const j=g.apply(this,[b]);return _?(j.then(S,_),Promise.resolve()):j},r.setRemoteDescription=M,M=function(b,S,_){const j=A.apply(this,[b]);return _?(j.then(S,_),Promise.resolve()):j},r.addIceCandidate=M}function wg(o){const r=o&&o.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){const i=r.mediaDevices,s=i.getUserMedia.bind(i);r.mediaDevices.getUserMedia=u=>s(Sg(u))}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=(function(s,u,g){r.mediaDevices.getUserMedia(s).then(u,g)}).bind(r))}function Sg(o){return o&&o.video!==void 0?Object.assign({},o,{video:eg(o.video)}):o}function Ag(o){if(!o.RTCPeerConnection)return;const r=o.RTCPeerConnection;o.RTCPeerConnection=function(s,u){if(s&&s.iceServers){const g=[];for(let A=0;A<s.iceServers.length;A++){let M=s.iceServers[A];M.urls===void 0&&M.url?(od("RTCIceServer.url","RTCIceServer.urls"),M=JSON.parse(JSON.stringify(M)),M.urls=M.url,delete M.url,g.push(M)):g.push(s.iceServers[A])}s.iceServers=g}return new r(s,u)},o.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(o.RTCPeerConnection,"generateCertificate",{get(){return r.generateCertificate}})}function Eg(o){typeof o=="object"&&o.RTCTrackEvent&&"receiver"in o.RTCTrackEvent.prototype&&!("transceiver"in o.RTCTrackEvent.prototype)&&Object.defineProperty(o.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Tg(o){const r=o.RTCPeerConnection.prototype.createOffer;o.RTCPeerConnection.prototype.createOffer=function(s){if(s){typeof s.offerToReceiveAudio<"u"&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const u=this.getTransceivers().find(A=>A.receiver.track.kind==="audio");s.offerToReceiveAudio===!1&&u?u.direction==="sendrecv"?u.setDirection?u.setDirection("sendonly"):u.direction="sendonly":u.direction==="recvonly"&&(u.setDirection?u.setDirection("inactive"):u.direction="inactive"):s.offerToReceiveAudio===!0&&!u&&this.addTransceiver("audio",{direction:"recvonly"}),typeof s.offerToReceiveVideo<"u"&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const g=this.getTransceivers().find(A=>A.receiver.track.kind==="video");s.offerToReceiveVideo===!1&&g?g.direction==="sendrecv"?g.setDirection?g.setDirection("sendonly"):g.direction="sendonly":g.direction==="recvonly"&&(g.setDirection?g.setDirection("inactive"):g.direction="inactive"):s.offerToReceiveVideo===!0&&!g&&this.addTransceiver("video",{direction:"recvonly"})}return r.apply(this,arguments)}}function Mg(o){typeof o!="object"||o.AudioContext||(o.AudioContext=o.webkitAudioContext)}const _p=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Mg,shimCallbacksAPI:Cg,shimConstraints:Sg,shimCreateOfferLegacy:Tg,shimGetUserMedia:wg,shimLocalStreamsAPI:xg,shimRTCIceServerUrls:Ag,shimRemoteStreamsAPI:bg,shimTrackEventTransceiver:Eg},Symbol.toStringTag,{value:"Module"}));var Bf={exports:{}},kp;function hv(){return kp||(kp=1,(function(o){const r={};r.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},r.localCName=r.generateIdentifier(),r.splitLines=function(i){return i.trim().split(`
`).map(s=>s.trim())},r.splitSections=function(i){return i.split(`
m=`).map((u,g)=>(g>0?"m="+u:u).trim()+`\r
`)},r.getDescription=function(i){const s=r.splitSections(i);return s&&s[0]},r.getMediaSections=function(i){const s=r.splitSections(i);return s.shift(),s},r.matchPrefix=function(i,s){return r.splitLines(i).filter(u=>u.indexOf(s)===0)},r.parseCandidate=function(i){let s;i.indexOf("a=candidate:")===0?s=i.substring(12).split(" "):s=i.substring(10).split(" ");const u={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let g=8;g<s.length;g+=2)switch(s[g]){case"raddr":u.relatedAddress=s[g+1];break;case"rport":u.relatedPort=parseInt(s[g+1],10);break;case"tcptype":u.tcpType=s[g+1];break;case"ufrag":u.ufrag=s[g+1],u.usernameFragment=s[g+1];break;default:u[s[g]]===void 0&&(u[s[g]]=s[g+1]);break}return u},r.writeCandidate=function(i){const s=[];s.push(i.foundation);const u=i.component;u==="rtp"?s.push(1):u==="rtcp"?s.push(2):s.push(u),s.push(i.protocol.toUpperCase()),s.push(i.priority),s.push(i.address||i.ip),s.push(i.port);const g=i.type;return s.push("typ"),s.push(g),g!=="host"&&i.relatedAddress&&i.relatedPort&&(s.push("raddr"),s.push(i.relatedAddress),s.push("rport"),s.push(i.relatedPort)),i.tcpType&&i.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(s.push("ufrag"),s.push(i.usernameFragment||i.ufrag)),"candidate:"+s.join(" ")},r.parseIceOptions=function(i){return i.substring(14).split(" ")},r.parseRtpMap=function(i){let s=i.substring(9).split(" ");const u={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),u.name=s[0],u.clockRate=parseInt(s[1],10),u.channels=s.length===3?parseInt(s[2],10):1,u.numChannels=u.channels,u},r.writeRtpMap=function(i){let s=i.payloadType;i.preferredPayloadType!==void 0&&(s=i.preferredPayloadType);const u=i.channels||i.numChannels||1;return"a=rtpmap:"+s+" "+i.name+"/"+i.clockRate+(u!==1?"/"+u:"")+`\r
`},r.parseExtmap=function(i){const s=i.substring(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1],attributes:s.slice(2).join(" ")}},r.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&i.direction!=="sendrecv"?"/"+i.direction:"")+" "+i.uri+(i.attributes?" "+i.attributes:"")+`\r
`},r.parseFmtp=function(i){const s={};let u;const g=i.substring(i.indexOf(" ")+1).split(";");for(let A=0;A<g.length;A++)u=g[A].trim().split("="),s[u[0].trim()]=u[1];return s},r.writeFmtp=function(i){let s="",u=i.payloadType;if(i.preferredPayloadType!==void 0&&(u=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){const g=[];Object.keys(i.parameters).forEach(A=>{i.parameters[A]!==void 0?g.push(A+"="+i.parameters[A]):g.push(A)}),s+="a=fmtp:"+u+" "+g.join(";")+`\r
`}return s},r.parseRtcpFb=function(i){const s=i.substring(i.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},r.writeRtcpFb=function(i){let s="",u=i.payloadType;return i.preferredPayloadType!==void 0&&(u=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(g=>{s+="a=rtcp-fb:"+u+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+`\r
`}),s},r.parseSsrcMedia=function(i){const s=i.indexOf(" "),u={ssrc:parseInt(i.substring(7,s),10)},g=i.indexOf(":",s);return g>-1?(u.attribute=i.substring(s+1,g),u.value=i.substring(g+1)):u.attribute=i.substring(s+1),u},r.parseSsrcGroup=function(i){const s=i.substring(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(u=>parseInt(u,10))}},r.getMid=function(i){const s=r.matchPrefix(i,"a=mid:")[0];if(s)return s.substring(6)},r.parseFingerprint=function(i){const s=i.substring(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},r.getDtlsParameters=function(i,s){return{role:"auto",fingerprints:r.matchPrefix(i+s,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(i,s){let u="a=setup:"+s+`\r
`;return i.fingerprints.forEach(g=>{u+="a=fingerprint:"+g.algorithm+" "+g.value+`\r
`}),u},r.parseCryptoLine=function(i){const s=i.substring(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},r.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+(typeof i.keyParams=="object"?r.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+`\r
`},r.parseCryptoKeyParams=function(i){if(i.indexOf("inline:")!==0)return null;const s=i.substring(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},r.getCryptoParameters=function(i,s){return r.matchPrefix(i+s,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(i,s){const u=r.matchPrefix(i+s,"a=ice-ufrag:")[0],g=r.matchPrefix(i+s,"a=ice-pwd:")[0];return u&&g?{usernameFragment:u.substring(12),password:g.substring(10)}:null},r.writeIceParameters=function(i){let s="a=ice-ufrag:"+i.usernameFragment+`\r
a=ice-pwd:`+i.password+`\r
`;return i.iceLite&&(s+=`a=ice-lite\r
`),s},r.parseRtpParameters=function(i){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},g=r.splitLines(i)[0].split(" ");s.profile=g[2];for(let M=3;M<g.length;M++){const b=g[M],S=r.matchPrefix(i,"a=rtpmap:"+b+" ")[0];if(S){const _=r.parseRtpMap(S),j=r.matchPrefix(i,"a=fmtp:"+b+" ");switch(_.parameters=j.length?r.parseFmtp(j[0]):{},_.rtcpFeedback=r.matchPrefix(i,"a=rtcp-fb:"+b+" ").map(r.parseRtcpFb),s.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(_.name.toUpperCase());break}}}r.matchPrefix(i,"a=extmap:").forEach(M=>{s.headerExtensions.push(r.parseExtmap(M))});const A=r.matchPrefix(i,"a=rtcp-fb:* ").map(r.parseRtcpFb);return s.codecs.forEach(M=>{A.forEach(b=>{M.rtcpFeedback.find(_=>_.type===b.type&&_.parameter===b.parameter)||M.rtcpFeedback.push(b)})}),s},r.writeRtpDescription=function(i,s){let u="";u+="m="+i+" ",u+=s.codecs.length>0?"9":"0",u+=" "+(s.profile||"UDP/TLS/RTP/SAVPF")+" ",u+=s.codecs.map(A=>A.preferredPayloadType!==void 0?A.preferredPayloadType:A.payloadType).join(" ")+`\r
`,u+=`c=IN IP4 0.0.0.0\r
`,u+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(A=>{u+=r.writeRtpMap(A),u+=r.writeFmtp(A),u+=r.writeRtcpFb(A)});let g=0;return s.codecs.forEach(A=>{A.maxptime>g&&(g=A.maxptime)}),g>0&&(u+="a=maxptime:"+g+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(A=>{u+=r.writeExtmap(A)}),u},r.parseRtpEncodingParameters=function(i){const s=[],u=r.parseRtpParameters(i),g=u.fecMechanisms.indexOf("RED")!==-1,A=u.fecMechanisms.indexOf("ULPFEC")!==-1,M=r.matchPrefix(i,"a=ssrc:").map(I=>r.parseSsrcMedia(I)).filter(I=>I.attribute==="cname"),b=M.length>0&&M[0].ssrc;let S;const _=r.matchPrefix(i,"a=ssrc-group:FID").map(I=>I.substring(17).split(" ").map(fe=>parseInt(fe,10)));_.length>0&&_[0].length>1&&_[0][0]===b&&(S=_[0][1]),u.codecs.forEach(I=>{if(I.name.toUpperCase()==="RTX"&&I.parameters.apt){let X={ssrc:b,codecPayloadType:parseInt(I.parameters.apt,10)};b&&S&&(X.rtx={ssrc:S}),s.push(X),g&&(X=JSON.parse(JSON.stringify(X)),X.fec={ssrc:b,mechanism:A?"red+ulpfec":"red"},s.push(X))}}),s.length===0&&b&&s.push({ssrc:b});let j=r.matchPrefix(i,"b=");return j.length&&(j[0].indexOf("b=TIAS:")===0?j=parseInt(j[0].substring(7),10):j[0].indexOf("b=AS:")===0?j=parseInt(j[0].substring(5),10)*1e3*.95-2e3*8:j=void 0,s.forEach(I=>{I.maxBitrate=j})),s},r.parseRtcpParameters=function(i){const s={},u=r.matchPrefix(i,"a=ssrc:").map(M=>r.parseSsrcMedia(M)).filter(M=>M.attribute==="cname")[0];u&&(s.cname=u.value,s.ssrc=u.ssrc);const g=r.matchPrefix(i,"a=rtcp-rsize");s.reducedSize=g.length>0,s.compound=g.length===0;const A=r.matchPrefix(i,"a=rtcp-mux");return s.mux=A.length>0,s},r.writeRtcpParameters=function(i){let s="";return i.reducedSize&&(s+=`a=rtcp-rsize\r
`),i.mux&&(s+=`a=rtcp-mux\r
`),i.ssrc!==void 0&&i.cname&&(s+="a=ssrc:"+i.ssrc+" cname:"+i.cname+`\r
`),s},r.parseMsid=function(i){let s;const u=r.matchPrefix(i,"a=msid:");if(u.length===1)return s=u[0].substring(7).split(" "),{stream:s[0],track:s[1]};const g=r.matchPrefix(i,"a=ssrc:").map(A=>r.parseSsrcMedia(A)).filter(A=>A.attribute==="msid");if(g.length>0)return s=g[0].value.split(" "),{stream:s[0],track:s[1]}},r.parseSctpDescription=function(i){const s=r.parseMLine(i),u=r.matchPrefix(i,"a=max-message-size:");let g;u.length>0&&(g=parseInt(u[0].substring(19),10)),isNaN(g)&&(g=65536);const A=r.matchPrefix(i,"a=sctp-port:");if(A.length>0)return{port:parseInt(A[0].substring(12),10),protocol:s.fmt,maxMessageSize:g};const M=r.matchPrefix(i,"a=sctpmap:");if(M.length>0){const b=M[0].substring(10).split(" ");return{port:parseInt(b[0],10),protocol:b[1],maxMessageSize:g}}},r.writeSctpDescription=function(i,s){let u=[];return i.protocol!=="DTLS/SCTP"?u=["m="+i.kind+" 9 "+i.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:u=["m="+i.kind+" 9 "+i.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&u.push("a=max-message-size:"+s.maxMessageSize+`\r
`),u.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,22)},r.writeSessionBoilerplate=function(i,s,u){let g;const A=s!==void 0?s:2;return i?g=i:g=r.generateSessionId(),`v=0\r
o=`+(u||"thisisadapterortc")+" "+g+" "+A+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},r.getDirection=function(i,s){const u=r.splitLines(i);for(let g=0;g<u.length;g++)switch(u[g]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return u[g].substring(2)}return s?r.getDirection(s):"sendrecv"},r.getKind=function(i){return r.splitLines(i)[0].split(" ")[0].substring(2)},r.isRejected=function(i){return i.split(" ",2)[1]==="0"},r.parseMLine=function(i){const u=r.splitLines(i)[0].substring(2).split(" ");return{kind:u[0],port:parseInt(u[1],10),protocol:u[2],fmt:u.slice(3).join(" ")}},r.parseOLine=function(i){const u=r.matchPrefix(i,"o=")[0].substring(2).split(" ");return{username:u[0],sessionId:u[1],sessionVersion:parseInt(u[2],10),netType:u[3],addressType:u[4],address:u[5]}},r.isValidSDP=function(i){if(typeof i!="string"||i.length===0)return!1;const s=r.splitLines(i);for(let u=0;u<s.length;u++)if(s[u].length<2||s[u].charAt(1)!=="=")return!1;return!0},o.exports=r})(Bf)),Bf.exports}var _g=hv();const Eo=vl(_g),pv=qy({__proto__:null,default:Eo},[_g]);function xc(o){if(!o.RTCIceCandidate||o.RTCIceCandidate&&"foundation"in o.RTCIceCandidate.prototype)return;const r=o.RTCIceCandidate;o.RTCIceCandidate=function(s){if(typeof s=="object"&&s.candidate&&s.candidate.indexOf("a=")===0&&(s=JSON.parse(JSON.stringify(s)),s.candidate=s.candidate.substring(2)),s.candidate&&s.candidate.length){const u=new r(s),g=Eo.parseCandidate(s.candidate);for(const A in g)A in u||Object.defineProperty(u,A,{value:g[A]});return u.toJSON=function(){return{candidate:u.candidate,sdpMid:u.sdpMid,sdpMLineIndex:u.sdpMLineIndex,usernameFragment:u.usernameFragment}},u}return new r(s)},o.RTCIceCandidate.prototype=r.prototype,qs(o,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new o.RTCIceCandidate(i.candidate),writable:"false"}),i))}function Gf(o){!o.RTCIceCandidate||o.RTCIceCandidate&&"relayProtocol"in o.RTCIceCandidate.prototype||qs(o,"icecandidate",r=>{if(r.candidate){const i=Eo.parseCandidate(r.candidate.candidate);i.type==="relay"&&(r.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[i.priority>>24])}return r})}function bc(o,r){if(!o.RTCPeerConnection)return;"sctp"in o.RTCPeerConnection.prototype||Object.defineProperty(o.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const i=function(M){if(!M||!M.sdp)return!1;const b=Eo.splitSections(M.sdp);return b.shift(),b.some(S=>{const _=Eo.parseMLine(S);return _&&_.kind==="application"&&_.protocol.indexOf("SCTP")!==-1})},s=function(M){const b=M.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(b===null||b.length<2)return-1;const S=parseInt(b[1],10);return S!==S?-1:S},u=function(M){let b=65536;return r.browser==="firefox"&&(r.version<57?M===-1?b=16384:b=2147483637:r.version<60?b=r.version===57?65535:65536:b=2147483637),b},g=function(M,b){let S=65536;r.browser==="firefox"&&r.version===57&&(S=65535);const _=Eo.matchPrefix(M.sdp,"a=max-message-size:");return _.length>0?S=parseInt(_[0].substring(19),10):r.browser==="firefox"&&b!==-1&&(S=2147483637),S},A=o.RTCPeerConnection.prototype.setRemoteDescription;o.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r.browser==="chrome"&&r.version>=76){const{sdpSemantics:b}=this.getConfiguration();b==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const b=s(arguments[0]),S=u(b),_=g(arguments[0],b);let j;S===0&&_===0?j=Number.POSITIVE_INFINITY:S===0||_===0?j=Math.max(S,_):j=Math.min(S,_);const I={};Object.defineProperty(I,"maxMessageSize",{get(){return j}}),this._sctp=I}return A.apply(this,arguments)}}function Cc(o){if(!(o.RTCPeerConnection&&"createDataChannel"in o.RTCPeerConnection.prototype))return;function r(s,u){const g=s.send;s.send=function(){const M=arguments[0],b=M.length||M.size||M.byteLength;if(s.readyState==="open"&&u.sctp&&b>u.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+u.sctp.maxMessageSize+" bytes)");return g.apply(s,arguments)}}const i=o.RTCPeerConnection.prototype.createDataChannel;o.RTCPeerConnection.prototype.createDataChannel=function(){const u=i.apply(this,arguments);return r(u,this),u},qs(o,"datachannel",s=>(r(s.channel,s.target),s))}function Vf(o){if(!o.RTCPeerConnection||"connectionState"in o.RTCPeerConnection.prototype)return;const r=o.RTCPeerConnection.prototype;Object.defineProperty(r,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(r,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{const s=r[i];r[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=u=>{const g=u.target;if(g._lastConnectionState!==g.connectionState){g._lastConnectionState=g.connectionState;const A=new Event("connectionstatechange",u);g.dispatchEvent(A)}return u},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function Ff(o,r){if(!o.RTCPeerConnection||r.browser==="chrome"&&r.version>=71||r.browser==="safari"&&r._safariVersion>=13.1)return;const i=o.RTCPeerConnection.prototype.setRemoteDescription;o.RTCPeerConnection.prototype.setRemoteDescription=function(u){if(u&&u.sdp&&u.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const g=u.sdp.split(`
`).filter(A=>A.trim()!=="a=extmap-allow-mixed").join(`
`);o.RTCSessionDescription&&u instanceof o.RTCSessionDescription?arguments[0]=new o.RTCSessionDescription({type:u.type,sdp:g}):u.sdp=g}return i.apply(this,arguments)}}function wc(o,r){if(!(o.RTCPeerConnection&&o.RTCPeerConnection.prototype))return;const i=o.RTCPeerConnection.prototype.addIceCandidate;!i||i.length===0||(o.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(r.browser==="chrome"&&r.version<78||r.browser==="firefox"&&r.version<68||r.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Sc(o,r){if(!(o.RTCPeerConnection&&o.RTCPeerConnection.prototype))return;const i=o.RTCPeerConnection.prototype.setLocalDescription;!i||i.length===0||(o.RTCPeerConnection.prototype.setLocalDescription=function(){let u=arguments[0]||{};if(typeof u!="object"||u.type&&u.sdp)return i.apply(this,arguments);if(u={type:u.type,sdp:u.sdp},!u.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":u.type="offer";break;default:u.type="answer";break}return u.sdp||u.type!=="offer"&&u.type!=="answer"?i.apply(this,[u]):(u.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(A=>i.apply(this,[A]))})}const gv=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Ff,shimAddIceCandidateNullOrEmpty:wc,shimConnectionState:Vf,shimMaxMessageSize:bc,shimParameterlessSetLocalDescription:Sc,shimRTCIceCandidate:xc,shimRTCIceCandidateRelayProtocol:Gf,shimSendThrowTypeError:Cc},Symbol.toStringTag,{value:"Module"}));function mv({window:o}={},r={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const i=$p,s=fv(o),u={browserDetails:s,commonShim:gv,extractVersion:gl,disableLog:cv,disableWarnings:uv,sdp:pv};switch(s.browser){case"chrome":if(!Tp||!Yf||!r.shimChrome)return i("Chrome shim is not included in this adapter release."),u;if(s.version===null)return i("Chrome shim can not determine version, not shimming."),u;i("adapter.js shimming chrome."),u.browserShim=Tp,wc(o,s),Sc(o),tg(o,s),ng(o),Yf(o,s),rg(o),og(o,s),ag(o),ig(o),lg(o,s),xc(o),Gf(o),Vf(o),bc(o,s),Cc(o),Ff(o,s);break;case"firefox":if(!Mp||!Kf||!r.shimFirefox)return i("Firefox shim is not included in this adapter release."),u;i("adapter.js shimming firefox."),u.browserShim=Mp,wc(o,s),Sc(o),cg(o,s),Kf(o,s),ug(o),hg(o),fg(o),dg(o),pg(o),gg(o),mg(o),yg(o),vg(o),xc(o),Vf(o),bc(o,s),Cc(o);break;case"safari":if(!_p||!r.shimSafari)return i("Safari shim is not included in this adapter release."),u;i("adapter.js shimming safari."),u.browserShim=_p,wc(o,s),Sc(o),Ag(o),Tg(o),Cg(o),xg(o),bg(o),Eg(o),wg(o),Mg(o),xc(o),Gf(o),bc(o,s),Cc(o),Ff(o,s);break;default:i("Unsupported browser!");break}return u}const Bp=mv({window:typeof window>"u"?void 0:window});function Us(o,r,i,s){Object.defineProperty(o,r,{get:i,set:s,enumerable:!0,configurable:!0})}class kg{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=r=>{const i=[],s=r.byteLength,u=Math.ceil(s/this.chunkedMTU);let g=0,A=0;for(;A<s;){const M=Math.min(s,A+this.chunkedMTU),b=r.slice(A,M),S={__peerData:this._dataCount,n:g,data:b,total:u};i.push(S),A=M,g++}return this._dataCount++,i}}}function yv(o){let r=0;for(const u of o)r+=u.byteLength;const i=new Uint8Array(r);let s=0;for(const u of o)i.set(u,s),s+=u.byteLength;return i}const Rf=Bp.default||Bp,pl=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const o=this.getBrowser(),r=this.getVersion();return this.supportedBrowsers.includes(o)?o==="chrome"?r>=this.minChromeVersion:o==="firefox"?r>=this.minFirefoxVersion:o==="safari"?!this.isIOS&&r>=this.minSafariVersion:!1:!1}getBrowser(){return Rf.browserDetails.browser}getVersion(){return Rf.browserDetails.version||0}isUnifiedPlanSupported(){const o=this.getBrowser(),r=Rf.browserDetails.version||0;if(o==="chrome"&&r<this.minChromeVersion)return!1;if(o==="firefox"&&r>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let i,s=!1;try{i=new RTCPeerConnection,i.addTransceiver("audio"),s=!0}catch{}finally{i&&i.close()}return s}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},vv=o=>!o||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(o),Bg=()=>Math.random().toString(36).slice(2),Rp={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class xv extends kg{noop(){}blobToArrayBuffer(r,i){const s=new FileReader;return s.onload=function(u){u.target&&i(u.target.result)},s.readAsArrayBuffer(r),s}binaryStringToArrayBuffer(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s)&255;return i.buffer}isSecure(){return location.protocol==="https:"}constructor(...r){super(...r),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Rp,this.browser=pl.getBrowser(),this.browserVersion=pl.getVersion(),this.pack=Zp,this.unpack=Jp,this.supports=(function(){const i={browser:pl.isBrowserSupported(),webRTC:pl.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!i.webRTC)return i;let s;try{s=new RTCPeerConnection(Rp),i.audioVideo=!0;let u;try{u=s.createDataChannel("_PEERJSTEST",{ordered:!0}),i.data=!0,i.reliable=!!u.ordered;try{u.binaryType="blob",i.binaryBlob=!pl.isIOS}catch{}}catch{}finally{u&&u.close()}}catch{}finally{s&&s.close()}return i})(),this.validateId=vv,this.randomToken=Bg}}const sa=new xv,bv="PeerJS: ";class Cv{get logLevel(){return this._logLevel}set logLevel(r){this._logLevel=r}log(...r){this._logLevel>=3&&this._print(3,...r)}warn(...r){this._logLevel>=2&&this._print(2,...r)}error(...r){this._logLevel>=1&&this._print(1,...r)}setLogFunction(r){this._print=r}_print(r,...i){const s=[bv,...i];for(const u in s)s[u]instanceof Error&&(s[u]="("+s[u].name+") "+s[u].message);r>=3?console.log(...s):r>=2?console.warn("WARNING",...s):r>=1&&console.error("ERROR",...s)}constructor(){this._logLevel=0}}var Et=new Cv,ld={},wv=Object.prototype.hasOwnProperty,Pr="~";function yl(){}Object.create&&(yl.prototype=Object.create(null),new yl().__proto__||(Pr=!1));function Sv(o,r,i){this.fn=o,this.context=r,this.once=i||!1}function Rg(o,r,i,s,u){if(typeof i!="function")throw new TypeError("The listener must be a function");var g=new Sv(i,s||o,u),A=Pr?Pr+r:r;return o._events[A]?o._events[A].fn?o._events[A]=[o._events[A],g]:o._events[A].push(g):(o._events[A]=g,o._eventsCount++),o}function Ac(o,r){--o._eventsCount===0?o._events=new yl:delete o._events[r]}function Lr(){this._events=new yl,this._eventsCount=0}Lr.prototype.eventNames=function(){var r=[],i,s;if(this._eventsCount===0)return r;for(s in i=this._events)wv.call(i,s)&&r.push(Pr?s.slice(1):s);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(i)):r};Lr.prototype.listeners=function(r){var i=Pr?Pr+r:r,s=this._events[i];if(!s)return[];if(s.fn)return[s.fn];for(var u=0,g=s.length,A=new Array(g);u<g;u++)A[u]=s[u].fn;return A};Lr.prototype.listenerCount=function(r){var i=Pr?Pr+r:r,s=this._events[i];return s?s.fn?1:s.length:0};Lr.prototype.emit=function(r,i,s,u,g,A){var M=Pr?Pr+r:r;if(!this._events[M])return!1;var b=this._events[M],S=arguments.length,_,j;if(b.fn){switch(b.once&&this.removeListener(r,b.fn,void 0,!0),S){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,i),!0;case 3:return b.fn.call(b.context,i,s),!0;case 4:return b.fn.call(b.context,i,s,u),!0;case 5:return b.fn.call(b.context,i,s,u,g),!0;case 6:return b.fn.call(b.context,i,s,u,g,A),!0}for(j=1,_=new Array(S-1);j<S;j++)_[j-1]=arguments[j];b.fn.apply(b.context,_)}else{var I=b.length,X;for(j=0;j<I;j++)switch(b[j].once&&this.removeListener(r,b[j].fn,void 0,!0),S){case 1:b[j].fn.call(b[j].context);break;case 2:b[j].fn.call(b[j].context,i);break;case 3:b[j].fn.call(b[j].context,i,s);break;case 4:b[j].fn.call(b[j].context,i,s,u);break;default:if(!_)for(X=1,_=new Array(S-1);X<S;X++)_[X-1]=arguments[X];b[j].fn.apply(b[j].context,_)}}return!0};Lr.prototype.on=function(r,i,s){return Rg(this,r,i,s,!1)};Lr.prototype.once=function(r,i,s){return Rg(this,r,i,s,!0)};Lr.prototype.removeListener=function(r,i,s,u){var g=Pr?Pr+r:r;if(!this._events[g])return this;if(!i)return Ac(this,g),this;var A=this._events[g];if(A.fn)A.fn===i&&(!u||A.once)&&(!s||A.context===s)&&Ac(this,g);else{for(var M=0,b=[],S=A.length;M<S;M++)(A[M].fn!==i||u&&!A[M].once||s&&A[M].context!==s)&&b.push(A[M]);b.length?this._events[g]=b.length===1?b[0]:b:Ac(this,g)}return this};Lr.prototype.removeAllListeners=function(r){var i;return r?(i=Pr?Pr+r:r,this._events[i]&&Ac(this,i)):(this._events=new yl,this._eventsCount=0),this};Lr.prototype.off=Lr.prototype.removeListener;Lr.prototype.addListener=Lr.prototype.on;Lr.prefixed=Pr;Lr.EventEmitter=Lr;ld=Lr;var Ls={};Us(Ls,"ConnectionType",()=>os);Us(Ls,"PeerErrorType",()=>gr);Us(Ls,"BaseConnectionErrorType",()=>Hf);Us(Ls,"DataConnectionErrorType",()=>cd);Us(Ls,"SerializationType",()=>Uc);Us(Ls,"SocketEventType",()=>ss);Us(Ls,"ServerMessageType",()=>Ur);var os=(function(o){return o.Data="data",o.Media="media",o})({}),gr=(function(o){return o.BrowserIncompatible="browser-incompatible",o.Disconnected="disconnected",o.InvalidID="invalid-id",o.InvalidKey="invalid-key",o.Network="network",o.PeerUnavailable="peer-unavailable",o.SslUnavailable="ssl-unavailable",o.ServerError="server-error",o.SocketError="socket-error",o.SocketClosed="socket-closed",o.UnavailableID="unavailable-id",o.WebRTC="webrtc",o})({}),Hf=(function(o){return o.NegotiationFailed="negotiation-failed",o.ConnectionClosed="connection-closed",o})({}),cd=(function(o){return o.NotOpenYet="not-open-yet",o.MessageToBig="message-too-big",o})({}),Uc=(function(o){return o.Binary="binary",o.BinaryUTF8="binary-utf8",o.JSON="json",o.None="raw",o})({}),ss=(function(o){return o.Message="message",o.Disconnected="disconnected",o.Error="error",o.Close="close",o})({}),Ur=(function(o){return o.Heartbeat="HEARTBEAT",o.Candidate="CANDIDATE",o.Offer="OFFER",o.Answer="ANSWER",o.Open="OPEN",o.Error="ERROR",o.IdTaken="ID-TAKEN",o.InvalidKey="INVALID-KEY",o.Leave="LEAVE",o.Expire="EXPIRE",o})({});const Ng="1.5.5";class Av extends ld.EventEmitter{constructor(r,i,s,u,g,A=5e3){super(),this.pingInterval=A,this._disconnected=!0,this._messagesQueue=[];const M=r?"wss://":"ws://";this._baseUrl=M+i+":"+s+u+"peerjs?key="+g}start(r,i){this._id=r;const s=`${this._baseUrl}&id=${r}&token=${i}`;this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+Ng),this._disconnected=!1,this._socket.onmessage=u=>{let g;try{g=JSON.parse(u.data),Et.log("Server message received:",g)}catch{Et.log("Invalid server message",u.data);return}this.emit(ss.Message,g)},this._socket.onclose=u=>{this._disconnected||(Et.log("Socket closed.",u),this._cleanup(),this._disconnected=!0,this.emit(ss.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Et.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Et.log("Cannot send heartbeat, because socket closed");return}const r=JSON.stringify({type:Ur.Heartbeat});this._socket.send(r),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const r=[...this._messagesQueue];this._messagesQueue=[];for(const i of r)this.send(i)}send(r){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(r);return}if(!r.type){this.emit(ss.Error,"Invalid message");return}if(!this._wsOpen())return;const i=JSON.stringify(r);this._socket.send(i)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Dg{constructor(r){this.connection=r}startConnection(r){const i=this._startPeerConnection();if(this.connection.peerConnection=i,this.connection.type===os.Media&&r._stream&&this._addTracksToConnection(r._stream,i),r.originator){const s=this.connection,u={ordered:!!r.reliable},g=i.createDataChannel(s.label,u);s._initializeDataChannel(g),this._makeOffer()}else this.handleSDP("OFFER",r.sdp)}_startPeerConnection(){Et.log("Creating RTCPeerConnection.");const r=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(r),r}_setupListeners(r){const i=this.connection.peer,s=this.connection.connectionId,u=this.connection.type,g=this.connection.provider;Et.log("Listening for ICE candidates."),r.onicecandidate=A=>{!A.candidate||!A.candidate.candidate||(Et.log(`Received ICE candidates for ${i}:`,A.candidate),g.socket.send({type:Ur.Candidate,payload:{candidate:A.candidate,type:u,connectionId:s},dst:i}))},r.oniceconnectionstatechange=()=>{switch(r.iceConnectionState){case"failed":Et.log("iceConnectionState is failed, closing connections to "+i),this.connection.emitError(Hf.NegotiationFailed,"Negotiation of connection to "+i+" failed."),this.connection.close();break;case"closed":Et.log("iceConnectionState is closed, closing connections to "+i),this.connection.emitError(Hf.ConnectionClosed,"Connection to "+i+" closed."),this.connection.close();break;case"disconnected":Et.log("iceConnectionState changed to disconnected on the connection with "+i);break;case"completed":r.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",r.iceConnectionState)},Et.log("Listening for data channel"),r.ondatachannel=A=>{Et.log("Received data channel");const M=A.channel;g.getConnection(i,s)._initializeDataChannel(M)},Et.log("Listening for remote stream"),r.ontrack=A=>{Et.log("Received remote stream");const M=A.streams[0],b=g.getConnection(i,s);if(b.type===os.Media){const S=b;this._addStreamToMediaConnection(M,S)}}}cleanup(){Et.log("Cleaning up PeerConnection to "+this.connection.peer);const r=this.connection.peerConnection;if(!r)return;this.connection.peerConnection=null,r.onicecandidate=r.oniceconnectionstatechange=r.ondatachannel=r.ontrack=()=>{};const i=r.signalingState!=="closed";let s=!1;const u=this.connection.dataChannel;u&&(s=!!u.readyState&&u.readyState!=="closed"),(i||s)&&r.close()}async _makeOffer(){const r=this.connection.peerConnection,i=this.connection.provider;try{const s=await r.createOffer(this.connection.options.constraints);Et.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await r.setLocalDescription(s),Et.log("Set localDescription:",s,`for:${this.connection.peer}`);let u={sdp:s,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===os.Data){const g=this.connection;u={...u,label:g.label,reliable:g.reliable,serialization:g.serialization}}i.socket.send({type:Ur.Offer,payload:u,dst:this.connection.peer})}catch(u){u!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(i.emitError(gr.WebRTC,u),Et.log("Failed to setLocalDescription, ",u))}}catch(s){i.emitError(gr.WebRTC,s),Et.log("Failed to createOffer, ",s)}}async _makeAnswer(){const r=this.connection.peerConnection,i=this.connection.provider;try{const s=await r.createAnswer();Et.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await r.setLocalDescription(s),Et.log("Set localDescription:",s,`for:${this.connection.peer}`),i.socket.send({type:Ur.Answer,payload:{sdp:s,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(u){i.emitError(gr.WebRTC,u),Et.log("Failed to setLocalDescription, ",u)}}catch(s){i.emitError(gr.WebRTC,s),Et.log("Failed to create answer, ",s)}}async handleSDP(r,i){i=new RTCSessionDescription(i);const s=this.connection.peerConnection,u=this.connection.provider;Et.log("Setting remote description",i);const g=this;try{await s.setRemoteDescription(i),Et.log(`Set remoteDescription:${r} for:${this.connection.peer}`),r==="OFFER"&&await g._makeAnswer()}catch(A){u.emitError(gr.WebRTC,A),Et.log("Failed to setRemoteDescription, ",A)}}async handleCandidate(r){Et.log("handleCandidate:",r);try{await this.connection.peerConnection.addIceCandidate(r),Et.log(`Added ICE candidate for:${this.connection.peer}`)}catch(i){this.connection.provider.emitError(gr.WebRTC,i),Et.log("Failed to handleCandidate, ",i)}}_addTracksToConnection(r,i){if(Et.log(`add tracks from stream ${r.id} to peer connection`),!i.addTrack)return Et.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");r.getTracks().forEach(s=>{i.addTrack(s,r)})}_addStreamToMediaConnection(r,i){Et.log(`add stream ${r.id} to media connection ${i.connectionId}`),i.addStream(r)}}class jg extends ld.EventEmitter{emitError(r,i){Et.error("Error:",i),this.emit("error",new Ev(`${r}`,i))}}class Ev extends Error{constructor(r,i){typeof i=="string"?super(i):(super(),Object.assign(this,i)),this.type=r}}class Og extends jg{get open(){return this._open}constructor(r,i,s){super(),this.peer=r,this.provider=i,this.options=s,this._open=!1,this.metadata=s.metadata}}class Nc extends Og{static#e=this.ID_PREFIX="mc_";get type(){return os.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(r,i,s){super(r,i,s),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Nc.ID_PREFIX+sa.randomToken(),this._negotiator=new Dg(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(r){this.dataChannel=r,this.dataChannel.onopen=()=>{Et.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Et.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(r){Et.log("Receiving stream",r),this._remoteStream=r,super.emit("stream",r)}handleMessage(r){const i=r.type,s=r.payload;switch(r.type){case Ur.Answer:this._negotiator.handleSDP(i,s.sdp),this._open=!0;break;case Ur.Candidate:this._negotiator.handleCandidate(s.candidate);break;default:Et.warn(`Unrecognized message type:${i} from peer:${this.peer}`);break}}answer(r,i={}){if(this._localStream){Et.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=r,i&&i.sdpTransform&&(this.options.sdpTransform=i.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:r});const s=this.provider._getMessages(this.connectionId);for(const u of s)this.handleMessage(u);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class Tv{constructor(r){this._options=r}_buildRequest(r){const i=this._options.secure?"https":"http",{host:s,port:u,path:g,key:A}=this._options,M=new URL(`${i}://${s}:${u}${g}${A}/${r}`);return M.searchParams.set("ts",`${Date.now()}${Math.random()}`),M.searchParams.set("version",Ng),fetch(M.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const r=await this._buildRequest("id");if(r.status!==200)throw new Error(`Error. Status:${r.status}`);return r.text()}catch(r){Et.error("Error retrieving ID",r);let i="";throw this._options.path==="/"&&this._options.host!==sa.CLOUD_HOST&&(i=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+i)}}async listAllPeers(){try{const r=await this._buildRequest("peers");if(r.status!==200){if(r.status===401){let i="";throw this._options.host===sa.CLOUD_HOST?i="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":i="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+i)}throw new Error(`Error. Status:${r.status}`)}return r.json()}catch(r){throw Et.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r)}}}class Dc extends Og{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return os.Data}constructor(r,i,s){super(r,i,s),this.connectionId=this.options.connectionId||Dc.ID_PREFIX+Bg(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Dg(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(r){this.dataChannel=r,this.dataChannel.onopen=()=>{Et.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=i=>{Et.log(`DC#${this.connectionId} dc onmessage:`,i.data)},this.dataChannel.onclose=()=>{Et.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(r){if(r?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(r,i=!1){if(!this.open){this.emitError(cd.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(r,i)}async handleMessage(r){const i=r.payload;switch(r.type){case Ur.Answer:await this._negotiator.handleSDP(r.type,i.sdp);break;case Ur.Candidate:await this._negotiator.handleCandidate(i.candidate);break;default:Et.warn("Unrecognized message type:",r.type,"from peer:",this.peer);break}}}class ud extends Dc{get bufferSize(){return this._bufferSize}_initializeDataChannel(r){super._initializeDataChannel(r),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",i=>this._handleDataMessage(i))}_bufferedSend(r){(this._buffering||!this._trySend(r))&&(this._buffer.push(r),this._bufferSize=this._buffer.length)}_trySend(r){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Dc.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(r)}catch(i){return Et.error(`DC#:${this.connectionId} Error when sending:`,i),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const r=this._buffer[0];this._trySend(r)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(r){if(r?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...r){super(...r),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Nf extends ud{close(r){super.close(r),this._chunkedData={}}constructor(r,i,s){super(r,i,s),this.chunker=new kg,this.serialization=Uc.Binary,this._chunkedData={}}_handleDataMessage({data:r}){const i=Jp(r),s=i.__peerData;if(s){if(s.type==="close"){this.close();return}this._handleChunk(i);return}this.emit("data",i)}_handleChunk(r){const i=r.__peerData,s=this._chunkedData[i]||{data:[],count:0,total:r.total};if(s.data[r.n]=new Uint8Array(r.data),s.count++,this._chunkedData[i]=s,s.total===s.count){delete this._chunkedData[i];const u=yv(s.data);this._handleDataMessage({data:u})}}_send(r,i){const s=Zp(r);if(s instanceof Promise)return this._send_blob(s);if(!i&&s.byteLength>this.chunker.chunkedMTU){this._sendChunks(s);return}this._bufferedSend(s)}async _send_blob(r){const i=await r;if(i.byteLength>this.chunker.chunkedMTU){this._sendChunks(i);return}this._bufferedSend(i)}_sendChunks(r){const i=this.chunker.chunk(r);Et.log(`DC#${this.connectionId} Try to send ${i.length} chunks...`);for(const s of i)this.send(s,!0)}}class Mv extends ud{_handleDataMessage({data:r}){super.emit("data",r)}_send(r,i){this._bufferedSend(r)}constructor(...r){super(...r),this.serialization=Uc.None}}class _v extends ud{_handleDataMessage({data:r}){const i=this.parse(this.decoder.decode(r)),s=i.__peerData;if(s&&s.type==="close"){this.close();return}this.emit("data",i)}_send(r,i){const s=this.encoder.encode(this.stringify(r));if(s.byteLength>=sa.chunkedMTU){this.emitError(cd.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(s)}constructor(...r){super(...r),this.serialization=Uc.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class fd extends jg{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const r=Object.create(null);for(const[i,s]of this._connections)r[i]=s;return r}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(r,i){super(),this._serializers={raw:Mv,json:_v,binary:Nf,"binary-utf8":Nf,default:Nf},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let s;if(r&&r.constructor==Object?i=r:r&&(s=r.toString()),i={debug:0,host:sa.CLOUD_HOST,port:sa.CLOUD_PORT,path:"/",key:fd.DEFAULT_KEY,token:sa.randomToken(),config:sa.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...i},this._options=i,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==sa.CLOUD_HOST?this._options.secure=sa.isSecure():this._options.host==sa.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Et.setLogFunction(this._options.logFunction),Et.logLevel=this._options.debug||0,this._api=new Tv(i),this._socket=this._createServerConnection(),!sa.supports.audioVideo&&!sa.supports.data){this._delayedAbort(gr.BrowserIncompatible,"The current browser does not support WebRTC");return}if(s&&!sa.validateId(s)){this._delayedAbort(gr.InvalidID,`ID "${s}" is invalid`);return}s?this._initialize(s):this._api.retrieveId().then(u=>this._initialize(u)).catch(u=>this._abort(gr.ServerError,u))}_createServerConnection(){const r=new Av(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return r.on(ss.Message,i=>{this._handleMessage(i)}),r.on(ss.Error,i=>{this._abort(gr.SocketError,i)}),r.on(ss.Disconnected,()=>{this.disconnected||(this.emitError(gr.Network,"Lost connection to server."),this.disconnect())}),r.on(ss.Close,()=>{this.disconnected||this._abort(gr.SocketClosed,"Underlying socket is already closed.")}),r}_initialize(r){this._id=r,this.socket.start(r,this._options.token)}_handleMessage(r){const i=r.type,s=r.payload,u=r.src;switch(i){case Ur.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Ur.Error:this._abort(gr.ServerError,s.msg);break;case Ur.IdTaken:this._abort(gr.UnavailableID,`ID "${this.id}" is taken`);break;case Ur.InvalidKey:this._abort(gr.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Ur.Leave:Et.log(`Received leave message from ${u}`),this._cleanupPeer(u),this._connections.delete(u);break;case Ur.Expire:this.emitError(gr.PeerUnavailable,`Could not connect to peer ${u}`);break;case Ur.Offer:{const g=s.connectionId;let A=this.getConnection(u,g);if(A&&(A.close(),Et.warn(`Offer received for existing Connection ID:${g}`)),s.type===os.Media){const b=new Nc(u,this,{connectionId:g,_payload:s,metadata:s.metadata});A=b,this._addConnection(u,A),this.emit("call",b)}else if(s.type===os.Data){const b=new this._serializers[s.serialization](u,this,{connectionId:g,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});A=b,this._addConnection(u,A),this.emit("connection",b)}else{Et.warn(`Received malformed connection type:${s.type}`);return}const M=this._getMessages(g);for(const b of M)A.handleMessage(b);break}default:{if(!s){Et.warn(`You received a malformed message from ${u} of type ${i}`);return}const g=s.connectionId,A=this.getConnection(u,g);A&&A.peerConnection?A.handleMessage(r):g?this._storeMessage(g,r):Et.warn("You received an unrecognized message:",r);break}}}_storeMessage(r,i){this._lostMessages.has(r)||this._lostMessages.set(r,[]),this._lostMessages.get(r).push(i)}_getMessages(r){const i=this._lostMessages.get(r);return i?(this._lostMessages.delete(r),i):[]}connect(r,i={}){if(i={serialization:"default",...i},this.disconnected){Et.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(gr.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const s=new this._serializers[i.serialization](r,this,i);return this._addConnection(r,s),s}call(r,i,s={}){if(this.disconnected){Et.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(gr.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!i){Et.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const u=new Nc(r,this,{...s,_stream:i});return this._addConnection(r,u),u}_addConnection(r,i){Et.log(`add connection ${i.type}:${i.connectionId} to peerId:${r}`),this._connections.has(r)||this._connections.set(r,[]),this._connections.get(r).push(i)}_removeConnection(r){const i=this._connections.get(r.peer);if(i){const s=i.indexOf(r);s!==-1&&i.splice(s,1)}this._lostMessages.delete(r.connectionId)}getConnection(r,i){const s=this._connections.get(r);if(!s)return null;for(const u of s)if(u.connectionId===i)return u;return null}_delayedAbort(r,i){setTimeout(()=>{this._abort(r,i)},0)}_abort(r,i){Et.error("Aborting!"),this.emitError(r,i),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Et.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const r of this._connections.keys())this._cleanupPeer(r),this._connections.delete(r);this.socket.removeAllListeners()}_cleanupPeer(r){const i=this._connections.get(r);if(i)for(const s of i)s.close()}disconnect(){if(this.disconnected)return;const r=this.id;Et.log(`Disconnect peer with ID:${r}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=r,this._id=null,this.emit("disconnected",r)}reconnect(){if(this.disconnected&&!this.destroyed)Et.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Et.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(r=i=>{}){this._api.listAllPeers().then(i=>r(i)).catch(i=>this._abort(gr.ServerError,i))}}var kv=fd;class Bv{name="PeerJS";peer=null;userIdHash=null;handshakeCallbacks=new Set;customSignalCallbacks=new Set;connections=new Map;connected=!1;async initialize(r){this.userIdHash=r;for(let i=1;i<=3;i++)try{await this.attemptConnection(r);return}catch(s){if(s.type==="unavailable-id"&&i<3){console.warn(`[${this.name}] ID taken (stale connection), retrying in 1s... (${i}/3)`),await new Promise(u=>setTimeout(u,1e3));continue}throw s}}attemptConnection(r){return new Promise((i,s)=>{this.peer&&(this.peer.destroy(),this.peer=null),this.peer=new kv(r,{host:"0.peerjs.com",port:443,path:"/",secure:!0,debug:0});let u=!1;const g=A=>{console.error(`[${this.name}] Initialization error:`,A),(A.type==="network"||A.type==="server-error"||A.type==="socket-error"||A.type==="socket-closed")&&(this.connected=!1),u||(u=!0,this.peer?.off("error",g),s(A))};this.peer.on("error",g),this.peer.on("open",A=>{this.connected=!0,console.log(`[${this.name}]  Connected with ID:`,A.substring(0,8)+"..."),u||(u=!0,this.peer?.off("error",g),this.setupRuntimeErrorHandler(),i())}),this.peer.on("connection",A=>{this.setupConnection(A)}),this.peer.on("disconnected",()=>{console.warn(`[${this.name}]  Disconnected from server`),this.connected=!1,setTimeout(()=>{this.peer&&!this.peer.destroyed&&(console.log(`[${this.name}] Reconnecting...`),this.peer.reconnect())},1e3)}),setTimeout(()=>{!this.connected&&!u&&(u=!0,s(new Error("PeerJS connection timeout")))},1e4)})}setupRuntimeErrorHandler(){this.peer&&this.peer.on("error",r=>{console.error(`[${this.name}] Runtime error:`,r),(r.type==="network"||r.type==="server-error"||r.type==="socket-error"||r.type==="socket-closed")&&(console.warn(`[${this.name}] Server connection error, marking disconnected`),this.connected=!1)})}async sendHandshakeMessage(r,i){await this.sendMessage(r,{type:"handshake",message:i})}async sendCustomSignal(r,i){await this.sendMessage(r,{type:"custom",signal:i})}async sendMessage(r,i){if(!this.peer||!this.userIdHash)throw new Error("Not initialized");if(!this.connected)throw new Error("Not connected to PeerJS server");try{let s=this.connections.get(r);(!s||s.open===!1)&&(s=this.peer.connect(r,{reliable:!0,serialization:"json"}),this.setupConnection(s),await new Promise((u,g)=>{const A=setTimeout(()=>{g(new Error("Connection timeout"))},5e3);s.on("open",()=>{clearTimeout(A),u()}),s.on("error",M=>{clearTimeout(A),g(M)})})),s.send(i),console.log(`[${this.name}] Sent ${i.type} to:`,r.substring(0,8))}catch(s){throw console.error(`[${this.name}] Failed to send message:`,s),s}}onHandshakeMessage(r){return this.handshakeCallbacks.add(r),()=>{this.handshakeCallbacks.delete(r)}}onCustomSignal(r){return this.customSignalCallbacks.add(r),()=>{this.customSignalCallbacks.delete(r)}}isConnected(){return this.connected&&this.peer!==null}setupConnection(r){const i=r.peer;r.on("open",()=>{this.connections.set(i,r),console.log(`[${this.name}] Connection opened with:`,i.substring(0,8))}),r.on("data",s=>{s&&s.type==="handshake"&&s.message?(console.log(`[${this.name}] Received handshake from:`,i.substring(0,8)),this.handshakeCallbacks.forEach(u=>{u(i,s.message)})):s&&s.type==="custom"&&s.signal&&(console.log(`[${this.name}] Received custom signal from:`,i.substring(0,8)),this.customSignalCallbacks.forEach(u=>{u(i,s.signal)}))}),r.on("close",()=>{this.connections.delete(i),console.log(`[${this.name}] Connection closed with:`,i.substring(0,8))}),r.on("error",s=>{console.error(`[${this.name}] Connection error with ${i}:`,s),this.connections.delete(i)})}destroy(){this.connections.forEach(r=>{r.close()}),this.connections.clear(),this.peer&&(this.peer.destroy(),this.peer=null),this.handshakeCallbacks.clear(),this.customSignalCallbacks.clear(),this.connected=!1,this.userIdHash=null,console.log(`[${this.name}] Destroyed`)}}class Rv{services=[];handshakeMessageCallbacks=new Set;customSignalCallbacks=new Set;initializedUserId=null;initializationPromise=null;async initialize(r,i=av){if(this.initializedUserId===r&&this.services.length>0){console.log("[SignalingManager] Already initialized for this user, skipping");return}if(this.initializationPromise)return console.log("[SignalingManager] Initialization already in progress, waiting..."),this.initializationPromise;this.initializedUserId&&this.initializedUserId!==r&&(console.log("[SignalingManager] Switching users, cleaning up old signaling"),this.destroyInternal()),this.initializedUserId=r;const s=[];if(i.peerjs?.enabled!==!1){const u=new Bv;s.push(u.initialize(r).then(()=>{this.services.push(u),this.setupServiceListeners(u),console.log("[SignalingManager]  PeerJS enabled")}).catch(g=>{console.warn("[SignalingManager] PeerJS failed:",g)}))}this.initializationPromise=Promise.allSettled(s).then(()=>{if(this.services.length===0)throw this.initializedUserId=null,this.initializationPromise=null,new Error("No signaling services available");console.log(`[SignalingManager]  Initialized with ${this.services.length} service(s) for user:`,r.substring(0,8)),this.initializationPromise=null}),await this.initializationPromise}async sendHandshakeMessage(r,i){if(this.services.length===0)throw new Error("No signaling services available");const s=this.services.map(A=>A.sendHandshakeMessage(r,i).then(()=>{console.log(`[SignalingManager]  Sent handshake via ${A.name}`)}).catch(M=>{console.warn(`[SignalingManager] Failed to send handshake via ${A.name}:`,M)})),g=(await Promise.allSettled(s)).filter(A=>A.status==="fulfilled").length;if(g===0)throw new Error("Failed to send handshake through any service");console.log(`[SignalingManager] Handshake sent via ${g}/${this.services.length} service(s)`)}async sendCustomSignal(r,i){if(this.services.length===0)throw new Error("No signaling services available");const s=this.services.map(A=>A.sendCustomSignal(r,i).then(()=>{console.log(`[SignalingManager]  Sent custom signal via ${A.name}`)}).catch(M=>{console.warn(`[SignalingManager] Failed to send custom signal via ${A.name}:`,M)})),g=(await Promise.allSettled(s)).filter(A=>A.status==="fulfilled").length;if(g===0)throw new Error("Failed to send custom signal through any service");console.log(`[SignalingManager] Custom signal sent via ${g}/${this.services.length} service(s)`)}onCustomSignal(r){return this.customSignalCallbacks.add(r),()=>{this.customSignalCallbacks.delete(r)}}onHandshakeMessage(r){return this.handshakeMessageCallbacks.add(r),()=>{this.handshakeMessageCallbacks.delete(r)}}getActiveServices(){return this.services.filter(r=>r.isConnected()).map(r=>r.name)}isConnected(){return this.services.some(r=>r.isConnected())}isInitializedForUser(r){return this.initializedUserId===r&&this.services.length>0}destroy(){console.log("[SignalingManager] Destroy called - cleaning up signaling"),this.destroyInternal()}setupServiceListeners(r){r.onHandshakeMessage((i,s)=>{console.log(`[SignalingManager] Handshake received from ${i.substring(0,8)} via ${r.name}`),this.handshakeMessageCallbacks.forEach(u=>{u(i,s)})}),r.onCustomSignal((i,s)=>{console.log(`[SignalingManager] Custom signal received from ${i.substring(0,8)} via ${r.name}`),this.customSignalCallbacks.forEach(u=>{u(i,s)})})}destroyInternal(){this.services.forEach(r=>{r.destroy()}),this.services=[],this.handshakeMessageCallbacks.clear(),this.customSignalCallbacks.clear(),this.initializedUserId=null,this.initializationPromise=null}}function Nv(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Df={exports:{}};const Dv={},jv=Object.freeze(Object.defineProperty({__proto__:null,default:Dv},Symbol.toStringTag,{value:"Module"})),Ov=Ly(jv);var Np;function Ig(){return Np||(Np=1,(function(o){(function(r){var i=function(w){var R,B=new Float64Array(16);if(w)for(R=0;R<w.length;R++)B[R]=w[R];return B},s=function(){throw new Error("no PRNG")},u=new Uint8Array(16),g=new Uint8Array(32);g[0]=9;var A=i(),M=i([1]),b=i([56129,1]),S=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),_=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),j=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),I=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),X=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function fe(w,R,B,h){w[R]=B>>24&255,w[R+1]=B>>16&255,w[R+2]=B>>8&255,w[R+3]=B&255,w[R+4]=h>>24&255,w[R+5]=h>>16&255,w[R+6]=h>>8&255,w[R+7]=h&255}function pe(w,R,B,h,O){var te,W=0;for(te=0;te<O;te++)W|=w[R+te]^B[h+te];return(1&W-1>>>8)-1}function Pe(w,R,B,h){return pe(w,R,B,h,16)}function ot(w,R,B,h){return pe(w,R,B,h,32)}function st(w,R,B,h){for(var O=h[0]&255|(h[1]&255)<<8|(h[2]&255)<<16|(h[3]&255)<<24,te=B[0]&255|(B[1]&255)<<8|(B[2]&255)<<16|(B[3]&255)<<24,W=B[4]&255|(B[5]&255)<<8|(B[6]&255)<<16|(B[7]&255)<<24,we=B[8]&255|(B[9]&255)<<8|(B[10]&255)<<16|(B[11]&255)<<24,ze=B[12]&255|(B[13]&255)<<8|(B[14]&255)<<16|(B[15]&255)<<24,ht=h[4]&255|(h[5]&255)<<8|(h[6]&255)<<16|(h[7]&255)<<24,lt=R[0]&255|(R[1]&255)<<8|(R[2]&255)<<16|(R[3]&255)<<24,Qt=R[4]&255|(R[5]&255)<<8|(R[6]&255)<<16|(R[7]&255)<<24,dt=R[8]&255|(R[9]&255)<<8|(R[10]&255)<<16|(R[11]&255)<<24,At=R[12]&255|(R[13]&255)<<8|(R[14]&255)<<16|(R[15]&255)<<24,Nt=h[8]&255|(h[9]&255)<<8|(h[10]&255)<<16|(h[11]&255)<<24,Dt=B[16]&255|(B[17]&255)<<8|(B[18]&255)<<16|(B[19]&255)<<24,pt=B[20]&255|(B[21]&255)<<8|(B[22]&255)<<16|(B[23]&255)<<24,wt=B[24]&255|(B[25]&255)<<8|(B[26]&255)<<16|(B[27]&255)<<24,xt=B[28]&255|(B[29]&255)<<8|(B[30]&255)<<16|(B[31]&255)<<24,yt=h[12]&255|(h[13]&255)<<8|(h[14]&255)<<16|(h[15]&255)<<24,ct=O,vt=te,nt=W,ut=we,gt=ze,it=ht,he=lt,ye=Qt,ve=dt,Ee=At,Ae=Nt,De=Dt,St=pt,at=wt,Lt=xt,zt=yt,z,Yt=0;Yt<20;Yt+=2)z=ct+St|0,gt^=z<<7|z>>>25,z=gt+ct|0,ve^=z<<9|z>>>23,z=ve+gt|0,St^=z<<13|z>>>19,z=St+ve|0,ct^=z<<18|z>>>14,z=it+vt|0,Ee^=z<<7|z>>>25,z=Ee+it|0,at^=z<<9|z>>>23,z=at+Ee|0,vt^=z<<13|z>>>19,z=vt+at|0,it^=z<<18|z>>>14,z=Ae+he|0,Lt^=z<<7|z>>>25,z=Lt+Ae|0,nt^=z<<9|z>>>23,z=nt+Lt|0,he^=z<<13|z>>>19,z=he+nt|0,Ae^=z<<18|z>>>14,z=zt+De|0,ut^=z<<7|z>>>25,z=ut+zt|0,ye^=z<<9|z>>>23,z=ye+ut|0,De^=z<<13|z>>>19,z=De+ye|0,zt^=z<<18|z>>>14,z=ct+ut|0,vt^=z<<7|z>>>25,z=vt+ct|0,nt^=z<<9|z>>>23,z=nt+vt|0,ut^=z<<13|z>>>19,z=ut+nt|0,ct^=z<<18|z>>>14,z=it+gt|0,he^=z<<7|z>>>25,z=he+it|0,ye^=z<<9|z>>>23,z=ye+he|0,gt^=z<<13|z>>>19,z=gt+ye|0,it^=z<<18|z>>>14,z=Ae+Ee|0,De^=z<<7|z>>>25,z=De+Ae|0,ve^=z<<9|z>>>23,z=ve+De|0,Ee^=z<<13|z>>>19,z=Ee+ve|0,Ae^=z<<18|z>>>14,z=zt+Lt|0,St^=z<<7|z>>>25,z=St+zt|0,at^=z<<9|z>>>23,z=at+St|0,Lt^=z<<13|z>>>19,z=Lt+at|0,zt^=z<<18|z>>>14;ct=ct+O|0,vt=vt+te|0,nt=nt+W|0,ut=ut+we|0,gt=gt+ze|0,it=it+ht|0,he=he+lt|0,ye=ye+Qt|0,ve=ve+dt|0,Ee=Ee+At|0,Ae=Ae+Nt|0,De=De+Dt|0,St=St+pt|0,at=at+wt|0,Lt=Lt+xt|0,zt=zt+yt|0,w[0]=ct>>>0&255,w[1]=ct>>>8&255,w[2]=ct>>>16&255,w[3]=ct>>>24&255,w[4]=vt>>>0&255,w[5]=vt>>>8&255,w[6]=vt>>>16&255,w[7]=vt>>>24&255,w[8]=nt>>>0&255,w[9]=nt>>>8&255,w[10]=nt>>>16&255,w[11]=nt>>>24&255,w[12]=ut>>>0&255,w[13]=ut>>>8&255,w[14]=ut>>>16&255,w[15]=ut>>>24&255,w[16]=gt>>>0&255,w[17]=gt>>>8&255,w[18]=gt>>>16&255,w[19]=gt>>>24&255,w[20]=it>>>0&255,w[21]=it>>>8&255,w[22]=it>>>16&255,w[23]=it>>>24&255,w[24]=he>>>0&255,w[25]=he>>>8&255,w[26]=he>>>16&255,w[27]=he>>>24&255,w[28]=ye>>>0&255,w[29]=ye>>>8&255,w[30]=ye>>>16&255,w[31]=ye>>>24&255,w[32]=ve>>>0&255,w[33]=ve>>>8&255,w[34]=ve>>>16&255,w[35]=ve>>>24&255,w[36]=Ee>>>0&255,w[37]=Ee>>>8&255,w[38]=Ee>>>16&255,w[39]=Ee>>>24&255,w[40]=Ae>>>0&255,w[41]=Ae>>>8&255,w[42]=Ae>>>16&255,w[43]=Ae>>>24&255,w[44]=De>>>0&255,w[45]=De>>>8&255,w[46]=De>>>16&255,w[47]=De>>>24&255,w[48]=St>>>0&255,w[49]=St>>>8&255,w[50]=St>>>16&255,w[51]=St>>>24&255,w[52]=at>>>0&255,w[53]=at>>>8&255,w[54]=at>>>16&255,w[55]=at>>>24&255,w[56]=Lt>>>0&255,w[57]=Lt>>>8&255,w[58]=Lt>>>16&255,w[59]=Lt>>>24&255,w[60]=zt>>>0&255,w[61]=zt>>>8&255,w[62]=zt>>>16&255,w[63]=zt>>>24&255}function He(w,R,B,h){for(var O=h[0]&255|(h[1]&255)<<8|(h[2]&255)<<16|(h[3]&255)<<24,te=B[0]&255|(B[1]&255)<<8|(B[2]&255)<<16|(B[3]&255)<<24,W=B[4]&255|(B[5]&255)<<8|(B[6]&255)<<16|(B[7]&255)<<24,we=B[8]&255|(B[9]&255)<<8|(B[10]&255)<<16|(B[11]&255)<<24,ze=B[12]&255|(B[13]&255)<<8|(B[14]&255)<<16|(B[15]&255)<<24,ht=h[4]&255|(h[5]&255)<<8|(h[6]&255)<<16|(h[7]&255)<<24,lt=R[0]&255|(R[1]&255)<<8|(R[2]&255)<<16|(R[3]&255)<<24,Qt=R[4]&255|(R[5]&255)<<8|(R[6]&255)<<16|(R[7]&255)<<24,dt=R[8]&255|(R[9]&255)<<8|(R[10]&255)<<16|(R[11]&255)<<24,At=R[12]&255|(R[13]&255)<<8|(R[14]&255)<<16|(R[15]&255)<<24,Nt=h[8]&255|(h[9]&255)<<8|(h[10]&255)<<16|(h[11]&255)<<24,Dt=B[16]&255|(B[17]&255)<<8|(B[18]&255)<<16|(B[19]&255)<<24,pt=B[20]&255|(B[21]&255)<<8|(B[22]&255)<<16|(B[23]&255)<<24,wt=B[24]&255|(B[25]&255)<<8|(B[26]&255)<<16|(B[27]&255)<<24,xt=B[28]&255|(B[29]&255)<<8|(B[30]&255)<<16|(B[31]&255)<<24,yt=h[12]&255|(h[13]&255)<<8|(h[14]&255)<<16|(h[15]&255)<<24,ct=O,vt=te,nt=W,ut=we,gt=ze,it=ht,he=lt,ye=Qt,ve=dt,Ee=At,Ae=Nt,De=Dt,St=pt,at=wt,Lt=xt,zt=yt,z,Yt=0;Yt<20;Yt+=2)z=ct+St|0,gt^=z<<7|z>>>25,z=gt+ct|0,ve^=z<<9|z>>>23,z=ve+gt|0,St^=z<<13|z>>>19,z=St+ve|0,ct^=z<<18|z>>>14,z=it+vt|0,Ee^=z<<7|z>>>25,z=Ee+it|0,at^=z<<9|z>>>23,z=at+Ee|0,vt^=z<<13|z>>>19,z=vt+at|0,it^=z<<18|z>>>14,z=Ae+he|0,Lt^=z<<7|z>>>25,z=Lt+Ae|0,nt^=z<<9|z>>>23,z=nt+Lt|0,he^=z<<13|z>>>19,z=he+nt|0,Ae^=z<<18|z>>>14,z=zt+De|0,ut^=z<<7|z>>>25,z=ut+zt|0,ye^=z<<9|z>>>23,z=ye+ut|0,De^=z<<13|z>>>19,z=De+ye|0,zt^=z<<18|z>>>14,z=ct+ut|0,vt^=z<<7|z>>>25,z=vt+ct|0,nt^=z<<9|z>>>23,z=nt+vt|0,ut^=z<<13|z>>>19,z=ut+nt|0,ct^=z<<18|z>>>14,z=it+gt|0,he^=z<<7|z>>>25,z=he+it|0,ye^=z<<9|z>>>23,z=ye+he|0,gt^=z<<13|z>>>19,z=gt+ye|0,it^=z<<18|z>>>14,z=Ae+Ee|0,De^=z<<7|z>>>25,z=De+Ae|0,ve^=z<<9|z>>>23,z=ve+De|0,Ee^=z<<13|z>>>19,z=Ee+ve|0,Ae^=z<<18|z>>>14,z=zt+Lt|0,St^=z<<7|z>>>25,z=St+zt|0,at^=z<<9|z>>>23,z=at+St|0,Lt^=z<<13|z>>>19,z=Lt+at|0,zt^=z<<18|z>>>14;w[0]=ct>>>0&255,w[1]=ct>>>8&255,w[2]=ct>>>16&255,w[3]=ct>>>24&255,w[4]=it>>>0&255,w[5]=it>>>8&255,w[6]=it>>>16&255,w[7]=it>>>24&255,w[8]=Ae>>>0&255,w[9]=Ae>>>8&255,w[10]=Ae>>>16&255,w[11]=Ae>>>24&255,w[12]=zt>>>0&255,w[13]=zt>>>8&255,w[14]=zt>>>16&255,w[15]=zt>>>24&255,w[16]=he>>>0&255,w[17]=he>>>8&255,w[18]=he>>>16&255,w[19]=he>>>24&255,w[20]=ye>>>0&255,w[21]=ye>>>8&255,w[22]=ye>>>16&255,w[23]=ye>>>24&255,w[24]=ve>>>0&255,w[25]=ve>>>8&255,w[26]=ve>>>16&255,w[27]=ve>>>24&255,w[28]=Ee>>>0&255,w[29]=Ee>>>8&255,w[30]=Ee>>>16&255,w[31]=Ee>>>24&255}function mt(w,R,B,h){st(w,R,B,h)}function Oe(w,R,B,h){He(w,R,B,h)}var We=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Xe(w,R,B,h,O,te,W){var we=new Uint8Array(16),ze=new Uint8Array(64),ht,lt;for(lt=0;lt<16;lt++)we[lt]=0;for(lt=0;lt<8;lt++)we[lt]=te[lt];for(;O>=64;){for(mt(ze,we,W,We),lt=0;lt<64;lt++)w[R+lt]=B[h+lt]^ze[lt];for(ht=1,lt=8;lt<16;lt++)ht=ht+(we[lt]&255)|0,we[lt]=ht&255,ht>>>=8;O-=64,R+=64,h+=64}if(O>0)for(mt(ze,we,W,We),lt=0;lt<O;lt++)w[R+lt]=B[h+lt]^ze[lt];return 0}function Bt(w,R,B,h,O){var te=new Uint8Array(16),W=new Uint8Array(64),we,ze;for(ze=0;ze<16;ze++)te[ze]=0;for(ze=0;ze<8;ze++)te[ze]=h[ze];for(;B>=64;){for(mt(W,te,O,We),ze=0;ze<64;ze++)w[R+ze]=W[ze];for(we=1,ze=8;ze<16;ze++)we=we+(te[ze]&255)|0,te[ze]=we&255,we>>>=8;B-=64,R+=64}if(B>0)for(mt(W,te,O,We),ze=0;ze<B;ze++)w[R+ze]=W[ze];return 0}function Pt(w,R,B,h,O){var te=new Uint8Array(32);Oe(te,h,O,We);for(var W=new Uint8Array(8),we=0;we<8;we++)W[we]=h[we+16];return Bt(w,R,B,W,te)}function Me(w,R,B,h,O,te,W){var we=new Uint8Array(32);Oe(we,te,W,We);for(var ze=new Uint8Array(8),ht=0;ht<8;ht++)ze[ht]=te[ht+16];return Xe(w,R,B,h,O,ze,we)}var Ue=function(w){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var R,B,h,O,te,W,we,ze;R=w[0]&255|(w[1]&255)<<8,this.r[0]=R&8191,B=w[2]&255|(w[3]&255)<<8,this.r[1]=(R>>>13|B<<3)&8191,h=w[4]&255|(w[5]&255)<<8,this.r[2]=(B>>>10|h<<6)&7939,O=w[6]&255|(w[7]&255)<<8,this.r[3]=(h>>>7|O<<9)&8191,te=w[8]&255|(w[9]&255)<<8,this.r[4]=(O>>>4|te<<12)&255,this.r[5]=te>>>1&8190,W=w[10]&255|(w[11]&255)<<8,this.r[6]=(te>>>14|W<<2)&8191,we=w[12]&255|(w[13]&255)<<8,this.r[7]=(W>>>11|we<<5)&8065,ze=w[14]&255|(w[15]&255)<<8,this.r[8]=(we>>>8|ze<<8)&8191,this.r[9]=ze>>>5&127,this.pad[0]=w[16]&255|(w[17]&255)<<8,this.pad[1]=w[18]&255|(w[19]&255)<<8,this.pad[2]=w[20]&255|(w[21]&255)<<8,this.pad[3]=w[22]&255|(w[23]&255)<<8,this.pad[4]=w[24]&255|(w[25]&255)<<8,this.pad[5]=w[26]&255|(w[27]&255)<<8,this.pad[6]=w[28]&255|(w[29]&255)<<8,this.pad[7]=w[30]&255|(w[31]&255)<<8};Ue.prototype.blocks=function(w,R,B){for(var h=this.fin?0:2048,O,te,W,we,ze,ht,lt,Qt,dt,At,Nt,Dt,pt,wt,xt,yt,ct,vt,nt,ut=this.h[0],gt=this.h[1],it=this.h[2],he=this.h[3],ye=this.h[4],ve=this.h[5],Ee=this.h[6],Ae=this.h[7],De=this.h[8],St=this.h[9],at=this.r[0],Lt=this.r[1],zt=this.r[2],z=this.r[3],Yt=this.r[4],jt=this.r[5],Kt=this.r[6],Gt=this.r[7],Jt=this.r[8],Ht=this.r[9];B>=16;)O=w[R+0]&255|(w[R+1]&255)<<8,ut+=O&8191,te=w[R+2]&255|(w[R+3]&255)<<8,gt+=(O>>>13|te<<3)&8191,W=w[R+4]&255|(w[R+5]&255)<<8,it+=(te>>>10|W<<6)&8191,we=w[R+6]&255|(w[R+7]&255)<<8,he+=(W>>>7|we<<9)&8191,ze=w[R+8]&255|(w[R+9]&255)<<8,ye+=(we>>>4|ze<<12)&8191,ve+=ze>>>1&8191,ht=w[R+10]&255|(w[R+11]&255)<<8,Ee+=(ze>>>14|ht<<2)&8191,lt=w[R+12]&255|(w[R+13]&255)<<8,Ae+=(ht>>>11|lt<<5)&8191,Qt=w[R+14]&255|(w[R+15]&255)<<8,De+=(lt>>>8|Qt<<8)&8191,St+=Qt>>>5|h,dt=0,At=dt,At+=ut*at,At+=gt*(5*Ht),At+=it*(5*Jt),At+=he*(5*Gt),At+=ye*(5*Kt),dt=At>>>13,At&=8191,At+=ve*(5*jt),At+=Ee*(5*Yt),At+=Ae*(5*z),At+=De*(5*zt),At+=St*(5*Lt),dt+=At>>>13,At&=8191,Nt=dt,Nt+=ut*Lt,Nt+=gt*at,Nt+=it*(5*Ht),Nt+=he*(5*Jt),Nt+=ye*(5*Gt),dt=Nt>>>13,Nt&=8191,Nt+=ve*(5*Kt),Nt+=Ee*(5*jt),Nt+=Ae*(5*Yt),Nt+=De*(5*z),Nt+=St*(5*zt),dt+=Nt>>>13,Nt&=8191,Dt=dt,Dt+=ut*zt,Dt+=gt*Lt,Dt+=it*at,Dt+=he*(5*Ht),Dt+=ye*(5*Jt),dt=Dt>>>13,Dt&=8191,Dt+=ve*(5*Gt),Dt+=Ee*(5*Kt),Dt+=Ae*(5*jt),Dt+=De*(5*Yt),Dt+=St*(5*z),dt+=Dt>>>13,Dt&=8191,pt=dt,pt+=ut*z,pt+=gt*zt,pt+=it*Lt,pt+=he*at,pt+=ye*(5*Ht),dt=pt>>>13,pt&=8191,pt+=ve*(5*Jt),pt+=Ee*(5*Gt),pt+=Ae*(5*Kt),pt+=De*(5*jt),pt+=St*(5*Yt),dt+=pt>>>13,pt&=8191,wt=dt,wt+=ut*Yt,wt+=gt*z,wt+=it*zt,wt+=he*Lt,wt+=ye*at,dt=wt>>>13,wt&=8191,wt+=ve*(5*Ht),wt+=Ee*(5*Jt),wt+=Ae*(5*Gt),wt+=De*(5*Kt),wt+=St*(5*jt),dt+=wt>>>13,wt&=8191,xt=dt,xt+=ut*jt,xt+=gt*Yt,xt+=it*z,xt+=he*zt,xt+=ye*Lt,dt=xt>>>13,xt&=8191,xt+=ve*at,xt+=Ee*(5*Ht),xt+=Ae*(5*Jt),xt+=De*(5*Gt),xt+=St*(5*Kt),dt+=xt>>>13,xt&=8191,yt=dt,yt+=ut*Kt,yt+=gt*jt,yt+=it*Yt,yt+=he*z,yt+=ye*zt,dt=yt>>>13,yt&=8191,yt+=ve*Lt,yt+=Ee*at,yt+=Ae*(5*Ht),yt+=De*(5*Jt),yt+=St*(5*Gt),dt+=yt>>>13,yt&=8191,ct=dt,ct+=ut*Gt,ct+=gt*Kt,ct+=it*jt,ct+=he*Yt,ct+=ye*z,dt=ct>>>13,ct&=8191,ct+=ve*zt,ct+=Ee*Lt,ct+=Ae*at,ct+=De*(5*Ht),ct+=St*(5*Jt),dt+=ct>>>13,ct&=8191,vt=dt,vt+=ut*Jt,vt+=gt*Gt,vt+=it*Kt,vt+=he*jt,vt+=ye*Yt,dt=vt>>>13,vt&=8191,vt+=ve*z,vt+=Ee*zt,vt+=Ae*Lt,vt+=De*at,vt+=St*(5*Ht),dt+=vt>>>13,vt&=8191,nt=dt,nt+=ut*Ht,nt+=gt*Jt,nt+=it*Gt,nt+=he*Kt,nt+=ye*jt,dt=nt>>>13,nt&=8191,nt+=ve*Yt,nt+=Ee*z,nt+=Ae*zt,nt+=De*Lt,nt+=St*at,dt+=nt>>>13,nt&=8191,dt=(dt<<2)+dt|0,dt=dt+At|0,At=dt&8191,dt=dt>>>13,Nt+=dt,ut=At,gt=Nt,it=Dt,he=pt,ye=wt,ve=xt,Ee=yt,Ae=ct,De=vt,St=nt,R+=16,B-=16;this.h[0]=ut,this.h[1]=gt,this.h[2]=it,this.h[3]=he,this.h[4]=ye,this.h[5]=ve,this.h[6]=Ee,this.h[7]=Ae,this.h[8]=De,this.h[9]=St},Ue.prototype.finish=function(w,R){var B=new Uint16Array(10),h,O,te,W;if(this.leftover){for(W=this.leftover,this.buffer[W++]=1;W<16;W++)this.buffer[W]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(h=this.h[1]>>>13,this.h[1]&=8191,W=2;W<10;W++)this.h[W]+=h,h=this.h[W]>>>13,this.h[W]&=8191;for(this.h[0]+=h*5,h=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=h,h=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=h,B[0]=this.h[0]+5,h=B[0]>>>13,B[0]&=8191,W=1;W<10;W++)B[W]=this.h[W]+h,h=B[W]>>>13,B[W]&=8191;for(B[9]-=8192,O=(h^1)-1,W=0;W<10;W++)B[W]&=O;for(O=~O,W=0;W<10;W++)this.h[W]=this.h[W]&O|B[W];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,te=this.h[0]+this.pad[0],this.h[0]=te&65535,W=1;W<8;W++)te=(this.h[W]+this.pad[W]|0)+(te>>>16)|0,this.h[W]=te&65535;w[R+0]=this.h[0]>>>0&255,w[R+1]=this.h[0]>>>8&255,w[R+2]=this.h[1]>>>0&255,w[R+3]=this.h[1]>>>8&255,w[R+4]=this.h[2]>>>0&255,w[R+5]=this.h[2]>>>8&255,w[R+6]=this.h[3]>>>0&255,w[R+7]=this.h[3]>>>8&255,w[R+8]=this.h[4]>>>0&255,w[R+9]=this.h[4]>>>8&255,w[R+10]=this.h[5]>>>0&255,w[R+11]=this.h[5]>>>8&255,w[R+12]=this.h[6]>>>0&255,w[R+13]=this.h[6]>>>8&255,w[R+14]=this.h[7]>>>0&255,w[R+15]=this.h[7]>>>8&255},Ue.prototype.update=function(w,R,B){var h,O;if(this.leftover){for(O=16-this.leftover,O>B&&(O=B),h=0;h<O;h++)this.buffer[this.leftover+h]=w[R+h];if(B-=O,R+=O,this.leftover+=O,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(B>=16&&(O=B-B%16,this.blocks(w,R,O),R+=O,B-=O),B){for(h=0;h<B;h++)this.buffer[this.leftover+h]=w[R+h];this.leftover+=B}};function Ce(w,R,B,h,O,te){var W=new Ue(te);return W.update(B,h,O),W.finish(w,R),0}function xe(w,R,B,h,O,te){var W=new Uint8Array(16);return Ce(W,0,B,h,O,te),Pe(w,R,W,0)}function Tt(w,R,B,h,O){var te;if(B<32)return-1;for(Me(w,0,R,0,B,h,O),Ce(w,16,w,32,B-32,w),te=0;te<16;te++)w[te]=0;return 0}function Ze(w,R,B,h,O){var te,W=new Uint8Array(32);if(B<32||(Pt(W,0,32,h,O),xe(R,16,R,32,B-32,W)!==0))return-1;for(Me(w,0,R,0,B,h,O),te=0;te<32;te++)w[te]=0;return 0}function se(w,R){var B;for(B=0;B<16;B++)w[B]=R[B]|0}function Ye(w){var R,B,h=1;for(R=0;R<16;R++)B=w[R]+h+65535,h=Math.floor(B/65536),w[R]=B-h*65536;w[0]+=h-1+37*(h-1)}function Ie(w,R,B){for(var h,O=~(B-1),te=0;te<16;te++)h=O&(w[te]^R[te]),w[te]^=h,R[te]^=h}function Re(w,R){var B,h,O,te=i(),W=i();for(B=0;B<16;B++)W[B]=R[B];for(Ye(W),Ye(W),Ye(W),h=0;h<2;h++){for(te[0]=W[0]-65517,B=1;B<15;B++)te[B]=W[B]-65535-(te[B-1]>>16&1),te[B-1]&=65535;te[15]=W[15]-32767-(te[14]>>16&1),O=te[15]>>16&1,te[14]&=65535,Ie(W,te,1-O)}for(B=0;B<16;B++)w[2*B]=W[B]&255,w[2*B+1]=W[B]>>8}function Qe(w,R){var B=new Uint8Array(32),h=new Uint8Array(32);return Re(B,w),Re(h,R),ot(B,0,h,0)}function K(w){var R=new Uint8Array(32);return Re(R,w),R[0]&1}function me(w,R){var B;for(B=0;B<16;B++)w[B]=R[2*B]+(R[2*B+1]<<8);w[15]&=32767}function _e(w,R,B){for(var h=0;h<16;h++)w[h]=R[h]+B[h]}function Ke(w,R,B){for(var h=0;h<16;h++)w[h]=R[h]-B[h]}function Ge(w,R,B){var h,O,te=0,W=0,we=0,ze=0,ht=0,lt=0,Qt=0,dt=0,At=0,Nt=0,Dt=0,pt=0,wt=0,xt=0,yt=0,ct=0,vt=0,nt=0,ut=0,gt=0,it=0,he=0,ye=0,ve=0,Ee=0,Ae=0,De=0,St=0,at=0,Lt=0,zt=0,z=B[0],Yt=B[1],jt=B[2],Kt=B[3],Gt=B[4],Jt=B[5],Ht=B[6],Mn=B[7],on=B[8],pn=B[9],jn=B[10],_t=B[11],bn=B[12],Vn=B[13],Bn=B[14],gn=B[15];h=R[0],te+=h*z,W+=h*Yt,we+=h*jt,ze+=h*Kt,ht+=h*Gt,lt+=h*Jt,Qt+=h*Ht,dt+=h*Mn,At+=h*on,Nt+=h*pn,Dt+=h*jn,pt+=h*_t,wt+=h*bn,xt+=h*Vn,yt+=h*Bn,ct+=h*gn,h=R[1],W+=h*z,we+=h*Yt,ze+=h*jt,ht+=h*Kt,lt+=h*Gt,Qt+=h*Jt,dt+=h*Ht,At+=h*Mn,Nt+=h*on,Dt+=h*pn,pt+=h*jn,wt+=h*_t,xt+=h*bn,yt+=h*Vn,ct+=h*Bn,vt+=h*gn,h=R[2],we+=h*z,ze+=h*Yt,ht+=h*jt,lt+=h*Kt,Qt+=h*Gt,dt+=h*Jt,At+=h*Ht,Nt+=h*Mn,Dt+=h*on,pt+=h*pn,wt+=h*jn,xt+=h*_t,yt+=h*bn,ct+=h*Vn,vt+=h*Bn,nt+=h*gn,h=R[3],ze+=h*z,ht+=h*Yt,lt+=h*jt,Qt+=h*Kt,dt+=h*Gt,At+=h*Jt,Nt+=h*Ht,Dt+=h*Mn,pt+=h*on,wt+=h*pn,xt+=h*jn,yt+=h*_t,ct+=h*bn,vt+=h*Vn,nt+=h*Bn,ut+=h*gn,h=R[4],ht+=h*z,lt+=h*Yt,Qt+=h*jt,dt+=h*Kt,At+=h*Gt,Nt+=h*Jt,Dt+=h*Ht,pt+=h*Mn,wt+=h*on,xt+=h*pn,yt+=h*jn,ct+=h*_t,vt+=h*bn,nt+=h*Vn,ut+=h*Bn,gt+=h*gn,h=R[5],lt+=h*z,Qt+=h*Yt,dt+=h*jt,At+=h*Kt,Nt+=h*Gt,Dt+=h*Jt,pt+=h*Ht,wt+=h*Mn,xt+=h*on,yt+=h*pn,ct+=h*jn,vt+=h*_t,nt+=h*bn,ut+=h*Vn,gt+=h*Bn,it+=h*gn,h=R[6],Qt+=h*z,dt+=h*Yt,At+=h*jt,Nt+=h*Kt,Dt+=h*Gt,pt+=h*Jt,wt+=h*Ht,xt+=h*Mn,yt+=h*on,ct+=h*pn,vt+=h*jn,nt+=h*_t,ut+=h*bn,gt+=h*Vn,it+=h*Bn,he+=h*gn,h=R[7],dt+=h*z,At+=h*Yt,Nt+=h*jt,Dt+=h*Kt,pt+=h*Gt,wt+=h*Jt,xt+=h*Ht,yt+=h*Mn,ct+=h*on,vt+=h*pn,nt+=h*jn,ut+=h*_t,gt+=h*bn,it+=h*Vn,he+=h*Bn,ye+=h*gn,h=R[8],At+=h*z,Nt+=h*Yt,Dt+=h*jt,pt+=h*Kt,wt+=h*Gt,xt+=h*Jt,yt+=h*Ht,ct+=h*Mn,vt+=h*on,nt+=h*pn,ut+=h*jn,gt+=h*_t,it+=h*bn,he+=h*Vn,ye+=h*Bn,ve+=h*gn,h=R[9],Nt+=h*z,Dt+=h*Yt,pt+=h*jt,wt+=h*Kt,xt+=h*Gt,yt+=h*Jt,ct+=h*Ht,vt+=h*Mn,nt+=h*on,ut+=h*pn,gt+=h*jn,it+=h*_t,he+=h*bn,ye+=h*Vn,ve+=h*Bn,Ee+=h*gn,h=R[10],Dt+=h*z,pt+=h*Yt,wt+=h*jt,xt+=h*Kt,yt+=h*Gt,ct+=h*Jt,vt+=h*Ht,nt+=h*Mn,ut+=h*on,gt+=h*pn,it+=h*jn,he+=h*_t,ye+=h*bn,ve+=h*Vn,Ee+=h*Bn,Ae+=h*gn,h=R[11],pt+=h*z,wt+=h*Yt,xt+=h*jt,yt+=h*Kt,ct+=h*Gt,vt+=h*Jt,nt+=h*Ht,ut+=h*Mn,gt+=h*on,it+=h*pn,he+=h*jn,ye+=h*_t,ve+=h*bn,Ee+=h*Vn,Ae+=h*Bn,De+=h*gn,h=R[12],wt+=h*z,xt+=h*Yt,yt+=h*jt,ct+=h*Kt,vt+=h*Gt,nt+=h*Jt,ut+=h*Ht,gt+=h*Mn,it+=h*on,he+=h*pn,ye+=h*jn,ve+=h*_t,Ee+=h*bn,Ae+=h*Vn,De+=h*Bn,St+=h*gn,h=R[13],xt+=h*z,yt+=h*Yt,ct+=h*jt,vt+=h*Kt,nt+=h*Gt,ut+=h*Jt,gt+=h*Ht,it+=h*Mn,he+=h*on,ye+=h*pn,ve+=h*jn,Ee+=h*_t,Ae+=h*bn,De+=h*Vn,St+=h*Bn,at+=h*gn,h=R[14],yt+=h*z,ct+=h*Yt,vt+=h*jt,nt+=h*Kt,ut+=h*Gt,gt+=h*Jt,it+=h*Ht,he+=h*Mn,ye+=h*on,ve+=h*pn,Ee+=h*jn,Ae+=h*_t,De+=h*bn,St+=h*Vn,at+=h*Bn,Lt+=h*gn,h=R[15],ct+=h*z,vt+=h*Yt,nt+=h*jt,ut+=h*Kt,gt+=h*Gt,it+=h*Jt,he+=h*Ht,ye+=h*Mn,ve+=h*on,Ee+=h*pn,Ae+=h*jn,De+=h*_t,St+=h*bn,at+=h*Vn,Lt+=h*Bn,zt+=h*gn,te+=38*vt,W+=38*nt,we+=38*ut,ze+=38*gt,ht+=38*it,lt+=38*he,Qt+=38*ye,dt+=38*ve,At+=38*Ee,Nt+=38*Ae,Dt+=38*De,pt+=38*St,wt+=38*at,xt+=38*Lt,yt+=38*zt,O=1,h=te+O+65535,O=Math.floor(h/65536),te=h-O*65536,h=W+O+65535,O=Math.floor(h/65536),W=h-O*65536,h=we+O+65535,O=Math.floor(h/65536),we=h-O*65536,h=ze+O+65535,O=Math.floor(h/65536),ze=h-O*65536,h=ht+O+65535,O=Math.floor(h/65536),ht=h-O*65536,h=lt+O+65535,O=Math.floor(h/65536),lt=h-O*65536,h=Qt+O+65535,O=Math.floor(h/65536),Qt=h-O*65536,h=dt+O+65535,O=Math.floor(h/65536),dt=h-O*65536,h=At+O+65535,O=Math.floor(h/65536),At=h-O*65536,h=Nt+O+65535,O=Math.floor(h/65536),Nt=h-O*65536,h=Dt+O+65535,O=Math.floor(h/65536),Dt=h-O*65536,h=pt+O+65535,O=Math.floor(h/65536),pt=h-O*65536,h=wt+O+65535,O=Math.floor(h/65536),wt=h-O*65536,h=xt+O+65535,O=Math.floor(h/65536),xt=h-O*65536,h=yt+O+65535,O=Math.floor(h/65536),yt=h-O*65536,h=ct+O+65535,O=Math.floor(h/65536),ct=h-O*65536,te+=O-1+37*(O-1),O=1,h=te+O+65535,O=Math.floor(h/65536),te=h-O*65536,h=W+O+65535,O=Math.floor(h/65536),W=h-O*65536,h=we+O+65535,O=Math.floor(h/65536),we=h-O*65536,h=ze+O+65535,O=Math.floor(h/65536),ze=h-O*65536,h=ht+O+65535,O=Math.floor(h/65536),ht=h-O*65536,h=lt+O+65535,O=Math.floor(h/65536),lt=h-O*65536,h=Qt+O+65535,O=Math.floor(h/65536),Qt=h-O*65536,h=dt+O+65535,O=Math.floor(h/65536),dt=h-O*65536,h=At+O+65535,O=Math.floor(h/65536),At=h-O*65536,h=Nt+O+65535,O=Math.floor(h/65536),Nt=h-O*65536,h=Dt+O+65535,O=Math.floor(h/65536),Dt=h-O*65536,h=pt+O+65535,O=Math.floor(h/65536),pt=h-O*65536,h=wt+O+65535,O=Math.floor(h/65536),wt=h-O*65536,h=xt+O+65535,O=Math.floor(h/65536),xt=h-O*65536,h=yt+O+65535,O=Math.floor(h/65536),yt=h-O*65536,h=ct+O+65535,O=Math.floor(h/65536),ct=h-O*65536,te+=O-1+37*(O-1),w[0]=te,w[1]=W,w[2]=we,w[3]=ze,w[4]=ht,w[5]=lt,w[6]=Qt,w[7]=dt,w[8]=At,w[9]=Nt,w[10]=Dt,w[11]=pt,w[12]=wt,w[13]=xt,w[14]=yt,w[15]=ct}function rt(w,R){Ge(w,R,R)}function qt(w,R){var B=i(),h;for(h=0;h<16;h++)B[h]=R[h];for(h=253;h>=0;h--)rt(B,B),h!==2&&h!==4&&Ge(B,B,R);for(h=0;h<16;h++)w[h]=B[h]}function sn(w,R){var B=i(),h;for(h=0;h<16;h++)B[h]=R[h];for(h=250;h>=0;h--)rt(B,B),h!==1&&Ge(B,B,R);for(h=0;h<16;h++)w[h]=B[h]}function Ve(w,R,B){var h=new Uint8Array(32),O=new Float64Array(80),te,W,we=i(),ze=i(),ht=i(),lt=i(),Qt=i(),dt=i();for(W=0;W<31;W++)h[W]=R[W];for(h[31]=R[31]&127|64,h[0]&=248,me(O,B),W=0;W<16;W++)ze[W]=O[W],lt[W]=we[W]=ht[W]=0;for(we[0]=lt[0]=1,W=254;W>=0;--W)te=h[W>>>3]>>>(W&7)&1,Ie(we,ze,te),Ie(ht,lt,te),_e(Qt,we,ht),Ke(we,we,ht),_e(ht,ze,lt),Ke(ze,ze,lt),rt(lt,Qt),rt(dt,we),Ge(we,ht,we),Ge(ht,ze,Qt),_e(Qt,we,ht),Ke(we,we,ht),rt(ze,we),Ke(ht,lt,dt),Ge(we,ht,b),_e(we,we,lt),Ge(ht,ht,we),Ge(we,lt,dt),Ge(lt,ze,O),rt(ze,Qt),Ie(we,ze,te),Ie(ht,lt,te);for(W=0;W<16;W++)O[W+16]=we[W],O[W+32]=ht[W],O[W+48]=ze[W],O[W+64]=lt[W];var At=O.subarray(32),Nt=O.subarray(16);return qt(At,At),Ge(Nt,Nt,At),Re(w,Nt),0}function Fe(w,R){return Ve(w,R,g)}function Mt(w,R){return s(R,32),Fe(w,R)}function ft(w,R,B){var h=new Uint8Array(32);return Ve(h,B,R),Oe(w,u,h,We)}var fn=Tt,Wt=Ze;function Ct(w,R,B,h,O,te){var W=new Uint8Array(32);return ft(W,O,te),fn(w,R,B,h,W)}function qe(w,R,B,h,O,te){var W=new Uint8Array(32);return ft(W,O,te),Wt(w,R,B,h,W)}var Vt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ft(w,R,B,h){for(var O=new Int32Array(16),te=new Int32Array(16),W,we,ze,ht,lt,Qt,dt,At,Nt,Dt,pt,wt,xt,yt,ct,vt,nt,ut,gt,it,he,ye,ve,Ee,Ae,De,St=w[0],at=w[1],Lt=w[2],zt=w[3],z=w[4],Yt=w[5],jt=w[6],Kt=w[7],Gt=R[0],Jt=R[1],Ht=R[2],Mn=R[3],on=R[4],pn=R[5],jn=R[6],_t=R[7],bn=0;h>=128;){for(gt=0;gt<16;gt++)it=8*gt+bn,O[gt]=B[it+0]<<24|B[it+1]<<16|B[it+2]<<8|B[it+3],te[gt]=B[it+4]<<24|B[it+5]<<16|B[it+6]<<8|B[it+7];for(gt=0;gt<80;gt++)if(W=St,we=at,ze=Lt,ht=zt,lt=z,Qt=Yt,dt=jt,At=Kt,Nt=Gt,Dt=Jt,pt=Ht,wt=Mn,xt=on,yt=pn,ct=jn,vt=_t,he=Kt,ye=_t,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,De=he>>>16,he=(z>>>14|on<<18)^(z>>>18|on<<14)^(on>>>9|z<<23),ye=(on>>>14|z<<18)^(on>>>18|z<<14)^(z>>>9|on<<23),ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,he=z&Yt^~z&jt,ye=on&pn^~on&jn,ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,he=Vt[gt*2],ye=Vt[gt*2+1],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,he=O[gt%16],ye=te[gt%16],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,De+=Ae>>>16,nt=Ae&65535|De<<16,ut=ve&65535|Ee<<16,he=nt,ye=ut,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,De=he>>>16,he=(St>>>28|Gt<<4)^(Gt>>>2|St<<30)^(Gt>>>7|St<<25),ye=(Gt>>>28|St<<4)^(St>>>2|Gt<<30)^(St>>>7|Gt<<25),ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,he=St&at^St&Lt^at&Lt,ye=Gt&Jt^Gt&Ht^Jt&Ht,ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,De+=Ae>>>16,At=Ae&65535|De<<16,vt=ve&65535|Ee<<16,he=ht,ye=wt,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,De=he>>>16,he=nt,ye=ut,ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,De+=Ae>>>16,ht=Ae&65535|De<<16,wt=ve&65535|Ee<<16,at=W,Lt=we,zt=ze,z=ht,Yt=lt,jt=Qt,Kt=dt,St=At,Jt=Nt,Ht=Dt,Mn=pt,on=wt,pn=xt,jn=yt,_t=ct,Gt=vt,gt%16===15)for(it=0;it<16;it++)he=O[it],ye=te[it],ve=ye&65535,Ee=ye>>>16,Ae=he&65535,De=he>>>16,he=O[(it+9)%16],ye=te[(it+9)%16],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,nt=O[(it+1)%16],ut=te[(it+1)%16],he=(nt>>>1|ut<<31)^(nt>>>8|ut<<24)^nt>>>7,ye=(ut>>>1|nt<<31)^(ut>>>8|nt<<24)^(ut>>>7|nt<<25),ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,nt=O[(it+14)%16],ut=te[(it+14)%16],he=(nt>>>19|ut<<13)^(ut>>>29|nt<<3)^nt>>>6,ye=(ut>>>19|nt<<13)^(nt>>>29|ut<<3)^(ut>>>6|nt<<26),ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,De+=Ae>>>16,O[it]=Ae&65535|De<<16,te[it]=ve&65535|Ee<<16;he=St,ye=Gt,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,De=he>>>16,he=w[0],ye=R[0],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,De+=Ae>>>16,w[0]=St=Ae&65535|De<<16,R[0]=Gt=ve&65535|Ee<<16,he=at,ye=Jt,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,De=he>>>16,he=w[1],ye=R[1],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,De+=Ae>>>16,w[1]=at=Ae&65535|De<<16,R[1]=Jt=ve&65535|Ee<<16,he=Lt,ye=Ht,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,De=he>>>16,he=w[2],ye=R[2],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,De+=Ae>>>16,w[2]=Lt=Ae&65535|De<<16,R[2]=Ht=ve&65535|Ee<<16,he=zt,ye=Mn,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,De=he>>>16,he=w[3],ye=R[3],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,De+=Ae>>>16,w[3]=zt=Ae&65535|De<<16,R[3]=Mn=ve&65535|Ee<<16,he=z,ye=on,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,De=he>>>16,he=w[4],ye=R[4],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,De+=Ae>>>16,w[4]=z=Ae&65535|De<<16,R[4]=on=ve&65535|Ee<<16,he=Yt,ye=pn,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,De=he>>>16,he=w[5],ye=R[5],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,De+=Ae>>>16,w[5]=Yt=Ae&65535|De<<16,R[5]=pn=ve&65535|Ee<<16,he=jt,ye=jn,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,De=he>>>16,he=w[6],ye=R[6],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,De+=Ae>>>16,w[6]=jt=Ae&65535|De<<16,R[6]=jn=ve&65535|Ee<<16,he=Kt,ye=_t,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,De=he>>>16,he=w[7],ye=R[7],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,De+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,De+=Ae>>>16,w[7]=Kt=Ae&65535|De<<16,R[7]=_t=ve&65535|Ee<<16,bn+=128,h-=128}return h}function En(w,R,B){var h=new Int32Array(8),O=new Int32Array(8),te=new Uint8Array(256),W,we=B;for(h[0]=1779033703,h[1]=3144134277,h[2]=1013904242,h[3]=2773480762,h[4]=1359893119,h[5]=2600822924,h[6]=528734635,h[7]=1541459225,O[0]=4089235720,O[1]=2227873595,O[2]=4271175723,O[3]=1595750129,O[4]=2917565137,O[5]=725511199,O[6]=4215389547,O[7]=327033209,Ft(h,O,R,B),B%=128,W=0;W<B;W++)te[W]=R[we-B+W];for(te[B]=128,B=256-128*(B<112?1:0),te[B-9]=0,fe(te,B-8,we/536870912|0,we<<3),Ft(h,O,te,B),W=0;W<8;W++)fe(w,8*W,h[W],O[W]);return 0}function nn(w,R){var B=i(),h=i(),O=i(),te=i(),W=i(),we=i(),ze=i(),ht=i(),lt=i();Ke(B,w[1],w[0]),Ke(lt,R[1],R[0]),Ge(B,B,lt),_e(h,w[0],w[1]),_e(lt,R[0],R[1]),Ge(h,h,lt),Ge(O,w[3],R[3]),Ge(O,O,_),Ge(te,w[2],R[2]),_e(te,te,te),Ke(W,h,B),Ke(we,te,O),_e(ze,te,O),_e(ht,h,B),Ge(w[0],W,we),Ge(w[1],ht,ze),Ge(w[2],ze,we),Ge(w[3],W,ht)}function xn(w,R,B){var h;for(h=0;h<4;h++)Ie(w[h],R[h],B)}function Qr(w,R){var B=i(),h=i(),O=i();qt(O,R[2]),Ge(B,R[0],O),Ge(h,R[1],O),Re(w,h),w[31]^=K(B)<<7}function wr(w,R,B){var h,O;for(se(w[0],A),se(w[1],M),se(w[2],M),se(w[3],A),O=255;O>=0;--O)h=B[O/8|0]>>(O&7)&1,xn(w,R,h),nn(R,w),nn(w,w),xn(w,R,h)}function Un(w,R){var B=[i(),i(),i(),i()];se(B[0],j),se(B[1],I),se(B[2],M),Ge(B[3],j,I),wr(w,B,R)}function zr(w,R,B){var h=new Uint8Array(64),O=[i(),i(),i(),i()],te;for(B||s(R,32),En(h,R,32),h[0]&=248,h[31]&=127,h[31]|=64,Un(O,h),Qr(w,O),te=0;te<32;te++)R[te+32]=w[te];return 0}var yr=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Sr(w,R){var B,h,O,te;for(h=63;h>=32;--h){for(B=0,O=h-32,te=h-12;O<te;++O)R[O]+=B-16*R[h]*yr[O-(h-32)],B=Math.floor((R[O]+128)/256),R[O]-=B*256;R[O]+=B,R[h]=0}for(B=0,O=0;O<32;O++)R[O]+=B-(R[31]>>4)*yr[O],B=R[O]>>8,R[O]&=255;for(O=0;O<32;O++)R[O]-=B*yr[O];for(h=0;h<32;h++)R[h+1]+=R[h]>>8,w[h]=R[h]&255}function Jr(w){var R=new Float64Array(64),B;for(B=0;B<64;B++)R[B]=w[B];for(B=0;B<64;B++)w[B]=0;Sr(w,R)}function ha(w,R,B,h){var O=new Uint8Array(64),te=new Uint8Array(64),W=new Uint8Array(64),we,ze,ht=new Float64Array(64),lt=[i(),i(),i(),i()];En(O,h,32),O[0]&=248,O[31]&=127,O[31]|=64;var Qt=B+64;for(we=0;we<B;we++)w[64+we]=R[we];for(we=0;we<32;we++)w[32+we]=O[32+we];for(En(W,w.subarray(32),B+32),Jr(W),Un(lt,W),Qr(w,lt),we=32;we<64;we++)w[we]=h[we];for(En(te,w,B+64),Jr(te),we=0;we<64;we++)ht[we]=0;for(we=0;we<32;we++)ht[we]=W[we];for(we=0;we<32;we++)for(ze=0;ze<32;ze++)ht[we+ze]+=te[we]*O[ze];return Sr(w.subarray(32),ht),Qt}function Ua(w,R){var B=i(),h=i(),O=i(),te=i(),W=i(),we=i(),ze=i();return se(w[2],M),me(w[1],R),rt(O,w[1]),Ge(te,O,S),Ke(O,O,w[2]),_e(te,w[2],te),rt(W,te),rt(we,W),Ge(ze,we,W),Ge(B,ze,O),Ge(B,B,te),sn(B,B),Ge(B,B,O),Ge(B,B,te),Ge(B,B,te),Ge(w[0],B,te),rt(h,w[0]),Ge(h,h,te),Qe(h,O)&&Ge(w[0],w[0],X),rt(h,w[0]),Ge(h,h,te),Qe(h,O)?-1:(K(w[0])===R[31]>>7&&Ke(w[0],A,w[0]),Ge(w[3],w[0],w[1]),0)}function pa(w,R,B,h){var O,te=new Uint8Array(32),W=new Uint8Array(64),we=[i(),i(),i(),i()],ze=[i(),i(),i(),i()];if(B<64||Ua(ze,h))return-1;for(O=0;O<B;O++)w[O]=R[O];for(O=0;O<32;O++)w[O+32]=h[O];if(En(W,w,B),Jr(W),wr(we,ze,W),Un(ze,R.subarray(32)),nn(we,ze),Qr(te,we),B-=64,ot(R,0,te,0)){for(O=0;O<B;O++)w[O]=0;return-1}for(O=0;O<B;O++)w[O]=R[O+64];return B}var Yr=32,sr=24,Ln=32,kn=16,tt=32,or=32,lr=32,Zr=32,$e=32,vr=sr,Aa=Ln,Kr=kn,xr=64,cr=32,Gn=64,Xr=32,Zt=64;r.lowlevel={crypto_core_hsalsa20:Oe,crypto_stream_xor:Me,crypto_stream:Pt,crypto_stream_salsa20_xor:Xe,crypto_stream_salsa20:Bt,crypto_onetimeauth:Ce,crypto_onetimeauth_verify:xe,crypto_verify_16:Pe,crypto_verify_32:ot,crypto_secretbox:Tt,crypto_secretbox_open:Ze,crypto_scalarmult:Ve,crypto_scalarmult_base:Fe,crypto_box_beforenm:ft,crypto_box_afternm:fn,crypto_box:Ct,crypto_box_open:qe,crypto_box_keypair:Mt,crypto_hash:En,crypto_sign:ha,crypto_sign_keypair:zr,crypto_sign_open:pa,crypto_secretbox_KEYBYTES:Yr,crypto_secretbox_NONCEBYTES:sr,crypto_secretbox_ZEROBYTES:Ln,crypto_secretbox_BOXZEROBYTES:kn,crypto_scalarmult_BYTES:tt,crypto_scalarmult_SCALARBYTES:or,crypto_box_PUBLICKEYBYTES:lr,crypto_box_SECRETKEYBYTES:Zr,crypto_box_BEFORENMBYTES:$e,crypto_box_NONCEBYTES:vr,crypto_box_ZEROBYTES:Aa,crypto_box_BOXZEROBYTES:Kr,crypto_sign_BYTES:xr,crypto_sign_PUBLICKEYBYTES:cr,crypto_sign_SECRETKEYBYTES:Gn,crypto_sign_SEEDBYTES:Xr,crypto_hash_BYTES:Zt,gf:i,D:S,L:yr,pack25519:Re,unpack25519:me,M:Ge,A:_e,S:rt,Z:Ke,pow2523:sn,add:nn,set25519:se,modL:Sr,scalarmult:wr,scalarbase:Un};function _r(w,R){if(w.length!==Yr)throw new Error("bad key size");if(R.length!==sr)throw new Error("bad nonce size")}function Ar(w,R){if(w.length!==lr)throw new Error("bad public key size");if(R.length!==Zr)throw new Error("bad secret key size")}function Tn(){for(var w=0;w<arguments.length;w++)if(!(arguments[w]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Cn(w){for(var R=0;R<w.length;R++)w[R]=0}r.randomBytes=function(w){var R=new Uint8Array(w);return s(R,w),R},r.secretbox=function(w,R,B){Tn(w,R,B),_r(B,R);for(var h=new Uint8Array(Ln+w.length),O=new Uint8Array(h.length),te=0;te<w.length;te++)h[te+Ln]=w[te];return Tt(O,h,h.length,R,B),O.subarray(kn)},r.secretbox.open=function(w,R,B){Tn(w,R,B),_r(B,R);for(var h=new Uint8Array(kn+w.length),O=new Uint8Array(h.length),te=0;te<w.length;te++)h[te+kn]=w[te];return h.length<32||Ze(O,h,h.length,R,B)!==0?null:O.subarray(Ln)},r.secretbox.keyLength=Yr,r.secretbox.nonceLength=sr,r.secretbox.overheadLength=kn,r.scalarMult=function(w,R){if(Tn(w,R),w.length!==or)throw new Error("bad n size");if(R.length!==tt)throw new Error("bad p size");var B=new Uint8Array(tt);return Ve(B,w,R),B},r.scalarMult.base=function(w){if(Tn(w),w.length!==or)throw new Error("bad n size");var R=new Uint8Array(tt);return Fe(R,w),R},r.scalarMult.scalarLength=or,r.scalarMult.groupElementLength=tt,r.box=function(w,R,B,h){var O=r.box.before(B,h);return r.secretbox(w,R,O)},r.box.before=function(w,R){Tn(w,R),Ar(w,R);var B=new Uint8Array($e);return ft(B,w,R),B},r.box.after=r.secretbox,r.box.open=function(w,R,B,h){var O=r.box.before(B,h);return r.secretbox.open(w,R,O)},r.box.open.after=r.secretbox.open,r.box.keyPair=function(){var w=new Uint8Array(lr),R=new Uint8Array(Zr);return Mt(w,R),{publicKey:w,secretKey:R}},r.box.keyPair.fromSecretKey=function(w){if(Tn(w),w.length!==Zr)throw new Error("bad secret key size");var R=new Uint8Array(lr);return Fe(R,w),{publicKey:R,secretKey:new Uint8Array(w)}},r.box.publicKeyLength=lr,r.box.secretKeyLength=Zr,r.box.sharedKeyLength=$e,r.box.nonceLength=vr,r.box.overheadLength=r.secretbox.overheadLength,r.sign=function(w,R){if(Tn(w,R),R.length!==Gn)throw new Error("bad secret key size");var B=new Uint8Array(xr+w.length);return ha(B,w,w.length,R),B},r.sign.open=function(w,R){if(Tn(w,R),R.length!==cr)throw new Error("bad public key size");var B=new Uint8Array(w.length),h=pa(B,w,w.length,R);if(h<0)return null;for(var O=new Uint8Array(h),te=0;te<O.length;te++)O[te]=B[te];return O},r.sign.detached=function(w,R){for(var B=r.sign(w,R),h=new Uint8Array(xr),O=0;O<h.length;O++)h[O]=B[O];return h},r.sign.detached.verify=function(w,R,B){if(Tn(w,R,B),R.length!==xr)throw new Error("bad signature size");if(B.length!==cr)throw new Error("bad public key size");var h=new Uint8Array(xr+w.length),O=new Uint8Array(xr+w.length),te;for(te=0;te<xr;te++)h[te]=R[te];for(te=0;te<w.length;te++)h[te+xr]=w[te];return pa(O,h,h.length,B)>=0},r.sign.keyPair=function(){var w=new Uint8Array(cr),R=new Uint8Array(Gn);return zr(w,R),{publicKey:w,secretKey:R}},r.sign.keyPair.fromSecretKey=function(w){if(Tn(w),w.length!==Gn)throw new Error("bad secret key size");for(var R=new Uint8Array(cr),B=0;B<R.length;B++)R[B]=w[32+B];return{publicKey:R,secretKey:new Uint8Array(w)}},r.sign.keyPair.fromSeed=function(w){if(Tn(w),w.length!==Xr)throw new Error("bad seed size");for(var R=new Uint8Array(cr),B=new Uint8Array(Gn),h=0;h<32;h++)B[h]=w[h];return zr(R,B,!0),{publicKey:R,secretKey:B}},r.sign.publicKeyLength=cr,r.sign.secretKeyLength=Gn,r.sign.seedLength=Xr,r.sign.signatureLength=xr,r.hash=function(w){Tn(w);var R=new Uint8Array(Zt);return En(R,w,w.length),R},r.hash.hashLength=Zt,r.verify=function(w,R){return Tn(w,R),w.length===0||R.length===0||w.length!==R.length?!1:pe(w,0,R,0,w.length)===0},r.setPRNG=function(w){s=w},(function(){var w=typeof self<"u"?self.crypto||self.msCrypto:null;if(w&&w.getRandomValues){var R=65536;r.setPRNG(function(B,h){var O,te=new Uint8Array(h);for(O=0;O<h;O+=R)w.getRandomValues(te.subarray(O,O+Math.min(h-O,R)));for(O=0;O<h;O++)B[O]=te[O];Cn(te)})}else typeof Nv<"u"&&(w=Ov,w&&w.randomBytes&&r.setPRNG(function(B,h){var O,te=w.randomBytes(h);for(O=0;O<h;O++)B[O]=te[O];Cn(te)}))})()})(o.exports?o.exports:self.nacl=self.nacl||{})})(Df)),Df.exports}var Iv=Ig();const Rn=vl(Iv);var Ec={exports:{}},qv=Ec.exports,Dp;function Uv(){return Dp||(Dp=1,(function(o){(function(r,i){o.exports?o.exports=i():(r.nacl||(r.nacl={}),r.nacl.util=i())})(qv,function(){var r={};function i(s){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(s))throw new TypeError("invalid encoding")}return r.decodeUTF8=function(s){if(typeof s!="string")throw new TypeError("expected string");var u,g=unescape(encodeURIComponent(s)),A=new Uint8Array(g.length);for(u=0;u<g.length;u++)A[u]=g.charCodeAt(u);return A},r.encodeUTF8=function(s){var u,g=[];for(u=0;u<s.length;u++)g.push(String.fromCharCode(s[u]));return decodeURIComponent(escape(g.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(r.encodeBase64=function(s){return Buffer.from(s).toString("base64")},r.decodeBase64=function(s){return i(s),new Uint8Array(Array.prototype.slice.call(Buffer.from(s,"base64"),0))}):(r.encodeBase64=function(s){return new Buffer(s).toString("base64")},r.decodeBase64=function(s){return i(s),new Uint8Array(Array.prototype.slice.call(new Buffer(s,"base64"),0))}):(r.encodeBase64=function(s){var u,g=[],A=s.length;for(u=0;u<A;u++)g.push(String.fromCharCode(s[u]));return btoa(g.join(""))},r.decodeBase64=function(s){i(s);var u,g=atob(s),A=new Uint8Array(g.length);for(u=0;u<g.length;u++)A[u]=g.charCodeAt(u);return A}),r})})(Ec)),Ec.exports}var tn=Uv();function Pf(){return Rn.randomBytes(24)}function jp(o,r,i,s,u){const g=new Uint8Array(s.length+o.length);g.set(s,0),g.set(o,s.length);const A=Rn.box(g,s,i,r),M={type:"handshake-intro",nonce:tn.encodeBase64(s),payload:tn.encodeBase64(A)};return u&&(M.pk=tn.encodeBase64(u)),M}function Op(o,r,i){try{const s=tn.decodeBase64(o.nonce),u=tn.decodeBase64(o.payload),g=Rn.box.open(u,s,i,r);if(!g)return console.error("[Handshake] Failed to decrypt intro payload"),null;const A=g.slice(0,24),M=g.slice(24);return Yv(A,s)?M.length!==32?(console.error("[Handshake] Invalid ephemeral public key length"),null):{nonce:A,ephemeralPublicKey:M}:(console.error("[Handshake] Nonce mismatch in intro"),null)}catch(s){return console.error("[Handshake] Error validating intro:",s),null}}function Lv(o,r){const i=Pf(),s={type:"connected",timestamp:Date.now()},u=new TextEncoder().encode(JSON.stringify(s)),g=Rn.secretbox(u,i,o),A=new Uint8Array(i.length+g.length);return A.set(i,0),A.set(g,i.length),{type:"handshake-connected",nonce:r,payload:tn.encodeBase64(A)}}function zv(o,r){try{const i=tn.decodeBase64(o.payload),s=i.slice(0,24),u=i.slice(24),g=Rn.secretbox.open(u,s,r);if(!g)return console.error("[Handshake] Failed to decrypt connected payload"),null;const A=new TextDecoder().decode(g),M=JSON.parse(A);if(M.type!=="connected"||typeof M.timestamp!="number")return console.error("[Handshake] Invalid connected message structure"),null;const b=Date.now();return Math.abs(b-M.timestamp)>60*1e3?(console.error("[Handshake] Connected message timestamp too old or in future"),null):M}catch(i){return console.error("[Handshake] Error validating connected:",i),null}}function Yv(o,r){if(o.length!==r.length)return!1;for(let i=0;i<o.length;i++)if(o[i]!==r[i])return!1;return!0}function Ip(o,r,i,s,u){const g=u?tn.decodeBase64(u):Rn.randomBytes(24),A=Rn.randomBytes(24),M={invite_id:r},b=new TextEncoder().encode(JSON.stringify(M)),S=Rn.box(b,A,i,s),_=new Uint8Array(24+S.length);return _.set(A,0),_.set(S,24),{invitingId:o,nonce:tn.encodeBase64(g),payload:tn.encodeBase64(_)}}function Kv(o,r,i){try{const s=tn.decodeBase64(o);if(s.length<=36)return console.error("[Handshake] PSI payload too short"),null;const u=s.slice(0,24),g=s.slice(24),A=Rn.box.open(g,u,r,i);if(!A)return console.error("[Handshake] Failed to decrypt PSI payload"),null;const M=new TextDecoder().decode(A),b=JSON.parse(M);return typeof b.invite_id!="string"?(console.error("[Handshake] Invalid PSI payload structure"),null):{inviteId:b.invite_id}}catch(s){return console.error("[Handshake] Error decrypting PSI payload:",s),null}}function qg(o){return Rn.hash(o).slice(0,32)}const Ug=Rn.hash(new TextEncoder().encode("chat-invite-pk-encryption")).slice(0,24);function Lg(o,r){return Rn.secretbox(o,Ug,r)}function qp(o,r){try{const i=Rn.secretbox.open(o,Ug,r);return i?i.length!==32?(console.error("[Handshake] Invalid decrypted identity PK length:",i.length),null):i:(console.error("[Handshake] Failed to decrypt identity PK"),null)}catch(i){return console.error("[Handshake] Error decrypting identity PK:",i),null}}function Gv(o,r){const i=new Uint8Array(o.length+r.length);return i.set(o,0),i.set(r,o.length),Rn.hash(i).slice(0,24)}function Vv(o,r,i,s){const u=Lg(i,s);return{type:"handshake-invite",nonce:tn.encodeBase64(o),payload:r,pk:tn.encodeBase64(u)}}function Fv(o){return{type:"handshake-invite",nonce:"",payload:o}}var Tc={exports:{}},Hv=Tc.exports,Up;function Pv(){return Up||(Up=1,(function(o){(function(r,i){o.exports?o.exports=i(Ig()):r.ed2curve=i(r.nacl)})(Hv,function(r){if(!r)throw new Error("tweetnacl not loaded");var i=function(Me){var Ue,Ce=new Float64Array(16);if(Me)for(Ue=0;Ue<Me.length;Ue++)Ce[Ue]=Me[Ue];return Ce},s=i(),u=i([1]),g=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),A=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function M(Me){var Ue,Ce;for(Ce=0;Ce<16;Ce++)Me[Ce]+=65536,Ue=Math.floor(Me[Ce]/65536),Me[(Ce+1)*(Ce<15?1:0)]+=Ue-1+37*(Ue-1)*(Ce===15?1:0),Me[Ce]-=Ue*65536}function b(Me,Ue,Ce){for(var xe,Tt=~(Ce-1),Ze=0;Ze<16;Ze++)xe=Tt&(Me[Ze]^Ue[Ze]),Me[Ze]^=xe,Ue[Ze]^=xe}function S(Me,Ue){var Ce;for(Ce=0;Ce<16;Ce++)Me[Ce]=Ue[2*Ce]+(Ue[2*Ce+1]<<8);Me[15]&=32767}function _(Me,Ue,Ce){var xe;for(xe=0;xe<16;xe++)Me[xe]=Ue[xe]+Ce[xe]|0}function j(Me,Ue,Ce){var xe;for(xe=0;xe<16;xe++)Me[xe]=Ue[xe]-Ce[xe]|0}function I(Me,Ue,Ce){var xe,Tt,Ze=new Float64Array(31);for(xe=0;xe<31;xe++)Ze[xe]=0;for(xe=0;xe<16;xe++)for(Tt=0;Tt<16;Tt++)Ze[xe+Tt]+=Ue[xe]*Ce[Tt];for(xe=0;xe<15;xe++)Ze[xe]+=38*Ze[xe+16];for(xe=0;xe<16;xe++)Me[xe]=Ze[xe];M(Me),M(Me)}function X(Me,Ue){I(Me,Ue,Ue)}function fe(Me,Ue){var Ce=i(),xe;for(xe=0;xe<16;xe++)Ce[xe]=Ue[xe];for(xe=253;xe>=0;xe--)X(Ce,Ce),xe!==2&&xe!==4&&I(Ce,Ce,Ue);for(xe=0;xe<16;xe++)Me[xe]=Ce[xe]}function pe(Me,Ue){var Ce,xe,Tt,Ze=i(),se=i();for(Ce=0;Ce<16;Ce++)se[Ce]=Ue[Ce];for(M(se),M(se),M(se),xe=0;xe<2;xe++){for(Ze[0]=se[0]-65517,Ce=1;Ce<15;Ce++)Ze[Ce]=se[Ce]-65535-(Ze[Ce-1]>>16&1),Ze[Ce-1]&=65535;Ze[15]=se[15]-32767-(Ze[14]>>16&1),Tt=Ze[15]>>16&1,Ze[14]&=65535,b(se,Ze,1-Tt)}for(Ce=0;Ce<16;Ce++)Me[2*Ce]=se[Ce]&255,Me[2*Ce+1]=se[Ce]>>8}function Pe(Me){var Ue=new Uint8Array(32);return pe(Ue,Me),Ue[0]&1}function ot(Me,Ue,Ce,xe,Tt){var Ze,se=0;for(Ze=0;Ze<Tt;Ze++)se|=Me[Ue+Ze]^Ce[xe+Ze];return(1&se-1>>>8)-1}function st(Me,Ue,Ce,xe){return ot(Me,Ue,Ce,xe,32)}function He(Me,Ue){var Ce=new Uint8Array(32),xe=new Uint8Array(32);return pe(Ce,Me),pe(xe,Ue),st(Ce,0,xe,0)}function mt(Me,Ue){var Ce=i(),xe;for(xe=0;xe<16;xe++)Ce[xe]=Ue[xe];for(xe=250;xe>=0;xe--)X(Ce,Ce),xe!==1&&I(Ce,Ce,Ue);for(xe=0;xe<16;xe++)Me[xe]=Ce[xe]}function Oe(Me,Ue){var Ce;for(Ce=0;Ce<16;Ce++)Me[Ce]=Ue[Ce]|0}function We(Me,Ue){var Ce=i(),xe=i(),Tt=i(),Ze=i(),se=i(),Ye=i(),Ie=i();return Oe(Me[2],u),S(Me[1],Ue),X(Tt,Me[1]),I(Ze,Tt,g),j(Tt,Tt,Me[2]),_(Ze,Me[2],Ze),X(se,Ze),X(Ye,se),I(Ie,Ye,se),I(Ce,Ie,Tt),I(Ce,Ce,Ze),mt(Ce,Ce),I(Ce,Ce,Tt),I(Ce,Ce,Ze),I(Ce,Ce,Ze),I(Me[0],Ce,Ze),X(xe,Me[0]),I(xe,xe,Ze),He(xe,Tt)&&I(Me[0],Me[0],A),X(xe,Me[0]),I(xe,xe,Ze),He(xe,Tt)?-1:(Pe(Me[0])===Ue[31]>>7&&j(Me[0],s,Me[0]),I(Me[3],Me[0],Me[1]),0)}function Xe(Me){var Ue=new Uint8Array(32),Ce=[i(),i(),i(),i()],xe=i(),Tt=i();if(We(Ce,Me))return null;var Ze=Ce[1];return _(xe,u,Ze),j(Tt,u,Ze),fe(Tt,Tt),I(xe,xe,Tt),pe(Ue,xe),Ue}function Bt(Me){var Ue=new Uint8Array(64),Ce=new Uint8Array(32),xe;for(r.lowlevel.crypto_hash(Ue,Me,32),Ue[0]&=248,Ue[31]&=127,Ue[31]|=64,xe=0;xe<32;xe++)Ce[xe]=Ue[xe];for(xe=0;xe<64;xe++)Ue[xe]=0;return Ce}function Pt(Me){var Ue=Xe(Me.publicKey);return Ue?{publicKey:Ue,secretKey:Bt(Me.secretKey)}:null}return{convertPublicKey:Xe,convertSecretKey:Bt,convertKeyPair:Pt}})})(Tc)),Tc.exports}var Qv=Pv();const zg=vl(Qv);class jc{identityKeypair;constructor(r){this.identityKeypair=r}static generate(){const r=Rn.sign.keyPair();return new jc(r)}static fromPrivateKey(r){const i=tn.decodeBase64(r);if(i.length!==64)throw new Error("Invalid identity private key length");const s=Rn.sign.keyPair.fromSecretKey(i);return new jc(s)}get publicKey(){return tn.encodeBase64(this.identityKeypair.publicKey)}get secretKey(){return tn.encodeBase64(this.identityKeypair.secretKey)}get userId(){const r=Rn.hash(this.identityKeypair.publicKey);return Array.from(r.slice(0,8)).map(i=>i.toString(16).padStart(2,"0")).join("")}export(){return{userId:this.userId,publicKey:this.publicKey,secretKey:this.secretKey,profile:{}}}sign(r){return Rn.sign.detached(r,this.identityKeypair.secretKey)}static verify(r,i,s){return Rn.sign.detached.verify(r,i,s)}exportForSharing(){return JSON.stringify({version:1,publicKey:this.publicKey})}}function Yg(o){const r=tn.decodeBase64(o),i=Rn.hash(r);return Array.from(i.slice(0,8)).map(s=>s.toString(16).padStart(2,"0")).join("")}function Qf(o,r){return Yg(r)===o}function So(o){const r=zg.convertPublicKey(o);if(!r)throw new Error("Failed to derive encryption public key");return r}function Jf(o){const r=zg.convertSecretKey(o);if(!r)throw new Error("Failed to derive encryption secret key");return r}class jf{inviteId;introNonce;inviteeNonceStr;symmetricKey;isInvitedParty;isExistingContact;peerIdentityPK;constructor(r,i,s,u,g=!1){this.inviteId=r,this.symmetricKey=qg(i),this.introNonce=Gv(s,i),this.inviteeNonceStr=tn.encodeBase64(s),this.isInvitedParty=u,this.isExistingContact=g}deriveIntroNonce(){return this.introNonce}deriveSymmetricKey(){return this.symmetricKey}destroy(){this.symmetricKey.fill(0),this.introNonce.fill(0),this.peerIdentityPK&&this.peerIdentityPK.fill(0)}}class Jv{handshakeStates=new Map;completedSessionNonce=new Map;myIdentity=null;thisEncryptionSK=null;signalSender=null;onHandshakeComplete=null;onHandshakeStatus=null;getPeerPublicKey=null;getInviteCallback=null;markInviteUsedCallback=null;createContactFromInviteCallback=null;onInviteRejectedCallback=null;thisIdentityPK=null;thisEncryptionPK=null;timeoutMs;sessionExpiryMs;constructor(r,i){this.timeoutMs=r,this.sessionExpiryMs=i}createState(r,i,s){const u=tn.decodeBase64(i),g=So(u);return{peerId:r,peerIdentityPK:i,sentIntro:!1,receivedIntro:!1,sentConnected:!1,receivedConnected:!1,nonce:s,startedAt:Date.now(),session:{thisEphemeral:Rn.box.keyPair(),peerEphemeral:null,sessionKey:new Uint8Array(32),expiresAt:0,thisEncryptionSK:this.thisEncryptionSK,peerEncryptionPK:g}}}checkAndHandleTimeout(r){const i=this.handshakeStates.get(r);return i&&Date.now()>i.startedAt+this.timeoutMs?(this.handleHandshakeTimeout(r),!0):!1}initialize(r){this.myIdentity=r;const i=tn.decodeBase64(r.secretKey),s=tn.decodeBase64(r.publicKey);this.thisEncryptionSK=Jf(i),this.thisEncryptionPK=So(s),this.thisIdentityPK=s,console.log("[HandshakeCoordinator] Initialized for user:",r.userId.substring(0,8))}setSignalSender(r){this.signalSender=r}setOnHandshakeComplete(r){this.onHandshakeComplete=r}setOnHandshakeStatus(r){this.onHandshakeStatus=r}setGetPeerPublicKey(r){this.getPeerPublicKey=r}setGetInviteCallback(r){this.getInviteCallback=r}setMarkInviteUsedCallback(r){this.markInviteUsedCallback=r}setCreateContactFromInviteCallback(r){this.createContactFromInviteCallback=r}setOnInviteRejectedCallback(r){this.onInviteRejectedCallback=r}isHandshakeInProgress(r){return this.handshakeStates.has(r)}async initiateHandshakeIfNotRunning(r,i){this.isHandshakeInProgress(r)&&!this.checkAndHandleTimeout(r)||await this.initiateHandshake(r,i)}async initiateHandshake(r,i){if(!this.myIdentity){console.error("[HandshakeCoordinator] Not initialized");return}if(!this.signalSender){console.error("[HandshakeCoordinator] No signal sender configured");return}console.log("[HandshakeCoordinator] Initiating handshake with:",r.substring(0,8)),this.clearHandshakeState(r),this.completedSessionNonce.delete(r),this.onHandshakeStatus?.(r,"started");const s=this.createState(r,i);this.handshakeStates.set(r,s),await this.sendIntroMessage(r)}async sendIntroMessage(r){if(!this.myIdentity||!this.signalSender)return;const i=this.handshakeStates.get(r);if(i)try{i.nonce||(i.nonce=tn.encodeBase64(Pf()));const s=jp(i.session.thisEphemeral.publicKey,i.session.thisEncryptionSK,i.session.peerEncryptionPK,tn.decodeBase64(i.nonce));await this.signalSender(r,s),i.sentIntro=!0,console.log("[HandshakeCoordinator] Sent handshake-intro to:",r.substring(0,8),"with nonce:",i.nonce.substring(0,8))}catch(s){console.error("[HandshakeCoordinator] Failed to send intro:",s)}}async sendConnectedMessage(r){if(!this.myIdentity||!this.signalSender)return;const i=this.handshakeStates.get(r);if(i)try{const s=Lv(i.session.sessionKey,i.nonce);await this.signalSender(r,s),i.sentConnected=!0,console.log("[HandshakeCoordinator] Sent handshake-connected to:",r.substring(0,8),"with nonce:",i.nonce?.substring(0,8))}catch(s){console.error("[HandshakeCoordinator] Failed to send connected:",s)}}async handleHandshakeMessage(r,i){if(!this.myIdentity){console.error("[HandshakeCoordinator] Not initialized");return}i.type==="handshake-invite"?i.nonce===""?this.handleInviteRejection(r,i.payload):await this.handleInviteMessage(r,i):i.type==="handshake-intro"?await this.handleIntroMessage(r,i):i.type==="handshake-connected"&&await this.handleConnectedMessage(r,i)}async initiateFromPSI(r){if(!this.myIdentity||!this.signalSender||!this.thisIdentityPK){console.error("[HandshakeCoordinator] Not initialized for invite");return}const i=r.invitingId;console.log("[HandshakeCoordinator] Initiating handshake from PSI to:",i.substring(0,8)),this.clearHandshakeState(i),this.completedSessionNonce.delete(i);const s=tn.decodeBase64(r.nonce),u=Pf(),g=new jf("",s,u,!0),A={peerId:i,peerIdentityPK:"",sentIntro:!1,receivedIntro:!1,sentConnected:!1,receivedConnected:!1,startedAt:Date.now(),session:{thisEphemeral:Rn.box.keyPair(),peerEphemeral:null,sessionKey:new Uint8Array(32),expiresAt:0,thisEncryptionSK:this.thisEncryptionSK,peerEncryptionPK:new Uint8Array(32)},invite:g};this.handshakeStates.set(i,A),this.onHandshakeStatus?.(i,"started");const M=g.deriveSymmetricKey(),b=Vv(u,r.payload,this.thisIdentityPK,M);try{await this.signalSender(i,b),console.log("[HandshakeCoordinator] Sent handshake-invite to:",i.substring(0,8))}catch(S){console.error("[HandshakeCoordinator] Failed to send handshake-invite:",S),this.handleHandshakeFailed(i)}}async handleInviteMessage(r,i){if(!this.myIdentity||!this.signalSender||!this.thisEncryptionSK||!this.thisEncryptionPK||!this.thisIdentityPK){console.error("[HandshakeCoordinator] Not initialized for invite handling");return}console.log("[HandshakeCoordinator] Received handshake-invite from:",r.substring(0,8));const s=this.handshakeStates.get(r);if(s?.invite){if(s.invite.inviteeNonceStr===i.nonce){s.invite.isInvitedParty?console.log("[HandshakeCoordinator] Invitee nonce collision, invited flow takes over (already processing)"):(console.log("[HandshakeCoordinator] Resending intro for existing invite session"),await this.sendInviteIntroMessage(r));return}console.log("[HandshakeCoordinator] New invite nonce, resetting session"),this.clearHandshakeState(r)}const u=tn.decodeBase64(i.nonce),g=i.payload,A=i.pk?tn.decodeBase64(i.pk):null;if(!A){console.error("[HandshakeCoordinator] Invite message missing pk field"),await this.sendInviteRejection(r,"Missing identity key");return}const M=Kv(g,this.thisEncryptionPK,this.thisEncryptionSK);if(!M){console.error("[HandshakeCoordinator] Failed to decrypt invite payload"),await this.sendInviteRejection(r,"Invalid invite");return}const b=M.inviteId;if(console.log("[HandshakeCoordinator] Decrypted invite ID:",b),!this.getInviteCallback){console.error("[HandshakeCoordinator] No getInviteCallback configured"),await this.sendInviteRejection(r,"Server error");return}const S=await this.getInviteCallback(b,r);if(typeof S=="string"){console.log("[HandshakeCoordinator] Peer is existing contact, skipping invite validation");const st=S,He=new jf("",new Uint8Array(24),u,!1,!0),mt=this.createState(r,st,tn.encodeBase64(u));mt.invite=He,this.handshakeStates.set(r,mt),this.onHandshakeStatus?.(r,"started"),await this.sendIntroMessage(r);return}if(!S){console.error("[HandshakeCoordinator] Invite not found:",b),await this.sendInviteRejection(r,"Invalid invite");return}const _=S,j=tn.decodeBase64(_.nonce);if(!_.valid){console.log("[HandshakeCoordinator] Invite is invalidated"),await this.sendInviteRejection(r,"Invite no longer valid");return}if(_.expiry&&Date.now()>_.expiry){console.log("[HandshakeCoordinator] Invite has expired"),await this.sendInviteRejection(r,"Invite expired");return}if(_.useLimit!==void 0&&_.useCount>=_.useLimit){console.log("[HandshakeCoordinator] Invite use limit exceeded"),await this.sendInviteRejection(r,"Invite use limit reached");return}const I=qg(j),X=qp(A,I);if(!X){console.error("[HandshakeCoordinator] Failed to decrypt peer identity PK"),await this.sendInviteRejection(r,"Decryption error");return}const fe=tn.encodeBase64(X);if(!Qf(r,fe)){console.error("[HandshakeCoordinator] Peer identity mismatch: userId does not match publicKey"),await this.sendInviteRejection(r,"Identity verification failed");return}const pe=So(X);console.log("[HandshakeCoordinator] Invite validated, peer identity:",fe.substring(0,16));const Pe=new jf(_.inviteId,j,u,!1);Pe.peerIdentityPK=X;const ot={peerId:r,peerIdentityPK:fe,sentIntro:!1,receivedIntro:!1,sentConnected:!1,receivedConnected:!1,startedAt:Date.now(),session:{thisEphemeral:Rn.box.keyPair(),peerEphemeral:null,sessionKey:new Uint8Array(32),expiresAt:0,thisEncryptionSK:this.thisEncryptionSK,peerEncryptionPK:pe},invite:Pe};ot.nonce=tn.encodeBase64(Pe.deriveIntroNonce()),this.handshakeStates.set(r,ot),this.onHandshakeStatus?.(r,"started"),await this.sendInviteIntroMessage(r)}async sendInviteIntroMessage(r){if(!this.myIdentity||!this.signalSender||!this.thisIdentityPK)return;const i=this.handshakeStates.get(r);if(!(!i||!i.invite))try{const s=i.invite.deriveIntroNonce(),u=i.invite.deriveSymmetricKey(),g=Lg(this.thisIdentityPK,u),A=jp(i.session.thisEphemeral.publicKey,i.session.thisEncryptionSK,i.session.peerEncryptionPK,s,g);await this.signalSender(r,A),i.sentIntro=!0,i.nonce=tn.encodeBase64(s),console.log("[HandshakeCoordinator] Sent invite handshake-intro to:",r.substring(0,8),"with derived nonce")}catch(s){console.error("[HandshakeCoordinator] Failed to send invite intro:",s)}}async sendInviteRejection(r,i){if(this.signalSender)try{const s=Fv(i);await this.signalSender(r,s),console.log("[HandshakeCoordinator] Sent invite rejection to:",r.substring(0,8),"reason:",i)}catch(s){console.error("[HandshakeCoordinator] Failed to send rejection:",s)}}handleInviteRejection(r,i){console.log("[HandshakeCoordinator] Invite rejected by:",r.substring(0,8),"reason:",i),this.handshakeStates.get(r)?.invite?.isInvitedParty&&this.onInviteRejectedCallback?.(r,i),this.completedSessionNonce.delete(r),this.clearHandshakeState(r),this.onHandshakeStatus?.(r,"failed",i)}async handleIntroMessage(r,i){if(!this.myIdentity||!this.signalSender)return;console.log("[HandshakeCoordinator] Received handshake-intro from:",r.substring(0,8),"nonce:",i.nonce?.substring(0,8)),this.checkAndHandleTimeout(r);const s=this.handshakeStates.get(r),u=i.nonce,g=s?.nonce,A=this.completedSessionNonce.get(r);if(s?.invite?.isInvitedParty&&!s.peerIdentityPK){await this.handleInviteIntroAsInvitedParty(r,i,s);return}let b=this.getPeerPublicKey?.(r);if(!b&&s?.invite&&!s.invite.isInvitedParty&&(b=s.peerIdentityPK),!b){console.error("[HandshakeCoordinator] Peer public key not found for:",r.substring(0,8));return}if(!g&&A&&u===A){console.log("[HandshakeCoordinator] Ignoring stale intro from completed session. Nonce:",u.substring(0,8));return}const S=s?.invite!==void 0;if(!(!g||u===g||u>g||S)){console.log("[HandshakeCoordinator] Ignoring intro with lower nonce. My nonce:",g?.substring(0,8),"Peer nonce:",u.substring(0,8));return}g&&u!==g&&!S&&s&&(console.log("[HandshakeCoordinator] Adopting higher nonce. My nonce:",g?.substring(0,8),"-> Peer nonce:",u.substring(0,8)),s.nonce=u,s.sentIntro=!1,s.sentConnected=!1,s.receivedConnected=!1);let I=this.handshakeStates.get(r);I||(I=this.createState(r,b,u),this.handshakeStates.set(r,I),this.onHandshakeStatus?.(r,"started"));const X=Op(i,I.session.thisEncryptionSK,I.session.peerEncryptionPK);if(!X){console.error("[HandshakeCoordinator] Failed to validate intro"),this.handleHandshakeFailed(r);return}if(I.receivedIntro=!0,!I.session.peerEphemeral)try{const fe=Rn.box.before(X.ephemeralPublicKey,I.session.thisEphemeral.secretKey);I.session.sessionKey=fe,I.session.peerEphemeral=X.ephemeralPublicKey,I.session.expiresAt=Date.now()+this.sessionExpiryMs,console.log("[HandshakeCoordinator] Session key derived for:",r.substring(0,8))}catch(fe){console.error("[HandshakeCoordinator] Failed to derive session key:",fe),this.handleHandshakeFailed(r);return}I.sentIntro||(I.invite&&!I.invite.isInvitedParty&&!I.invite.isExistingContact?await this.sendInviteIntroMessage(r):await this.sendIntroMessage(r)),await this.sendConnectedMessage(r),this.checkHandshakeComplete(r)}async handleInviteIntroAsInvitedParty(r,i,s){if(!this.myIdentity||!this.signalSender||!s.invite)return;console.log("[HandshakeCoordinator] Processing invite intro as invited party from:",r.substring(0,8));const u=s.invite.deriveIntroNonce(),g=tn.decodeBase64(i.nonce);let A=u.length===g.length;if(A){for(let X=0;X<u.length;X++)if(u[X]!==g[X]){A=!1;break}}if(!A){console.error("[HandshakeCoordinator] Derived nonce mismatch in invite flow"),this.handleHandshakeFailed(r);return}if(!i.pk){console.error("[HandshakeCoordinator] Invite intro missing pk field"),this.handleHandshakeFailed(r);return}const M=tn.decodeBase64(i.pk),b=s.invite.deriveSymmetricKey(),S=qp(M,b);if(!S){console.error("[HandshakeCoordinator] Failed to decrypt inviting party identity PK"),this.handleHandshakeFailed(r);return}const _=tn.encodeBase64(S);if(!Qf(r,_)){console.error("[HandshakeCoordinator] Peer identity mismatch: userId does not match publicKey"),this.handleHandshakeFailed(r);return}const j=So(S);s.peerIdentityPK=_,s.session.peerEncryptionPK=j,s.invite.peerIdentityPK=S,s.nonce=i.nonce,console.log("[HandshakeCoordinator] Learned inviting party identity:",_.substring(0,16));const I=Op(i,s.session.thisEncryptionSK,j);if(!I){console.error("[HandshakeCoordinator] Failed to validate invite intro payload"),this.handleHandshakeFailed(r);return}if(s.receivedIntro=!0,!s.session.peerEphemeral)try{const X=Rn.box.before(I.ephemeralPublicKey,s.session.thisEphemeral.secretKey);s.session.sessionKey=X,s.session.peerEphemeral=I.ephemeralPublicKey,s.session.expiresAt=Date.now()+this.sessionExpiryMs,console.log("[HandshakeCoordinator] Session key derived (invite) for:",r.substring(0,8))}catch(X){console.error("[HandshakeCoordinator] Failed to derive session key:",X),this.handleHandshakeFailed(r);return}s.sentIntro||await this.sendInviteIntroMessage(r),await this.sendConnectedMessage(r),this.checkHandshakeComplete(r)}async handleConnectedMessage(r,i){if(!this.myIdentity||!this.signalSender)return;console.log("[HandshakeCoordinator] Received handshake-connected from:",r.substring(0,8),"with nonce:",i.nonce?.substring(0,8));const s=i.nonce,u=this.completedSessionNonce.get(r),g=this.handshakeStates.get(r);if(!g){u&&s===u?console.log("[HandshakeCoordinator] Ignoring stale connected from completed session. Nonce:",s?.substring(0,8)):console.log("[HandshakeCoordinator] No handshake state found - likely from old handshake, ignoring");return}if(!s||s!==g.nonce){console.log("[HandshakeCoordinator] Nonce mismatch - message from old handshake. Expected:",g.nonce?.substring(0,8),"Got:",s?.substring(0,8));return}if(!zv(i,g.session.sessionKey)){console.error("[HandshakeCoordinator] Failed to validate connected message"),this.handleHandshakeFailed(r);return}g.receivedConnected=!0,g.sentConnected||await this.sendConnectedMessage(r),this.checkHandshakeComplete(r)}async checkHandshakeComplete(r){const i=this.handshakeStates.get(r);!i?.receivedIntro||!i.receivedConnected||(i.nonce&&this.completedSessionNonce.set(r,i.nonce),console.log("[HandshakeCoordinator]  Handshake complete with:",r.substring(0,8)),i.invite&&!i.invite.isExistingContact&&await this.handleInviteCompletion(r,i),this.onHandshakeComplete?.(r,i.session.sessionKey,i.session.expiresAt),this.onHandshakeStatus?.(r,"complete"),this.clearHandshakeState(r))}async handleInviteCompletion(r,i){if(!i.invite)return;const s=i.invite,u=i.peerIdentityPK;if(console.log("[HandshakeCoordinator] Completing invite handshake, isInvitedParty:",s.isInvitedParty),this.createContactFromInviteCallback&&u)try{await this.createContactFromInviteCallback(r,u,s.inviteId,s.isInvitedParty),console.log("[HandshakeCoordinator] Contact created from invite for:",r.substring(0,8))}catch(g){console.error("[HandshakeCoordinator] Failed to create contact from invite:",g)}if(!s.isInvitedParty&&s.inviteId&&this.markInviteUsedCallback)try{await this.markInviteUsedCallback(s.inviteId),console.log("[HandshakeCoordinator] Invite use count incremented:",s.inviteId)}catch(g){console.error("[HandshakeCoordinator] Failed to increment invite use count:",g)}}clearHandshakeState(r){const i=this.handshakeStates.get(r);i&&(i.session.sessionKey.fill(0),i.session.thisEphemeral.secretKey.fill(0),i.invite&&i.invite.destroy()),this.handshakeStates.delete(r)}handleHandshakeTimeout(r){console.error("[HandshakeCoordinator] Handshake timeout for:",r.substring(0,8)),this.completedSessionNonce.delete(r),this.clearHandshakeState(r),this.onHandshakeStatus?.(r,"timeout")}handleHandshakeFailed(r){console.error("[HandshakeCoordinator] Handshake failed for:",r.substring(0,8)),this.completedSessionNonce.delete(r),this.clearHandshakeState(r),this.onHandshakeStatus?.(r,"failed")}cancelHandshake(r){this.handshakeStates.has(r)&&(console.log("[HandshakeCoordinator] Cancelling handshake for:",r.substring(0,8)),this.completedSessionNonce.delete(r),this.clearHandshakeState(r))}destroy(){this.handshakeStates.forEach((r,i)=>{this.clearHandshakeState(i)}),this.completedSessionNonce.clear(),this.thisEncryptionSK&&(this.thisEncryptionSK.fill(0),this.thisEncryptionSK=null),this.thisEncryptionPK&&(this.thisEncryptionPK.fill(0),this.thisEncryptionPK=null),this.thisIdentityPK&&(this.thisIdentityPK.fill(0),this.thisIdentityPK=null),this.onHandshakeComplete=null,this.onHandshakeStatus=null,this.getPeerPublicKey=null,this.getInviteCallback=null,this.markInviteUsedCallback=null,this.createContactFromInviteCallback=null,this.onInviteRejectedCallback=null}}class Zv{sessionKey;sendCounter;receiveCounter;constructor(r){this.sessionKey=r,this.sendCounter=0,this.receiveCounter=0}encrypt(r){const i=new TextEncoder().encode(r),s=this.generateNonce(),u=Rn.secretbox(i,s,this.sessionKey);return this.sendCounter++,{ciphertext:tn.encodeBase64(u),nonce:tn.encodeBase64(s),timestamp:Date.now()}}decrypt(r){const i=tn.decodeBase64(r.ciphertext),s=tn.decodeBase64(r.nonce),u=Rn.secretbox.open(i,s,this.sessionKey);if(!u)throw new Error("Decryption failed - message may be tampered or session key invalid");return this.receiveCounter++,new TextDecoder().decode(u)}encryptBytes(r){const i=this.generateNonce(),s=Rn.secretbox(r,i,this.sessionKey);this.sendCounter++;const u=new Uint8Array(i.length+s.length);return u.set(i,0),u.set(s,i.length),u}decryptBytes(r){if(r.length<24)throw new Error("Data too short - missing nonce");const i=r.slice(0,24),s=r.slice(24),u=Rn.secretbox.open(s,i,this.sessionKey);if(!u)throw new Error("Decryption failed - message may be tampered or session key invalid");return this.receiveCounter++,u}generateNonce(){return Rn.randomBytes(24)}getSendCounter(){return this.sendCounter}getReceiveCounter(){return this.receiveCounter}destroy(){this.sessionKey.fill(0)}}class Mc extends Error{code="SESSION_EXPIRED";peerId;constructor(r){super(`Session expired for peer: ${r}`),this.name="SessionExpiredError",this.peerId=r}}class _c extends Error{code="NO_SESSION";peerId;constructor(r){super(`No session for peer: ${r}`),this.name="NoSessionError",this.peerId=r}}class Kg extends Error{code="TRANSPORT_DISCONNECTED";peerId;constructor(r){super(`Transport disconnected for peer: ${r}`),this.name="TransportDisconnectedError",this.peerId=r}}class Zf extends Error{code="CORRUPTED_PAYLOAD";peerId;cause;constructor(r,i){super(`Corrupted signal payload from peer: ${r}`),this.name="CorruptedPayloadError",this.peerId=r,this.cause=i}}class Xf extends Error{code="INCORRECT_SESSION_KEY";peerId;cause;constructor(r,i){super(`Cannot parse signal from peer ${r} - possible session key mismatch`),this.name="IncorrectSessionKeyError",this.peerId=r,this.cause=i}}const Xv=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478"},{urls:"stun:stun.cloudflare.com:3478"}];class Wv{connection;msgChannel;pendingIceCandidates=[];callbacks;destroyed=!1;constructor(r){this.callbacks=r,this.connection=new RTCPeerConnection({iceServers:Xv}),this.setupConnectionHandlers(),this.msgChannel=this.connection.createDataChannel("messages",{ordered:!0,negotiated:!0,id:1}),this.setupMessageChannel()}setState(r){this.callbacks.onStateChange(r)}setupConnectionHandlers(){this.connection.onconnectionstatechange=()=>{if(this.destroyed)return;const r=this.connection.connectionState;console.log("[WebRtcConnection] connectionState:",r)},this.connection.onsignalingstatechange=()=>{this.destroyed||console.log("[WebRtcConnection] signalingState:",this.connection.signalingState)},this.connection.oniceconnectionstatechange=()=>{this.destroyed||console.log("[WebRtcConnection] iceConnectionState:",this.connection.iceConnectionState)},this.connection.onicegatheringstatechange=()=>{this.destroyed||console.log("[WebRtcConnection] iceGatheringState:",this.connection.iceGatheringState)},this.connection.onicecandidate=r=>{this.destroyed||(r.candidate?(console.log("[WebRtcConnection]  ICE candidate:",r.candidate.candidate?.substring(0,50)),this.callbacks.onSignal({ice:r.candidate.toJSON()})):console.log("[WebRtcConnection] ICE gathering complete"))},this.connection.ondatachannel=r=>{this.destroyed||console.log("[WebRtcConnection] Received data channel:",r.channel.label)}}setupMessageChannel(){const r=this.msgChannel;r.binaryType="arraybuffer",r.onopen=()=>{this.destroyed||(console.log("[WebRtcConnection] Message channel opened"),this.setState("connected"))},r.onclose=()=>{this.destroyed||(console.log("[WebRtcConnection] Message channel closed"),this.setState("disconnected"))},r.onerror=i=>{this.destroyed||(console.error("[WebRtcConnection] Message channel error:",i),this.setState("failed"))},r.onmessage=i=>{if(this.destroyed)return;const s=new Uint8Array(i.data);this.callbacks.onData(s)}}async initiateConnection(){if(this.destroyed)throw new Error("Connection destroyed");console.log("[WebRtcConnection] Initiating connection (creating offer)");const r=await this.connection.createOffer();await this.connection.setLocalDescription(r),this.callbacks.onSignal({offer:r})}async handleSignal(r){if(this.destroyed){console.warn("[WebRtcConnection] Ignoring signal - connection destroyed");return}const i=this.connection.signalingState;try{if(r.offer){console.log("[WebRtcConnection]  Received offer, signalingState:",i),await this.connection.setRemoteDescription(r.offer),await this.processQueuedIceCandidates();const s=await this.connection.createAnswer();await this.connection.setLocalDescription(s),this.callbacks.onSignal({answer:s}),console.log("[WebRtcConnection]  Sent answer")}else if(r.answer){if(console.log("[WebRtcConnection]  Received answer, signalingState:",i),i!=="have-local-offer"){console.log("[WebRtcConnection] Ignoring answer - not in have-local-offer state");return}await this.connection.setRemoteDescription(r.answer),await this.processQueuedIceCandidates(),console.log("[WebRtcConnection]  Answer processed, signalingState:",this.connection.signalingState)}else if(r.ice){if(!this.connection.remoteDescription){console.log("[WebRtcConnection] Queuing ICE candidate (no remote description yet), pending:",this.pendingIceCandidates.length+1),this.pendingIceCandidates.push(r.ice);return}await this.connection.addIceCandidate(r.ice),console.log("[WebRtcConnection]  Added ICE candidate")}}catch(s){throw console.error("[WebRtcConnection] Failed to handle signal, signalingState was:",i,"error:",s),s}}async processQueuedIceCandidates(){this.pendingIceCandidates.length>0&&console.log("[WebRtcConnection] Processing",this.pendingIceCandidates.length,"queued ICE candidates");for(const r of this.pendingIceCandidates)try{await this.connection.addIceCandidate(r)}catch(i){console.warn("[WebRtcConnection] Failed to add queued ICE candidate:",i)}this.pendingIceCandidates=[]}sendMessage(r){if(this.destroyed)throw new Error("Connection destroyed");if(!this.msgChannel||this.msgChannel.readyState!=="open")throw new Error("Message channel not open");this.msgChannel.send(r)}destroy(){this.destroyed||(console.log("[WebRtcConnection] Destroying"),this.destroyed=!0,this.msgChannel.close(),this.connection.close(),this.pendingIceCandidates=[])}}class $v{peerId;identityPK;sessionExpiry=0;encryption=null;webrtc=null;_state="offline";manager;constructor(r,i,s){this.peerId=r,this.identityPK=i,this.manager=s,console.log("[DataTransport] Created for peer:",r.substring(0,8))}get state(){return this._state}get isConnected(){return this.state=="online"}get hasSession(){return this.encryption!==null}get isSessionValid(){return this.hasSession&&Date.now()<this.sessionExpiry}get sessionExpiresAt(){return this.sessionExpiry}updateState(r){const i=this._state;if(this.webrtc)switch(r){case"offline":this.webrtc.destroy(),this.webrtc=null;break}else switch(r){case"offline":break;case"connecting":this.webrtc=new Wv({onSignal:s=>this.handleOutgoingSignal("webrtc",s),onData:s=>this.handleIncomingMessage(s),onStateChange:s=>this.handleWebRtcStateChange(s)});break;case"online":throw new Error("Invalid state transition: no-WebRTC -> online")}this._state=r,i!=r&&(console.log(`[DataTransport] State: ${i} -> ${r} for:`,this.peerId.substring(0,8)),this.manager.updatePeerStatus(this.peerId,r))}setSession(r,i){this.encryption?.destroy(),this.encryption=new Zv(r),this.sessionExpiry=i,console.log("[DataTransport]  Session set for:",this.peerId.substring(0,8),"expires:",new Date(i).toISOString())}async initiateConnection(){if(!this.isSessionValid){console.log("[DataTransport] Skipping connection initiation - session is invalid or no session exists");return}if(this.state!=="offline"){console.log("[DataTransport] Skipping connection initiation - already connected or connecting");return}this.updateState("connecting"),await this.webrtc.initiateConnection()}handleOutgoingSignal(r,i){if(!this.encryption){console.error("[DataTransport] Cannot encrypt signal - no session");return}const u=JSON.stringify({type:r,payload:i}),g=this.encryption.encrypt(u),A=JSON.stringify(g);console.log("[DataTransport]  Sending encrypted signal:",r),this.manager.sendCustomSignal(this.peerId,A)}handleEncryptedSignal(r){if(!this.hasSession)throw new _c(this.peerId);if(!this.isSessionValid)throw new Mc(this.peerId);let i;try{const g=JSON.parse(r);i=this.encryption.decrypt(g)}catch(g){throw new Zf(this.peerId,g instanceof Error?g:void 0)}let s;try{s=JSON.parse(i)}catch(g){throw new Xf(this.peerId,g instanceof Error?g:void 0)}const u=s;if(!u||typeof u.type!="string"){console.warn("[DataTransport] Invalid signal envelope structure:",s);return}switch(console.log("[DataTransport]  Received encrypted signal:",u.type),u.type){case"webrtc":this.handleWebRtcSignal(u.payload);break;default:console.warn("[DataTransport] Unknown signal type:",u.type)}}handleWebRtcSignal(r){var i="unknown";if(r.answer?i="answer":r.offer?i="offer":r.ice&&(i="ice"),!this.webrtc){if(!r.offer){console.warn("[DataTransport] No WebRTC connection to handle signal:",i);return}console.log("[DataTransport] Creating WebRTC connection for incoming offer"),this.updateState("connecting")}console.log("[DataTransport]  Handling WebRTC signal:",i),this.webrtc.handleSignal(r).catch(s=>{console.error("[DataTransport] Failed to handle WebRTC signal:",i,", error:",s)})}handleWebRtcStateChange(r){switch(console.log("[DataTransport] WebRTC state:",r,"for:",this.peerId.substring(0,8)),r){case"connecting":this.updateState("connecting");break;case"connected":this.updateState("online");break;default:this.updateState("offline");break}}handleIncomingMessage(r){console.log("[DataTransport]  Encrypted message received from:",this.peerId.substring(0,8));let i;try{if(!this.hasSession)throw new _c(this.peerId);if(!this.isSessionValid)throw new Mc(this.peerId);let s;try{s=this.encryption.decryptBytes(r)}catch(u){throw new Zf(this.peerId,u)}try{const u=new TextDecoder().decode(s);i=JSON.parse(u)}catch(u){throw new Xf(this.peerId,u)}}catch(s){console.error("[DataTransport] Failed to process message:",s),s instanceof Error&&this.manager.reportPeerError(this.peerId,s);return}this.manager.onWireMessage(this.peerId,i)}async sendMessage(r){if(!this.hasSession)throw new _c(this.peerId);if(!this.isSessionValid)throw new Mc(this.peerId);if(!this.isConnected)throw new Kg(this.peerId);const i=new TextEncoder().encode(JSON.stringify(r)),s=this.encryption.encryptBytes(i);this.webrtc.sendMessage(s),console.log("[DataTransport]  Message sent to:",this.peerId.substring(0,8))}clearSessionAndConnection(){this.updateState("offline"),this.clearSession()}clearSession(){console.log("[DataTransport] Clearing session for:",this.peerId.substring(0,8)),this.sessionExpiry=0,this.encryption?.destroy(),this.encryption=null}destroy(){this.updateState("offline"),this.clearSession(),console.log("[DataTransport] Destroyed for:",this.peerId.substring(0,8))}}var kc={exports:{}},e1=kc.exports,Lp;function t1(){return Lp||(Lp=1,(function(o,r){(function(i,s){o.exports=s()})(e1,function(){var i=function(l,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,x){p.__proto__=x}||function(p,x){for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&(p[E]=x[E])})(l,f)},s=function(){return(s=Object.assign||function(l){for(var f,p=1,x=arguments.length;p<x;p++)for(var E in f=arguments[p])Object.prototype.hasOwnProperty.call(f,E)&&(l[E]=f[E]);return l}).apply(this,arguments)};function u(l,f,p){for(var x,E=0,k=f.length;E<k;E++)!x&&E in f||((x=x||Array.prototype.slice.call(f,0,E))[E]=f[E]);return l.concat(x||Array.prototype.slice.call(f))}var g=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Uy,A=Object.keys,M=Array.isArray;function b(l,f){return typeof f!="object"||A(f).forEach(function(p){l[p]=f[p]}),l}typeof Promise>"u"||g.Promise||(g.Promise=Promise);var S=Object.getPrototypeOf,_={}.hasOwnProperty;function j(l,f){return _.call(l,f)}function I(l,f){typeof f=="function"&&(f=f(S(l))),(typeof Reflect>"u"?A:Reflect.ownKeys)(f).forEach(function(p){fe(l,p,f[p])})}var X=Object.defineProperty;function fe(l,f,p,x){X(l,f,b(p&&j(p,"get")&&typeof p.get=="function"?{get:p.get,set:p.set,configurable:!0}:{value:p,configurable:!0,writable:!0},x))}function pe(l){return{from:function(f){return l.prototype=Object.create(f.prototype),fe(l.prototype,"constructor",l),{extend:I.bind(null,l.prototype)}}}}var Pe=Object.getOwnPropertyDescriptor,ot=[].slice;function st(l,f,p){return ot.call(l,f,p)}function He(l,f){return f(l)}function mt(l){if(!l)throw new Error("Assertion Failed")}function Oe(l){g.setImmediate?setImmediate(l):setTimeout(l,0)}function We(l,f){if(typeof f=="string"&&j(l,f))return l[f];if(!f)return l;if(typeof f!="string"){for(var p=[],x=0,E=f.length;x<E;++x){var k=We(l,f[x]);p.push(k)}return p}var U=f.indexOf(".");if(U!==-1){var Y=l[f.substr(0,U)];return Y==null?void 0:We(Y,f.substr(U+1))}}function Xe(l,f,p){if(l&&f!==void 0&&!("isFrozen"in Object&&Object.isFrozen(l)))if(typeof f!="string"&&"length"in f){mt(typeof p!="string"&&"length"in p);for(var x=0,E=f.length;x<E;++x)Xe(l,f[x],p[x])}else{var k,U,Y=f.indexOf(".");Y!==-1?(k=f.substr(0,Y),(U=f.substr(Y+1))===""?p===void 0?M(l)&&!isNaN(parseInt(k))?l.splice(k,1):delete l[k]:l[k]=p:Xe(Y=!(Y=l[k])||!j(l,k)?l[k]={}:Y,U,p)):p===void 0?M(l)&&!isNaN(parseInt(f))?l.splice(f,1):delete l[f]:l[f]=p}}function Bt(l){var f,p={};for(f in l)j(l,f)&&(p[f]=l[f]);return p}var Pt=[].concat;function Me(l){return Pt.apply([],l)}var yr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Me([8,16,32,64].map(function(l){return["Int","Uint","Float"].map(function(f){return f+l+"Array"})}))).filter(function(l){return g[l]}),Ue=new Set(yr.map(function(l){return g[l]})),Ce=null;function xe(l){return Ce=new WeakMap,l=(function f(p){if(!p||typeof p!="object")return p;var x=Ce.get(p);if(x)return x;if(M(p)){x=[],Ce.set(p,x);for(var E=0,k=p.length;E<k;++E)x.push(f(p[E]))}else if(Ue.has(p.constructor))x=p;else{var U,Y=S(p);for(U in x=Y===Object.prototype?{}:Object.create(Y),Ce.set(p,x),p)j(p,U)&&(x[U]=f(p[U]))}return x})(l),Ce=null,l}var Tt={}.toString;function Ze(l){return Tt.call(l).slice(8,-1)}var se=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ye=typeof se=="symbol"?function(l){var f;return l!=null&&(f=l[se])&&f.apply(l)}:function(){return null};function Ie(l,f){return f=l.indexOf(f),0<=f&&l.splice(f,1),0<=f}var Re={};function Qe(l){var f,p,x,E;if(arguments.length===1){if(M(l))return l.slice();if(this===Re&&typeof l=="string")return[l];if(E=Ye(l)){for(p=[];!(x=E.next()).done;)p.push(x.value);return p}if(l==null)return[l];if(typeof(f=l.length)!="number")return[l];for(p=new Array(f);f--;)p[f]=l[f];return p}for(f=arguments.length,p=new Array(f);f--;)p[f]=arguments[f];return p}var K=typeof Symbol<"u"?function(l){return l[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},zr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],kr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(zr),me={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function _e(l,f){this.name=l,this.message=f}function Ke(l,f){return l+". Errors: "+Object.keys(f).map(function(p){return f[p].toString()}).filter(function(p,x,E){return E.indexOf(p)===x}).join(`
`)}function Ge(l,f,p,x){this.failures=f,this.failedKeys=x,this.successCount=p,this.message=Ke(l,f)}function rt(l,f){this.name="BulkError",this.failures=Object.keys(f).map(function(p){return f[p]}),this.failuresByPos=f,this.message=Ke(l,this.failures)}pe(_e).from(Error).extend({toString:function(){return this.name+": "+this.message}}),pe(Ge).from(_e),pe(rt).from(_e);var qt=kr.reduce(function(l,f){return l[f]=f+"Error",l},{}),sn=_e,Ve=kr.reduce(function(l,f){var p=f+"Error";function x(E,k){this.name=p,E?typeof E=="string"?(this.message="".concat(E).concat(k?`
 `+k:""),this.inner=k||null):typeof E=="object"&&(this.message="".concat(E.name," ").concat(E.message),this.inner=E):(this.message=me[f]||p,this.inner=null)}return pe(x).from(sn),l[f]=x,l},{});Ve.Syntax=SyntaxError,Ve.Type=TypeError,Ve.Range=RangeError;var Fe=zr.reduce(function(l,f){return l[f+"Error"]=Ve[f],l},{}),Mt=kr.reduce(function(l,f){return["Syntax","Type","Range"].indexOf(f)===-1&&(l[f+"Error"]=Ve[f]),l},{});function ft(){}function fn(l){return l}function Wt(l,f){return l==null||l===fn?f:function(p){return f(l(p))}}function Ct(l,f){return function(){l.apply(this,arguments),f.apply(this,arguments)}}function qe(l,f){return l===ft?f:function(){var p=l.apply(this,arguments);p!==void 0&&(arguments[0]=p);var x=this.onsuccess,E=this.onerror;this.onsuccess=null,this.onerror=null;var k=f.apply(this,arguments);return x&&(this.onsuccess=this.onsuccess?Ct(x,this.onsuccess):x),E&&(this.onerror=this.onerror?Ct(E,this.onerror):E),k!==void 0?k:p}}function Vt(l,f){return l===ft?f:function(){l.apply(this,arguments);var p=this.onsuccess,x=this.onerror;this.onsuccess=this.onerror=null,f.apply(this,arguments),p&&(this.onsuccess=this.onsuccess?Ct(p,this.onsuccess):p),x&&(this.onerror=this.onerror?Ct(x,this.onerror):x)}}function Ft(l,f){return l===ft?f:function(p){var x=l.apply(this,arguments);b(p,x);var E=this.onsuccess,k=this.onerror;return this.onsuccess=null,this.onerror=null,p=f.apply(this,arguments),E&&(this.onsuccess=this.onsuccess?Ct(E,this.onsuccess):E),k&&(this.onerror=this.onerror?Ct(k,this.onerror):k),x===void 0?p===void 0?void 0:p:b(x,p)}}function En(l,f){return l===ft?f:function(){return f.apply(this,arguments)!==!1&&l.apply(this,arguments)}}function nn(l,f){return l===ft?f:function(){var p=l.apply(this,arguments);if(p&&typeof p.then=="function"){for(var x=this,E=arguments.length,k=new Array(E);E--;)k[E]=arguments[E];return p.then(function(){return f.apply(x,k)})}return f.apply(this,arguments)}}Mt.ModifyError=Ge,Mt.DexieError=_e,Mt.BulkError=rt;var xn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Qr(l){xn=l}var wr={},Un=100,yr=typeof Promise>"u"?[]:(function(){var l=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[l,S(l),l];var f=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[f,S(f),l]})(),zr=yr[0],kr=yr[1],yr=yr[2],kr=kr&&kr.then,Sr=zr&&zr.constructor,Jr=!!yr,ha=function(l,f){or.push([l,f]),pa&&(queueMicrotask(Xr),pa=!1)},Ua=!0,pa=!0,Yr=[],sr=[],Ln=fn,kn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ft,pgp:!1,env:{},finalize:ft},tt=kn,or=[],lr=0,Zr=[];function $e(l){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var f=this._PSD=tt;if(typeof l!="function"){if(l!==wr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Kr(this,this._value))}this._state=null,this._value=null,++f.ref,(function p(x,E){try{E(function(k){if(x._state===null){if(k===x)throw new TypeError("A promise cannot be resolved with itself.");var U=x._lib&&Zt();k&&typeof k.then=="function"?p(x,function(Y,P){k instanceof $e?k._then(Y,P):k.then(Y,P)}):(x._state=!0,x._value=k,xr(x)),U&&_r()}},Kr.bind(null,x))}catch(k){Kr(x,k)}})(this,l)}var vr={get:function(){var l=tt,f=O;function p(x,E){var k=this,U=!l.global&&(l!==tt||f!==O),Y=U&&!ze(),P=new $e(function(Q,ne){cr(k,new Aa(Nt(x,l,U,Y),Nt(E,l,U,Y),Q,ne,l))});return this._consoleTask&&(P._consoleTask=this._consoleTask),P}return p.prototype=wr,p},set:function(l){fe(this,"then",l&&l.prototype===wr?vr:{get:function(){return l},set:vr.set})}};function Aa(l,f,p,x,E){this.onFulfilled=typeof l=="function"?l:null,this.onRejected=typeof f=="function"?f:null,this.resolve=p,this.reject=x,this.psd=E}function Kr(l,f){var p,x;sr.push(f),l._state===null&&(p=l._lib&&Zt(),f=Ln(f),l._state=!1,l._value=f,x=l,Yr.some(function(E){return E._value===x._value})||Yr.push(x),xr(l),p&&_r())}function xr(l){var f=l._listeners;l._listeners=[];for(var p=0,x=f.length;p<x;++p)cr(l,f[p]);var E=l._PSD;--E.ref||E.finalize(),lr===0&&(++lr,ha(function(){--lr==0&&Ar()},[]))}function cr(l,f){if(l._state!==null){var p=l._state?f.onFulfilled:f.onRejected;if(p===null)return(l._state?f.resolve:f.reject)(l._value);++f.psd.ref,++lr,ha(Gn,[p,l,f])}else l._listeners.push(f)}function Gn(l,f,p){try{var x,E=f._value;!f._state&&sr.length&&(sr=[]),x=xn&&f._consoleTask?f._consoleTask.run(function(){return l(E)}):l(E),f._state||sr.indexOf(E)!==-1||(function(k){for(var U=Yr.length;U;)if(Yr[--U]._value===k._value)return Yr.splice(U,1)})(f),p.resolve(x)}catch(k){p.reject(k)}finally{--lr==0&&Ar(),--p.psd.ref||p.psd.finalize()}}function Xr(){At(kn,function(){Zt()&&_r()})}function Zt(){var l=Ua;return pa=Ua=!1,l}function _r(){var l,f,p;do for(;0<or.length;)for(l=or,or=[],p=l.length,f=0;f<p;++f){var x=l[f];x[0].apply(null,x[1])}while(0<or.length);pa=Ua=!0}function Ar(){var l=Yr;Yr=[],l.forEach(function(x){x._PSD.onunhandled.call(null,x._value,x)});for(var f=Zr.slice(0),p=f.length;p;)f[--p]()}function Tn(l){return new $e(wr,!1,l)}function Cn(l,f){var p=tt;return function(){var x=Zt(),E=tt;try{return Qt(p,!0),l.apply(this,arguments)}catch(k){f&&f(k)}finally{Qt(E,!1),x&&_r()}}}I($e.prototype,{then:vr,_then:function(l,f){cr(this,new Aa(null,null,l,f,tt))},catch:function(l){if(arguments.length===1)return this.then(null,l);var f=l,p=arguments[1];return typeof f=="function"?this.then(null,function(x){return(x instanceof f?p:Tn)(x)}):this.then(null,function(x){return(x&&x.name===f?p:Tn)(x)})},finally:function(l){return this.then(function(f){return $e.resolve(l()).then(function(){return f})},function(f){return $e.resolve(l()).then(function(){return Tn(f)})})},timeout:function(l,f){var p=this;return l<1/0?new $e(function(x,E){var k=setTimeout(function(){return E(new Ve.Timeout(f))},l);p.then(x,E).finally(clearTimeout.bind(null,k))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&fe($e.prototype,Symbol.toStringTag,"Dexie.Promise"),kn.env=dt(),I($e,{all:function(){var l=Qe.apply(null,arguments).map(ht);return new $e(function(f,p){l.length===0&&f([]);var x=l.length;l.forEach(function(E,k){return $e.resolve(E).then(function(U){l[k]=U,--x||f(l)},p)})})},resolve:function(l){return l instanceof $e?l:l&&typeof l.then=="function"?new $e(function(f,p){l.then(f,p)}):new $e(wr,!0,l)},reject:Tn,race:function(){var l=Qe.apply(null,arguments).map(ht);return new $e(function(f,p){l.map(function(x){return $e.resolve(x).then(f,p)})})},PSD:{get:function(){return tt},set:function(l){return tt=l}},totalEchoes:{get:function(){return O}},newPSD:W,usePSD:At,scheduler:{get:function(){return ha},set:function(l){ha=l}},rejectionMapper:{get:function(){return Ln},set:function(l){Ln=l}},follow:function(l,f){return new $e(function(p,x){return W(function(E,k){var U=tt;U.unhandleds=[],U.onunhandled=k,U.finalize=Ct(function(){var Y,P=this;Y=function(){P.unhandleds.length===0?E():k(P.unhandleds[0])},Zr.push(function Q(){Y(),Zr.splice(Zr.indexOf(Q),1)}),++lr,ha(function(){--lr==0&&Ar()},[])},U.finalize),l()},f,p,x)})}}),Sr&&(Sr.allSettled&&fe($e,"allSettled",function(){var l=Qe.apply(null,arguments).map(ht);return new $e(function(f){l.length===0&&f([]);var p=l.length,x=new Array(p);l.forEach(function(E,k){return $e.resolve(E).then(function(U){return x[k]={status:"fulfilled",value:U}},function(U){return x[k]={status:"rejected",reason:U}}).then(function(){return--p||f(x)})})})}),Sr.any&&typeof AggregateError<"u"&&fe($e,"any",function(){var l=Qe.apply(null,arguments).map(ht);return new $e(function(f,p){l.length===0&&p(new AggregateError([]));var x=l.length,E=new Array(x);l.forEach(function(k,U){return $e.resolve(k).then(function(Y){return f(Y)},function(Y){E[U]=Y,--x||p(new AggregateError(E))})})})}),Sr.withResolvers&&($e.withResolvers=Sr.withResolvers));var w={awaits:0,echoes:0,id:0},R=0,B=[],h=0,O=0,te=0;function W(l,f,p,x){var E=tt,k=Object.create(E);return k.parent=E,k.ref=0,k.global=!1,k.id=++te,kn.env,k.env=Jr?{Promise:$e,PromiseProp:{value:$e,configurable:!0,writable:!0},all:$e.all,race:$e.race,allSettled:$e.allSettled,any:$e.any,resolve:$e.resolve,reject:$e.reject}:{},f&&b(k,f),++E.ref,k.finalize=function(){--this.parent.ref||this.parent.finalize()},x=At(k,l,p,x),k.ref===0&&k.finalize(),x}function we(){return w.id||(w.id=++R),++w.awaits,w.echoes+=Un,w.id}function ze(){return!!w.awaits&&(--w.awaits==0&&(w.id=0),w.echoes=w.awaits*Un,!0)}function ht(l){return w.echoes&&l&&l.constructor===Sr?(we(),l.then(function(f){return ze(),f},function(f){return ze(),pt(f)})):l}function lt(){var l=B[B.length-1];B.pop(),Qt(l,!1)}function Qt(l,f){var p,x=tt;(f?!w.echoes||h++&&l===tt:!h||--h&&l===tt)||queueMicrotask(f?(function(E){++O,w.echoes&&--w.echoes!=0||(w.echoes=w.awaits=w.id=0),B.push(tt),Qt(E,!0)}).bind(null,l):lt),l!==tt&&(tt=l,x===kn&&(kn.env=dt()),Jr&&(p=kn.env.Promise,f=l.env,(x.global||l.global)&&(Object.defineProperty(g,"Promise",f.PromiseProp),p.all=f.all,p.race=f.race,p.resolve=f.resolve,p.reject=f.reject,f.allSettled&&(p.allSettled=f.allSettled),f.any&&(p.any=f.any))))}function dt(){var l=g.Promise;return Jr?{Promise:l,PromiseProp:Object.getOwnPropertyDescriptor(g,"Promise"),all:l.all,race:l.race,allSettled:l.allSettled,any:l.any,resolve:l.resolve,reject:l.reject}:{}}function At(l,f,p,x,E){var k=tt;try{return Qt(l,!0),f(p,x,E)}finally{Qt(k,!1)}}function Nt(l,f,p,x){return typeof l!="function"?l:function(){var E=tt;p&&we(),Qt(f,!0);try{return l.apply(this,arguments)}finally{Qt(E,!1),x&&queueMicrotask(ze)}}}function Dt(l){Promise===Sr&&w.echoes===0?h===0?l():enqueueNativeMicroTask(l):setTimeout(l,0)}(""+kr).indexOf("[native code]")===-1&&(we=ze=ft);var pt=$e.reject,wt="",xt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",yt="String expected.",ct=[],vt="__dbnames",nt="readonly",ut="readwrite";function gt(l,f){return l?f?function(){return l.apply(this,arguments)&&f.apply(this,arguments)}:l:f}var it={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function he(l){return typeof l!="string"||/\./.test(l)?function(f){return f}:function(f){return f[l]===void 0&&l in f&&delete(f=xe(f))[l],f}}function ye(){throw Ve.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ve(l,f){try{var p=Ee(l),x=Ee(f);if(p!==x)return p==="Array"?1:x==="Array"?-1:p==="binary"?1:x==="binary"?-1:p==="string"?1:x==="string"?-1:p==="Date"?1:x!=="Date"?NaN:-1;switch(p){case"number":case"Date":case"string":return f<l?1:l<f?-1:0;case"binary":return(function(E,k){for(var U=E.length,Y=k.length,P=U<Y?U:Y,Q=0;Q<P;++Q)if(E[Q]!==k[Q])return E[Q]<k[Q]?-1:1;return U===Y?0:U<Y?-1:1})(Ae(l),Ae(f));case"Array":return(function(E,k){for(var U=E.length,Y=k.length,P=U<Y?U:Y,Q=0;Q<P;++Q){var ne=ve(E[Q],k[Q]);if(ne!==0)return ne}return U===Y?0:U<Y?-1:1})(l,f)}}catch{}return NaN}function Ee(l){var f=typeof l;return f!="object"?f:ArrayBuffer.isView(l)?"binary":(l=Ze(l),l==="ArrayBuffer"?"binary":l)}function Ae(l){return l instanceof Uint8Array?l:ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):new Uint8Array(l)}function De(l,f,p){var x=l.schema.yProps;return x?(f&&0<p.numFailures&&(f=f.filter(function(E,k){return!p.failures[k]})),Promise.all(x.map(function(E){return E=E.updatesTable,f?l.db.table(E).where("k").anyOf(f).delete():l.db.table(E).clear()})).then(function(){return p})):p}var St=(at.prototype.execute=function(l){var f=this["@@propmod"];if(f.add!==void 0){var p=f.add;if(M(p))return u(u([],M(l)?l:[],!0),p).sort();if(typeof p=="number")return(Number(l)||0)+p;if(typeof p=="bigint")try{return BigInt(l)+p}catch{return BigInt(0)+p}throw new TypeError("Invalid term ".concat(p))}if(f.remove!==void 0){var x=f.remove;if(M(x))return M(l)?l.filter(function(E){return!x.includes(E)}).sort():[];if(typeof x=="number")return Number(l)-x;if(typeof x=="bigint")try{return BigInt(l)-x}catch{return BigInt(0)-x}throw new TypeError("Invalid subtrahend ".concat(x))}return p=(p=f.replacePrefix)===null||p===void 0?void 0:p[0],p&&typeof l=="string"&&l.startsWith(p)?f.replacePrefix[1]+l.substring(p.length):l},at);function at(l){this["@@propmod"]=l}function Lt(l,f){for(var p=A(f),x=p.length,E=!1,k=0;k<x;++k){var U=p[k],Y=f[U],P=We(l,U);Y instanceof St?(Xe(l,U,Y.execute(P)),E=!0):P!==Y&&(Xe(l,U,Y),E=!0)}return E}var zt=(z.prototype._trans=function(l,f,p){var x=this._tx||tt.trans,E=this.name,k=xn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(l==="readonly"?"read":"write"," ").concat(this.name));function U(Q,ne,V){if(!V.schema[E])throw new Ve.NotFound("Table "+E+" not part of transaction");return f(V.idbtrans,V)}var Y=Zt();try{var P=x&&x.db._novip===this.db._novip?x===tt.trans?x._promise(l,U,p):W(function(){return x._promise(l,U,p)},{trans:x,transless:tt.transless||tt}):(function Q(ne,V,ae,J){if(ne.idbdb&&(ne._state.openComplete||tt.letThrough||ne._vip)){var $=ne._createTransaction(V,ae,ne._dbSchema);try{$.create(),ne._state.PR1398_maxLoop=3}catch(ee){return ee.name===qt.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return Q(ne,V,ae,J)})):pt(ee)}return $._promise(V,function(ee,re){return W(function(){return tt.trans=$,J(ee,re,$)})}).then(function(ee){if(V==="readwrite")try{$.idbtrans.commit()}catch{}return V==="readonly"?ee:$._completion.then(function(){return ee})})}if(ne._state.openComplete)return pt(new Ve.DatabaseClosed(ne._state.dbOpenError));if(!ne._state.isBeingOpened){if(!ne._state.autoOpen)return pt(new Ve.DatabaseClosed);ne.open().catch(ft)}return ne._state.dbReadyPromise.then(function(){return Q(ne,V,ae,J)})})(this.db,l,[this.name],U);return k&&(P._consoleTask=k,P=P.catch(function(Q){return console.trace(Q),pt(Q)})),P}finally{Y&&_r()}},z.prototype.get=function(l,f){var p=this;return l&&l.constructor===Object?this.where(l).first(f):l==null?pt(new Ve.Type("Invalid argument to Table.get()")):this._trans("readonly",function(x){return p.core.get({trans:x,key:l}).then(function(E){return p.hook.reading.fire(E)})}).then(f)},z.prototype.where=function(l){if(typeof l=="string")return new this.db.WhereClause(this,l);if(M(l))return new this.db.WhereClause(this,"[".concat(l.join("+"),"]"));var f=A(l);if(f.length===1)return this.where(f[0]).equals(l[f[0]]);var p=this.schema.indexes.concat(this.schema.primKey).filter(function(Y){if(Y.compound&&f.every(function(Q){return 0<=Y.keyPath.indexOf(Q)})){for(var P=0;P<f.length;++P)if(f.indexOf(Y.keyPath[P])===-1)return!1;return!0}return!1}).sort(function(Y,P){return Y.keyPath.length-P.keyPath.length})[0];if(p&&this.db._maxKey!==wt){var k=p.keyPath.slice(0,f.length);return this.where(k).equals(k.map(function(P){return l[P]}))}!p&&xn&&console.warn("The query ".concat(JSON.stringify(l)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(f.join("+"),"]"));var x=this.schema.idxByName;function E(Y,P){return ve(Y,P)===0}var U=f.reduce(function(V,P){var Q=V[0],ne=V[1],V=x[P],ae=l[P];return[Q||V,Q||!V?gt(ne,V&&V.multi?function(J){return J=We(J,P),M(J)&&J.some(function($){return E(ae,$)})}:function(J){return E(ae,We(J,P))}):ne]},[null,null]),k=U[0],U=U[1];return k?this.where(k.name).equals(l[k.keyPath]).filter(U):p?this.filter(U):this.where(f).equals("")},z.prototype.filter=function(l){return this.toCollection().and(l)},z.prototype.count=function(l){return this.toCollection().count(l)},z.prototype.offset=function(l){return this.toCollection().offset(l)},z.prototype.limit=function(l){return this.toCollection().limit(l)},z.prototype.each=function(l){return this.toCollection().each(l)},z.prototype.toArray=function(l){return this.toCollection().toArray(l)},z.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},z.prototype.orderBy=function(l){return new this.db.Collection(new this.db.WhereClause(this,M(l)?"[".concat(l.join("+"),"]"):l))},z.prototype.reverse=function(){return this.toCollection().reverse()},z.prototype.mapToClass=function(l){var f,p=this.db,x=this.name;function E(){return f!==null&&f.apply(this,arguments)||this}(this.schema.mappedClass=l).prototype instanceof ye&&((function(P,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function ne(){this.constructor=P}i(P,Q),P.prototype=Q===null?Object.create(Q):(ne.prototype=Q.prototype,new ne)})(E,f=l),Object.defineProperty(E.prototype,"db",{get:function(){return p},enumerable:!1,configurable:!0}),E.prototype.table=function(){return x},l=E);for(var k=new Set,U=l.prototype;U;U=S(U))Object.getOwnPropertyNames(U).forEach(function(P){return k.add(P)});function Y(P){if(!P)return P;var Q,ne=Object.create(l.prototype);for(Q in P)if(!k.has(Q))try{ne[Q]=P[Q]}catch{}return ne}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Y,this.hook("reading",Y),l},z.prototype.defineClass=function(){return this.mapToClass(function(l){b(this,l)})},z.prototype.add=function(l,f){var p=this,x=this.schema.primKey,E=x.auto,k=x.keyPath,U=l;return k&&E&&(U=he(k)(l)),this._trans("readwrite",function(Y){return p.core.mutate({trans:Y,type:"add",keys:f!=null?[f]:null,values:[U]})}).then(function(Y){return Y.numFailures?$e.reject(Y.failures[0]):Y.lastResult}).then(function(Y){if(k)try{Xe(l,k,Y)}catch{}return Y})},z.prototype.upsert=function(l,f){var p=this,x=this.schema.primKey.keyPath;return this._trans("readwrite",function(E){return p.core.get({trans:E,key:l}).then(function(k){var U=k??{};return Lt(U,f),x&&Xe(U,x,l),p.core.mutate({trans:E,type:"put",values:[U],keys:[l],upsert:!0,updates:{keys:[l],changeSpecs:[f]}}).then(function(Y){return Y.numFailures?$e.reject(Y.failures[0]):!!k})})})},z.prototype.update=function(l,f){return typeof l!="object"||M(l)?this.where(":id").equals(l).modify(f):(l=We(l,this.schema.primKey.keyPath),l===void 0?pt(new Ve.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(l).modify(f))},z.prototype.put=function(l,f){var p=this,x=this.schema.primKey,E=x.auto,k=x.keyPath,U=l;return k&&E&&(U=he(k)(l)),this._trans("readwrite",function(Y){return p.core.mutate({trans:Y,type:"put",values:[U],keys:f!=null?[f]:null})}).then(function(Y){return Y.numFailures?$e.reject(Y.failures[0]):Y.lastResult}).then(function(Y){if(k)try{Xe(l,k,Y)}catch{}return Y})},z.prototype.delete=function(l){var f=this;return this._trans("readwrite",function(p){return f.core.mutate({trans:p,type:"delete",keys:[l]}).then(function(x){return De(f,[l],x)}).then(function(x){return x.numFailures?$e.reject(x.failures[0]):void 0})})},z.prototype.clear=function(){var l=this;return this._trans("readwrite",function(f){return l.core.mutate({trans:f,type:"deleteRange",range:it}).then(function(p){return De(l,null,p)})}).then(function(f){return f.numFailures?$e.reject(f.failures[0]):void 0})},z.prototype.bulkGet=function(l){var f=this;return this._trans("readonly",function(p){return f.core.getMany({keys:l,trans:p}).then(function(x){return x.map(function(E){return f.hook.reading.fire(E)})})})},z.prototype.bulkAdd=function(l,f,p){var x=this,E=Array.isArray(f)?f:void 0,k=(p=p||(E?void 0:f))?p.allKeys:void 0;return this._trans("readwrite",function(U){var Q=x.schema.primKey,Y=Q.auto,Q=Q.keyPath;if(Q&&E)throw new Ve.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(E&&E.length!==l.length)throw new Ve.InvalidArgument("Arguments objects and keys must have the same length");var P=l.length,Q=Q&&Y?l.map(he(Q)):l;return x.core.mutate({trans:U,type:"add",keys:E,values:Q,wantResults:k}).then(function($){var V=$.numFailures,ae=$.results,J=$.lastResult,$=$.failures;if(V===0)return k?ae:J;throw new rt("".concat(x.name,".bulkAdd(): ").concat(V," of ").concat(P," operations failed"),$)})})},z.prototype.bulkPut=function(l,f,p){var x=this,E=Array.isArray(f)?f:void 0,k=(p=p||(E?void 0:f))?p.allKeys:void 0;return this._trans("readwrite",function(U){var Q=x.schema.primKey,Y=Q.auto,Q=Q.keyPath;if(Q&&E)throw new Ve.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(E&&E.length!==l.length)throw new Ve.InvalidArgument("Arguments objects and keys must have the same length");var P=l.length,Q=Q&&Y?l.map(he(Q)):l;return x.core.mutate({trans:U,type:"put",keys:E,values:Q,wantResults:k}).then(function($){var V=$.numFailures,ae=$.results,J=$.lastResult,$=$.failures;if(V===0)return k?ae:J;throw new rt("".concat(x.name,".bulkPut(): ").concat(V," of ").concat(P," operations failed"),$)})})},z.prototype.bulkUpdate=function(l){var f=this,p=this.core,x=l.map(function(U){return U.key}),E=l.map(function(U){return U.changes}),k=[];return this._trans("readwrite",function(U){return p.getMany({trans:U,keys:x,cache:"clone"}).then(function(Y){var P=[],Q=[];l.forEach(function(V,ae){var J=V.key,$=V.changes,ee=Y[ae];if(ee){for(var re=0,oe=Object.keys($);re<oe.length;re++){var de=oe[re],Se=$[de];if(de===f.schema.primKey.keyPath){if(ve(Se,J)!==0)throw new Ve.Constraint("Cannot update primary key in bulkUpdate()")}else Xe(ee,de,Se)}k.push(ae),P.push(J),Q.push(ee)}});var ne=P.length;return p.mutate({trans:U,type:"put",keys:P,values:Q,updates:{keys:x,changeSpecs:E}}).then(function(V){var ae=V.numFailures,J=V.failures;if(ae===0)return ne;for(var $=0,ee=Object.keys(J);$<ee.length;$++){var re,oe=ee[$],de=k[Number(oe)];de!=null&&(re=J[oe],delete J[oe],J[de]=re)}throw new rt("".concat(f.name,".bulkUpdate(): ").concat(ae," of ").concat(ne," operations failed"),J)})})})},z.prototype.bulkDelete=function(l){var f=this,p=l.length;return this._trans("readwrite",function(x){return f.core.mutate({trans:x,type:"delete",keys:l}).then(function(E){return De(f,l,E)})}).then(function(U){var E=U.numFailures,k=U.lastResult,U=U.failures;if(E===0)return k;throw new rt("".concat(f.name,".bulkDelete(): ").concat(E," of ").concat(p," operations failed"),U)})},z);function z(){}function Yt(l){function f(U,Y){if(Y){for(var P=arguments.length,Q=new Array(P-1);--P;)Q[P-1]=arguments[P];return p[U].subscribe.apply(null,Q),l}if(typeof U=="string")return p[U]}var p={};f.addEventType=k;for(var x=1,E=arguments.length;x<E;++x)k(arguments[x]);return f;function k(U,Y,P){if(typeof U!="object"){var Q;Y=Y||En;var ne={subscribers:[],fire:P=P||ft,subscribe:function(V){ne.subscribers.indexOf(V)===-1&&(ne.subscribers.push(V),ne.fire=Y(ne.fire,V))},unsubscribe:function(V){ne.subscribers=ne.subscribers.filter(function(ae){return ae!==V}),ne.fire=ne.subscribers.reduce(Y,P)}};return p[U]=f[U]=ne}A(Q=U).forEach(function(V){var ae=Q[V];if(M(ae))k(V,Q[V][0],Q[V][1]);else{if(ae!=="asap")throw new Ve.InvalidArgument("Invalid event config");var J=k(V,fn,function(){for(var $=arguments.length,ee=new Array($);$--;)ee[$]=arguments[$];J.subscribers.forEach(function(re){Oe(function(){re.apply(null,ee)})})})}})}}function jt(l,f){return pe(f).from({prototype:l}),f}function Kt(l,f){return!(l.filter||l.algorithm||l.or)&&(f?l.justLimit:!l.replayFilter)}function Gt(l,f){l.filter=gt(l.filter,f)}function Jt(l,f,p){var x=l.replayFilter;l.replayFilter=x?function(){return gt(x(),f())}:f,l.justLimit=p&&!x}function Ht(l,f){if(l.isPrimKey)return f.primaryKey;var p=f.getIndexByKeyPath(l.index);if(!p)throw new Ve.Schema("KeyPath "+l.index+" on object store "+f.name+" is not indexed");return p}function Mn(l,f,p){var x=Ht(l,f.schema);return f.openCursor({trans:p,values:!l.keysOnly,reverse:l.dir==="prev",unique:!!l.unique,query:{index:x,range:l.range}})}function on(l,f,p,x){var E=l.replayFilter?gt(l.filter,l.replayFilter()):l.filter;if(l.or){var k={},U=function(Y,P,Q){var ne,V;E&&!E(P,Q,function(ae){return P.stop(ae)},function(ae){return P.fail(ae)})||((V=""+(ne=P.primaryKey))=="[object ArrayBuffer]"&&(V=""+new Uint8Array(ne)),j(k,V)||(k[V]=!0,f(Y,P,Q)))};return Promise.all([l.or._iterate(U,p),pn(Mn(l,x,p),l.algorithm,U,!l.keysOnly&&l.valueMapper)])}return pn(Mn(l,x,p),gt(l.algorithm,E),f,!l.keysOnly&&l.valueMapper)}function pn(l,f,p,x){var E=Cn(x?function(k,U,Y){return p(x(k),U,Y)}:p);return l.then(function(k){if(k)return k.start(function(){var U=function(){return k.continue()};f&&!f(k,function(Y){return U=Y},function(Y){k.stop(Y),U=ft},function(Y){k.fail(Y),U=ft})||E(k.value,k,function(Y){return U=Y}),U()})})}var jn=(_t.prototype._read=function(l,f){var p=this._ctx;return p.error?p.table._trans(null,pt.bind(null,p.error)):p.table._trans("readonly",l).then(f)},_t.prototype._write=function(l){var f=this._ctx;return f.error?f.table._trans(null,pt.bind(null,f.error)):f.table._trans("readwrite",l,"locked")},_t.prototype._addAlgorithm=function(l){var f=this._ctx;f.algorithm=gt(f.algorithm,l)},_t.prototype._iterate=function(l,f){return on(this._ctx,l,f,this._ctx.table.core)},_t.prototype.clone=function(l){var f=Object.create(this.constructor.prototype),p=Object.create(this._ctx);return l&&b(p,l),f._ctx=p,f},_t.prototype.raw=function(){return this._ctx.valueMapper=null,this},_t.prototype.each=function(l){var f=this._ctx;return this._read(function(p){return on(f,l,p,f.table.core)})},_t.prototype.count=function(l){var f=this;return this._read(function(p){var x=f._ctx,E=x.table.core;if(Kt(x,!0))return E.count({trans:p,query:{index:Ht(x,E.schema),range:x.range}}).then(function(U){return Math.min(U,x.limit)});var k=0;return on(x,function(){return++k,!1},p,E).then(function(){return k})}).then(l)},_t.prototype.sortBy=function(l,f){var p=l.split(".").reverse(),x=p[0],E=p.length-1;function k(P,Q){return Q?k(P[p[Q]],Q-1):P[x]}var U=this._ctx.dir==="next"?1:-1;function Y(P,Q){return ve(k(P,E),k(Q,E))*U}return this.toArray(function(P){return P.sort(Y)}).then(f)},_t.prototype.toArray=function(l){var f=this;return this._read(function(p){var x=f._ctx;if(x.dir==="next"&&Kt(x,!0)&&0<x.limit){var E=x.valueMapper,k=Ht(x,x.table.core.schema);return x.table.core.query({trans:p,limit:x.limit,values:!0,query:{index:k,range:x.range}}).then(function(Y){return Y=Y.result,E?Y.map(E):Y})}var U=[];return on(x,function(Y){return U.push(Y)},p,x.table.core).then(function(){return U})},l)},_t.prototype.offset=function(l){var f=this._ctx;return l<=0||(f.offset+=l,Kt(f)?Jt(f,function(){var p=l;return function(x,E){return p===0||(p===1?--p:E(function(){x.advance(p),p=0}),!1)}}):Jt(f,function(){var p=l;return function(){return--p<0}})),this},_t.prototype.limit=function(l){return this._ctx.limit=Math.min(this._ctx.limit,l),Jt(this._ctx,function(){var f=l;return function(p,x,E){return--f<=0&&x(E),0<=f}},!0),this},_t.prototype.until=function(l,f){return Gt(this._ctx,function(p,x,E){return!l(p.value)||(x(E),f)}),this},_t.prototype.first=function(l){return this.limit(1).toArray(function(f){return f[0]}).then(l)},_t.prototype.last=function(l){return this.reverse().first(l)},_t.prototype.filter=function(l){var f;return Gt(this._ctx,function(p){return l(p.value)}),(f=this._ctx).isMatch=gt(f.isMatch,l),this},_t.prototype.and=function(l){return this.filter(l)},_t.prototype.or=function(l){return new this.db.WhereClause(this._ctx.table,l,this)},_t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},_t.prototype.desc=function(){return this.reverse()},_t.prototype.eachKey=function(l){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(p,x){l(x.key,x)})},_t.prototype.eachUniqueKey=function(l){return this._ctx.unique="unique",this.eachKey(l)},_t.prototype.eachPrimaryKey=function(l){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(p,x){l(x.primaryKey,x)})},_t.prototype.keys=function(l){var f=this._ctx;f.keysOnly=!f.isMatch;var p=[];return this.each(function(x,E){p.push(E.key)}).then(function(){return p}).then(l)},_t.prototype.primaryKeys=function(l){var f=this._ctx;if(f.dir==="next"&&Kt(f,!0)&&0<f.limit)return this._read(function(x){var E=Ht(f,f.table.core.schema);return f.table.core.query({trans:x,values:!1,limit:f.limit,query:{index:E,range:f.range}})}).then(function(x){return x.result}).then(l);f.keysOnly=!f.isMatch;var p=[];return this.each(function(x,E){p.push(E.primaryKey)}).then(function(){return p}).then(l)},_t.prototype.uniqueKeys=function(l){return this._ctx.unique="unique",this.keys(l)},_t.prototype.firstKey=function(l){return this.limit(1).keys(function(f){return f[0]}).then(l)},_t.prototype.lastKey=function(l){return this.reverse().firstKey(l)},_t.prototype.distinct=function(){var l=this._ctx,l=l.index&&l.table.schema.idxByName[l.index];if(!l||!l.multi)return this;var f={};return Gt(this._ctx,function(E){var x=E.primaryKey.toString(),E=j(f,x);return f[x]=!0,!E}),this},_t.prototype.modify=function(l){var f=this,p=this._ctx;return this._write(function(x){var E=typeof l=="function"?l:function(ee){return Lt(ee,l)},k=p.table.core,Q=k.schema.primaryKey,U=Q.outbound,Y=Q.extractKey,P=200,Q=f.db._options.modifyChunkSize;Q&&(P=typeof Q=="object"?Q[k.name]||Q["*"]||200:Q);function ne(ee,de){var oe=de.failures,de=de.numFailures;ae+=ee-de;for(var Se=0,Ne=A(oe);Se<Ne.length;Se++){var v=Ne[Se];V.push(oe[v])}}var V=[],ae=0,J=[],$=l===bn;return f.clone().primaryKeys().then(function(ee){function re(de){var Se=Math.min(P,ee.length-de),Ne=ee.slice(de,de+Se);return($?Promise.resolve([]):k.getMany({trans:x,keys:Ne,cache:"immutable"})).then(function(v){var y=[],T=[],D=U?[]:null,q=$?Ne:[];if(!$)for(var L=0;L<Se;++L){var G=v[L],H={value:xe(G),primKey:ee[de+L]};E.call(H,H.value,H)!==!1&&(H.value==null?q.push(ee[de+L]):U||ve(Y(G),Y(H.value))===0?(T.push(H.value),U&&D.push(ee[de+L])):(q.push(ee[de+L]),y.push(H.value)))}return Promise.resolve(0<y.length&&k.mutate({trans:x,type:"add",values:y}).then(function(le){for(var ke in le.failures)q.splice(parseInt(ke),1);ne(y.length,le)})).then(function(){return(0<T.length||oe&&typeof l=="object")&&k.mutate({trans:x,type:"put",keys:D,values:T,criteria:oe,changeSpec:typeof l!="function"&&l,isAdditionalChunk:0<de}).then(function(le){return ne(T.length,le)})}).then(function(){return(0<q.length||oe&&$)&&k.mutate({trans:x,type:"delete",keys:q,criteria:oe,isAdditionalChunk:0<de}).then(function(le){return De(p.table,q,le)}).then(function(le){return ne(q.length,le)})}).then(function(){return ee.length>de+Se&&re(de+P)})})}var oe=Kt(p)&&p.limit===1/0&&(typeof l!="function"||$)&&{index:p.index,range:p.range};return re(0).then(function(){if(0<V.length)throw new Ge("Error modifying one or more objects",V,ae,J);return ee.length})})})},_t.prototype.delete=function(){var l=this._ctx,f=l.range;return!Kt(l)||l.table.schema.yProps||!l.isPrimKey&&f.type!==3?this.modify(bn):this._write(function(p){var x=l.table.core.schema.primaryKey,E=f;return l.table.core.count({trans:p,query:{index:x,range:E}}).then(function(k){return l.table.core.mutate({trans:p,type:"deleteRange",range:E}).then(function(P){var Y=P.failures,P=P.numFailures;if(P)throw new Ge("Could not delete some values",Object.keys(Y).map(function(Q){return Y[Q]}),k-P);return k-P})})})},_t);function _t(){}var bn=function(l,f){return f.value=null};function Vn(l,f){return l<f?-1:l===f?0:1}function Bn(l,f){return f<l?-1:l===f?0:1}function gn(l,f,p){return l=l instanceof Ea?new l.Collection(l):l,l._ctx.error=new(p||TypeError)(f),l}function oa(l){return new l.Collection(l,function(){return Ci("")}).limit(0)}function Or(l,f,p,x){var E,k,U,Y,P,Q,ne,V=p.length;if(!p.every(function($){return typeof $=="string"}))return gn(l,yt);function ae($){E=$==="next"?function(re){return re.toUpperCase()}:function(re){return re.toLowerCase()},k=$==="next"?function(re){return re.toLowerCase()}:function(re){return re.toUpperCase()},U=$==="next"?Vn:Bn;var ee=p.map(function(re){return{lower:k(re),upper:E(re)}}).sort(function(re,oe){return U(re.lower,oe.lower)});Y=ee.map(function(re){return re.upper}),P=ee.map(function(re){return re.lower}),ne=(Q=$)==="next"?"":x}ae("next"),l=new l.Collection(l,function(){return Wr(Y[0],P[V-1]+x)}),l._ondirectionchange=function($){ae($)};var J=0;return l._addAlgorithm(function($,ee,re){var oe=$.key;if(typeof oe!="string")return!1;var de=k(oe);if(f(de,P,J))return!0;for(var Se=null,Ne=J;Ne<V;++Ne){var v=(function(y,T,D,q,L,G){for(var H=Math.min(y.length,q.length),le=-1,ke=0;ke<H;++ke){var et=T[ke];if(et!==q[ke])return L(y[ke],D[ke])<0?y.substr(0,ke)+D[ke]+D.substr(ke+1):L(y[ke],q[ke])<0?y.substr(0,ke)+q[ke]+D.substr(ke+1):0<=le?y.substr(0,le)+T[le]+D.substr(le+1):null;L(y[ke],et)<0&&(le=ke)}return H<q.length&&G==="next"?y+D.substr(y.length):H<y.length&&G==="prev"?y.substr(0,D.length):le<0?null:y.substr(0,le)+q[le]+D.substr(le+1)})(oe,de,Y[Ne],P[Ne],U,Q);v===null&&Se===null?J=Ne+1:(Se===null||0<U(Se,v))&&(Se=v)}return ee(Se!==null?function(){$.continue(Se+ne)}:re),!1}),l}function Wr(l,f,p,x){return{type:2,lower:l,upper:f,lowerOpen:p,upperOpen:x}}function Ci(l){return{type:1,lower:l,upper:l}}var Ea=(Object.defineProperty(zn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),zn.prototype.between=function(l,f,p,x){p=p!==!1,x=x===!0;try{return 0<this._cmp(l,f)||this._cmp(l,f)===0&&(p||x)&&(!p||!x)?oa(this):new this.Collection(this,function(){return Wr(l,f,!p,!x)})}catch{return gn(this,xt)}},zn.prototype.equals=function(l){return l==null?gn(this,xt):new this.Collection(this,function(){return Ci(l)})},zn.prototype.above=function(l){return l==null?gn(this,xt):new this.Collection(this,function(){return Wr(l,void 0,!0)})},zn.prototype.aboveOrEqual=function(l){return l==null?gn(this,xt):new this.Collection(this,function(){return Wr(l,void 0,!1)})},zn.prototype.below=function(l){return l==null?gn(this,xt):new this.Collection(this,function(){return Wr(void 0,l,!1,!0)})},zn.prototype.belowOrEqual=function(l){return l==null?gn(this,xt):new this.Collection(this,function(){return Wr(void 0,l)})},zn.prototype.startsWith=function(l){return typeof l!="string"?gn(this,yt):this.between(l,l+wt,!0,!0)},zn.prototype.startsWithIgnoreCase=function(l){return l===""?this.startsWith(l):Or(this,function(f,p){return f.indexOf(p[0])===0},[l],wt)},zn.prototype.equalsIgnoreCase=function(l){return Or(this,function(f,p){return f===p[0]},[l],"")},zn.prototype.anyOfIgnoreCase=function(){var l=Qe.apply(Re,arguments);return l.length===0?oa(this):Or(this,function(f,p){return p.indexOf(f)!==-1},l,"")},zn.prototype.startsWithAnyOfIgnoreCase=function(){var l=Qe.apply(Re,arguments);return l.length===0?oa(this):Or(this,function(f,p){return p.some(function(x){return f.indexOf(x)===0})},l,wt)},zn.prototype.anyOf=function(){var l=this,f=Qe.apply(Re,arguments),p=this._cmp;try{f.sort(p)}catch{return gn(this,xt)}if(f.length===0)return oa(this);var x=new this.Collection(this,function(){return Wr(f[0],f[f.length-1])});x._ondirectionchange=function(k){p=k==="next"?l._ascending:l._descending,f.sort(p)};var E=0;return x._addAlgorithm(function(k,U,Y){for(var P=k.key;0<p(P,f[E]);)if(++E===f.length)return U(Y),!1;return p(P,f[E])===0||(U(function(){k.continue(f[E])}),!1)}),x},zn.prototype.notEqual=function(l){return this.inAnyRange([[-1/0,l],[l,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},zn.prototype.noneOf=function(){var l=Qe.apply(Re,arguments);if(l.length===0)return new this.Collection(this);try{l.sort(this._ascending)}catch{return gn(this,xt)}var f=l.reduce(function(p,x){return p?p.concat([[p[p.length-1][1],x]]):[[-1/0,x]]},null);return f.push([l[l.length-1],this.db._maxKey]),this.inAnyRange(f,{includeLowers:!1,includeUppers:!1})},zn.prototype.inAnyRange=function(oe,f){var p=this,x=this._cmp,E=this._ascending,k=this._descending,U=this._min,Y=this._max;if(oe.length===0)return oa(this);if(!oe.every(function(de){return de[0]!==void 0&&de[1]!==void 0&&E(de[0],de[1])<=0}))return gn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ve.InvalidArgument);var P=!f||f.includeLowers!==!1,Q=f&&f.includeUppers===!0,ne,V=E;function ae(de,Se){return V(de[0],Se[0])}try{(ne=oe.reduce(function(de,Se){for(var Ne=0,v=de.length;Ne<v;++Ne){var y=de[Ne];if(x(Se[0],y[1])<0&&0<x(Se[1],y[0])){y[0]=U(y[0],Se[0]),y[1]=Y(y[1],Se[1]);break}}return Ne===v&&de.push(Se),de},[])).sort(ae)}catch{return gn(this,xt)}var J=0,$=Q?function(de){return 0<E(de,ne[J][1])}:function(de){return 0<=E(de,ne[J][1])},ee=P?function(de){return 0<k(de,ne[J][0])}:function(de){return 0<=k(de,ne[J][0])},re=$,oe=new this.Collection(this,function(){return Wr(ne[0][0],ne[ne.length-1][1],!P,!Q)});return oe._ondirectionchange=function(de){V=de==="next"?(re=$,E):(re=ee,k),ne.sort(ae)},oe._addAlgorithm(function(de,Se,Ne){for(var v,y=de.key;re(y);)if(++J===ne.length)return Se(Ne),!1;return!$(v=y)&&!ee(v)||(p._cmp(y,ne[J][1])===0||p._cmp(y,ne[J][0])===0||Se(function(){V===E?de.continue(ne[J][0]):de.continue(ne[J][1])}),!1)}),oe},zn.prototype.startsWithAnyOf=function(){var l=Qe.apply(Re,arguments);return l.every(function(f){return typeof f=="string"})?l.length===0?oa(this):this.inAnyRange(l.map(function(f){return[f,f+wt]})):gn(this,"startsWithAnyOf() only works with strings")},zn);function zn(){}function Gr(l){return Cn(function(f){return Ta(f),l(f.target.error),!1})}function Ta(l){l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault()}var La="storagemutated",Ma="x-storagemutated-1",Hn=Yt(null,La),wi=(br.prototype._lock=function(){return mt(!tt.global),++this._reculock,this._reculock!==1||tt.global||(tt.lockOwnerFor=this),this},br.prototype._unlock=function(){if(mt(!tt.global),--this._reculock==0)for(tt.global||(tt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var l=this._blockedFuncs.shift();try{At(l[1],l[0])}catch{}}return this},br.prototype._locked=function(){return this._reculock&&tt.lockOwnerFor!==this},br.prototype.create=function(l){var f=this;if(!this.mode)return this;var p=this.db.idbdb,x=this.db._state.dbOpenError;if(mt(!this.idbtrans),!l&&!p)switch(x&&x.name){case"DatabaseClosedError":throw new Ve.DatabaseClosed(x);case"MissingAPIError":throw new Ve.MissingAPI(x.message,x);default:throw new Ve.OpenFailed(x)}if(!this.active)throw new Ve.TransactionInactive;return mt(this._completion._state===null),(l=this.idbtrans=l||(this.db.core||p).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Cn(function(E){Ta(E),f._reject(l.error)}),l.onabort=Cn(function(E){Ta(E),f.active&&f._reject(new Ve.Abort(l.error)),f.active=!1,f.on("abort").fire(E)}),l.oncomplete=Cn(function(){f.active=!1,f._resolve(),"mutatedParts"in l&&Hn.storagemutated.fire(l.mutatedParts)}),this},br.prototype._promise=function(l,f,p){var x=this;if(l==="readwrite"&&this.mode!=="readwrite")return pt(new Ve.ReadOnly("Transaction is readonly"));if(!this.active)return pt(new Ve.TransactionInactive);if(this._locked())return new $e(function(k,U){x._blockedFuncs.push([function(){x._promise(l,f,p).then(k,U)},tt])});if(p)return W(function(){var k=new $e(function(U,Y){x._lock();var P=f(U,Y,x);P&&P.then&&P.then(U,Y)});return k.finally(function(){return x._unlock()}),k._lib=!0,k});var E=new $e(function(k,U){var Y=f(k,U,x);Y&&Y.then&&Y.then(k,U)});return E._lib=!0,E},br.prototype._root=function(){return this.parent?this.parent._root():this},br.prototype.waitFor=function(l){var f,p=this._root(),x=$e.resolve(l);p._waitingFor?p._waitingFor=p._waitingFor.then(function(){return x}):(p._waitingFor=x,p._waitingQueue=[],f=p.idbtrans.objectStore(p.storeNames[0]),(function k(){for(++p._spinCount;p._waitingQueue.length;)p._waitingQueue.shift()();p._waitingFor&&(f.get(-1/0).onsuccess=k)})());var E=p._waitingFor;return new $e(function(k,U){x.then(function(Y){return p._waitingQueue.push(Cn(k.bind(null,Y)))},function(Y){return p._waitingQueue.push(Cn(U.bind(null,Y)))}).finally(function(){p._waitingFor===E&&(p._waitingFor=null)})})},br.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ve.Abort))},br.prototype.table=function(l){var f=this._memoizedTables||(this._memoizedTables={});if(j(f,l))return f[l];var p=this.schema[l];if(!p)throw new Ve.NotFound("Table "+l+" not part of transaction");return p=new this.db.Table(l,p,this),p.core=this.db.core.table(l),f[l]=p},br);function br(){}function Vr(l,f,p,x,E,k,U,Y){return{name:l,keyPath:f,unique:p,multi:x,auto:E,compound:k,src:(p&&!U?"&":"")+(x?"*":"")+(E?"++":"")+Si(f),type:Y}}function Si(l){return typeof l=="string"?l:l?"["+[].join.call(l,"+")+"]":""}function za(l,f,p){return{name:l,primKey:f,indexes:p,mappedClass:null,idxByName:(x=function(E){return[E.name,E]},p.reduce(function(E,k,U){return U=x(k,U),U&&(E[U[0]]=U[1]),E},{}))};var x}var _a=function(l){try{return l.only([[]]),_a=function(){return[[]]},[[]]}catch{return _a=function(){return wt},wt}};function Ya(l){return l==null?function(){}:typeof l=="string"?(f=l).split(".").length===1?function(p){return p[f]}:function(p){return We(p,f)}:function(p){return We(p,l)};var f}function $a(l){return[].slice.call(l)}var zs=0;function $n(l){return l==null?":id":typeof l=="string"?l:"[".concat(l.join("+"),"]")}function ka(l,f,P){function x(re){if(re.type===3)return null;if(re.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var J=re.lower,$=re.upper,ee=re.lowerOpen,re=re.upperOpen;return J===void 0?$===void 0?null:f.upperBound($,!!re):$===void 0?f.lowerBound(J,!!ee):f.bound(J,$,!!ee,!!re)}function E(ae){var J,$=ae.name;return{name:$,schema:ae,mutate:function(ee){var re=ee.trans,oe=ee.type,de=ee.keys,Se=ee.values,Ne=ee.range;return new Promise(function(v,y){v=Cn(v);var T=re.objectStore($),D=T.keyPath==null,q=oe==="put"||oe==="add";if(!q&&oe!=="delete"&&oe!=="deleteRange")throw new Error("Invalid operation type: "+oe);var L,G=(de||Se||{length:1}).length;if(de&&Se&&de.length!==Se.length)throw new Error("Given keys array must have same length as given values array.");if(G===0)return v({numFailures:0,failures:{},results:[],lastResult:void 0});function H(an){++et,Ta(an)}var le=[],ke=[],et=0;if(oe==="deleteRange"){if(Ne.type===4)return v({numFailures:et,failures:ke,results:[],lastResult:void 0});Ne.type===3?le.push(L=T.clear()):le.push(L=T.delete(x(Ne)))}else{var D=q?D?[Se,de]:[Se,null]:[de,null],Je=D[0],It=D[1];if(q)for(var Rt=0;Rt<G;++Rt)le.push(L=It&&It[Rt]!==void 0?T[oe](Je[Rt],It[Rt]):T[oe](Je[Rt])),L.onerror=H;else for(Rt=0;Rt<G;++Rt)le.push(L=T[oe](Je[Rt])),L.onerror=H}function wn(an){an=an.target.result,le.forEach(function(yn,Jn){return yn.error!=null&&(ke[Jn]=yn.error)}),v({numFailures:et,failures:ke,results:oe==="delete"?de:le.map(function(yn){return yn.result}),lastResult:an})}L.onerror=function(an){H(an),wn(an)},L.onsuccess=wn})},getMany:function(ee){var re=ee.trans,oe=ee.keys;return new Promise(function(de,Se){de=Cn(de);for(var Ne,v=re.objectStore($),y=oe.length,T=new Array(y),D=0,q=0,L=function(le){le=le.target,T[le._pos]=le.result,++q===D&&de(T)},G=Gr(Se),H=0;H<y;++H)oe[H]!=null&&((Ne=v.get(oe[H]))._pos=H,Ne.onsuccess=L,Ne.onerror=G,++D);D===0&&de(T)})},get:function(ee){var re=ee.trans,oe=ee.key;return new Promise(function(de,Se){de=Cn(de);var Ne=re.objectStore($).get(oe);Ne.onsuccess=function(v){return de(v.target.result)},Ne.onerror=Gr(Se)})},query:(J=Q,function(ee){return new Promise(function(re,oe){re=Cn(re);var de,Se,Ne,D=ee.trans,v=ee.values,y=ee.limit,L=ee.query,T=y===1/0?void 0:y,q=L.index,L=L.range,D=D.objectStore($),q=q.isPrimaryKey?D:D.index(q.name),L=x(L);if(y===0)return re({result:[]});J?((T=v?q.getAll(L,T):q.getAllKeys(L,T)).onsuccess=function(G){return re({result:G.target.result})},T.onerror=Gr(oe)):(de=0,Se=!v&&"openKeyCursor"in q?q.openKeyCursor(L):q.openCursor(L),Ne=[],Se.onsuccess=function(G){var H=Se.result;return H?(Ne.push(v?H.value:H.primaryKey),++de===y?re({result:Ne}):void H.continue()):re({result:Ne})},Se.onerror=Gr(oe))})}),openCursor:function(ee){var re=ee.trans,oe=ee.values,de=ee.query,Se=ee.reverse,Ne=ee.unique;return new Promise(function(v,y){v=Cn(v);var q=de.index,T=de.range,D=re.objectStore($),D=q.isPrimaryKey?D:D.index(q.name),q=Se?Ne?"prevunique":"prev":Ne?"nextunique":"next",L=!oe&&"openKeyCursor"in D?D.openKeyCursor(x(T),q):D.openCursor(x(T),q);L.onerror=Gr(y),L.onsuccess=Cn(function(G){var H,le,ke,et,Je=L.result;Je?(Je.___id=++zs,Je.done=!1,H=Je.continue.bind(Je),le=(le=Je.continuePrimaryKey)&&le.bind(Je),ke=Je.advance.bind(Je),et=function(){throw new Error("Cursor not stopped")},Je.trans=re,Je.stop=Je.continue=Je.continuePrimaryKey=Je.advance=function(){throw new Error("Cursor not started")},Je.fail=Cn(y),Je.next=function(){var It=this,Rt=1;return this.start(function(){return Rt--?It.continue():It.stop()}).then(function(){return It})},Je.start=function(It){function Rt(){if(L.result)try{It()}catch(an){Je.fail(an)}else Je.done=!0,Je.start=function(){throw new Error("Cursor behind last entry")},Je.stop()}var wn=new Promise(function(an,yn){an=Cn(an),L.onerror=Gr(yn),Je.fail=yn,Je.stop=function(Jn){Je.stop=Je.continue=Je.continuePrimaryKey=Je.advance=et,an(Jn)}});return L.onsuccess=Cn(function(an){L.onsuccess=Rt,Rt()}),Je.continue=H,Je.continuePrimaryKey=le,Je.advance=ke,Rt(),wn},v(Je)):v(null)},y)})},count:function(ee){var re=ee.query,oe=ee.trans,de=re.index,Se=re.range;return new Promise(function(Ne,v){var y=oe.objectStore($),T=de.isPrimaryKey?y:y.index(de.name),y=x(Se),T=y?T.count(y):T.count();T.onsuccess=Cn(function(D){return Ne(D.target.result)}),T.onerror=Gr(v)})}}}var k,U,Y,ne=(U=P,Y=$a((k=l).objectStoreNames),{schema:{name:k.name,tables:Y.map(function(ae){return U.objectStore(ae)}).map(function(ae){var J=ae.keyPath,re=ae.autoIncrement,$=M(J),ee={},re={name:ae.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:J==null,compound:$,keyPath:J,autoIncrement:re,unique:!0,extractKey:Ya(J)},indexes:$a(ae.indexNames).map(function(oe){return ae.index(oe)}).map(function(Ne){var de=Ne.name,Se=Ne.unique,v=Ne.multiEntry,Ne=Ne.keyPath,v={name:de,compound:M(Ne),keyPath:Ne,unique:Se,multiEntry:v,extractKey:Ya(Ne)};return ee[$n(Ne)]=v}),getIndexByKeyPath:function(oe){return ee[$n(oe)]}};return ee[":id"]=re.primaryKey,J!=null&&(ee[$n(J)]=re.primaryKey),re})},hasGetAll:0<Y.length&&"getAll"in U.objectStore(Y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),P=ne.schema,Q=ne.hasGetAll,ne=P.tables.map(E),V={};return ne.forEach(function(ae){return V[ae.name]=ae}),{stack:"dbcore",transaction:l.transaction.bind(l),table:function(ae){if(!V[ae])throw new Error("Table '".concat(ae,"' not found"));return V[ae]},MIN_KEY:-1/0,MAX_KEY:_a(f),schema:P}}function Ai(l,f,p,x){var E=p.IDBKeyRange;return p.indexedDB,{dbcore:(x=ka(f,E,x),l.dbcore.reduce(function(k,U){return U=U.create,s(s({},k),U(k))},x))}}function ga(l,x){var p=x.db,x=Ai(l._middlewares,p,l._deps,x);l.core=x.dbcore,l.tables.forEach(function(E){var k=E.name;l.core.schema.tables.some(function(U){return U.name===k})&&(E.core=l.core.table(k),l[k]instanceof l.Table&&(l[k].core=E.core))})}function Ei(l,f,p,x){p.forEach(function(E){var k=x[E];f.forEach(function(U){var Y=(function P(Q,ne){return Pe(Q,ne)||(Q=S(Q))&&P(Q,ne)})(U,E);(!Y||"value"in Y&&Y.value===void 0)&&(U===l.Transaction.prototype||U instanceof l.Transaction?fe(U,E,{get:function(){return this.table(E)},set:function(P){X(this,E,{value:P,writable:!0,configurable:!0,enumerable:!0})}}):U[E]=new l.Table(E,k))})})}function ei(l,f){f.forEach(function(p){for(var x in p)p[x]instanceof l.Table&&delete p[x]})}function ls(l,f){return l._cfg.version-f._cfg.version}function Ba(l,f,p,x){var E=l._dbSchema;p.objectStoreNames.contains("$meta")&&!E.$meta&&(E.$meta=za("$meta",Ys("")[0],[]),l._storeNames.push("$meta"));var k=l._createTransaction("readwrite",l._storeNames,E);k.create(p),k._completion.catch(x);var U=k._reject.bind(k),Y=tt.transless||tt;W(function(){return tt.trans=k,tt.transless=Y,f!==0?(ga(l,p),Q=f,((P=k).storeNames.includes("$meta")?P.table("$meta").get("version").then(function(ne){return ne??Q}):$e.resolve(Q)).then(function(ne){return ae=ne,J=k,$=p,ee=[],ne=(V=l)._versions,re=V._dbSchema=Ka(0,V.idbdb,$),(ne=ne.filter(function(oe){return oe._cfg.version>=ae})).length!==0?(ne.forEach(function(oe){ee.push(function(){var de=re,Se=oe._cfg.dbschema;ti(V,de,$),ti(V,Se,$),re=V._dbSchema=Se;var Ne=Mi(de,Se);Ne.add.forEach(function(q){cs($,q[0],q[1].primKey,q[1].indexes)}),Ne.change.forEach(function(q){if(q.recreate)throw new Ve.Upgrade("Not yet support for changing primary key");var L=$.objectStore(q.name);q.add.forEach(function(G){return _i(L,G)}),q.change.forEach(function(G){L.deleteIndex(G.name),_i(L,G)}),q.del.forEach(function(G){return L.deleteIndex(G)})});var v=oe._cfg.contentUpgrade;if(v&&oe._cfg.version>ae){ga(V,$),J._memoizedTables={};var y=Bt(Se);Ne.del.forEach(function(q){y[q]=de[q]}),ei(V,[V.Transaction.prototype]),Ei(V,[V.Transaction.prototype],A(y),y),J.schema=y;var T,D=K(v);return D&&we(),Ne=$e.follow(function(){var q;(T=v(J))&&D&&(q=ze.bind(null,null),T.then(q,q))}),T&&typeof T.then=="function"?$e.resolve(T):Ne.then(function(){return T})}}),ee.push(function(de){var Se,Ne,v=oe._cfg.dbschema;Se=v,Ne=de,[].slice.call(Ne.db.objectStoreNames).forEach(function(y){return Se[y]==null&&Ne.db.deleteObjectStore(y)}),ei(V,[V.Transaction.prototype]),Ei(V,[V.Transaction.prototype],V._storeNames,V._dbSchema),J.schema=V._dbSchema}),ee.push(function(de){V.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(V.idbdb.version/10)===oe._cfg.version?(V.idbdb.deleteObjectStore("$meta"),delete V._dbSchema.$meta,V._storeNames=V._storeNames.filter(function(Se){return Se!=="$meta"})):de.objectStore("$meta").put(oe._cfg.version,"version"))})}),(function oe(){return ee.length?$e.resolve(ee.shift()(J.idbtrans)).then(oe):$e.resolve()})().then(function(){us(re,$)})):$e.resolve();var V,ae,J,$,ee,re}).catch(U)):(A(E).forEach(function(ne){cs(p,ne,E[ne].primKey,E[ne].indexes)}),ga(l,p),void $e.follow(function(){return l.on.populate.fire(k)}).catch(U));var P,Q})}function Ti(l,f){us(l._dbSchema,f),f.db.version%10!=0||f.objectStoreNames.contains("$meta")||f.db.createObjectStore("$meta").add(Math.ceil(f.db.version/10-1),"version");var p=Ka(0,l.idbdb,f);ti(l,l._dbSchema,f);for(var x=0,E=Mi(p,l._dbSchema).change;x<E.length;x++){var k=(function(U){if(U.change.length||U.recreate)return console.warn("Unable to patch indexes of table ".concat(U.name," because it has changes on the type of index or primary key.")),{value:void 0};var Y=f.objectStore(U.name);U.add.forEach(function(P){xn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(U.name,".").concat(P.src)),_i(Y,P)})})(E[x]);if(typeof k=="object")return k.value}}function Mi(l,f){var p,x={del:[],add:[],change:[]};for(p in l)f[p]||x.del.push(p);for(p in f){var E=l[p],k=f[p];if(E){var U={name:p,def:k,recreate:!1,del:[],add:[],change:[]};if(""+(E.primKey.keyPath||"")!=""+(k.primKey.keyPath||"")||E.primKey.auto!==k.primKey.auto)U.recreate=!0,x.change.push(U);else{var Y=E.idxByName,P=k.idxByName,Q=void 0;for(Q in Y)P[Q]||U.del.push(Q);for(Q in P){var ne=Y[Q],V=P[Q];ne?ne.src!==V.src&&U.change.push(V):U.add.push(V)}(0<U.del.length||0<U.add.length||0<U.change.length)&&x.change.push(U)}}else x.add.push([p,k])}return x}function cs(l,f,p,x){var E=l.db.createObjectStore(f,p.keyPath?{keyPath:p.keyPath,autoIncrement:p.auto}:{autoIncrement:p.auto});return x.forEach(function(k){return _i(E,k)}),E}function us(l,f){A(l).forEach(function(p){f.db.objectStoreNames.contains(p)||(xn&&console.debug("Dexie: Creating missing table",p),cs(f,p,l[p].primKey,l[p].indexes))})}function _i(l,f){l.createIndex(f.name,f.keyPath,{unique:f.unique,multiEntry:f.multi})}function Ka(l,f,p){var x={};return st(f.objectStoreNames,0).forEach(function(E){for(var k=p.objectStore(E),U=Vr(Si(Q=k.keyPath),Q||"",!0,!1,!!k.autoIncrement,Q&&typeof Q!="string",!0),Y=[],P=0;P<k.indexNames.length;++P){var ne=k.index(k.indexNames[P]),Q=ne.keyPath,ne=Vr(ne.name,Q,!!ne.unique,!!ne.multiEntry,!1,Q&&typeof Q!="string",!1);Y.push(ne)}x[E]=za(E,U,Y)}),x}function ti(l,f,p){for(var x=p.db.objectStoreNames,E=0;E<x.length;++E){var k=x[E],U=p.objectStore(k);l._hasGetAll="getAll"in U;for(var Y=0;Y<U.indexNames.length;++Y){var P=U.indexNames[Y],Q=U.index(P).keyPath,ne=typeof Q=="string"?Q:"["+st(Q).join("+")+"]";!f[k]||(Q=f[k].idxByName[ne])&&(Q.name=P,delete f[k].idxByName[ne],f[k].idxByName[P]=Q)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&g.WorkerGlobalScope&&g instanceof g.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(l._hasGetAll=!1)}function Ys(l){return l.split(",").map(function(f,p){var k=f.split(":"),x=(E=k[1])===null||E===void 0?void 0:E.trim(),E=(f=k[0].trim()).replace(/([&*]|\+\+)/g,""),k=/^\[/.test(E)?E.match(/^\[(.*)\]$/)[1].split("+"):E;return Vr(E,k||null,/\&/.test(f),/\*/.test(f),/\+\+/.test(f),M(k),p===0,x)})}var _o=(Ga.prototype._createTableSchema=za,Ga.prototype._parseIndexSyntax=Ys,Ga.prototype._parseStoresSpec=function(l,f){var p=this;A(l).forEach(function(x){if(l[x]!==null){var E=p._parseIndexSyntax(l[x]),k=E.shift();if(!k)throw new Ve.Schema("Invalid schema for table "+x+": "+l[x]);if(k.unique=!0,k.multi)throw new Ve.Schema("Primary key cannot be multiEntry*");E.forEach(function(U){if(U.auto)throw new Ve.Schema("Only primary key can be marked as autoIncrement (++)");if(!U.keyPath)throw new Ve.Schema("Index must have a name and cannot be an empty string")}),E=p._createTableSchema(x,k,E),f[x]=E}})},Ga.prototype.stores=function(p){var f=this.db;this._cfg.storesSource=this._cfg.storesSource?b(this._cfg.storesSource,p):p;var p=f._versions,x={},E={};return p.forEach(function(k){b(x,k._cfg.storesSource),E=k._cfg.dbschema={},k._parseStoresSpec(x,E)}),f._dbSchema=E,ei(f,[f._allTables,f,f.Transaction.prototype]),Ei(f,[f._allTables,f,f.Transaction.prototype,this._cfg.tables],A(E),E),f._storeNames=A(E),this},Ga.prototype.upgrade=function(l){return this._cfg.contentUpgrade=nn(this._cfg.contentUpgrade||ft,l),this},Ga);function Ga(){}function fs(l,f){var p=l._dbNamesDB;return p||(p=l._dbNamesDB=new ea(vt,{addons:[],indexedDB:l,IDBKeyRange:f})).version(1).stores({dbnames:"name"}),p.table("dbnames")}function ki(l){return l&&typeof l.databases=="function"}function ds(l){return W(function(){return tt.letThrough=!0,l()})}function hs(l){return!("from"in l)}var ur=function(l,f){if(!this){var p=new ur;return l&&"d"in l&&b(p,l),p}b(this,arguments.length?{d:1,from:l,to:1<arguments.length?f:l}:{d:0})};function ni(l,f,p){var x=ve(f,p);if(!isNaN(x)){if(0<x)throw RangeError();if(hs(l))return b(l,{from:f,to:p,d:1});var E=l.l,x=l.r;if(ve(p,l.from)<0)return E?ni(E,f,p):l.l={from:f,to:p,d:1,l:null,r:null},Ri(l);if(0<ve(f,l.to))return x?ni(x,f,p):l.r={from:f,to:p,d:1,l:null,r:null},Ri(l);ve(f,l.from)<0&&(l.from=f,l.l=null,l.d=x?x.d+1:1),0<ve(p,l.to)&&(l.to=p,l.r=null,l.d=l.l?l.l.d+1:1),p=!l.r,E&&!l.l&&Ra(l,E),x&&p&&Ra(l,x)}}function Ra(l,f){hs(f)||(function p(x,P){var k=P.from,U=P.to,Y=P.l,P=P.r;ni(x,k,U),Y&&p(x,Y),P&&p(x,P)})(l,f)}function Ks(l,f){var p=Bi(f),x=p.next();if(x.done)return!1;for(var E=x.value,k=Bi(l),U=k.next(E.from),Y=U.value;!x.done&&!U.done;){if(ve(Y.from,E.to)<=0&&0<=ve(Y.to,E.from))return!0;ve(E.from,Y.from)<0?E=(x=p.next(Y.from)).value:Y=(U=k.next(E.from)).value}return!1}function Bi(l){var f=hs(l)?null:{s:0,n:l};return{next:function(p){for(var x=0<arguments.length;f;)switch(f.s){case 0:if(f.s=1,x)for(;f.n.l&&ve(p,f.n.from)<0;)f={up:f,n:f.n.l,s:1};else for(;f.n.l;)f={up:f,n:f.n.l,s:1};case 1:if(f.s=2,!x||ve(p,f.n.to)<=0)return{value:f.n,done:!1};case 2:if(f.n.r){f.s=3,f={up:f,n:f.n.r,s:0};continue}case 3:f=f.up}return{done:!0}}}}function Ri(l){var f,p,x=(((f=l.r)===null||f===void 0?void 0:f.d)||0)-(((p=l.l)===null||p===void 0?void 0:p.d)||0),E=1<x?"r":x<-1?"l":"";E&&(f=E=="r"?"l":"r",p=s({},l),x=l[E],l.from=x.from,l.to=x.to,l[E]=x[E],p[E]=x[f],(l[f]=p).d=ps(p)),l.d=ps(l)}function ps(p){var f=p.r,p=p.l;return(f?p?Math.max(f.d,p.d):f.d:p?p.d:0)+1}function ma(l,f){return A(f).forEach(function(p){l[p]?Ra(l[p],f[p]):l[p]=(function x(E){var k,U,Y={};for(k in E)j(E,k)&&(U=E[k],Y[k]=!U||typeof U!="object"||Ue.has(U.constructor)?U:x(U));return Y})(f[p])}),l}function gs(l,f){return l.all||f.all||Object.keys(l).some(function(p){return f[p]&&Ks(f[p],l[p])})}I(ur.prototype,((kr={add:function(l){return Ra(this,l),this},addKey:function(l){return ni(this,l,l),this},addKeys:function(l){var f=this;return l.forEach(function(p){return ni(f,p,p)}),this},hasKey:function(l){var f=Bi(this).next(l).value;return f&&ve(f.from,l)<=0&&0<=ve(f.to,l)}})[se]=function(){return Bi(this)},kr));var Na={},ms={},ys=!1;function Ni(l){ma(ms,l),ys||(ys=!0,setTimeout(function(){ys=!1,vs(ms,!(ms={}))},0))}function vs(l,f){f===void 0&&(f=!1);var p=new Set;if(l.all)for(var x=0,E=Object.values(Na);x<E.length;x++)Gs(U=E[x],l,p,f);else for(var k in l){var U,Y=/^idb\:\/\/(.*)\/(.*)\//.exec(k);Y&&(k=Y[1],Y=Y[2],(U=Na["idb://".concat(k,"/").concat(Y)])&&Gs(U,l,p,f))}p.forEach(function(P){return P()})}function Gs(l,f,p,x){for(var E=[],k=0,U=Object.entries(l.queries.query);k<U.length;k++){for(var Y=U[k],P=Y[0],Q=[],ne=0,V=Y[1];ne<V.length;ne++){var ae=V[ne];gs(f,ae.obsSet)?ae.subscribers.forEach(function(re){return p.add(re)}):x&&Q.push(ae)}x&&E.push([P,Q])}if(x)for(var J=0,$=E;J<$.length;J++){var ee=$[J],P=ee[0],Q=ee[1];l.queries.query[P]=Q}}function ko(l){var f=l._state,p=l._deps.indexedDB;if(f.isBeingOpened||l.idbdb)return f.dbReadyPromise.then(function(){return f.dbOpenError?pt(f.dbOpenError):l});f.isBeingOpened=!0,f.dbOpenError=null,f.openComplete=!1;var x=f.openCanceller,E=Math.round(10*l.verno),k=!1;function U(){if(f.openCanceller!==x)throw new Ve.DatabaseClosed("db.open() was cancelled")}function Y(){return new $e(function(ae,J){if(U(),!p)throw new Ve.MissingAPI;var $=l.name,ee=f.autoSchema||!E?p.open($):p.open($,E);if(!ee)throw new Ve.MissingAPI;ee.onerror=Gr(J),ee.onblocked=Cn(l._fireOnBlocked),ee.onupgradeneeded=Cn(function(re){var oe;ne=ee.transaction,f.autoSchema&&!l._options.allowEmptyDB?(ee.onerror=Ta,ne.abort(),ee.result.close(),(oe=p.deleteDatabase($)).onsuccess=oe.onerror=Cn(function(){J(new Ve.NoSuchDatabase("Database ".concat($," doesnt exist")))})):(ne.onerror=Gr(J),re=re.oldVersion>Math.pow(2,62)?0:re.oldVersion,V=re<1,l.idbdb=ee.result,k&&Ti(l,ne),Ba(l,re/10,ne,J))},J),ee.onsuccess=Cn(function(){ne=null;var re,oe,de,Se,Ne,v=l.idbdb=ee.result,y=st(v.objectStoreNames);if(0<y.length)try{var T=v.transaction((Se=y).length===1?Se[0]:Se,"readonly");if(f.autoSchema)oe=v,de=T,(re=l).verno=oe.version/10,de=re._dbSchema=Ka(0,oe,de),re._storeNames=st(oe.objectStoreNames,0),Ei(re,[re._allTables],A(de),de);else if(ti(l,l._dbSchema,T),((Ne=Mi(Ka(0,(Ne=l).idbdb,T),Ne._dbSchema)).add.length||Ne.change.some(function(D){return D.add.length||D.change.length}))&&!k)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),v.close(),E=v.version+1,k=!0,ae(Y());ga(l,T)}catch{}ct.push(l),v.onversionchange=Cn(function(D){f.vcFired=!0,l.on("versionchange").fire(D)}),v.onclose=Cn(function(){l.close({disableAutoOpen:!1})}),V&&(Ne=l._deps,T=$,v=Ne.indexedDB,Ne=Ne.IDBKeyRange,ki(v)||T===vt||fs(v,Ne).put({name:T}).catch(ft)),ae()},J)}).catch(function(ae){switch(ae?.name){case"UnknownError":if(0<f.PR1398_maxLoop)return f.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Y();break;case"VersionError":if(0<E)return E=0,Y()}return $e.reject(ae)})}var P,Q=f.dbReadyResolve,ne=null,V=!1;return $e.race([x,(typeof navigator>"u"?$e.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ae){function J(){return indexedDB.databases().finally(ae)}P=setInterval(J,100),J()}).finally(function(){return clearInterval(P)}):Promise.resolve()).then(Y)]).then(function(){return U(),f.onReadyBeingFired=[],$e.resolve(ds(function(){return l.on.ready.fire(l.vip)})).then(function ae(){if(0<f.onReadyBeingFired.length){var J=f.onReadyBeingFired.reduce(nn,ft);return f.onReadyBeingFired=[],$e.resolve(ds(function(){return J(l.vip)})).then(ae)}})}).finally(function(){f.openCanceller===x&&(f.onReadyBeingFired=null,f.isBeingOpened=!1)}).catch(function(ae){f.dbOpenError=ae;try{ne&&ne.abort()}catch{}return x===f.openCanceller&&l._close(),pt(ae)}).finally(function(){f.openComplete=!0,Q()}).then(function(){var ae;return V&&(ae={},l.tables.forEach(function(J){J.schema.indexes.forEach(function($){$.name&&(ae["idb://".concat(l.name,"/").concat(J.name,"/").concat($.name)]=new ur(-1/0,[[[]]]))}),ae["idb://".concat(l.name,"/").concat(J.name,"/")]=ae["idb://".concat(l.name,"/").concat(J.name,"/:dels")]=new ur(-1/0,[[[]]])}),Hn(La).fire(ae),vs(ae,!0)),l})}function ri(l){function f(k){return l.next(k)}var p=E(f),x=E(function(k){return l.throw(k)});function E(k){return function(P){var Y=k(P),P=Y.value;return Y.done?P:P&&typeof P.then=="function"?P.then(p,x):M(P)?Promise.all(P).then(p,x):p(P)}}return E(f)()}function mn(l,f,p){for(var x=M(l)?l.slice():[l],E=0;E<p;++E)x.push(f);return x}var Bo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(l){return s(s({},l),{table:function(f){var p=l.table(f),x=p.schema,E={},k=[];function U(V,ae,J){var $=$n(V),ee=E[$]=E[$]||[],re=V==null?0:typeof V=="string"?1:V.length,oe=0<ae,oe=s(s({},J),{name:oe?"".concat($,"(virtual-from:").concat(J.name,")"):J.name,lowLevelIndex:J,isVirtual:oe,keyTail:ae,keyLength:re,extractKey:Ya(V),unique:!oe&&J.unique});return ee.push(oe),oe.isPrimaryKey||k.push(oe),1<re&&U(re===2?V[0]:V.slice(0,re-1),ae+1,J),ee.sort(function(de,Se){return de.keyTail-Se.keyTail}),oe}f=U(x.primaryKey.keyPath,0,x.primaryKey),E[":id"]=[f];for(var Y=0,P=x.indexes;Y<P.length;Y++){var Q=P[Y];U(Q.keyPath,0,Q)}function ne(V){var ae,J=V.query.index;return J.isVirtual?s(s({},V),{query:{index:J.lowLevelIndex,range:(ae=V.query.range,J=J.keyTail,{type:ae.type===1?2:ae.type,lower:mn(ae.lower,ae.lowerOpen?l.MAX_KEY:l.MIN_KEY,J),lowerOpen:!0,upper:mn(ae.upper,ae.upperOpen?l.MIN_KEY:l.MAX_KEY,J),upperOpen:!0})}}):V}return s(s({},p),{schema:s(s({},x),{primaryKey:f,indexes:k,getIndexByKeyPath:function(V){return(V=E[$n(V)])&&V[0]}}),count:function(V){return p.count(ne(V))},query:function(V){return p.query(ne(V))},openCursor:function(V){var ae=V.query.index,J=ae.keyTail,$=ae.isVirtual,ee=ae.keyLength;return $?p.openCursor(ne(V)).then(function(oe){return oe&&re(oe)}):p.openCursor(V);function re(oe){return Object.create(oe,{continue:{value:function(de){de!=null?oe.continue(mn(de,V.reverse?l.MAX_KEY:l.MIN_KEY,J)):V.unique?oe.continue(oe.key.slice(0,ee).concat(V.reverse?l.MIN_KEY:l.MAX_KEY,J)):oe.continue()}},continuePrimaryKey:{value:function(de,Se){oe.continuePrimaryKey(mn(de,l.MAX_KEY,J),Se)}},primaryKey:{get:function(){return oe.primaryKey}},key:{get:function(){var de=oe.key;return ee===1?de[0]:de.slice(0,ee)}},value:{get:function(){return oe.value}}})}}})}})}};function $r(l,f,p,x){return p=p||{},x=x||"",A(l).forEach(function(E){var k,U,Y;j(f,E)?(k=l[E],U=f[E],typeof k=="object"&&typeof U=="object"&&k&&U?(Y=Ze(k))!==Ze(U)?p[x+E]=f[E]:Y==="Object"?$r(k,U,p,x+E+"."):k!==U&&(p[x+E]=f[E]):k!==U&&(p[x+E]=f[E])):p[x+E]=void 0}),A(f).forEach(function(E){j(l,E)||(p[x+E]=f[E])}),p}function ai(l,f){return f.type==="delete"?f.keys:f.keys||f.values.map(l.extractKey)}var Vs={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(l){return s(s({},l),{table:function(f){var p=l.table(f),x=p.schema.primaryKey;return s(s({},p),{mutate:function(E){var k=tt.trans,U=k.table(f).hook,Y=U.deleting,P=U.creating,Q=U.updating;switch(E.type){case"add":if(P.fire===ft)break;return k._promise("readwrite",function(){return ne(E)},!0);case"put":if(P.fire===ft&&Q.fire===ft)break;return k._promise("readwrite",function(){return ne(E)},!0);case"delete":if(Y.fire===ft)break;return k._promise("readwrite",function(){return ne(E)},!0);case"deleteRange":if(Y.fire===ft)break;return k._promise("readwrite",function(){return(function V(ae,J,$){return p.query({trans:ae,values:!1,query:{index:x,range:J},limit:$}).then(function(ee){var re=ee.result;return ne({type:"delete",keys:re,trans:ae}).then(function(oe){return 0<oe.numFailures?Promise.reject(oe.failures[0]):re.length<$?{failures:[],numFailures:0,lastResult:void 0}:V(ae,s(s({},J),{lower:re[re.length-1],lowerOpen:!0}),$)})})})(E.trans,E.range,1e4)},!0)}return p.mutate(E);function ne(V){var ae,J,$,ee=tt.trans,re=V.keys||ai(x,V);if(!re)throw new Error("Keys missing");return(V=V.type==="add"||V.type==="put"?s(s({},V),{keys:re}):s({},V)).type!=="delete"&&(V.values=u([],V.values)),V.keys&&(V.keys=u([],V.keys)),ae=p,$=re,((J=V).type==="add"?Promise.resolve([]):ae.getMany({trans:J.trans,keys:$,cache:"immutable"})).then(function(oe){var de=re.map(function(Se,Ne){var v,y,T,D=oe[Ne],q={onerror:null,onsuccess:null};return V.type==="delete"?Y.fire.call(q,Se,D,ee):V.type==="add"||D===void 0?(v=P.fire.call(q,Se,V.values[Ne],ee),Se==null&&v!=null&&(V.keys[Ne]=Se=v,x.outbound||Xe(V.values[Ne],x.keyPath,Se))):(v=$r(D,V.values[Ne]),(y=Q.fire.call(q,v,Se,D,ee))&&(T=V.values[Ne],Object.keys(y).forEach(function(L){j(T,L)?T[L]=y[L]:Xe(T,L,y[L])}))),q});return p.mutate(V).then(function(Se){for(var Ne=Se.failures,v=Se.results,y=Se.numFailures,Se=Se.lastResult,T=0;T<re.length;++T){var D=(v||re)[T],q=de[T];D==null?q.onerror&&q.onerror(Ne[T]):q.onsuccess&&q.onsuccess(V.type==="put"&&oe[T]?V.values[T]:D)}return{failures:Ne,results:v,numFailures:y,lastResult:Se}}).catch(function(Se){return de.forEach(function(Ne){return Ne.onerror&&Ne.onerror(Se)}),Promise.reject(Se)})})}}})}})}};function $t(l,f,p){try{if(!f||f.keys.length<l.length)return null;for(var x=[],E=0,k=0;E<f.keys.length&&k<l.length;++E)ve(f.keys[E],l[k])===0&&(x.push(p?xe(f.values[E]):f.values[E]),++k);return x.length===l.length?x:null}catch{return null}}var Fs={stack:"dbcore",level:-1,create:function(l){return{table:function(f){var p=l.table(f);return s(s({},p),{getMany:function(x){if(!x.cache)return p.getMany(x);var E=$t(x.keys,x.trans._cache,x.cache==="clone");return E?$e.resolve(E):p.getMany(x).then(function(k){return x.trans._cache={keys:x.keys,values:x.cache==="clone"?xe(k):k},k})},mutate:function(x){return x.type!=="add"&&(x.trans._cache=null),p.mutate(x)}})}}}};function Da(l,f){return l.trans.mode==="readonly"&&!!l.subscr&&!l.trans.explicit&&l.trans.db._options.cache!=="disabled"&&!f.schema.primaryKey.outbound}function Hs(l,f){switch(l){case"query":return f.values&&!f.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ro={stack:"dbcore",level:0,name:"Observability",create:function(l){var f=l.schema.name,p=new ur(l.MIN_KEY,l.MAX_KEY);return s(s({},l),{transaction:function(x,E,k){if(tt.subscr&&E!=="readonly")throw new Ve.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(tt.querier));return l.transaction(x,E,k)},table:function(x){var E=l.table(x),k=E.schema,U=k.primaryKey,V=k.indexes,Y=U.extractKey,P=U.outbound,Q=U.autoIncrement&&V.filter(function(J){return J.compound&&J.keyPath.includes(U.keyPath)}),ne=s(s({},E),{mutate:function(J){function $(L){return L="idb://".concat(f,"/").concat(x,"/").concat(L),Se[L]||(Se[L]=new ur)}var ee,re,oe,de=J.trans,Se=J.mutatedParts||(J.mutatedParts={}),Ne=$(""),v=$(":dels"),y=J.type,q=J.type==="deleteRange"?[J.range]:J.type==="delete"?[J.keys]:J.values.length<50?[ai(U,J).filter(function(L){return L}),J.values]:[],T=q[0],D=q[1],q=J.trans._cache;return M(T)?(Ne.addKeys(T),(q=y==="delete"||T.length===D.length?$t(T,q):null)||v.addKeys(T),(q||D)&&(ee=$,re=q,oe=D,k.indexes.forEach(function(L){var G=ee(L.name||"");function H(ke){return ke!=null?L.extractKey(ke):null}function le(ke){return L.multiEntry&&M(ke)?ke.forEach(function(et){return G.addKey(et)}):G.addKey(ke)}(re||oe).forEach(function(ke,It){var Je=re&&H(re[It]),It=oe&&H(oe[It]);ve(Je,It)!==0&&(Je!=null&&le(Je),It!=null&&le(It))})}))):T?(D={from:(D=T.lower)!==null&&D!==void 0?D:l.MIN_KEY,to:(D=T.upper)!==null&&D!==void 0?D:l.MAX_KEY},v.add(D),Ne.add(D)):(Ne.add(p),v.add(p),k.indexes.forEach(function(L){return $(L.name).add(p)})),E.mutate(J).then(function(L){return!T||J.type!=="add"&&J.type!=="put"||(Ne.addKeys(L.results),Q&&Q.forEach(function(G){for(var H=J.values.map(function(Je){return G.extractKey(Je)}),le=G.keyPath.findIndex(function(Je){return Je===U.keyPath}),ke=0,et=L.results.length;ke<et;++ke)H[ke][le]=L.results[ke];$(G.name).addKeys(H)})),de.mutatedParts=ma(de.mutatedParts||{},Se),L})}}),V=function($){var ee=$.query,$=ee.index,ee=ee.range;return[$,new ur(($=ee.lower)!==null&&$!==void 0?$:l.MIN_KEY,(ee=ee.upper)!==null&&ee!==void 0?ee:l.MAX_KEY)]},ae={get:function(J){return[U,new ur(J.key)]},getMany:function(J){return[U,new ur().addKeys(J.keys)]},count:V,query:V,openCursor:V};return A(ae).forEach(function(J){ne[J]=function($){var ee=tt.subscr,re=!!ee,oe=Da(tt,E)&&Hs(J,$)?$.obsSet={}:ee;if(re){var de=function(D){return D="idb://".concat(f,"/").concat(x,"/").concat(D),oe[D]||(oe[D]=new ur)},Se=de(""),Ne=de(":dels"),ee=ae[J]($),re=ee[0],ee=ee[1];if((J==="query"&&re.isPrimaryKey&&!$.values?Ne:de(re.name||"")).add(ee),!re.isPrimaryKey){if(J!=="count"){var v=J==="query"&&P&&$.values&&E.query(s(s({},$),{values:!1}));return E[J].apply(this,arguments).then(function(D){if(J==="query"){if(P&&$.values)return v.then(function(H){return H=H.result,Se.addKeys(H),D});var q=$.values?D.result.map(Y):D.result;($.values?Se:Ne).addKeys(q)}else if(J==="openCursor"){var L=D,G=$.values;return L&&Object.create(L,{key:{get:function(){return Ne.addKey(L.primaryKey),L.key}},primaryKey:{get:function(){var H=L.primaryKey;return Ne.addKey(H),H}},value:{get:function(){return G&&Se.addKey(L.primaryKey),L.value}}})}return D})}Ne.add(p)}}return E[J].apply(this,arguments)}}),ne}})}};function Ps(l,f,p){if(p.numFailures===0)return f;if(f.type==="deleteRange")return null;var x=f.keys?f.keys.length:"values"in f&&f.values?f.values.length:1;return p.numFailures===x?null:(f=s({},f),M(f.keys)&&(f.keys=f.keys.filter(function(E,k){return!(k in p.failures)})),"values"in f&&M(f.values)&&(f.values=f.values.filter(function(E,k){return!(k in p.failures)})),f)}function Di(l,f){return p=l,((x=f).lower===void 0||(x.lowerOpen?0<ve(p,x.lower):0<=ve(p,x.lower)))&&(l=l,(f=f).upper===void 0||(f.upperOpen?ve(l,f.upper)<0:ve(l,f.upper)<=0));var p,x}function xs(l,f,ae,x,E,k){if(!ae||ae.length===0)return l;var U=f.query.index,Y=U.multiEntry,P=f.query.range,Q=x.schema.primaryKey.extractKey,ne=U.extractKey,V=(U.lowLevelIndex||U).extractKey,ae=ae.reduce(function(J,$){var ee=J,re=[];if($.type==="add"||$.type==="put")for(var oe=new ur,de=$.values.length-1;0<=de;--de){var Se,Ne=$.values[de],v=Q(Ne);oe.hasKey(v)||(Se=ne(Ne),(Y&&M(Se)?Se.some(function(L){return Di(L,P)}):Di(Se,P))&&(oe.addKey(v),re.push(Ne)))}switch($.type){case"add":var y=new ur().addKeys(f.values?J.map(function(G){return Q(G)}):J),ee=J.concat(f.values?re.filter(function(G){return G=Q(G),!y.hasKey(G)&&(y.addKey(G),!0)}):re.map(function(G){return Q(G)}).filter(function(G){return!y.hasKey(G)&&(y.addKey(G),!0)}));break;case"put":var T=new ur().addKeys($.values.map(function(G){return Q(G)}));ee=J.filter(function(G){return!T.hasKey(f.values?Q(G):G)}).concat(f.values?re:re.map(function(G){return Q(G)}));break;case"delete":var D=new ur().addKeys($.keys);ee=J.filter(function(G){return!D.hasKey(f.values?Q(G):G)});break;case"deleteRange":var q=$.range;ee=J.filter(function(G){return!Di(Q(G),q)})}return ee},l);return ae===l?l:(ae.sort(function(J,$){return ve(V(J),V($))||ve(Q(J),Q($))}),f.limit&&f.limit<1/0&&(ae.length>f.limit?ae.length=f.limit:l.length===f.limit&&ae.length<f.limit&&(E.dirty=!0)),k?Object.freeze(ae):ae)}function Va(l,f){return ve(l.lower,f.lower)===0&&ve(l.upper,f.upper)===0&&!!l.lowerOpen==!!f.lowerOpen&&!!l.upperOpen==!!f.upperOpen}function ii(l,f){return(function(p,x,E,k){if(p===void 0)return x!==void 0?-1:0;if(x===void 0)return 1;if((x=ve(p,x))===0){if(E&&k)return 0;if(E)return 1;if(k)return-1}return x})(l.lower,f.lower,l.lowerOpen,f.lowerOpen)<=0&&0<=(function(p,x,E,k){if(p===void 0)return x!==void 0?1:0;if(x===void 0)return-1;if((x=ve(p,x))===0){if(E&&k)return 0;if(E)return-1;if(k)return 1}return x})(l.upper,f.upper,l.upperOpen,f.upperOpen)}function No(l,f,p,x){l.subscribers.add(p),x.addEventListener("abort",function(){var E,k;l.subscribers.delete(p),l.subscribers.size===0&&(E=l,k=f,setTimeout(function(){E.subscribers.size===0&&Ie(k,E)},3e3))})}var ji={stack:"dbcore",level:0,name:"Cache",create:function(l){var f=l.schema.name;return s(s({},l),{transaction:function(p,x,E){var k,U,Y=l.transaction(p,x,E);return x==="readwrite"&&(U=(k=new AbortController).signal,E=function(P){return function(){if(k.abort(),x==="readwrite"){for(var Q=new Set,ne=0,V=p;ne<V.length;ne++){var ae=V[ne],J=Na["idb://".concat(f,"/").concat(ae)];if(J){var $=l.table(ae),ee=J.optimisticOps.filter(function(G){return G.trans===Y});if(Y._explicit&&P&&Y.mutatedParts)for(var re=0,oe=Object.values(J.queries.query);re<oe.length;re++)for(var de=0,Se=(y=oe[re]).slice();de<Se.length;de++)gs((T=Se[de]).obsSet,Y.mutatedParts)&&(Ie(y,T),T.subscribers.forEach(function(G){return Q.add(G)}));else if(0<ee.length){J.optimisticOps=J.optimisticOps.filter(function(G){return G.trans!==Y});for(var Ne=0,v=Object.values(J.queries.query);Ne<v.length;Ne++)for(var y,T,D,q=0,L=(y=v[Ne]).slice();q<L.length;q++)(T=L[q]).res!=null&&Y.mutatedParts&&(P&&!T.dirty?(D=Object.isFrozen(T.res),D=xs(T.res,T.req,ee,$,T,D),T.dirty?(Ie(y,T),T.subscribers.forEach(function(G){return Q.add(G)})):D!==T.res&&(T.res=D,T.promise=$e.resolve({result:D}))):(T.dirty&&Ie(y,T),T.subscribers.forEach(function(G){return Q.add(G)})))}}}Q.forEach(function(G){return G()})}}},Y.addEventListener("abort",E(!1),{signal:U}),Y.addEventListener("error",E(!1),{signal:U}),Y.addEventListener("complete",E(!0),{signal:U})),Y},table:function(p){var x=l.table(p),E=x.schema.primaryKey;return s(s({},x),{mutate:function(k){var U=tt.trans;if(E.outbound||U.db._options.cache==="disabled"||U.explicit||U.idbtrans.mode!=="readwrite")return x.mutate(k);var Y=Na["idb://".concat(f,"/").concat(p)];return Y?(U=x.mutate(k),k.type!=="add"&&k.type!=="put"||!(50<=k.values.length||ai(E,k).some(function(P){return P==null}))?(Y.optimisticOps.push(k),k.mutatedParts&&Ni(k.mutatedParts),U.then(function(P){0<P.numFailures&&(Ie(Y.optimisticOps,k),(P=Ps(0,k,P))&&Y.optimisticOps.push(P),k.mutatedParts&&Ni(k.mutatedParts))}),U.catch(function(){Ie(Y.optimisticOps,k),k.mutatedParts&&Ni(k.mutatedParts)})):U.then(function(P){var Q=Ps(0,s(s({},k),{values:k.values.map(function(ne,V){var ae;return P.failures[V]?ne:(ne=(ae=E.keyPath)!==null&&ae!==void 0&&ae.includes(".")?xe(ne):s({},ne),Xe(ne,E.keyPath,P.results[V]),ne)})}),P);Y.optimisticOps.push(Q),queueMicrotask(function(){return k.mutatedParts&&Ni(k.mutatedParts)})}),U):x.mutate(k)},query:function(k){if(!Da(tt,x)||!Hs("query",k))return x.query(k);var U=((Q=tt.trans)===null||Q===void 0?void 0:Q.db._options.cache)==="immutable",V=tt,Y=V.requery,P=V.signal,Q=(function($,ee,re,oe){var de=Na["idb://".concat($,"/").concat(ee)];if(!de)return[];if(!(ee=de.queries[re]))return[null,!1,de,null];var Se=ee[(oe.query?oe.query.index.name:null)||""];if(!Se)return[null,!1,de,null];switch(re){case"query":var Ne=Se.find(function(v){return v.req.limit===oe.limit&&v.req.values===oe.values&&Va(v.req.query.range,oe.query.range)});return Ne?[Ne,!0,de,Se]:[Se.find(function(v){return("limit"in v.req?v.req.limit:1/0)>=oe.limit&&(!oe.values||v.req.values)&&ii(v.req.query.range,oe.query.range)}),!1,de,Se];case"count":return Ne=Se.find(function(v){return Va(v.req.query.range,oe.query.range)}),[Ne,!!Ne,de,Se]}})(f,p,"query",k),ne=Q[0],V=Q[1],ae=Q[2],J=Q[3];return ne&&V?ne.obsSet=k.obsSet:(V=x.query(k).then(function($){var ee=$.result;if(ne&&(ne.res=ee),U){for(var re=0,oe=ee.length;re<oe;++re)Object.freeze(ee[re]);Object.freeze(ee)}else $.result=xe(ee);return $}).catch(function($){return J&&ne&&Ie(J,ne),Promise.reject($)}),ne={obsSet:k.obsSet,promise:V,subscribers:new Set,type:"query",req:k,dirty:!1},J?J.push(ne):(J=[ne],(ae=ae||(Na["idb://".concat(f,"/").concat(p)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[k.query.index.name||""]=J)),No(ne,J,Y,P),ne.promise.then(function($){return{result:xs($.result,k,ae?.optimisticOps,x,ne,U)}})}})}})}};function si(l,f){return new Proxy(l,{get:function(p,x,E){return x==="db"?f:Reflect.get(p,x,E)}})}var ea=(Yn.prototype.version=function(l){if(isNaN(l)||l<.1)throw new Ve.Type("Given version is not a positive number");if(l=Math.round(10*l)/10,this.idbdb||this._state.isBeingOpened)throw new Ve.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,l);var f=this._versions,p=f.filter(function(x){return x._cfg.version===l})[0];return p||(p=new this.Version(l),f.push(p),f.sort(ls),p.stores({}),this._state.autoSchema=!1,p)},Yn.prototype._whenReady=function(l){var f=this;return this.idbdb&&(this._state.openComplete||tt.letThrough||this._vip)?l():new $e(function(p,x){if(f._state.openComplete)return x(new Ve.DatabaseClosed(f._state.dbOpenError));if(!f._state.isBeingOpened){if(!f._state.autoOpen)return void x(new Ve.DatabaseClosed);f.open().catch(ft)}f._state.dbReadyPromise.then(p,x)}).then(l)},Yn.prototype.use=function(l){var f=l.stack,p=l.create,x=l.level,E=l.name;return E&&this.unuse({stack:f,name:E}),l=this._middlewares[f]||(this._middlewares[f]=[]),l.push({stack:f,create:p,level:x??10,name:E}),l.sort(function(k,U){return k.level-U.level}),this},Yn.prototype.unuse=function(l){var f=l.stack,p=l.name,x=l.create;return f&&this._middlewares[f]&&(this._middlewares[f]=this._middlewares[f].filter(function(E){return x?E.create!==x:!!p&&E.name!==p})),this},Yn.prototype.open=function(){var l=this;return At(kn,function(){return ko(l)})},Yn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var l=this._state,f=ct.indexOf(this);if(0<=f&&ct.splice(f,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}l.isBeingOpened||(l.dbReadyPromise=new $e(function(p){l.dbReadyResolve=p}),l.openCanceller=new $e(function(p,x){l.cancelOpen=x}))},Yn.prototype.close=function(p){var f=(p===void 0?{disableAutoOpen:!0}:p).disableAutoOpen,p=this._state;f?(p.isBeingOpened&&p.cancelOpen(new Ve.DatabaseClosed),this._close(),p.autoOpen=!1,p.dbOpenError=new Ve.DatabaseClosed):(this._close(),p.autoOpen=this._options.autoOpen||p.isBeingOpened,p.openComplete=!1,p.dbOpenError=null)},Yn.prototype.delete=function(l){var f=this;l===void 0&&(l={disableAutoOpen:!0});var p=0<arguments.length&&typeof arguments[0]!="object",x=this._state;return new $e(function(E,k){function U(){f.close(l);var Y=f._deps.indexedDB.deleteDatabase(f.name);Y.onsuccess=Cn(function(){var P,Q,ne;P=f._deps,Q=f.name,ne=P.indexedDB,P=P.IDBKeyRange,ki(ne)||Q===vt||fs(ne,P).delete(Q).catch(ft),E()}),Y.onerror=Gr(k),Y.onblocked=f._fireOnBlocked}if(p)throw new Ve.InvalidArgument("Invalid closeOptions argument to db.delete()");x.isBeingOpened?x.dbReadyPromise.then(U):U()})},Yn.prototype.backendDB=function(){return this.idbdb},Yn.prototype.isOpen=function(){return this.idbdb!==null},Yn.prototype.hasBeenClosed=function(){var l=this._state.dbOpenError;return l&&l.name==="DatabaseClosed"},Yn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Yn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Yn.prototype,"tables",{get:function(){var l=this;return A(this._allTables).map(function(f){return l._allTables[f]})},enumerable:!1,configurable:!0}),Yn.prototype.transaction=function(){var l=(function(f,p,x){var E=arguments.length;if(E<2)throw new Ve.InvalidArgument("Too few arguments");for(var k=new Array(E-1);--E;)k[E-1]=arguments[E];return x=k.pop(),[f,Me(k),x]}).apply(this,arguments);return this._transaction.apply(this,l)},Yn.prototype._transaction=function(l,f,p){var x=this,E=tt.trans;E&&E.db===this&&l.indexOf("!")===-1||(E=null);var k,U,Y=l.indexOf("?")!==-1;l=l.replace("!","").replace("?","");try{if(U=f.map(function(Q){if(Q=Q instanceof x.Table?Q.name:Q,typeof Q!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Q}),l=="r"||l===nt)k=nt;else{if(l!="rw"&&l!=ut)throw new Ve.InvalidArgument("Invalid transaction mode: "+l);k=ut}if(E){if(E.mode===nt&&k===ut){if(!Y)throw new Ve.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");E=null}E&&U.forEach(function(Q){if(E&&E.storeNames.indexOf(Q)===-1){if(!Y)throw new Ve.SubTransaction("Table "+Q+" not included in parent transaction.");E=null}}),Y&&E&&!E.active&&(E=null)}}catch(Q){return E?E._promise(null,function(ne,V){V(Q)}):pt(Q)}var P=(function Q(ne,V,ae,J,$){return $e.resolve().then(function(){var ee=tt.transless||tt,re=ne._createTransaction(V,ae,ne._dbSchema,J);if(re.explicit=!0,ee={trans:re,transless:ee},J)re.idbtrans=J.idbtrans;else try{re.create(),re.idbtrans._explicit=!0,ne._state.PR1398_maxLoop=3}catch(Se){return Se.name===qt.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return Q(ne,V,ae,null,$)})):pt(Se)}var oe,de=K($);return de&&we(),ee=$e.follow(function(){var Se;(oe=$.call(re,re))&&(de?(Se=ze.bind(null,null),oe.then(Se,Se)):typeof oe.next=="function"&&typeof oe.throw=="function"&&(oe=ri(oe)))},ee),(oe&&typeof oe.then=="function"?$e.resolve(oe).then(function(Se){return re.active?Se:pt(new Ve.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ee.then(function(){return oe})).then(function(Se){return J&&re._resolve(),re._completion.then(function(){return Se})}).catch(function(Se){return re._reject(Se),pt(Se)})})}).bind(null,this,k,U,E,p);return E?E._promise(k,P,"lock"):tt.trans?At(tt.transless,function(){return x._whenReady(P)}):this._whenReady(P)},Yn.prototype.table=function(l){if(!j(this._allTables,l))throw new Ve.InvalidTable("Table ".concat(l," does not exist"));return this._allTables[l]},Yn);function Yn(l,f){var p=this;this._middlewares={},this.verno=0;var x=Yn.dependencies;this._options=f=s({addons:Yn.addons,autoOpen:!0,indexedDB:x.indexedDB,IDBKeyRange:x.IDBKeyRange,cache:"cloned"},f),this._deps={indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},x=f.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var E,k,U,Y,P,Q={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ft,dbReadyPromise:null,cancelOpen:ft,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:f.autoOpen};Q.dbReadyPromise=new $e(function(V){Q.dbReadyResolve=V}),Q.openCanceller=new $e(function(V,ae){Q.cancelOpen=ae}),this._state=Q,this.name=l,this.on=Yt(this,"populate","blocked","versionchange","close",{ready:[nn,ft]}),this.once=function(V,ae){var J=function(){for(var $=[],ee=0;ee<arguments.length;ee++)$[ee]=arguments[ee];p.on(V).unsubscribe(J),ae.apply(p,$)};return p.on(V,J)},this.on.ready.subscribe=He(this.on.ready.subscribe,function(V){return function(ae,J){Yn.vip(function(){var $,ee=p._state;ee.openComplete?(ee.dbOpenError||$e.resolve().then(ae),J&&V(ae)):ee.onReadyBeingFired?(ee.onReadyBeingFired.push(ae),J&&V(ae)):(V(ae),$=p,J||V(function re(){$.on.ready.unsubscribe(ae),$.on.ready.unsubscribe(re)}))})}}),this.Collection=(E=this,jt(jn.prototype,function(oe,re){this.db=E;var J=it,$=null;if(re)try{J=re()}catch(de){$=de}var ee=oe._ctx,re=ee.table,oe=re.hook.reading.fire;this._ctx={table:re,index:ee.index,isPrimKey:!ee.index||re.schema.primKey.keyPath&&ee.index===re.schema.primKey.name,range:J,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:$,or:ee.or,valueMapper:oe!==fn?oe:null}})),this.Table=(k=this,jt(zt.prototype,function(V,ae,J){this.db=k,this._tx=J,this.name=V,this.schema=ae,this.hook=k._allTables[V]?k._allTables[V].hook:Yt(null,{creating:[qe,ft],reading:[Wt,fn],updating:[Ft,ft],deleting:[Vt,ft]})})),this.Transaction=(U=this,jt(wi.prototype,function(V,ae,J,$,ee){var re=this;V!=="readonly"&&ae.forEach(function(oe){oe=(oe=J[oe])===null||oe===void 0?void 0:oe.yProps,oe&&(ae=ae.concat(oe.map(function(de){return de.updatesTable})))}),this.db=U,this.mode=V,this.storeNames=ae,this.schema=J,this.chromeTransactionDurability=$,this.idbtrans=null,this.on=Yt(this,"complete","error","abort"),this.parent=ee||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new $e(function(oe,de){re._resolve=oe,re._reject=de}),this._completion.then(function(){re.active=!1,re.on.complete.fire()},function(oe){var de=re.active;return re.active=!1,re.on.error.fire(oe),re.parent?re.parent._reject(oe):de&&re.idbtrans&&re.idbtrans.abort(),pt(oe)})})),this.Version=(Y=this,jt(_o.prototype,function(V){this.db=Y,this._cfg={version:V,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(P=this,jt(Ea.prototype,function(V,ae,J){if(this.db=P,this._ctx={table:V,index:ae===":id"?null:ae,or:J},this._cmp=this._ascending=ve,this._descending=function($,ee){return ve(ee,$)},this._max=function($,ee){return 0<ve($,ee)?$:ee},this._min=function($,ee){return ve($,ee)<0?$:ee},this._IDBKeyRange=P._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ve.MissingAPI})),this.on("versionchange",function(V){0<V.newVersion?console.warn("Another connection wants to upgrade database '".concat(p.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(p.name,"'. Closing db now to resume the delete request.")),p.close({disableAutoOpen:!1})}),this.on("blocked",function(V){!V.newVersion||V.newVersion<V.oldVersion?console.warn("Dexie.delete('".concat(p.name,"') was blocked")):console.warn("Upgrade '".concat(p.name,"' blocked by other connection holding version ").concat(V.oldVersion/10))}),this._maxKey=_a(f.IDBKeyRange),this._createTransaction=function(V,ae,J,$){return new p.Transaction(V,ae,J,p._options.chromeTransactionDurability,$)},this._fireOnBlocked=function(V){p.on("blocked").fire(V),ct.filter(function(ae){return ae.name===p.name&&ae!==p&&!ae._state.vcFired}).map(function(ae){return ae.on("versionchange").fire(V)})},this.use(Fs),this.use(ji),this.use(Ro),this.use(Bo),this.use(Vs);var ne=new Proxy(this,{get:function(V,ae,J){if(ae==="_vip")return!0;if(ae==="table")return function(ee){return si(p.table(ee),ne)};var $=Reflect.get(V,ae,J);return $ instanceof zt?si($,ne):ae==="tables"?$.map(function(ee){return si(ee,ne)}):ae==="_createTransaction"?function(){return si($.apply(this,arguments),ne)}:$}});this.vip=ne,x.forEach(function(V){return V(p)})}var Fa,kr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Qs=(Oi.prototype.subscribe=function(l,f,p){return this._subscribe(l&&typeof l!="function"?l:{next:l,error:f,complete:p})},Oi.prototype[kr]=function(){return this},Oi);function Oi(l){this._subscribe=l}try{Fa={indexedDB:g.indexedDB||g.mozIndexedDB||g.webkitIndexedDB||g.msIndexedDB,IDBKeyRange:g.IDBKeyRange||g.webkitIDBKeyRange}}catch{Fa={indexedDB:null,IDBKeyRange:null}}function Js(l){var f,p=!1,x=new Qs(function(E){var k=K(l),U,Y=!1,P={},Q={},ne={get closed(){return Y},unsubscribe:function(){Y||(Y=!0,U&&U.abort(),V&&Hn.storagemutated.unsubscribe(J))}};E.start&&E.start(ne);var V=!1,ae=function(){return Dt($)},J=function(ee){ma(P,ee),gs(Q,P)&&ae()},$=function(){var ee,re,oe;!Y&&Fa.indexedDB&&(P={},ee={},U&&U.abort(),U=new AbortController,oe=(function(de){var Se=Zt();try{k&&we();var Ne=W(l,de);return Ne=k?Ne.finally(ze):Ne}finally{Se&&_r()}})(re={subscr:ee,signal:U.signal,requery:ae,querier:l,trans:null}),Promise.resolve(oe).then(function(de){p=!0,f=de,Y||re.signal.aborted||(P={},(function(Se){for(var Ne in Se)if(j(Se,Ne))return;return 1})(Q=ee)||V||(Hn(La,J),V=!0),Dt(function(){return!Y&&E.next&&E.next(de)}))},function(de){p=!1,["DatabaseClosedError","AbortError"].includes(de?.name)||Y||Dt(function(){Y||E.error&&E.error(de)})}))};return setTimeout(ae,0),ne});return x.hasValue=function(){return p},x.getValue=function(){return f},x}var ja=ea;function bs(l){var f=ya;try{ya=!0,Hn.storagemutated.fire(l),vs(l,!0)}finally{ya=f}}I(ja,s(s({},Mt),{delete:function(l){return new ja(l,{addons:[]}).delete()},exists:function(l){return new ja(l,{addons:[]}).open().then(function(f){return f.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(l){try{return f=ja.dependencies,p=f.indexedDB,f=f.IDBKeyRange,(ki(p)?Promise.resolve(p.databases()).then(function(x){return x.map(function(E){return E.name}).filter(function(E){return E!==vt})}):fs(p,f).toCollection().primaryKeys()).then(l)}catch{return pt(new Ve.MissingAPI)}var f,p},defineClass:function(){return function(l){b(this,l)}},ignoreTransaction:function(l){return tt.trans?At(tt.transless,l):l()},vip:ds,async:function(l){return function(){try{var f=ri(l.apply(this,arguments));return f&&typeof f.then=="function"?f:$e.resolve(f)}catch(p){return pt(p)}}},spawn:function(l,f,p){try{var x=ri(l.apply(p,f||[]));return x&&typeof x.then=="function"?x:$e.resolve(x)}catch(E){return pt(E)}},currentTransaction:{get:function(){return tt.trans||null}},waitFor:function(l,f){return f=$e.resolve(typeof l=="function"?ja.ignoreTransaction(l):l).timeout(f||6e4),tt.trans?tt.trans.waitFor(f):f},Promise:$e,debug:{get:function(){return xn},set:function(l){Qr(l)}},derive:pe,extend:b,props:I,override:He,Events:Yt,on:Hn,liveQuery:Js,extendObservabilitySet:ma,getByKeyPath:We,setByKeyPath:Xe,delByKeyPath:function(l,f){typeof f=="string"?Xe(l,f,void 0):"length"in f&&[].map.call(f,function(p){Xe(l,p,void 0)})},shallowClone:Bt,deepClone:xe,getObjectDiff:$r,cmp:ve,asap:Oe,minKey:-1/0,addons:[],connections:ct,errnames:qt,dependencies:Fa,cache:Na,semVer:"4.2.1",version:"4.2.1".split(".").map(function(l){return parseInt(l)}).reduce(function(l,f,p){return l+f/Math.pow(10,2*p)})})),ja.maxKey=_a(ja.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Hn(La,function(l){ya||(l=new CustomEvent(Ma,{detail:l}),ya=!0,dispatchEvent(l),ya=!1)}),addEventListener(Ma,function(l){l=l.detail,ya||bs(l)}));var Ha,ya=!1,Er=function(){};return typeof BroadcastChannel<"u"&&((Er=function(){(Ha=new BroadcastChannel(Ma)).onmessage=function(l){return l.data&&bs(l.data)}})(),typeof Ha.unref=="function"&&Ha.unref(),Hn(La,function(l){ya||Ha.postMessage(l)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(l){if(!ea.disableBfCache&&l.persisted){xn&&console.debug("Dexie: handling persisted pagehide"),Ha?.close();for(var f=0,p=ct;f<p.length;f++)p[f].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(l){!ea.disableBfCache&&l.persisted&&(xn&&console.debug("Dexie: handling persisted pageshow"),Er(),bs({all:new ur(-1/0,[[]])}))})),$e.rejectionMapper=function(l,f){return!l||l instanceof _e||l instanceof TypeError||l instanceof SyntaxError||!l.name||!Fe[l.name]?l:(f=new Fe[l.name](f||l.message,l),"stack"in l&&fe(f,"stack",{get:function(){return this.inner.stack}}),f)},Qr(xn),s(ea,Object.freeze({__proto__:null,Dexie:ea,liveQuery:Js,Entity:ye,cmp:ve,PropModification:St,replacePrefix:function(l,f){return new St({replacePrefix:[l,f]})},add:function(l){return new St({add:l})},remove:function(l){return new St({remove:l})},default:ea,RangeSet:ur,mergeRanges:Ra,rangesOverlap:Ks}),{default:ea}),ea})})(kc)),kc.exports}var n1=t1();const Wf=vl(n1),zp=Symbol.for("Dexie"),To=globalThis[zp]||(globalThis[zp]=Wf);if(Wf.semVer!==To.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Wf.semVer} and ${To.semVer}`);const{liveQuery:Px,mergeRanges:Qx,rangesOverlap:Jx,RangeSet:Zx,cmp:Xx,Entity:Wx,PropModification:$x,replacePrefix:eb,add:tb,remove:nb,DexieYProvider:rb}=To;class r1 extends To{messages;contacts;invites;constructor(){super("AdunChatDB_v2"),this.version(1).stores({messages:"++msg_id, &msg_uuid, conversationId, from, timestamp, delivered, [conversationId+msg_id]",contacts:"userId, addedAt"}),this.version(2).stores({messages:"++msg_id, &msg_uuid, conversationId, from, [conversationId+msg_id]",invites:"inviteId"})}async addMessage(r){return await this.messages.put(r)}async getMessageByUuid(r){return await this.messages.where("msg_uuid").equals(r).first()}async getMessages(r){return await this.messages.where("conversationId").equals(r).sortBy("msg_id")}async getRecentMessages(r,i){return await this.messages.where("[conversationId+msg_id]").between([r,To.minKey],[r,To.maxKey]).reverse().limit(i).toArray().then(s=>s.reverse())}async getMessagesBefore(r,i,s){return await this.messages.where("[conversationId+msg_id]").between([r,0],[r,i],!0,!1).reverse().limit(s).toArray().then(u=>u.reverse())}async updateMessageDelivery(r,i,s=!1,u){const g={delivered:i,showAsFailedInUI:s};return u!==void 0&&(g.firstAttemptTimestamp=u),await this.messages.update(r,g)}async deleteConversation(r){return await this.messages.where("conversationId").equals(r).delete()}async deleteMessage(r){await this.messages.delete(r)}async clearAllMessages(){await this.messages.clear()}async getMessageCount(r){return await this.messages.where("conversationId").equals(r).count()}async searchMessages(r,i){const s=await this.getMessages(r),u=i.toLowerCase();return s.filter(g=>g.content.toLowerCase().includes(u))}async addContact(r){const i={userId:r.userId,publicKey:r.publicKey,addedAt:r.addedAt,status:"offline",byInviteId:r.byInviteId,peerProfile:r.peerProfile,localProfile:r.localProfile??{}};return await this.contacts.put(i)}async updateLocalProfile(r,i){return await this.contacts.update(r,{localProfile:i})}async updatePeerProfile(r,i){return await this.contacts.update(r,{peerProfile:i})}async getContacts(){return await this.contacts.toArray()}async getContact(r){return await this.contacts.get(r)}async updateContact(r,i){return await this.contacts.update(r,i)}async removeContact(r){await this.contacts.delete(r)}async clearAllContacts(){await this.contacts.clear()}async addInvite(r){return await this.invites.put(r)}async getInvite(r){return await this.invites.get(r)}async getInvites(){return await this.invites.toArray()}async getValidInvites(){return await this.invites.where("valid").equals(1).toArray()}async updateInvite(r,i){return await this.invites.update(r,i)}async incrementInviteUseCount(r){await this.invites.where("inviteId").equals(r).modify(i=>{i.useCount=(i.useCount||0)+1})}async invalidateInvite(r){return await this.invites.update(r,{valid:!1})}async deleteInvite(r){await this.invites.delete(r)}async clearAllInvites(){await this.invites.clear()}}const Fn=new r1,a1=new Set;function i1(o,r){a1.forEach(i=>{try{i(o,r)}catch(s){console.error("[ContactStore] Error in status change callback:",s)}})}let Of=!1;const s1=()=>sd()((o,r)=>({contacts:[],loaded:!1,loadContacts:async()=>{if(r().loaded){console.log("[ContactStore] Contacts already loaded, skipping");return}if(Of){console.log("[ContactStore] Load already in progress, skipping");return}Of=!0,console.log("[ContactStore] ========== LOADING CONTACTS FROM INDEXEDDB ==========");try{const i=await Fn.getContacts();console.log("[ContactStore]  Loaded",i.length,"contacts from IndexedDB"),i.length>0&&i.forEach(g=>{console.log("[ContactStore]   - Contact:",g.userId.substring(0,8),"key:",g.publicKey.substring(0,16))}),o({contacts:i,loaded:!0}),console.log("[ContactStore]  Contacts loaded into store");let s=0;for(;!mr.isReady()&&s<50;)await new Promise(g=>setTimeout(g,100)),s++;if(!mr.isReady()){console.error("[ContactStore]  Transport not ready after 5 seconds");return}console.log("[ContactStore] Registering",i.length,"contacts with transport...");const u=Wa.getState().identity?.userId;for(const g of i)try{console.log("[ContactStore]  Adding peer to transport:",g.userId.substring(0,8));let A=!1;if(u){const M=[u,g.userId].sort().join("-"),b=await Fn.getMessages(M),S=b.filter(_=>!_.delivered&&_.from===u);A=S.length>0,console.log("[ContactStore] Checking undelivered for:",g.userId.substring(0,8),"conversationId:",M.substring(0,16),"total:",b.length,"undelivered:",S.length)}else console.log("[ContactStore] No myUserId available for undelivered check");mr.addPeer(g.userId,g.publicKey,A),console.log("[ContactStore]  Contact registered:",g.userId.substring(0,8),"hasUndelivered:",A)}catch(A){console.error("[ContactStore]  Failed to register contact:",g.userId.substring(0,8),A)}console.log("[ContactStore] ========== ALL CONTACTS REGISTERED ==========")}catch(i){console.error("[ContactStore]  Failed to load contacts from IndexedDB:",i),o({loaded:!0})}finally{Of=!1}},addContact:(i,s=!1)=>{const u=r();if(u.contacts.some(A=>A.userId===i.userId)){console.warn("Contact already exists:",i.userId);return}o({contacts:[...u.contacts,i]}),(async()=>{try{await Fn.addContact(i),console.log("[ContactStore]  Contact saved to IndexedDB:",i.userId.substring(0,8));let A=0;for(;!mr.isReady()&&A<50;)await new Promise(M=>setTimeout(M,100)),A++;if(!mr.isReady()){console.error("[ContactStore] Transport not ready after 5 seconds for:",i.userId);return}console.log("[ContactStore] Registering contact with transport:",i.userId.substring(0,8)),mr.addPeer(i.userId,i.publicKey,s),console.log("[ContactStore]  Contact registered:",i.userId.substring(0,8))}catch(A){console.error("[ContactStore] Failed to save/register contact:",A)}})()},updateContact:(i,s)=>o(u=>({contacts:u.contacts.map(g=>g.userId===i?{...g,...s}:g)})),updateLocalProfile:async(i,s)=>{o(u=>({contacts:u.contacts.map(g=>g.userId===i?{...g,localProfile:s}:g)}));try{await Fn.updateLocalProfile(i,s),console.log("[ContactStore]  Local profile updated:",i.substring(0,8),s)}catch(u){throw console.error("[ContactStore] Failed to update local profile:",u),u}},updatePeerProfile:async(i,s)=>{o(u=>({contacts:u.contacts.map(g=>g.userId===i?{...g,peerProfile:s}:g)}));try{await Fn.updatePeerProfile(i,s),console.log("[ContactStore]  Peer profile updated:",i.substring(0,8),s)}catch(u){throw console.error("[ContactStore] Failed to update peer profile:",u),u}},removeContact:i=>{o(s=>({contacts:s.contacts.filter(u=>u.userId!==i)})),Fn.removeContact(i).catch(s=>{console.error("[ContactStore] Failed to remove contact from IndexedDB:",s)})},getContact:i=>r().contacts.find(s=>s.userId===i),getAllContacts:()=>r().contacts,setPeerStatus:(i,s,u)=>{r().contacts.some(A=>A.userId===i)?console.log(`[ContactStore] Setting peer status: ${i.substring(0,16)} -> ${s}`):(console.error("[ContactStore] setPeerStatus: Contact not found:",i),console.error("[ContactStore] Available contacts:",r().contacts.map(A=>A.userId.substring(0,16)))),i1(i,s),o(A=>({contacts:A.contacts.map(M=>M.userId===i?{...M,status:s,sessionExpiry:u,handshakeStartedAt:s==="handshake"?M.handshakeStartedAt:void 0,lastSeen:s==="online"?Date.now():M.lastSeen,online:s==="online"}:M)}))},setHandshakeStarted:i=>o(s=>({contacts:s.contacts.map(u=>u.userId===i?{...u,status:"handshake",handshakeStartedAt:Date.now()}:u)})),clearHandshakeTimeout:i=>o(s=>({contacts:s.contacts.map(u=>u.userId===i?{...u,handshakeStartedAt:void 0}:u)})),retryHandshake:i=>{if(!r().getContact(i)){console.warn("[ContactStore] Cannot retry handshake: contact not found");return}o(u=>({contacts:u.contacts.map(g=>g.userId===i?{...g,status:"offline",handshakeStartedAt:void 0,sessionExpiry:void 0}:g)})),console.log("[ContactStore] Retry handshake requested for:",i),mr.retryHandshake(i)},incrementUnread:i=>{o(u=>({contacts:u.contacts.map(g=>g.userId===i?{...g,unreadCount:Math.max(0,g.unreadCount||0)+1}:g)}));const s=r().getContact(i);s&&Fn.updateContact(i,{unreadCount:s.unreadCount}).catch(u=>{console.error("[ContactStore] Failed to persist unreadCount:",u)})},clearUnread:i=>{o(s=>({contacts:s.contacts.map(u=>u.userId===i?{...u,unreadCount:0}:u)})),Fn.updateContact(i,{unreadCount:0}).catch(s=>{console.error("[ContactStore] Failed to clear unreadCount:",s)})}})),qr=(()=>{const o="__contactStore__";return globalThis[o]||(globalThis[o]=s1()),globalThis[o]})(),Yp=Object.freeze(Object.defineProperty({__proto__:null,useContactStore:qr},Symbol.toStringTag,{value:"Module"})),Gg=()=>typeof window<"u"&&window.__TEST_MODE__===!0,o1=()=>Gg()?3e3:15e3,l1=()=>Gg()?5e3:3e4,c1=1440*60*1e3;class u1{messageHandlers=new Set;peerOnlineHandlers=new Set;initializedUserId=null;currentIdentity=null;transports=new Map;pendingOutboundPeers=new Map;handshakeRetryTimer=null;signalingManager=new Rv;handshakeCoordinator=new Jv(l1(),c1);updatePeerStatus(r,i){console.log(`[TransportManager] DataTransport status update: ${r.substring(0,8)} -> ${i}`);const s=i==="online"?"online":i==="connecting"?"connecting":"offline";qr.getState().setPeerStatus(r,s),i==="online"?(this.pendingOutboundPeers.delete(r)&&console.log("[TransportManager] Removed from pendingOutboundPeers (now online):",r.substring(0,8)),console.log("[TransportManager] Notifying",this.peerOnlineHandlers.size,"onPeerOnline handlers (online)"),this.peerOnlineHandlers.forEach(u=>u(r,!0))):i==="offline"&&(console.log("[TransportManager] Notifying",this.peerOnlineHandlers.size,"onPeerOnline handlers (offline)"),this.peerOnlineHandlers.forEach(u=>u(r,!1)))}reportPeerError(r,i){const s=this.transports.get(r);if(i instanceof Kg)console.log("[TransportManager] Initiating reconnection due to error:",i.name),this.addPendingConnection(s,!1);else if(i instanceof Mc||i instanceof _c){const u=s.isConnected;console.log("[TransportManager] Initiating handshake due to error:",i.name,"handshakeOnly:",u),this.addPendingConnection(s,u)}else i instanceof Zf||(i instanceof Xf?(s.clearSessionAndConnection(),console.log("[TransportManager] Initiating handshake due to error:",i.name),this.addPendingConnection(s,!1)):console.log(`[TransportManager] Other error from ${r}:`,i))}onWireMessage(r,i){console.log("[TransportManager]  Message via P2P from:",r.substring(0,8)),this.messageHandlers.forEach(s=>s(r,i))}sendCustomSignal(r,i){this.signalingManager.sendCustomSignal(r,{type:"encrypted-signal",data:i}).catch(s=>{console.error("[TransportManager] Failed to send custom signal:",s)})}async initialize(r){const i=r.userId;if(this.initializedUserId===i&&this.signalingManager.isInitializedForUser(i)){console.log("[TransportManager] Already initialized for this user, skipping");return}this.initializedUserId&&this.initializedUserId!==i&&(console.log("[TransportManager] Switching users, cleaning up old transports"),this.cleanupTransports());try{await this.signalingManager.initialize(i),this.signalingManager.onCustomSignal((s,u)=>{this.handleIncomingSignal(s,u)}),this.signalingManager.onHandshakeMessage((s,u)=>{this.handshakeCoordinator.handleHandshakeMessage(s,u)}),this.handshakeCoordinator.initialize({userId:r.userId,publicKey:r.publicKey,secretKey:r.secretKey}),this.handshakeCoordinator.setSignalSender((s,u)=>this.signalingManager.sendHandshakeMessage(s,u)),this.handshakeCoordinator.setOnHandshakeComplete((s,u,g)=>{this.handleHandshakeComplete(s,u,g)}),this.handshakeCoordinator.setOnHandshakeStatus((s,u)=>{this.handleHandshakeStatus(s,u)}),this.handshakeCoordinator.setGetPeerPublicKey(s=>this.transports.get(s)?.identityPK||null),this.handshakeCoordinator.setGetInviteCallback((s,u)=>this.getInviteForHandshake(s,u)),this.handshakeCoordinator.setMarkInviteUsedCallback(s=>this.markInviteUsed(s)),this.handshakeCoordinator.setCreateContactFromInviteCallback((s,u,g,A)=>this.createContactFromInvite(s,u,g,A)),this.handshakeCoordinator.setOnInviteRejectedCallback((s,u)=>{console.log("[TransportManager] Invite rejected by:",s.substring(0,8),"reason:",u)}),this.initializedUserId=i,this.currentIdentity=r,console.log("[TransportManager]  Initialized for user:",i.substring(0,8))}catch(s){throw console.error("[TransportManager] Initialization failed:",s),this.initializedUserId=null,this.currentIdentity=null,new Error("Failed to initialize transport.")}}addPeer(r,i,s=!1){let u=this.transports.get(r);u||(u=this.createTransport(r,i)),console.log("[TransportManager]  Peer added:",r.substring(0,8),"hasUndelivered:",s),s&&this.addPendingConnection(u)}addPendingConnection(r,i=!1){const s=r.peerId;this.startHandshakeRetryTimer(),i&&this.pendingOutboundPeers.get(s)!=="connection"?this.pendingOutboundPeers.set(s,"handshake"):(this.pendingOutboundPeers.set(s,"connection"),i=!1),this.retryPendingConnection(r,i)}retryPendingConnection(r,i){if(!i&&r.isSessionValid){this.initiatePoliteConnection(r);return}this._startPendingHandshake(r)}_startPendingHandshake(r){const i=r.peerId;console.log("[TransportManager] Retry handshake for pending peer:",i.substring(0,8)),this.handshakeCoordinator.initiateHandshakeIfNotRunning(i,r.identityPK)}async sendMessage(r,i){console.log("[TransportManager] ========== SEND MESSAGE =========="),console.log("[TransportManager] To:",r.substring(0,8)),console.log("[TransportManager] Message ID:",i.id);const s=this.transports.get(r);if(!s)throw console.error("[TransportManager]  No DataTransport for peer"),new Error("No transport available");try{console.log("[TransportManager]  Sending via P2P..."),await s.sendMessage(i),console.log("[TransportManager]  Sent via P2P");return}catch(u){throw console.warn("[TransportManager]  P2P send failed:",u),this.reportPeerError(r,u),u}}getTransport(r){return this.transports.get(r)}onMessage(r){return this.messageHandlers.add(r),()=>this.messageHandlers.delete(r)}onPeerOnline(r){return this.peerOnlineHandlers.add(r),()=>this.peerOnlineHandlers.delete(r)}isReady(){return this.initializedUserId!==null}getConnectionStatus(r){return this.transports.get(r)?.isConnected?"connected":"disconnected"}getActiveSignalingServices(){return this.signalingManager.getActiveServices()}retryHandshake(r){const i=this.transports.get(r);if(!i){console.error("[TransportManager] Cannot retry handshake - no transport for:",r.substring(0,8));return}this.addPendingConnection(i)}removePeer(r){console.log("[TransportManager] Removing peer:",r.substring(0,8)),this.pendingOutboundPeers.delete(r);const i=this.transports.get(r);i&&(i.destroy(),this.transports.delete(r)),this.peerOnlineHandlers.forEach(s=>s(r,!1)),this.handshakeCoordinator.cancelHandshake(r),console.log("[TransportManager] Peer removed:",r.substring(0,8))}destroy(){console.log("[TransportManager] Component unmount - nothing destroyed (persistence)")}destroyAll(){console.log("[TransportManager] Destroying all (identity deleted)"),this.cleanupTransports(),this.signalingManager.destroy(),this.initializedUserId=null}createTransport(r,i){const s=new $v(r,i,this);return this.transports.set(r,s),console.log("[TransportManager] Created DataTransport for:",r.substring(0,8)),s}handleIncomingSignal(r,i){const s=this.transports.get(r);if(s)console.log("[TransportManager] Received signal:",i.type,"from:",r.substring(0,8));else{console.warn("[TransportManager] Received signal:",i.type,"from unknown peer:",r.substring(0,8));return}if(i.type==="pull-connection"){console.log("[TransportManager] Initiating connection after pull-connection:",r.substring(0,8)),this.addPendingConnection(s);return}if(i.type==="encrypted-signal"){try{s.handleEncryptedSignal(i.data)}catch(u){console.error("[TransportManager] Failed to handle signal:",u),this.reportPeerError(r,u)}return}console.log("[TransportManager] Unknown signal type:",i.type)}handleHandshakeComplete(r,i,s){const u=this.transports.get(r);if(!u){console.error("[TransportManager] Peer not found for handshake:",r);return}u.setSession(i,s)}initiatePoliteConnection(r){if(this.initializedUserId>r.peerId){if(console.log("[TransportManager] We are impolite, initiating connection"),r.isSessionValid)return r.initiateConnection().catch(s=>{console.error("[TransportManager] Failed to initiate connection:",s)}),!0;console.log("[TransportManager] No valid session available, skipping connection initiation")}else console.log("[TransportManager] We are polite, sending pull-connection"),this.signalingManager.sendCustomSignal(r.peerId,{type:"pull-connection",data:""}).catch(s=>{console.error("[TransportManager] Failed to send pull-connection:",s)});return!1}handleHandshakeStatus(r,i){const s=this.pendingOutboundPeers.has(r);switch(console.log("[TransportManager] ========== HANDSHAKE STATUS =========="),console.log("[TransportManager] Peer:",r.substring(0,8),"initiatedByUs:",s),i){case"started":const u=qr.getState().getContact(r);(!u||u.status==="offline")&&qr.getState().setPeerStatus(r,"handshake");break;case"complete":if(this.pendingOutboundPeers.get(r)==="connection"){const A=this.transports.get(r);if(A){this.initiatePoliteConnection(A);return}}this.pendingOutboundPeers.delete(r),qr.getState().setPeerStatus(r,"offline");break;case"failed":case"timeout":qr.getState().getContact(r)?.status==="handshake"&&qr.getState().setPeerStatus(r,"offline");break}}startHandshakeRetryTimer(){if(this.handshakeRetryTimer)return;const r=o1();console.log("[TransportManager] Starting handshake retry timer, interval:",r,"ms"),this.handshakeRetryTimer=setInterval(()=>{this.retryPendingHandshakes()},r)}retryPendingHandshakes(){for(const[r,i]of this.pendingOutboundPeers){const s=this.transports.get(r);s?this.retryPendingConnection(s,i==="handshake"):this.pendingOutboundPeers.delete(r)}this.pendingOutboundPeers.size===0&&this.handshakeRetryTimer&&(console.log("[TransportManager] No pending peers, stopping retry timer"),clearInterval(this.handshakeRetryTimer),this.handshakeRetryTimer=null)}async initiateInviteHandshake(r){if(!this.currentIdentity)throw new Error("Transport not initialized");console.log("[TransportManager] Initiating invite handshake to:",r.invitingId.substring(0,8)),await this.handshakeCoordinator.initiateFromPSI(r)}async getInviteForHandshake(r,i){const s=qr.getState().getContact(i);return s?(console.log("[TransportManager] Peer is existing contact:",i.substring(0,8)),s.publicKey):await Fn.getInvite(r)}async markInviteUsed(r){console.log("[TransportManager] Incrementing invite use count:",r),await Fn.incrementInviteUseCount(r)}async createContactFromInvite(r,i,s,u){if(!Qf(r,i)){console.error("[TransportManager] Invalid peer: userId does not match publicKey:",r.substring(0,8));return}if(qr.getState().getContact(r)){console.log("[TransportManager] Contact already exists:",r.substring(0,8));return}let A;if(s){const b=await Fn.getInvite(s);b?.name&&(A=b.name)}const M={userId:r,publicKey:i,addedAt:Date.now(),status:"offline",byInviteId:s||void 0,displayName:A,localProfile:{}};if(s){const b=await Fn.getInvite(s);b?.name&&(b.useLimit===1?M.localProfile.name=b.name:M.localProfile.group=b.name)}console.log("[TransportManager] Creating contact from invite:",r.substring(0,8),"isInvitedParty:",u),qr.getState().addContact(M)}cleanupTransports(){this.handshakeRetryTimer&&(clearInterval(this.handshakeRetryTimer),this.handshakeRetryTimer=null),this.pendingOutboundPeers.clear(),this.transports.forEach(r=>r.destroy()),this.transports.clear(),this.handshakeCoordinator.destroy(),this.messageHandlers.clear(),this.peerOnlineHandlers.clear(),this.initializedUserId=null,this.currentIdentity=null}}const mr=new u1;function f1(){const{setIdentity:o,setActiveView:r}=Wa(),[i,s]=Le.useState(!1),[u,g]=Le.useState(null),A=()=>{try{const b=jc.generate().export();Os.save(b),o(b),r("contacts")}catch(b){g("Failed to generate identity. Please try again."),console.error(b)}},M=async b=>{const S=b.target.files?.[0];if(S)try{const _=await S.text(),j=Os.importFromJSON(_);Os.save(j),o(j),r("contacts")}catch(_){g("Invalid identity file. Please check and try again."),console.error(_)}};return m.jsxs("div",{className:"min-h-screen bg-[var(--color-bg-dark)] flex items-center justify-center p-4 animate-fade-in relative overflow-hidden",children:[m.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 pointer-events-none",children:[m.jsx("div",{className:"absolute -top-[20%] -left-[10%] w-[50%] h-[50%] bg-indigo-500/10 rounded-full blur-[100px]"}),m.jsx("div",{className:"absolute top-[20%] -right-[10%] w-[40%] h-[40%] bg-purple-500/10 rounded-full blur-[100px]"}),m.jsx("div",{className:"absolute -bottom-[10%] left-[20%] w-[60%] h-[60%] bg-blue-500/10 rounded-full blur-[100px]"})]}),m.jsxs("div",{className:"max-w-md w-full relative z-10",children:[m.jsxs("div",{className:"bg-[var(--color-bg-card)] backdrop-blur-xl border border-slate-700/50 rounded-3xl shadow-2xl p-8 md:p-10",children:[m.jsxs("div",{className:"text-center mb-10",children:[m.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-indigo-500/30 transform rotate-3 hover:rotate-0 transition-transform duration-300",children:m.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),m.jsx("h1",{className:"text-4xl font-bold text-white mb-3 tracking-tight",children:"Private Chat"}),m.jsx("p",{className:"text-slate-400 text-lg",children:"Secure, encrypted peer-to-peer messaging"})]}),u&&m.jsxs("div",{className:"mb-8 p-4 bg-red-500/10 border border-red-500/20 rounded-xl flex items-start space-x-3",children:[m.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),m.jsx("p",{className:"text-sm text-red-200",children:u})]}),m.jsx("div",{className:"space-y-5",children:i?m.jsxs("div",{className:"animate-fade-in",children:[m.jsxs("div",{className:"border-2 border-dashed border-slate-700 hover:border-indigo-500/50 rounded-2xl p-8 text-center transition-colors group cursor-pointer bg-slate-900/30",children:[m.jsx("input",{type:"file",accept:".json",onChange:M,className:"hidden",id:"identity-import"}),m.jsxs("label",{htmlFor:"identity-import",className:"cursor-pointer flex flex-col items-center w-full h-full",children:[m.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300",children:m.jsx("svg",{className:"w-8 h-8 text-slate-400 group-hover:text-indigo-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),m.jsx("span",{className:"text-base font-medium text-slate-200 group-hover:text-white transition-colors",children:"Click to select identity file"}),m.jsx("span",{className:"text-sm text-slate-500 mt-2",children:"JSON file only"})]})]}),m.jsx("button",{onClick:()=>{s(!1),g(null)},className:"w-full mt-4 bg-transparent text-slate-400 font-medium py-3 px-4 rounded-xl hover:text-white hover:bg-slate-800/50 transition-all duration-200",children:"Cancel"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:A,className:"w-full group relative overflow-hidden bg-indigo-600 hover:bg-indigo-500 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 shadow-lg shadow-indigo-500/25 hover:shadow-indigo-500/40 hover:-translate-y-0.5",children:[m.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:animate-shimmer"}),m.jsxs("span",{className:"relative flex items-center justify-center gap-2",children:[m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Generate New Identity"]})]}),m.jsx("button",{onClick:()=>s(!0),className:"w-full bg-slate-800/50 hover:bg-slate-800 text-slate-300 font-semibold py-4 px-6 rounded-xl border border-slate-700 hover:border-slate-600 transition-all duration-300 hover:-translate-y-0.5",children:"Import Existing Identity"})]})}),m.jsx("div",{className:"mt-10 pt-8 border-t border-slate-700/50",children:m.jsxs("div",{className:"space-y-4",children:[m.jsx(If,{icon:m.jsx("svg",{className:"w-5 h-5 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),text:"End-to-end encrypted messages"}),m.jsx(If,{icon:m.jsx("svg",{className:"w-5 h-5 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11.536 19.464a3 3 0 01-.879.879l-4.243 1.061a1 1 0 01-1.213-1.213l1.061-4.243a3 3 0 01.879-.879l7.536-7.536A6 6 0 0120 8zm-4 7a2 2 0 00-2-2"})}),text:"Your keys never leave your device"}),m.jsx(If,{icon:m.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),text:"Works without central servers"})]})})]}),m.jsx("p",{className:"text-center text-xs text-slate-500 mt-8 font-medium tracking-wide uppercase opacity-60",children:"No account required  Fully open source"})]})]})}function If({icon:o,text:r}){return m.jsxs("div",{className:"flex items-center space-x-4 p-3 rounded-xl hover:bg-slate-800/30 transition-colors",children:[m.jsx("div",{className:"flex-shrink-0 bg-slate-800/50 p-2 rounded-lg",children:o}),m.jsx("span",{className:"text-sm text-slate-300 font-medium",children:r})]})}const Mo=sd((o,r)=>({messages:{},addMessage:(i,s)=>o(u=>{const g=u.messages[i]||[];return g.some(A=>A.msg_uuid===s.msg_uuid)?u:{messages:{...u.messages,[i]:[...g,s]}}}),prependMessages:(i,s)=>o(u=>{const g=u.messages[i]||[],A=new Set(g.map(b=>b.msg_uuid)),M=s.filter(b=>!A.has(b.msg_uuid));return M.length===0?u:{messages:{...u.messages,[i]:[...M,...g]}}}),updateMessageDelivery:(i,s,u=!1,g)=>o(A=>{const M={...A.messages};for(const b in M){const S=M[b],_=S.findIndex(j=>j.msg_id===i);if(_!==-1){const j={...S[_],delivered:s,showAsFailedInUI:u};g!==void 0&&(j.firstAttemptTimestamp=g),M[b]=[...S.slice(0,_),j,...S.slice(_+1)];break}}return{messages:M}}),getMessage:i=>{const s=r();for(const u in s.messages){const g=s.messages[u].find(A=>A.msg_uuid===i);if(g)return g}},getMessages:i=>r().messages[i]||[],getUndeliveredMessages:i=>{const s=r(),u=[];for(const g in s.messages)if(g.includes(i)){const M=s.messages[g].filter(b=>!b.delivered&&b.from!==i);u.push(...M)}return u.sort((g,A)=>(g.msg_id??0)-(A.msg_id??0))},setMessages:(i,s)=>o(u=>({messages:{...u.messages,[i]:s}})),deleteMessage:i=>o(s=>{const u={...s.messages};for(const g in u)u[g]=u[g].filter(A=>A.msg_id!==i);return{messages:u}}),clearMessages:i=>o(s=>{const{[i]:u,...g}=s.messages;return{messages:g}}),clearAllMessages:()=>o({messages:{}})}));var d1=Object.defineProperty,Oc=Object.getOwnPropertySymbols,Vg=Object.prototype.hasOwnProperty,Fg=Object.prototype.propertyIsEnumerable,Kp=(o,r,i)=>r in o?d1(o,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[r]=i,$f=(o,r)=>{for(var i in r||(r={}))Vg.call(r,i)&&Kp(o,i,r[i]);if(Oc)for(var i of Oc(r))Fg.call(r,i)&&Kp(o,i,r[i]);return o},ed=(o,r)=>{var i={};for(var s in o)Vg.call(o,s)&&r.indexOf(s)<0&&(i[s]=o[s]);if(o!=null&&Oc)for(var s of Oc(o))r.indexOf(s)<0&&Fg.call(o,s)&&(i[s]=o[s]);return i};var Is;(o=>{const r=class un{constructor(b,S,_,j){if(this.version=b,this.errorCorrectionLevel=S,this.modules=[],this.isFunction=[],b<un.MIN_VERSION||b>un.MAX_VERSION)throw new RangeError("Version value out of range");if(j<-1||j>7)throw new RangeError("Mask value out of range");this.size=b*4+17;let I=[];for(let fe=0;fe<this.size;fe++)I.push(!1);for(let fe=0;fe<this.size;fe++)this.modules.push(I.slice()),this.isFunction.push(I.slice());this.drawFunctionPatterns();const X=this.addEccAndInterleave(_);if(this.drawCodewords(X),j==-1){let fe=1e9;for(let pe=0;pe<8;pe++){this.applyMask(pe),this.drawFormatBits(pe);const Pe=this.getPenaltyScore();Pe<fe&&(j=pe,fe=Pe),this.applyMask(pe)}}u(0<=j&&j<=7),this.mask=j,this.applyMask(j),this.drawFormatBits(j),this.isFunction=[]}static encodeText(b,S){const _=o.QrSegment.makeSegments(b);return un.encodeSegments(_,S)}static encodeBinary(b,S){const _=o.QrSegment.makeBytes(b);return un.encodeSegments([_],S)}static encodeSegments(b,S,_=1,j=40,I=-1,X=!0){if(!(un.MIN_VERSION<=_&&_<=j&&j<=un.MAX_VERSION)||I<-1||I>7)throw new RangeError("Invalid value");let fe,pe;for(fe=_;;fe++){const He=un.getNumDataCodewords(fe,S)*8,mt=A.getTotalBits(b,fe);if(mt<=He){pe=mt;break}if(fe>=j)throw new RangeError("Data too long")}for(const He of[un.Ecc.MEDIUM,un.Ecc.QUARTILE,un.Ecc.HIGH])X&&pe<=un.getNumDataCodewords(fe,He)*8&&(S=He);let Pe=[];for(const He of b){i(He.mode.modeBits,4,Pe),i(He.numChars,He.mode.numCharCountBits(fe),Pe);for(const mt of He.getData())Pe.push(mt)}u(Pe.length==pe);const ot=un.getNumDataCodewords(fe,S)*8;u(Pe.length<=ot),i(0,Math.min(4,ot-Pe.length),Pe),i(0,(8-Pe.length%8)%8,Pe),u(Pe.length%8==0);for(let He=236;Pe.length<ot;He^=253)i(He,8,Pe);let st=[];for(;st.length*8<Pe.length;)st.push(0);return Pe.forEach((He,mt)=>st[mt>>>3]|=He<<7-(mt&7)),new un(fe,S,st,I)}getModule(b,S){return 0<=b&&b<this.size&&0<=S&&S<this.size&&this.modules[S][b]}getModules(){return this.modules}drawFunctionPatterns(){for(let _=0;_<this.size;_++)this.setFunctionModule(6,_,_%2==0),this.setFunctionModule(_,6,_%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const b=this.getAlignmentPatternPositions(),S=b.length;for(let _=0;_<S;_++)for(let j=0;j<S;j++)_==0&&j==0||_==0&&j==S-1||_==S-1&&j==0||this.drawAlignmentPattern(b[_],b[j]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(b){const S=this.errorCorrectionLevel.formatBits<<3|b;let _=S;for(let I=0;I<10;I++)_=_<<1^(_>>>9)*1335;const j=(S<<10|_)^21522;u(j>>>15==0);for(let I=0;I<=5;I++)this.setFunctionModule(8,I,s(j,I));this.setFunctionModule(8,7,s(j,6)),this.setFunctionModule(8,8,s(j,7)),this.setFunctionModule(7,8,s(j,8));for(let I=9;I<15;I++)this.setFunctionModule(14-I,8,s(j,I));for(let I=0;I<8;I++)this.setFunctionModule(this.size-1-I,8,s(j,I));for(let I=8;I<15;I++)this.setFunctionModule(8,this.size-15+I,s(j,I));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let b=this.version;for(let _=0;_<12;_++)b=b<<1^(b>>>11)*7973;const S=this.version<<12|b;u(S>>>18==0);for(let _=0;_<18;_++){const j=s(S,_),I=this.size-11+_%3,X=Math.floor(_/3);this.setFunctionModule(I,X,j),this.setFunctionModule(X,I,j)}}drawFinderPattern(b,S){for(let _=-4;_<=4;_++)for(let j=-4;j<=4;j++){const I=Math.max(Math.abs(j),Math.abs(_)),X=b+j,fe=S+_;0<=X&&X<this.size&&0<=fe&&fe<this.size&&this.setFunctionModule(X,fe,I!=2&&I!=4)}}drawAlignmentPattern(b,S){for(let _=-2;_<=2;_++)for(let j=-2;j<=2;j++)this.setFunctionModule(b+j,S+_,Math.max(Math.abs(j),Math.abs(_))!=1)}setFunctionModule(b,S,_){this.modules[S][b]=_,this.isFunction[S][b]=!0}addEccAndInterleave(b){const S=this.version,_=this.errorCorrectionLevel;if(b.length!=un.getNumDataCodewords(S,_))throw new RangeError("Invalid argument");const j=un.NUM_ERROR_CORRECTION_BLOCKS[_.ordinal][S],I=un.ECC_CODEWORDS_PER_BLOCK[_.ordinal][S],X=Math.floor(un.getNumRawDataModules(S)/8),fe=j-X%j,pe=Math.floor(X/j);let Pe=[];const ot=un.reedSolomonComputeDivisor(I);for(let He=0,mt=0;He<j;He++){let Oe=b.slice(mt,mt+pe-I+(He<fe?0:1));mt+=Oe.length;const We=un.reedSolomonComputeRemainder(Oe,ot);He<fe&&Oe.push(0),Pe.push(Oe.concat(We))}let st=[];for(let He=0;He<Pe[0].length;He++)Pe.forEach((mt,Oe)=>{(He!=pe-I||Oe>=fe)&&st.push(mt[He])});return u(st.length==X),st}drawCodewords(b){if(b.length!=Math.floor(un.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let S=0;for(let _=this.size-1;_>=1;_-=2){_==6&&(_=5);for(let j=0;j<this.size;j++)for(let I=0;I<2;I++){const X=_-I,pe=(_+1&2)==0?this.size-1-j:j;!this.isFunction[pe][X]&&S<b.length*8&&(this.modules[pe][X]=s(b[S>>>3],7-(S&7)),S++)}}u(S==b.length*8)}applyMask(b){if(b<0||b>7)throw new RangeError("Mask value out of range");for(let S=0;S<this.size;S++)for(let _=0;_<this.size;_++){let j;switch(b){case 0:j=(_+S)%2==0;break;case 1:j=S%2==0;break;case 2:j=_%3==0;break;case 3:j=(_+S)%3==0;break;case 4:j=(Math.floor(_/3)+Math.floor(S/2))%2==0;break;case 5:j=_*S%2+_*S%3==0;break;case 6:j=(_*S%2+_*S%3)%2==0;break;case 7:j=((_+S)%2+_*S%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[S][_]&&j&&(this.modules[S][_]=!this.modules[S][_])}}getPenaltyScore(){let b=0;for(let I=0;I<this.size;I++){let X=!1,fe=0,pe=[0,0,0,0,0,0,0];for(let Pe=0;Pe<this.size;Pe++)this.modules[I][Pe]==X?(fe++,fe==5?b+=un.PENALTY_N1:fe>5&&b++):(this.finderPenaltyAddHistory(fe,pe),X||(b+=this.finderPenaltyCountPatterns(pe)*un.PENALTY_N3),X=this.modules[I][Pe],fe=1);b+=this.finderPenaltyTerminateAndCount(X,fe,pe)*un.PENALTY_N3}for(let I=0;I<this.size;I++){let X=!1,fe=0,pe=[0,0,0,0,0,0,0];for(let Pe=0;Pe<this.size;Pe++)this.modules[Pe][I]==X?(fe++,fe==5?b+=un.PENALTY_N1:fe>5&&b++):(this.finderPenaltyAddHistory(fe,pe),X||(b+=this.finderPenaltyCountPatterns(pe)*un.PENALTY_N3),X=this.modules[Pe][I],fe=1);b+=this.finderPenaltyTerminateAndCount(X,fe,pe)*un.PENALTY_N3}for(let I=0;I<this.size-1;I++)for(let X=0;X<this.size-1;X++){const fe=this.modules[I][X];fe==this.modules[I][X+1]&&fe==this.modules[I+1][X]&&fe==this.modules[I+1][X+1]&&(b+=un.PENALTY_N2)}let S=0;for(const I of this.modules)S=I.reduce((X,fe)=>X+(fe?1:0),S);const _=this.size*this.size,j=Math.ceil(Math.abs(S*20-_*10)/_)-1;return u(0<=j&&j<=9),b+=j*un.PENALTY_N4,u(0<=b&&b<=2568888),b}getAlignmentPatternPositions(){if(this.version==1)return[];{const b=Math.floor(this.version/7)+2,S=this.version==32?26:Math.ceil((this.version*4+4)/(b*2-2))*2;let _=[6];for(let j=this.size-7;_.length<b;j-=S)_.splice(1,0,j);return _}}static getNumRawDataModules(b){if(b<un.MIN_VERSION||b>un.MAX_VERSION)throw new RangeError("Version number out of range");let S=(16*b+128)*b+64;if(b>=2){const _=Math.floor(b/7)+2;S-=(25*_-10)*_-55,b>=7&&(S-=36)}return u(208<=S&&S<=29648),S}static getNumDataCodewords(b,S){return Math.floor(un.getNumRawDataModules(b)/8)-un.ECC_CODEWORDS_PER_BLOCK[S.ordinal][b]*un.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][b]}static reedSolomonComputeDivisor(b){if(b<1||b>255)throw new RangeError("Degree out of range");let S=[];for(let j=0;j<b-1;j++)S.push(0);S.push(1);let _=1;for(let j=0;j<b;j++){for(let I=0;I<S.length;I++)S[I]=un.reedSolomonMultiply(S[I],_),I+1<S.length&&(S[I]^=S[I+1]);_=un.reedSolomonMultiply(_,2)}return S}static reedSolomonComputeRemainder(b,S){let _=S.map(j=>0);for(const j of b){const I=j^_.shift();_.push(0),S.forEach((X,fe)=>_[fe]^=un.reedSolomonMultiply(X,I))}return _}static reedSolomonMultiply(b,S){if(b>>>8||S>>>8)throw new RangeError("Byte out of range");let _=0;for(let j=7;j>=0;j--)_=_<<1^(_>>>7)*285,_^=(S>>>j&1)*b;return u(_>>>8==0),_}finderPenaltyCountPatterns(b){const S=b[1];u(S<=this.size*3);const _=S>0&&b[2]==S&&b[3]==S*3&&b[4]==S&&b[5]==S;return(_&&b[0]>=S*4&&b[6]>=S?1:0)+(_&&b[6]>=S*4&&b[0]>=S?1:0)}finderPenaltyTerminateAndCount(b,S,_){return b&&(this.finderPenaltyAddHistory(S,_),S=0),S+=this.size,this.finderPenaltyAddHistory(S,_),this.finderPenaltyCountPatterns(_)}finderPenaltyAddHistory(b,S){S[0]==0&&(b+=this.size),S.pop(),S.unshift(b)}};r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],o.QrCode=r;function i(M,b,S){if(b<0||b>31||M>>>b)throw new RangeError("Value out of range");for(let _=b-1;_>=0;_--)S.push(M>>>_&1)}function s(M,b){return(M>>>b&1)!=0}function u(M){if(!M)throw new Error("Assertion error")}const g=class rr{constructor(b,S,_){if(this.mode=b,this.numChars=S,this.bitData=_,S<0)throw new RangeError("Invalid argument");this.bitData=_.slice()}static makeBytes(b){let S=[];for(const _ of b)i(_,8,S);return new rr(rr.Mode.BYTE,b.length,S)}static makeNumeric(b){if(!rr.isNumeric(b))throw new RangeError("String contains non-numeric characters");let S=[];for(let _=0;_<b.length;){const j=Math.min(b.length-_,3);i(parseInt(b.substring(_,_+j),10),j*3+1,S),_+=j}return new rr(rr.Mode.NUMERIC,b.length,S)}static makeAlphanumeric(b){if(!rr.isAlphanumeric(b))throw new RangeError("String contains unencodable characters in alphanumeric mode");let S=[],_;for(_=0;_+2<=b.length;_+=2){let j=rr.ALPHANUMERIC_CHARSET.indexOf(b.charAt(_))*45;j+=rr.ALPHANUMERIC_CHARSET.indexOf(b.charAt(_+1)),i(j,11,S)}return _<b.length&&i(rr.ALPHANUMERIC_CHARSET.indexOf(b.charAt(_)),6,S),new rr(rr.Mode.ALPHANUMERIC,b.length,S)}static makeSegments(b){return b==""?[]:rr.isNumeric(b)?[rr.makeNumeric(b)]:rr.isAlphanumeric(b)?[rr.makeAlphanumeric(b)]:[rr.makeBytes(rr.toUtf8ByteArray(b))]}static makeEci(b){let S=[];if(b<0)throw new RangeError("ECI assignment value out of range");if(b<128)i(b,8,S);else if(b<16384)i(2,2,S),i(b,14,S);else if(b<1e6)i(6,3,S),i(b,21,S);else throw new RangeError("ECI assignment value out of range");return new rr(rr.Mode.ECI,0,S)}static isNumeric(b){return rr.NUMERIC_REGEX.test(b)}static isAlphanumeric(b){return rr.ALPHANUMERIC_REGEX.test(b)}getData(){return this.bitData.slice()}static getTotalBits(b,S){let _=0;for(const j of b){const I=j.mode.numCharCountBits(S);if(j.numChars>=1<<I)return 1/0;_+=4+I+j.bitData.length}return _}static toUtf8ByteArray(b){b=encodeURI(b);let S=[];for(let _=0;_<b.length;_++)b.charAt(_)!="%"?S.push(b.charCodeAt(_)):(S.push(parseInt(b.substring(_+1,_+3),16)),_+=2);return S}};g.NUMERIC_REGEX=/^[0-9]*$/,g.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,g.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let A=g;o.QrSegment=g})(Is||(Is={}));(o=>{(r=>{const i=class{constructor(u,g){this.ordinal=u,this.formatBits=g}};i.LOW=new i(0,1),i.MEDIUM=new i(1,0),i.QUARTILE=new i(2,3),i.HIGH=new i(3,2),r.Ecc=i})(o.QrCode||(o.QrCode={}))})(Is||(Is={}));(o=>{(r=>{const i=class{constructor(u,g){this.modeBits=u,this.numBitsCharCount=g}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};i.NUMERIC=new i(1,[10,12,14]),i.ALPHANUMERIC=new i(2,[9,11,13]),i.BYTE=new i(4,[8,16,16]),i.KANJI=new i(8,[8,10,12]),i.ECI=new i(7,[0,0,0]),r.Mode=i})(o.QrSegment||(o.QrSegment={}))})(Is||(Is={}));var Ao=Is;var h1={L:Ao.QrCode.Ecc.LOW,M:Ao.QrCode.Ecc.MEDIUM,Q:Ao.QrCode.Ecc.QUARTILE,H:Ao.QrCode.Ecc.HIGH},Hg=128,Pg="L",Qg="#FFFFFF",Jg="#000000",Zg=!1,Xg=1,p1=4,g1=0,m1=.1;function Wg(o,r=0){const i=[];return o.forEach(function(s,u){let g=null;s.forEach(function(A,M){if(!A&&g!==null){i.push(`M${g+r} ${u+r}h${M-g}v1H${g+r}z`),g=null;return}if(M===s.length-1){if(!A)return;g===null?i.push(`M${M+r},${u+r} h1v1H${M+r}z`):i.push(`M${g+r},${u+r} h${M+1-g}v1H${g+r}z`);return}A&&g===null&&(g=M)})}),i.join("")}function $g(o,r){return o.slice().map((i,s)=>s<r.y||s>=r.y+r.h?i:i.map((u,g)=>g<r.x||g>=r.x+r.w?u:!1))}function y1(o,r,i,s){if(s==null)return null;const u=o.length+i*2,g=Math.floor(r*m1),A=u/r,M=(s.width||g)*A,b=(s.height||g)*A,S=s.x==null?o.length/2-M/2:s.x*A,_=s.y==null?o.length/2-b/2:s.y*A,j=s.opacity==null?1:s.opacity;let I=null;if(s.excavate){let fe=Math.floor(S),pe=Math.floor(_),Pe=Math.ceil(M+S-fe),ot=Math.ceil(b+_-pe);I={x:fe,y:pe,w:Pe,h:ot}}const X=s.crossOrigin;return{x:S,y:_,h:b,w:M,excavation:I,opacity:j,crossOrigin:X}}function v1(o,r){return r!=null?Math.max(Math.floor(r),0):o?p1:g1}function em({value:o,level:r,minVersion:i,includeMargin:s,marginSize:u,imageSettings:g,size:A,boostLevel:M}){let b=Wn.useMemo(()=>{const fe=(Array.isArray(o)?o:[o]).reduce((pe,Pe)=>(pe.push(...Ao.QrSegment.makeSegments(Pe)),pe),[]);return Ao.QrCode.encodeSegments(fe,h1[r],i,void 0,void 0,M)},[o,r,i,M]);const{cells:S,margin:_,numCells:j,calculatedImageSettings:I}=Wn.useMemo(()=>{let X=b.getModules();const fe=v1(s,u),pe=X.length+fe*2,Pe=y1(X,A,fe,g);return{cells:X,margin:fe,numCells:pe,calculatedImageSettings:Pe}},[b,A,g,s,u]);return{qrcode:b,margin:_,cells:S,numCells:j,calculatedImageSettings:I}}var x1=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),b1=Wn.forwardRef(function(r,i){const s=r,{value:u,size:g=Hg,level:A=Pg,bgColor:M=Qg,fgColor:b=Jg,includeMargin:S=Zg,minVersion:_=Xg,boostLevel:j,marginSize:I,imageSettings:X}=s,pe=ed(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:Pe}=pe,ot=ed(pe,["style"]),st=X?.src,He=Wn.useRef(null),mt=Wn.useRef(null),Oe=Wn.useCallback(Tt=>{He.current=Tt,typeof i=="function"?i(Tt):i&&(i.current=Tt)},[i]),[We,Xe]=Wn.useState(!1),{margin:Bt,cells:Pt,numCells:Me,calculatedImageSettings:Ue}=em({value:u,level:A,minVersion:_,boostLevel:j,includeMargin:S,marginSize:I,imageSettings:X,size:g});Wn.useEffect(()=>{if(He.current!=null){const Tt=He.current,Ze=Tt.getContext("2d");if(!Ze)return;let se=Pt;const Ye=mt.current,Ie=Ue!=null&&Ye!==null&&Ye.complete&&Ye.naturalHeight!==0&&Ye.naturalWidth!==0;Ie&&Ue.excavation!=null&&(se=$g(Pt,Ue.excavation));const Re=window.devicePixelRatio||1;Tt.height=Tt.width=g*Re;const Qe=g/Me*Re;Ze.scale(Qe,Qe),Ze.fillStyle=M,Ze.fillRect(0,0,Me,Me),Ze.fillStyle=b,x1?Ze.fill(new Path2D(Wg(se,Bt))):Pt.forEach(function(K,me){K.forEach(function(_e,Ke){_e&&Ze.fillRect(Ke+Bt,me+Bt,1,1)})}),Ue&&(Ze.globalAlpha=Ue.opacity),Ie&&Ze.drawImage(Ye,Ue.x+Bt,Ue.y+Bt,Ue.w,Ue.h)}}),Wn.useEffect(()=>{Xe(!1)},[st]);const Ce=$f({height:g,width:g},Pe);let xe=null;return st!=null&&(xe=Wn.createElement("img",{src:st,key:st,style:{display:"none"},onLoad:()=>{Xe(!0)},ref:mt,crossOrigin:Ue?.crossOrigin})),Wn.createElement(Wn.Fragment,null,Wn.createElement("canvas",$f({style:Ce,height:g,width:g,ref:Oe,role:"img"},ot)),xe)});b1.displayName="QRCodeCanvas";var Bc=Wn.forwardRef(function(r,i){const s=r,{value:u,size:g=Hg,level:A=Pg,bgColor:M=Qg,fgColor:b=Jg,includeMargin:S=Zg,minVersion:_=Xg,boostLevel:j,title:I,marginSize:X,imageSettings:fe}=s,pe=ed(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:Pe,cells:ot,numCells:st,calculatedImageSettings:He}=em({value:u,level:A,minVersion:_,boostLevel:j,includeMargin:S,marginSize:X,imageSettings:fe,size:g});let mt=ot,Oe=null;fe!=null&&He!=null&&(He.excavation!=null&&(mt=$g(ot,He.excavation)),Oe=Wn.createElement("image",{href:fe.src,height:He.h,width:He.w,x:He.x+Pe,y:He.y+Pe,preserveAspectRatio:"none",opacity:He.opacity,crossOrigin:He.crossOrigin}));const We=Wg(mt,Pe);return Wn.createElement("svg",$f({height:g,width:g,viewBox:`0 0 ${st} ${st}`,ref:i,role:"img"},pe),!!I&&Wn.createElement("title",null,I),Wn.createElement("path",{fill:M,d:`M0,0 h${st}v${st}H0z`,shapeRendering:"crispEdges"}),Wn.createElement("path",{fill:b,d:We,shapeRendering:"crispEdges"}),Oe)});Bc.displayName="QRCodeSVG";var tm=o=>{throw TypeError(o)},nm=(o,r,i)=>r.has(o)||tm("Cannot "+i),C1=(o,r,i)=>(nm(o,r,"read from private field"),i?i.call(o):r.get(o)),w1=(o,r,i)=>r.has(o)?tm("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(o):r.set(o,i),S1=(o,r,i,s)=>(nm(o,r,"write to private field"),r.set(o,i),i);const Lc=[["Aztec","M"],["Codabar","L"],["Code39","L"],["Code93","L"],["Code128","L"],["DataBar","L"],["DataBarExpanded","L"],["DataMatrix","M"],["EAN-8","L"],["EAN-13","L"],["ITF","L"],["MaxiCode","M"],["PDF417","M"],["QRCode","M"],["UPC-A","L"],["UPC-E","L"],["MicroQRCode","M"],["rMQRCode","M"],["DXFilmEdge","L"],["DataBarLimited","L"]],zc=Lc.map(([o])=>o),A1=zc.filter((o,r)=>Lc[r][1]==="L"),E1=zc.filter((o,r)=>Lc[r][1]==="M");function td(o){switch(o){case"Linear-Codes":return A1.reduce((r,i)=>r|td(i),0);case"Matrix-Codes":return E1.reduce((r,i)=>r|td(i),0);case"Any":return(1<<Lc.length)-1;case"None":return 0;default:return 1<<zc.indexOf(o)}}function T1(o){if(o===0)return"None";const r=31-Math.clz32(o);return zc[r]}function M1(o){return o.reduce((r,i)=>r|td(i),0)}const _1=["LocalAverage","GlobalHistogram","FixedThreshold","BoolCast"];function k1(o){return _1.indexOf(o)}const Gp=["Unknown","ASCII","ISO8859_1","ISO8859_2","ISO8859_3","ISO8859_4","ISO8859_5","ISO8859_6","ISO8859_7","ISO8859_8","ISO8859_9","ISO8859_10","ISO8859_11","ISO8859_13","ISO8859_14","ISO8859_15","ISO8859_16","Cp437","Cp1250","Cp1251","Cp1252","Cp1256","Shift_JIS","Big5","GB2312","GB18030","EUC_JP","EUC_KR","UTF16BE","UTF16BE","UTF8","UTF16LE","UTF32BE","UTF32LE","BINARY"];function B1(o){return o==="UnicodeBig"?Gp.indexOf("UTF16BE"):Gp.indexOf(o)}const R1=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function N1(o){return R1[o]}const D1=["Ignore","Read","Require"];function j1(o){return D1.indexOf(o)}const O1=["Plain","ECI","HRI","Hex","Escaped"];function I1(o){return O1.indexOf(o)}const Ic={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,tryDenoise:!1,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!0,returnErrors:!1,eanAddOnSymbol:"Ignore",textMode:"HRI",characterSet:"Unknown"};function Vp(o){return{...o,formats:M1(o.formats),binarizer:k1(o.binarizer),eanAddOnSymbol:j1(o.eanAddOnSymbol),textMode:I1(o.textMode),characterSet:B1(o.characterSet)}}function q1(o){return{...o,format:T1(o.format),contentType:N1(o.contentType),eccLevel:o.ecLevel}}const U1={locateFile:(o,r)=>{const i=o.match(/_(.+?)\.wasm$/);return i?`https://fastly.jsdelivr.net/npm/zxing-wasm@2.2.2/dist/${i[1]}/${o}`:r+o}},qf=new WeakMap;function L1(o,r){return Object.is(o,r)||Object.keys(o).length===Object.keys(r).length&&Object.keys(o).every(i=>Object.hasOwn(r,i)&&o[i]===r[i])}function rm(o,{overrides:r,equalityFn:i=L1,fireImmediately:s=!1}={}){var u;const[g,A]=(u=qf.get(o))!=null?u:[U1],M=r??g;let b;if(s){if(A&&(b=i(g,M)))return A;const S=o({...M});return qf.set(o,[M,S]),S}(b??i(g,M))||qf.set(o,[M])}async function z1(o,r,i=Ic){const s={...Ic,...i},u=await rm(o,{fireImmediately:!0});let g,A;if("width"in r&&"height"in r&&"data"in r){const{data:b,data:{byteLength:S},width:_,height:j}=r;A=u._malloc(S),u.HEAPU8.set(b,A),g=u.readBarcodesFromPixmap(A,_,j,Vp(s))}else{let b,S;if("buffer"in r)[b,S]=[r.byteLength,r];else if("byteLength"in r)[b,S]=[r.byteLength,new Uint8Array(r)];else if("size"in r)[b,S]=[r.size,new Uint8Array(await r.arrayBuffer())];else throw new TypeError("Invalid input type");A=u._malloc(b),u.HEAPU8.set(S,A),g=u.readBarcodesFromImage(A,b,Vp(s))}u._free(A);const M=[];for(let b=0;b<g.size();++b)M.push(q1(g.get(b)));return M}({...Ic,formats:[...Ic.formats]});var am=async function(o={}){var r,i,s=o,u,g,A=new Promise((v,y)=>{u=v,g=y}),M=typeof window=="object",b=typeof Bun<"u",S=typeof WorkerGlobalScope<"u";typeof process=="object"&&!((i=process.versions)===null||i===void 0)&&i.node&&process.type!="renderer";var _="./this.program",j,I="";function X(v){return s.locateFile?s.locateFile(v,I):I+v}var fe,pe;if(M||S||b){try{I=new URL(".",j).href}catch{}S&&(pe=v=>{var y=new XMLHttpRequest;return y.open("GET",v,!1),y.responseType="arraybuffer",y.send(null),new Uint8Array(y.response)}),fe=async v=>{var y=await fetch(v,{credentials:"same-origin"});if(y.ok)return y.arrayBuffer();throw new Error(y.status+" : "+y.url)}}var Pe=console.log.bind(console),ot=console.error.bind(console),st,He,mt=!1,Oe,We,Xe,Bt,Pt,Me,Ue,Ce;function xe(){var v=He.buffer;Oe=new Int8Array(v),Xe=new Int16Array(v),s.HEAPU8=We=new Uint8Array(v),Bt=new Uint16Array(v),Pt=new Int32Array(v),Me=new Uint32Array(v),Ue=new Float32Array(v),Ce=new Float64Array(v)}function Tt(){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Wt(s.preRun.shift());Fe(fn)}function Ze(){mn.ya()}function se(){if(s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;)ft(s.postRun.shift());Fe(Mt)}var Ye=0,Ie=null;function Re(v){var y;Ye++,(y=s.monitorRunDependencies)===null||y===void 0||y.call(s,Ye)}function Qe(v){var y;if(Ye--,(y=s.monitorRunDependencies)===null||y===void 0||y.call(s,Ye),Ye==0&&Ie){var T=Ie;Ie=null,T()}}function K(v){var y;(y=s.onAbort)===null||y===void 0||y.call(s,v),v="Aborted("+v+")",ot(v),mt=!0,v+=". Build with -sASSERTIONS for more info.";var T=new WebAssembly.RuntimeError(v);throw g(T),T}var me;function _e(){return X("zxing_reader.wasm")}function Ke(v){if(v==me&&st)return new Uint8Array(st);if(pe)return pe(v);throw"both async and sync fetching of the wasm failed"}async function Ge(v){if(!st)try{var y=await fe(v);return new Uint8Array(y)}catch{}return Ke(v)}async function rt(v,y){try{var T=await Ge(v),D=await WebAssembly.instantiate(T,y);return D}catch(q){ot(`failed to asynchronously prepare wasm: ${q}`),K(q)}}async function qt(v,y,T){if(!v&&typeof WebAssembly.instantiateStreaming=="function")try{var D=fetch(y,{credentials:"same-origin"}),q=await WebAssembly.instantiateStreaming(D,T);return q}catch(L){ot(`wasm streaming compile failed: ${L}`),ot("falling back to ArrayBuffer instantiation")}return rt(y,T)}function sn(){return{a:ri}}async function Ve(){function v(L,G){return mn=L.exports,He=mn.xa,xe(),St=mn.Ba,Qe(),mn}Re();function y(L){return v(L.instance)}var T=sn();if(s.instantiateWasm)return new Promise((L,G)=>{s.instantiateWasm(T,(H,le)=>{L(v(H))})});me!=null||(me=_e());try{var D=await qt(st,me,T),q=y(D);return q}catch(L){return g(L),Promise.reject(L)}}var Fe=v=>{for(;v.length>0;)v.shift()(s)},Mt=[],ft=v=>Mt.push(v),fn=[],Wt=v=>fn.push(v),Ct=v=>Da(v),qe=()=>Hs(),Vt=[],Ft=0,En=v=>{var y=new Qr(v);return y.get_caught()||(y.set_caught(!0),Ft--),y.set_rethrown(!1),Vt.push(y),Ps(v),Vs(v)},nn=0,xn=()=>{$t(0,0);var v=Vt.pop();Ro(v.excPtr),nn=0};class Qr{constructor(y){this.excPtr=y,this.ptr=y-24}set_type(y){Me[this.ptr+4>>2]=y}get_type(){return Me[this.ptr+4>>2]}set_destructor(y){Me[this.ptr+8>>2]=y}get_destructor(){return Me[this.ptr+8>>2]}set_caught(y){y=y?1:0,Oe[this.ptr+12]=y}get_caught(){return Oe[this.ptr+12]!=0}set_rethrown(y){y=y?1:0,Oe[this.ptr+13]=y}get_rethrown(){return Oe[this.ptr+13]!=0}init(y,T){this.set_adjusted_ptr(0),this.set_type(y),this.set_destructor(T)}set_adjusted_ptr(y){Me[this.ptr+16>>2]=y}get_adjusted_ptr(){return Me[this.ptr+16>>2]}}var wr=v=>Fs(v),Un=v=>{var y=nn;if(!y)return wr(0),0;var T=new Qr(y);T.set_adjusted_ptr(y);var D=T.get_type();if(!D)return wr(0),y;for(var q of v){if(q===0||q===D)break;var L=T.ptr+16;if(Di(q,D,L))return wr(q),y}return wr(D),y},zr=()=>Un([]),yr=v=>Un([v]),Sr=(v,y)=>Un([v,y]),Jr=()=>{var v=Vt.pop();v||K("no exception to throw");var y=v.excPtr;throw v.get_rethrown()||(Vt.push(v),v.set_rethrown(!0),v.set_caught(!1),Ft++),nn=y,nn},ha=(v,y,T)=>{var D=new Qr(v);throw D.init(y,T),nn=v,Ft++,nn},Ua=()=>Ft,pa=v=>{throw nn||(nn=v),nn},Yr=()=>K(""),sr={},Ln=v=>{for(;v.length;){var y=v.pop(),T=v.pop();T(y)}};function kn(v){return this.fromWireType(Me[v>>2])}var tt={},or={},lr={},Zr=class extends Error{constructor(v){super(v),this.name="InternalError"}},$e=v=>{throw new Zr(v)},vr=(v,y,T)=>{v.forEach(H=>lr[H]=y);function D(H){var le=T(H);le.length!==v.length&&$e("Mismatched type converter count");for(var ke=0;ke<v.length;++ke)Ar(v[ke],le[ke])}var q=new Array(y.length),L=[],G=0;y.forEach((H,le)=>{or.hasOwnProperty(H)?q[le]=or[H]:(L.push(H),tt.hasOwnProperty(H)||(tt[H]=[]),tt[H].push(()=>{q[le]=or[H],++G,G===L.length&&D(q)}))}),L.length===0&&D(q)},Aa=v=>{var y=sr[v];delete sr[v];var T=y.rawConstructor,D=y.rawDestructor,q=y.fields,L=q.map(G=>G.getterReturnType).concat(q.map(G=>G.setterArgumentType));vr([v],L,G=>{var H={};return q.forEach((le,ke)=>{var et=le.fieldName,Je=G[ke],It=G[ke].optional,Rt=le.getter,wn=le.getterContext,an=G[ke+q.length],yn=le.setter,Jn=le.setterContext;H[et]={read:Xn=>Je.fromWireType(Rt(wn,Xn)),write:(Xn,Tr)=>{var er=[];yn(Jn,Xn,an.toWireType(er,Tr)),Ln(er)},optional:It}}),[{name:y.name,fromWireType:le=>{var ke={};for(var et in H)ke[et]=H[et].read(le);return D(le),ke},toWireType:(le,ke)=>{for(var et in H)if(!(et in ke)&&!H[et].optional)throw new TypeError(`Missing field: "${et}"`);var Je=T();for(et in H)H[et].write(Je,ke[et]);return le!==null&&le.push(D,Je),Je},argPackAdvance:Tn,readValueFromPointer:kn,destructorFunction:D}]})},Kr=(v,y,T,D,q)=>{},xr=()=>{for(var v=new Array(256),y=0;y<256;++y)v[y]=String.fromCharCode(y);cr=v},cr,Gn=v=>{for(var y="",T=v;We[T];)y+=cr[We[T++]];return y},Xr=class extends Error{constructor(v){super(v),this.name="BindingError"}},Zt=v=>{throw new Xr(v)};function _r(v,y){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var D=y.name;if(v||Zt(`type "${D}" must have a positive integer typeid pointer`),or.hasOwnProperty(v)){if(T.ignoreDuplicateRegistrations)return;Zt(`Cannot register type '${D}' twice`)}if(or[v]=y,delete lr[v],tt.hasOwnProperty(v)){var q=tt[v];delete tt[v],q.forEach(L=>L())}}function Ar(v,y){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return _r(v,y,T)}var Tn=8,Cn=(v,y,T,D)=>{y=Gn(y),Ar(v,{name:y,fromWireType:function(q){return!!q},toWireType:function(q,L){return L?T:D},argPackAdvance:Tn,readValueFromPointer:function(q){return this.fromWireType(We[q])},destructorFunction:null})},w=v=>({count:v.count,deleteScheduled:v.deleteScheduled,preservePointerOnDelete:v.preservePointerOnDelete,ptr:v.ptr,ptrType:v.ptrType,smartPtr:v.smartPtr,smartPtrType:v.smartPtrType}),R=v=>{function y(T){return T.$$.ptrType.registeredClass.name}Zt(y(v)+" instance already deleted")},B=!1,h=v=>{},O=v=>{v.smartPtr?v.smartPtrType.rawDestructor(v.smartPtr):v.ptrType.registeredClass.rawDestructor(v.ptr)},te=v=>{v.count.value-=1;var y=v.count.value===0;y&&O(v)},W=v=>typeof FinalizationRegistry>"u"?(W=y=>y,v):(B=new FinalizationRegistry(y=>{te(y.$$)}),W=y=>{var T=y.$$,D=!!T.smartPtr;if(D){var q={$$:T};B.register(y,q,y)}return y},h=y=>B.unregister(y),W(v)),we=()=>{let v=ze.prototype;Object.assign(v,{isAliasOf(T){if(!(this instanceof ze)||!(T instanceof ze))return!1;var D=this.$$.ptrType.registeredClass,q=this.$$.ptr;T.$$=T.$$;for(var L=T.$$.ptrType.registeredClass,G=T.$$.ptr;D.baseClass;)q=D.upcast(q),D=D.baseClass;for(;L.baseClass;)G=L.upcast(G),L=L.baseClass;return D===L&&q===G},clone(){if(this.$$.ptr||R(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var T=W(Object.create(Object.getPrototypeOf(this),{$$:{value:w(this.$$)}}));return T.$$.count.value+=1,T.$$.deleteScheduled=!1,T},delete(){this.$$.ptr||R(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Zt("Object already scheduled for deletion"),h(this),te(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||R(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Zt("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const y=Symbol.dispose;y&&(v[y]=v.delete)};function ze(){}var ht=(v,y)=>Object.defineProperty(y,"name",{value:v}),lt={},Qt=(v,y,T)=>{if(v[y].overloadTable===void 0){var D=v[y];v[y]=function(){for(var q=arguments.length,L=new Array(q),G=0;G<q;G++)L[G]=arguments[G];return v[y].overloadTable.hasOwnProperty(L.length)||Zt(`Function '${T}' called with an invalid number of arguments (${L.length}) - expects one of (${v[y].overloadTable})!`),v[y].overloadTable[L.length].apply(this,L)},v[y].overloadTable=[],v[y].overloadTable[D.argCount]=D}},dt=(v,y,T)=>{s.hasOwnProperty(v)?((T===void 0||s[v].overloadTable!==void 0&&s[v].overloadTable[T]!==void 0)&&Zt(`Cannot register public name '${v}' twice`),Qt(s,v,v),s[v].overloadTable.hasOwnProperty(T)&&Zt(`Cannot register multiple overloads of a function with the same number of arguments (${T})!`),s[v].overloadTable[T]=y):(s[v]=y,s[v].argCount=T)},At=48,Nt=57,Dt=v=>{v=v.replace(/[^a-zA-Z0-9_]/g,"$");var y=v.charCodeAt(0);return y>=At&&y<=Nt?`_${v}`:v};function pt(v,y,T,D,q,L,G,H){this.name=v,this.constructor=y,this.instancePrototype=T,this.rawDestructor=D,this.baseClass=q,this.getActualType=L,this.upcast=G,this.downcast=H,this.pureVirtualFunctions=[]}var wt=(v,y,T)=>{for(;y!==T;)y.upcast||Zt(`Expected null or instance of ${T.name}, got an instance of ${y.name}`),v=y.upcast(v),y=y.baseClass;return v},xt=v=>{if(v===null)return"null";var y=typeof v;return y==="object"||y==="array"||y==="function"?v.toString():""+v};function yt(v,y){if(y===null)return this.isReference&&Zt(`null is not a valid ${this.name}`),0;y.$$||Zt(`Cannot pass "${xt(y)}" as a ${this.name}`),y.$$.ptr||Zt(`Cannot pass deleted object as a pointer of type ${this.name}`);var T=y.$$.ptrType.registeredClass,D=wt(y.$$.ptr,T,this.registeredClass);return D}function ct(v,y){var T;if(y===null)return this.isReference&&Zt(`null is not a valid ${this.name}`),this.isSmartPointer?(T=this.rawConstructor(),v!==null&&v.push(this.rawDestructor,T),T):0;(!y||!y.$$)&&Zt(`Cannot pass "${xt(y)}" as a ${this.name}`),y.$$.ptr||Zt(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&y.$$.ptrType.isConst&&Zt(`Cannot convert argument of type ${y.$$.smartPtrType?y.$$.smartPtrType.name:y.$$.ptrType.name} to parameter type ${this.name}`);var D=y.$$.ptrType.registeredClass;if(T=wt(y.$$.ptr,D,this.registeredClass),this.isSmartPointer)switch(y.$$.smartPtr===void 0&&Zt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:y.$$.smartPtrType===this?T=y.$$.smartPtr:Zt(`Cannot convert argument of type ${y.$$.smartPtrType?y.$$.smartPtrType.name:y.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:T=y.$$.smartPtr;break;case 2:if(y.$$.smartPtrType===this)T=y.$$.smartPtr;else{var q=y.clone();T=this.rawShare(T,Bn.toHandle(()=>q.delete())),v!==null&&v.push(this.rawDestructor,T)}break;default:Zt("Unsupporting sharing policy")}return T}function vt(v,y){if(y===null)return this.isReference&&Zt(`null is not a valid ${this.name}`),0;y.$$||Zt(`Cannot pass "${xt(y)}" as a ${this.name}`),y.$$.ptr||Zt(`Cannot pass deleted object as a pointer of type ${this.name}`),y.$$.ptrType.isConst&&Zt(`Cannot convert argument of type ${y.$$.ptrType.name} to parameter type ${this.name}`);var T=y.$$.ptrType.registeredClass,D=wt(y.$$.ptr,T,this.registeredClass);return D}var nt=(v,y,T)=>{if(y===T)return v;if(T.baseClass===void 0)return null;var D=nt(v,y,T.baseClass);return D===null?null:T.downcast(D)},ut={},gt=(v,y)=>{for(y===void 0&&Zt("ptr should not be undefined");v.baseClass;)y=v.upcast(y),v=v.baseClass;return y},it=(v,y)=>(y=gt(v,y),ut[y]),he=(v,y)=>{(!y.ptrType||!y.ptr)&&$e("makeClassHandle requires ptr and ptrType");var T=!!y.smartPtrType,D=!!y.smartPtr;return T!==D&&$e("Both smartPtrType and smartPtr must be specified"),y.count={value:1},W(Object.create(v,{$$:{value:y,writable:!0}}))};function ye(v){var y=this.getPointee(v);if(!y)return this.destructor(v),null;var T=it(this.registeredClass,y);if(T!==void 0){if(T.$$.count.value===0)return T.$$.ptr=y,T.$$.smartPtr=v,T.clone();var D=T.clone();return this.destructor(v),D}function q(){return this.isSmartPointer?he(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:y,smartPtrType:this,smartPtr:v}):he(this.registeredClass.instancePrototype,{ptrType:this,ptr:v})}var L=this.registeredClass.getActualType(y),G=lt[L];if(!G)return q.call(this);var H;this.isConst?H=G.constPointerType:H=G.pointerType;var le=nt(y,this.registeredClass,H.registeredClass);return le===null?q.call(this):this.isSmartPointer?he(H.registeredClass.instancePrototype,{ptrType:H,ptr:le,smartPtrType:this,smartPtr:v}):he(H.registeredClass.instancePrototype,{ptrType:H,ptr:le})}var ve=()=>{Object.assign(Ee.prototype,{getPointee(v){return this.rawGetPointee&&(v=this.rawGetPointee(v)),v},destructor(v){var y;(y=this.rawDestructor)===null||y===void 0||y.call(this,v)},argPackAdvance:Tn,readValueFromPointer:kn,fromWireType:ye})};function Ee(v,y,T,D,q,L,G,H,le,ke,et){this.name=v,this.registeredClass=y,this.isReference=T,this.isConst=D,this.isSmartPointer=q,this.pointeeType=L,this.sharingPolicy=G,this.rawGetPointee=H,this.rawConstructor=le,this.rawShare=ke,this.rawDestructor=et,!q&&y.baseClass===void 0?D?(this.toWireType=yt,this.destructorFunction=null):(this.toWireType=vt,this.destructorFunction=null):this.toWireType=ct}var Ae=(v,y,T)=>{s.hasOwnProperty(v)||$e("Replacing nonexistent public symbol"),s[v].overloadTable!==void 0&&T!==void 0?s[v].overloadTable[T]=y:(s[v]=y,s[v].argCount=T)},De=[],St,at=v=>{var y=De[v];return y||(De[v]=y=St.get(v)),y},Lt=function(v,y){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(v.includes("j"))return dynCallLegacy(v,y,T);var D=at(y),q=D(...T);return q},zt=function(v,y){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function(){for(var D=arguments.length,q=new Array(D),L=0;L<D;L++)q[L]=arguments[L];return Lt(v,y,q,T)}},z=function(v,y){v=Gn(v);function T(){if(v.includes("j"))return zt(v,y);var q=at(y);return q}var D=T();return typeof D!="function"&&Zt(`unknown function pointer with signature ${v}: ${y}`),D};class Yt extends Error{}var jt=v=>{var y=Bo(v),T=Gn(y);return $r(y),T},Kt=(v,y)=>{var T=[],D={};function q(L){if(!D[L]&&!or[L]){if(lr[L]){lr[L].forEach(q);return}T.push(L),D[L]=!0}}throw y.forEach(q),new Yt(`${v}: `+T.map(jt).join([", "]))},Gt=(v,y,T,D,q,L,G,H,le,ke,et,Je,It)=>{et=Gn(et),L=z(q,L),H&&(H=z(G,H)),ke&&(ke=z(le,ke)),It=z(Je,It);var Rt=Dt(et);dt(Rt,function(){Kt(`Cannot construct ${et} due to unbound types`,[D])}),vr([v,y,T],D?[D]:[],wn=>{wn=wn[0];var an,yn;D?(an=wn.registeredClass,yn=an.instancePrototype):yn=ze.prototype;var Jn=ht(et,function(){if(Object.getPrototypeOf(this)!==Xn)throw new Xr(`Use 'new' to construct ${et}`);if(Tr.constructor_body===void 0)throw new Xr(`${et} has no accessible constructor`);for(var Do=arguments.length,Ii=new Array(Do),ws=0;ws<Do;ws++)Ii[ws]=arguments[ws];var Fr=Tr.constructor_body[Ii.length];if(Fr===void 0)throw new Xr(`Tried to invoke ctor of ${et} with invalid number of parameters (${Ii.length}) - expected (${Object.keys(Tr.constructor_body).toString()}) parameters instead!`);return Fr.apply(this,Ii)}),Xn=Object.create(yn,{constructor:{value:Jn}});Jn.prototype=Xn;var Tr=new pt(et,Jn,Xn,It,an,L,H,ke);if(Tr.baseClass){var er,Cs;(Cs=(er=Tr.baseClass).__derivedClasses)!==null&&Cs!==void 0||(er.__derivedClasses=[]),Tr.baseClass.__derivedClasses.push(Tr)}var Zs=new Ee(et,Tr,!0,!1,!1),Pa=new Ee(et+"*",Tr,!1,!1,!1),Xs=new Ee(et+" const*",Tr,!1,!0,!1);return lt[v]={pointerType:Pa,constPointerType:Xs},Ae(Rt,Jn),[Zs,Pa,Xs]})},Jt=(v,y)=>{for(var T=[],D=0;D<v;D++)T.push(Me[y+D*4>>2]);return T};function Ht(v){for(var y=1;y<v.length;++y)if(v[y]!==null&&v[y].destructorFunction===void 0)return!0;return!1}function Mn(v,y,T,D,q,L){var G=y.length;G<2&&Zt("argTypes array size mismatch! Must at least get return value and 'this' types!");var H=y[1]!==null&&T!==null,le=Ht(y),ke=y[0].name!=="void",et=G-2,Je=new Array(et),It=[],Rt=[],wn=function(){Rt.length=0;var an;It.length=H?2:1,It[0]=q,H&&(an=y[1].toWireType(Rt,this),It[1]=an);for(var yn=0;yn<et;++yn)Je[yn]=y[yn+2].toWireType(Rt,yn<0||arguments.length<=yn?void 0:arguments[yn]),It.push(Je[yn]);var Jn=D(...It);function Xn(Tr){if(le)Ln(Rt);else for(var er=H?1:2;er<y.length;er++){var Cs=er===1?an:Je[er-2];y[er].destructorFunction!==null&&y[er].destructorFunction(Cs)}if(ke)return y[0].fromWireType(Tr)}return Xn(Jn)};return ht(v,wn)}var on=(v,y,T,D,q,L)=>{var G=Jt(y,T);q=z(D,q),vr([],[v],H=>{H=H[0];var le=`constructor ${H.name}`;if(H.registeredClass.constructor_body===void 0&&(H.registeredClass.constructor_body=[]),H.registeredClass.constructor_body[y-1]!==void 0)throw new Xr(`Cannot register multiple constructors with identical number of parameters (${y-1}) for class '${H.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return H.registeredClass.constructor_body[y-1]=()=>{Kt(`Cannot construct ${H.name} due to unbound types`,G)},vr([],G,ke=>(ke.splice(1,0,null),H.registeredClass.constructor_body[y-1]=Mn(le,ke,null,q,L),[])),[]})},pn=v=>{v=v.trim();const y=v.indexOf("(");return y===-1?v:v.slice(0,y)},jn=(v,y,T,D,q,L,G,H,le,ke)=>{var et=Jt(T,D);y=Gn(y),y=pn(y),L=z(q,L),vr([],[v],Je=>{Je=Je[0];var It=`${Je.name}.${y}`;y.startsWith("@@")&&(y=Symbol[y.substring(2)]),H&&Je.registeredClass.pureVirtualFunctions.push(y);function Rt(){Kt(`Cannot call ${It} due to unbound types`,et)}var wn=Je.registeredClass.instancePrototype,an=wn[y];return an===void 0||an.overloadTable===void 0&&an.className!==Je.name&&an.argCount===T-2?(Rt.argCount=T-2,Rt.className=Je.name,wn[y]=Rt):(Qt(wn,y,It),wn[y].overloadTable[T-2]=Rt),vr([],et,yn=>{var Jn=Mn(It,yn,Je,L,G);return wn[y].overloadTable===void 0?(Jn.argCount=T-2,wn[y]=Jn):wn[y].overloadTable[T-2]=Jn,[]}),[]})},_t=[],bn=[0,1,,1,null,1,!0,1,!1,1],Vn=v=>{v>9&&--bn[v+1]===0&&(bn[v]=void 0,_t.push(v))},Bn={toValue:v=>(v||Zt(`Cannot use deleted val. handle = ${v}`),bn[v]),toHandle:v=>{switch(v){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const y=_t.pop()||bn.length;return bn[y]=v,bn[y+1]=1,y}}}},gn={name:"emscripten::val",fromWireType:v=>{var y=Bn.toValue(v);return Vn(v),y},toWireType:(v,y)=>Bn.toHandle(y),argPackAdvance:Tn,readValueFromPointer:kn,destructorFunction:null},oa=v=>Ar(v,gn),Or=(v,y)=>{switch(y){case 4:return function(T){return this.fromWireType(Ue[T>>2])};case 8:return function(T){return this.fromWireType(Ce[T>>3])};default:throw new TypeError(`invalid float width (${y}): ${v}`)}},Wr=(v,y,T)=>{y=Gn(y),Ar(v,{name:y,fromWireType:D=>D,toWireType:(D,q)=>q,argPackAdvance:Tn,readValueFromPointer:Or(y,T),destructorFunction:null})},Ci=(v,y,T,D,q,L,G,H)=>{var le=Jt(y,T);v=Gn(v),v=pn(v),q=z(D,q),dt(v,function(){Kt(`Cannot call ${v} due to unbound types`,le)},y-1),vr([],le,ke=>{var et=[ke[0],null].concat(ke.slice(1));return Ae(v,Mn(v,et,null,q,L),y-1),[]})},Ea=(v,y,T)=>{switch(y){case 1:return T?D=>Oe[D]:D=>We[D];case 2:return T?D=>Xe[D>>1]:D=>Bt[D>>1];case 4:return T?D=>Pt[D>>2]:D=>Me[D>>2];default:throw new TypeError(`invalid integer width (${y}): ${v}`)}},zn=(v,y,T,D,q)=>{y=Gn(y);const L=D===0;let G=le=>le;if(L){var H=32-8*T;G=le=>le<<H>>>H,q=G(q)}Ar(v,{name:y,fromWireType:G,toWireType:(le,ke)=>ke,argPackAdvance:Tn,readValueFromPointer:Ea(y,T,D!==0),destructorFunction:null})},Gr=(v,y,T)=>{var D=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],q=D[y];function L(G){var H=Me[G>>2],le=Me[G+4>>2];return new q(Oe.buffer,le,H)}T=Gn(T),Ar(v,{name:T,fromWireType:L,argPackAdvance:Tn,readValueFromPointer:L},{ignoreDuplicateRegistrations:!0})},Ta=Object.assign({optional:!0},gn),La=(v,y)=>{Ar(v,Ta)},Ma=(v,y,T,D)=>{if(!(D>0))return 0;for(var q=T,L=T+D-1,G=0;G<v.length;++G){var H=v.charCodeAt(G);if(H>=55296&&H<=57343){var le=v.charCodeAt(++G);H=65536+((H&1023)<<10)|le&1023}if(H<=127){if(T>=L)break;y[T++]=H}else if(H<=2047){if(T+1>=L)break;y[T++]=192|H>>6,y[T++]=128|H&63}else if(H<=65535){if(T+2>=L)break;y[T++]=224|H>>12,y[T++]=128|H>>6&63,y[T++]=128|H&63}else{if(T+3>=L)break;y[T++]=240|H>>18,y[T++]=128|H>>12&63,y[T++]=128|H>>6&63,y[T++]=128|H&63}}return y[T]=0,T-q},Hn=(v,y,T)=>Ma(v,We,y,T),wi=v=>{for(var y=0,T=0;T<v.length;++T){var D=v.charCodeAt(T);D<=127?y++:D<=2047?y+=2:D>=55296&&D<=57343?(y+=4,++T):y+=3}return y},br=typeof TextDecoder<"u"?new TextDecoder:void 0,Vr=function(v){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;for(var D=y+T,q=y;v[q]&&!(q>=D);)++q;if(q-y>16&&v.buffer&&br)return br.decode(v.subarray(y,q));for(var L="";y<q;){var G=v[y++];if(!(G&128)){L+=String.fromCharCode(G);continue}var H=v[y++]&63;if((G&224)==192){L+=String.fromCharCode((G&31)<<6|H);continue}var le=v[y++]&63;if((G&240)==224?G=(G&15)<<12|H<<6|le:G=(G&7)<<18|H<<12|le<<6|v[y++]&63,G<65536)L+=String.fromCharCode(G);else{var ke=G-65536;L+=String.fromCharCode(55296|ke>>10,56320|ke&1023)}}return L},Si=(v,y)=>v?Vr(We,v,y):"",za=(v,y)=>{y=Gn(y),Ar(v,{name:y,fromWireType(T){for(var D=Me[T>>2],q=T+4,L,H,G=q,H=0;H<=D;++H){var le=q+H;if(H==D||We[le]==0){var ke=le-G,et=Si(G,ke);L===void 0?L=et:(L+="\0",L+=et),G=le+1}}return $r(T),L},toWireType(T,D){D instanceof ArrayBuffer&&(D=new Uint8Array(D));var q,L=typeof D=="string";L||ArrayBuffer.isView(D)&&D.BYTES_PER_ELEMENT==1||Zt("Cannot pass non-string to std::string"),L?q=wi(D):q=D.length;var G=ai(4+q+1),H=G+4;return Me[G>>2]=q,L?Hn(D,H,q+1):We.set(D,H),T!==null&&T.push($r,G),G},argPackAdvance:Tn,readValueFromPointer:kn,destructorFunction(T){$r(T)}})},_a=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Ya=(v,y)=>{for(var T=v>>1,D=T+y/2,q=T;!(q>=D)&&Bt[q];)++q;if(q-T>16&&_a)return _a.decode(Bt.subarray(T,q));for(var L="",G=T;!(G>=D);++G){var H=Bt[G];if(H==0)break;L+=String.fromCharCode(H)}return L},$a=(v,y,T)=>{if(T!=null||(T=2147483647),T<2)return 0;T-=2;for(var D=y,q=T<v.length*2?T/2:v.length,L=0;L<q;++L){var G=v.charCodeAt(L);Xe[y>>1]=G,y+=2}return Xe[y>>1]=0,y-D},zs=v=>v.length*2,$n=(v,y)=>{for(var T=0,D="";!(T>=y/4);){var q=Pt[v+T*4>>2];if(q==0)break;if(++T,q>=65536){var L=q-65536;D+=String.fromCharCode(55296|L>>10,56320|L&1023)}else D+=String.fromCharCode(q)}return D},ka=(v,y,T)=>{if(T!=null||(T=2147483647),T<4)return 0;for(var D=y,q=D+T-4,L=0;L<v.length;++L){var G=v.charCodeAt(L);if(G>=55296&&G<=57343){var H=v.charCodeAt(++L);G=65536+((G&1023)<<10)|H&1023}if(Pt[y>>2]=G,y+=4,y+4>q)break}return Pt[y>>2]=0,y-D},Ai=v=>{for(var y=0,T=0;T<v.length;++T){var D=v.charCodeAt(T);D>=55296&&D<=57343&&++T,y+=4}return y},ga=(v,y,T)=>{T=Gn(T);var D,q,L,G;y===2?(D=Ya,q=$a,G=zs,L=H=>Bt[H>>1]):y===4&&(D=$n,q=ka,G=Ai,L=H=>Me[H>>2]),Ar(v,{name:T,fromWireType:H=>{for(var le=Me[H>>2],ke,et=H+4,Je=0;Je<=le;++Je){var It=H+4+Je*y;if(Je==le||L(It)==0){var Rt=It-et,wn=D(et,Rt);ke===void 0?ke=wn:(ke+="\0",ke+=wn),et=It+y}}return $r(H),ke},toWireType:(H,le)=>{typeof le!="string"&&Zt(`Cannot pass non-string to C++ string type ${T}`);var ke=G(le),et=ai(4+ke+y);return Me[et>>2]=ke/y,q(le,et+4,ke+y),H!==null&&H.push($r,et),et},argPackAdvance:Tn,readValueFromPointer:kn,destructorFunction(H){$r(H)}})},Ei=(v,y,T,D,q,L)=>{sr[v]={name:Gn(y),rawConstructor:z(T,D),rawDestructor:z(q,L),fields:[]}},ei=(v,y,T,D,q,L,G,H,le,ke)=>{sr[v].fields.push({fieldName:Gn(y),getterReturnType:T,getter:z(D,q),getterContext:L,setterArgumentType:G,setter:z(H,le),setterContext:ke})},ls=(v,y)=>{y=Gn(y),Ar(v,{isVoid:!0,name:y,argPackAdvance:0,fromWireType:()=>{},toWireType:(T,D)=>{}})},Ba=[],Ti=(v,y,T,D)=>(v=Ba[v],y=Bn.toValue(y),v(null,y,T,D)),Mi={},cs=v=>{var y=Mi[v];return y===void 0?Gn(v):y},us=()=>{if(typeof globalThis=="object")return globalThis;function v(y){y.$$$embind_global$$$=y;var T=typeof $$$embind_global$$$=="object"&&y.$$$embind_global$$$==y;return T||delete y.$$$embind_global$$$,T}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&v(global)?$$$embind_global$$$=global:typeof self=="object"&&v(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},_i=v=>v===0?Bn.toHandle(us()):(v=cs(v),Bn.toHandle(us()[v])),Ka=v=>{var y=Ba.length;return Ba.push(v),y},ti=(v,y)=>{var T=or[v];return T===void 0&&Zt(`${y} has unknown type ${jt(v)}`),T},Ys=(v,y)=>{for(var T=new Array(v),D=0;D<v;++D)T[D]=ti(Me[y+D*4>>2],`parameter ${D}`);return T},_o=(v,y,T)=>{var D=[],q=v.toWireType(D,T);return D.length&&(Me[y>>2]=Bn.toHandle(D)),q},Ga=Reflect.construct,fs=(v,y,T)=>{var D=Ys(v,y),q=D.shift();v--;var L=new Array(v),G=(le,ke,et,Je)=>{for(var It=0,Rt=0;Rt<v;++Rt)L[Rt]=D[Rt].readValueFromPointer(Je+It),It+=D[Rt].argPackAdvance;var wn=T===1?Ga(ke,L):ke.apply(le,L);return _o(q,et,wn)},H=`methodCaller<(${D.map(le=>le.name).join(", ")}) => ${q.name}>`;return Ka(ht(H,G))},ki=v=>{v>9&&(bn[v+1]+=1)},ds=v=>{var y=Bn.toValue(v);Ln(y),Vn(v)},hs=(v,y)=>{v=ti(v,"_emval_take_value");var T=v.readValueFromPointer(y);return Bn.toHandle(T)},ur=(v,y,T,D)=>{var q=new Date().getFullYear(),L=new Date(q,0,1),G=new Date(q,6,1),H=L.getTimezoneOffset(),le=G.getTimezoneOffset(),ke=Math.max(H,le);Me[v>>2]=ke*60,Pt[y>>2]=+(H!=le);var et=Rt=>{var wn=Rt>=0?"-":"+",an=Math.abs(Rt),yn=String(Math.floor(an/60)).padStart(2,"0"),Jn=String(an%60).padStart(2,"0");return`UTC${wn}${yn}${Jn}`},Je=et(H),It=et(le);le<H?(Hn(Je,T,17),Hn(It,D,17)):(Hn(Je,D,17),Hn(It,T,17))},ni=()=>2147483648,Ra=(v,y)=>Math.ceil(v/y)*y,Ks=v=>{var y=He.buffer,T=(v-y.byteLength+65535)/65536|0;try{return He.grow(T),xe(),1}catch{}},Bi=v=>{var y=We.length;v>>>=0;var T=ni();if(v>T)return!1;for(var D=1;D<=4;D*=2){var q=y*(1+.2/D);q=Math.min(q,v+100663296);var L=Math.min(T,Ra(Math.max(v,q),65536)),G=Ks(L);if(G)return!0}return!1},Ri={},ps=()=>_||"./this.program",ma=()=>{if(!ma.strings){var v=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",y={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:v,_:ps()};for(var T in Ri)Ri[T]===void 0?delete y[T]:y[T]=Ri[T];var D=[];for(var T in y)D.push(`${T}=${y[T]}`);ma.strings=D}return ma.strings},gs=(v,y)=>{var T=0,D=0;for(var q of ma()){var L=y+T;Me[v+D>>2]=L,T+=Hn(q,L,1/0)+1,D+=4}return 0},Na=(v,y)=>{var T=ma();Me[v>>2]=T.length;var D=0;for(var q of T)D+=wi(q)+1;return Me[y>>2]=D,0},ms=v=>52;function ys(v,y,T,D,q){return 70}var Ni=[null,[],[]],vs=(v,y)=>{var T=Ni[v];y===0||y===10?((v===1?Pe:ot)(Vr(T)),T.length=0):T.push(y)},Gs=(v,y,T,D)=>{for(var q=0,L=0;L<T;L++){var G=Me[y>>2],H=Me[y+4>>2];y+=8;for(var le=0;le<H;le++)vs(v,We[G+le]);q+=H}return Me[D>>2]=q,0},ko=v=>v;xr(),we(),ve(),s.noExitRuntime&&s.noExitRuntime,s.print&&(Pe=s.print),s.printErr&&(ot=s.printErr),s.wasmBinary&&(st=s.wasmBinary),s.arguments&&s.arguments,s.thisProgram&&(_=s.thisProgram);var ri={s:En,w:xn,a:zr,j:yr,m:Sr,P:Jr,p:ha,ga:Ua,d:pa,ba:Yr,ua:Aa,aa:Kr,pa:Cn,sa:Gt,ra:on,H:jn,na:oa,V:Wr,W:Ci,x:zn,t:Gr,ta:La,oa:za,Q:ga,I:Ei,va:ei,qa:ls,da:Ti,wa:Vn,D:_i,ma:fs,X:ki,Y:ds,U:hs,ca:ur,ha:Bi,ea:gs,fa:Na,ia:ms,_:ys,S:Gs,K:Y,C:Q,M:ji,R:ee,q:x,b:Yn,E:U,ka:V,c:Fa,ja:ae,h:No,i:Js,r:ya,O:k,v:l,F:p,L:E,z:ne,J:re,$:oe,Z:de,k:kr,f:ii,e:ea,g:si,N:$,l:Oi,la:P,o:Er,B:ja,u:f,T:Ha,A:J,n:Qs,G:bs,y:ko},mn=await Ve();mn.ya;var Bo=mn.za,$r=s._free=mn.Aa,ai=s._malloc=mn.Ca,Vs=mn.Da,$t=mn.Ea,Fs=mn.Fa,Da=mn.Ga,Hs=mn.Ha,Ro=mn.Ia,Ps=mn.Ja,Di=mn.Ka;s.dynCall_viijii=mn.La;var xs=s.dynCall_iiijj=mn.Ma;s.dynCall_jiji=mn.Na;var Va=s.dynCall_jiiii=mn.Oa;s.dynCall_iiiiij=mn.Pa,s.dynCall_iiiiijj=mn.Qa,s.dynCall_iiiiiijj=mn.Ra;function ii(v,y){var T=qe();try{at(v)(y)}catch(D){if(Ct(T),D!==D+0)throw D;$t(1,0)}}function No(v,y,T,D){var q=qe();try{return at(v)(y,T,D)}catch(L){if(Ct(q),L!==L+0)throw L;$t(1,0)}}function ji(v,y,T,D,q){var L=qe();try{return at(v)(y,T,D,q)}catch(G){if(Ct(L),G!==G+0)throw G;$t(1,0)}}function si(v,y,T,D){var q=qe();try{at(v)(y,T,D)}catch(L){if(Ct(q),L!==L+0)throw L;$t(1,0)}}function ea(v,y,T){var D=qe();try{at(v)(y,T)}catch(q){if(Ct(D),q!==q+0)throw q;$t(1,0)}}function Yn(v,y){var T=qe();try{return at(v)(y)}catch(D){if(Ct(T),D!==D+0)throw D;$t(1,0)}}function Fa(v,y,T){var D=qe();try{return at(v)(y,T)}catch(q){if(Ct(D),q!==q+0)throw q;$t(1,0)}}function kr(v){var y=qe();try{at(v)()}catch(T){if(Ct(y),T!==T+0)throw T;$t(1,0)}}function Qs(v,y,T,D,q,L,G,H,le,ke,et){var Je=qe();try{at(v)(y,T,D,q,L,G,H,le,ke,et)}catch(It){if(Ct(Je),It!==It+0)throw It;$t(1,0)}}function Oi(v,y,T,D,q){var L=qe();try{at(v)(y,T,D,q)}catch(G){if(Ct(L),G!==G+0)throw G;$t(1,0)}}function Js(v,y,T,D,q){var L=qe();try{return at(v)(y,T,D,q)}catch(G){if(Ct(L),G!==G+0)throw G;$t(1,0)}}function ja(v,y,T,D,q,L,G){var H=qe();try{at(v)(y,T,D,q,L,G)}catch(le){if(Ct(H),le!==le+0)throw le;$t(1,0)}}function bs(v,y,T,D,q,L,G,H,le,ke,et,Je,It,Rt,wn,an){var yn=qe();try{at(v)(y,T,D,q,L,G,H,le,ke,et,Je,It,Rt,wn,an)}catch(Jn){if(Ct(yn),Jn!==Jn+0)throw Jn;$t(1,0)}}function Ha(v,y,T,D,q,L,G,H,le){var ke=qe();try{at(v)(y,T,D,q,L,G,H,le)}catch(et){if(Ct(ke),et!==et+0)throw et;$t(1,0)}}function ya(v,y,T,D,q,L){var G=qe();try{return at(v)(y,T,D,q,L)}catch(H){if(Ct(G),H!==H+0)throw H;$t(1,0)}}function Er(v,y,T,D,q,L){var G=qe();try{at(v)(y,T,D,q,L)}catch(H){if(Ct(G),H!==H+0)throw H;$t(1,0)}}function l(v,y,T,D,q,L,G){var H=qe();try{return at(v)(y,T,D,q,L,G)}catch(le){if(Ct(H),le!==le+0)throw le;$t(1,0)}}function f(v,y,T,D,q,L,G,H){var le=qe();try{at(v)(y,T,D,q,L,G,H)}catch(ke){if(Ct(le),ke!==ke+0)throw ke;$t(1,0)}}function p(v,y,T,D,q,L,G,H){var le=qe();try{return at(v)(y,T,D,q,L,G,H)}catch(ke){if(Ct(le),ke!==ke+0)throw ke;$t(1,0)}}function x(v){var y=qe();try{return at(v)()}catch(T){if(Ct(y),T!==T+0)throw T;$t(1,0)}}function E(v,y,T,D,q,L,G,H,le){var ke=qe();try{return at(v)(y,T,D,q,L,G,H,le)}catch(et){if(Ct(ke),et!==et+0)throw et;$t(1,0)}}function k(v,y,T,D,q,L,G){var H=qe();try{return at(v)(y,T,D,q,L,G)}catch(le){if(Ct(H),le!==le+0)throw le;$t(1,0)}}function U(v,y,T,D){var q=qe();try{return at(v)(y,T,D)}catch(L){if(Ct(q),L!==L+0)throw L;$t(1,0)}}function Y(v,y,T,D){var q=qe();try{return at(v)(y,T,D)}catch(L){if(Ct(q),L!==L+0)throw L;$t(1,0)}}function P(v,y,T,D,q,L,G,H){var le=qe();try{at(v)(y,T,D,q,L,G,H)}catch(ke){if(Ct(le),ke!==ke+0)throw ke;$t(1,0)}}function Q(v,y,T,D,q,L){var G=qe();try{return at(v)(y,T,D,q,L)}catch(H){if(Ct(G),H!==H+0)throw H;$t(1,0)}}function ne(v,y,T,D,q,L,G,H,le,ke){var et=qe();try{return at(v)(y,T,D,q,L,G,H,le,ke)}catch(Je){if(Ct(et),Je!==Je+0)throw Je;$t(1,0)}}function V(v,y,T){var D=qe();try{return at(v)(y,T)}catch(q){if(Ct(D),q!==q+0)throw q;$t(1,0)}}function ae(v,y,T,D,q){var L=qe();try{return at(v)(y,T,D,q)}catch(G){if(Ct(L),G!==G+0)throw G;$t(1,0)}}function J(v,y,T,D,q,L,G,H,le,ke){var et=qe();try{at(v)(y,T,D,q,L,G,H,le,ke)}catch(Je){if(Ct(et),Je!==Je+0)throw Je;$t(1,0)}}function $(v,y,T,D,q,L,G){var H=qe();try{at(v)(y,T,D,q,L,G)}catch(le){if(Ct(H),le!==le+0)throw le;$t(1,0)}}function ee(v,y,T,D){var q=qe();try{return at(v)(y,T,D)}catch(L){if(Ct(q),L!==L+0)throw L;$t(1,0)}}function re(v,y,T,D,q,L,G,H,le,ke,et,Je){var It=qe();try{return at(v)(y,T,D,q,L,G,H,le,ke,et,Je)}catch(Rt){if(Ct(It),Rt!==Rt+0)throw Rt;$t(1,0)}}function oe(v,y,T,D,q,L,G){var H=qe();try{return xs(v,y,T,D,q,L,G)}catch(le){if(Ct(H),le!==le+0)throw le;$t(1,0)}}function de(v,y,T,D,q){var L=qe();try{return Va(v,y,T,D,q)}catch(G){if(Ct(L),G!==G+0)throw G;$t(1,0)}}function Se(){if(Ye>0){Ie=Se;return}if(Tt(),Ye>0){Ie=Se;return}function v(){var y;s.calledRun=!0,!mt&&(Ze(),u(s),(y=s.onRuntimeInitialized)===null||y===void 0||y.call(s),se())}s.setStatus?(s.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>s.setStatus(""),1),v()},1)):v()}function Ne(){if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.shift()()}return Ne(),Se(),r=A,r};function Y1(o){return rm(am,o)}async function K1(o,r){return z1(am,o,r)}const im=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["databar_limited","DataBarLimited"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"],["any","Any"]],G1=[...im,["unknown"]].map(o=>o[0]),nd=new Map(im);function V1(o){for(const[r,i]of nd)if(o===i)return r;return"unknown"}function F1(o){if(sm(o))return{width:o.naturalWidth,height:o.naturalHeight};if(om(o))return{width:o.width.baseVal.value,height:o.height.baseVal.value};if(lm(o))return{width:o.videoWidth,height:o.videoHeight};if(um(o))return{width:o.width,height:o.height};if(dm(o))return{width:o.displayWidth,height:o.displayHeight};if(cm(o))return{width:o.width,height:o.height};if(fm(o))return{width:o.width,height:o.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function sm(o){var r,i;try{return o instanceof((i=(r=o?.ownerDocument)==null?void 0:r.defaultView)==null?void 0:i.HTMLImageElement)}catch{return!1}}function om(o){var r,i;try{return o instanceof((i=(r=o?.ownerDocument)==null?void 0:r.defaultView)==null?void 0:i.SVGImageElement)}catch{return!1}}function lm(o){var r,i;try{return o instanceof((i=(r=o?.ownerDocument)==null?void 0:r.defaultView)==null?void 0:i.HTMLVideoElement)}catch{return!1}}function cm(o){var r,i;try{return o instanceof((i=(r=o?.ownerDocument)==null?void 0:r.defaultView)==null?void 0:i.HTMLCanvasElement)}catch{return!1}}function um(o){try{return o instanceof ImageBitmap||Object.prototype.toString.call(o)==="[object ImageBitmap]"}catch{return!1}}function fm(o){try{return o instanceof OffscreenCanvas||Object.prototype.toString.call(o)==="[object OffscreenCanvas]"}catch{return!1}}function dm(o){try{return o instanceof VideoFrame||Object.prototype.toString.call(o)==="[object VideoFrame]"}catch{return!1}}function H1(o){try{return o instanceof Blob||Object.prototype.toString.call(o)==="[object Blob]"}catch{return!1}}function P1(o){try{return o instanceof ImageData||Object.prototype.toString.call(o)==="[object ImageData]"}catch{return!1}}function Q1(o,r){try{const i=new OffscreenCanvas(o,r);if(i.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return i;throw void 0}catch{const i=document.createElement("canvas");return i.width=o,i.height=r,i}}async function hm(o){if(sm(o)&&!await W1(o))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(om(o)&&!await $1(o))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(dm(o)&&ex(o))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(lm(o)&&(o.readyState===0||o.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(um(o)&&nx(o))throw new DOMException("The image source is detached.","InvalidStateError");const{width:r,height:i}=F1(o);if(r===0||i===0)return null;const s=Q1(r,i).getContext("2d");s.drawImage(o,0,0);try{return s.getImageData(0,0,r,i)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function J1(o){let r;try{r=await createImageBitmap(o)}catch{try{if(globalThis.Image){r=new Image;let i="";try{i=URL.createObjectURL(o),r.src=i,await r.decode()}finally{URL.revokeObjectURL(i)}}else return o}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}}return await hm(r)}function Z1(o){const{width:r,height:i}=o;if(r===0||i===0)return null;const s=o.getContext("2d");try{return s.getImageData(0,0,r,i)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function X1(o){if(H1(o))return await J1(o);if(P1(o)){if(tx(o))throw new DOMException("The image data has been detached.","InvalidStateError");return o}return cm(o)||fm(o)?Z1(o):await hm(o)}async function W1(o){try{return await o.decode(),!0}catch{return!1}}async function $1(o){var r;try{return await((r=o.decode)==null?void 0:r.call(o)),!0}catch{return!1}}function ex(o){return o.format===null}function tx(o){return o.data.buffer.byteLength===0}function nx(o){return o.width===0&&o.height===0}function Fp(o,r){return rx(o)?new DOMException(`${r}: ${o.message}`,o.name):ax(o)?new o.constructor(`${r}: ${o.message}`):new Error(`${r}: ${o}`)}function rx(o){return o instanceof DOMException||Object.prototype.toString.call(o)==="[object DOMException]"}function ax(o){return o instanceof Error||Object.prototype.toString.call(o)==="[object Error]"}var Rc;class rd{constructor(r={}){w1(this,Rc);var i;try{const s=(i=r?.formats)==null?void 0:i.filter(u=>u!=="unknown");if(s?.length===0)throw new TypeError("Hint option provided, but is empty.");for(const u of s??[])if(!nd.has(u))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${u}' is not a valid enum value of type BarcodeFormat.`);S1(this,Rc,s??[]),Y1({fireImmediately:!0}).catch(()=>{})}catch(s){throw Fp(s,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return G1.filter(r=>r!=="unknown")}async detect(r){try{const i=await X1(r);if(i===null)return[];let s;const u={tryCode39ExtendedMode:!1,textMode:"Plain",formats:C1(this,Rc).map(g=>nd.get(g))};try{s=await K1(i,u)}catch(g){throw console.error(g),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return s.map(g=>{const{topLeft:{x:A,y:M},topRight:{x:b,y:S},bottomLeft:{x:_,y:j},bottomRight:{x:I,y:X}}=g.position,fe=Math.min(A,b,_,I),pe=Math.min(M,S,j,X),Pe=Math.max(A,b,_,I),ot=Math.max(M,S,j,X);return{boundingBox:new DOMRectReadOnly(fe,pe,Pe-fe,ot-pe),rawValue:g.text,format:V1(g.format),cornerPoints:[{x:A,y:M},{x:b,y:S},{x:I,y:X},{x:_,y:j}]}})}catch(i){throw Fp(i,"Failed to execute 'detect' on 'BarcodeDetector'")}}}Rc=new WeakMap;globalThis.BarcodeDetector!=null||(globalThis.BarcodeDetector=rd);const ix={finder:!0,torch:!0,tracker:void 0,onOff:!1,zoom:!1},sx={facingMode:"environment",width:{min:640,ideal:720,max:1920},height:{min:640,ideal:720,max:1080}},ox={width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",aspectRatio:"1/1"},lx={width:"100%",height:"100%",objectFit:"cover",overflow:"hidden"};var ml=o=>o instanceof Date,pm=o=>o==null;const gm=o=>typeof o=="object";var Hp=o=>!pm(o)&&!Array.isArray(o)&&gm(o)&&!ml(o),Pp=o=>pm(o)||!gm(o);function mm(o,r){if(Pp(o)||Pp(r))return o===r;if(ml(o)&&ml(r))return o.getTime()===r.getTime();const i=o,s=r,u=Object.keys(i),g=Object.keys(s);if(u.length!==g.length)return!1;for(const A of u){const M=i[A];if(!g.includes(A))return!1;if(A!=="ref"){const b=s[A];if(ml(M)&&ml(b)||Hp(M)&&Hp(b)||Array.isArray(M)&&Array.isArray(b)?!mm(M,b):M!==b)return!1}}return!0}function cx(o){const{onClick:r,disabled:i,className:s}=o,u={cursor:i?"default":"pointer",stroke:i?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...o.style};return m.jsxs("svg",{onClick:i?void 0:r,className:s,style:u,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("title",{children:"Camera Off"}),m.jsx("path",{d:"M3 3L6.00007 6.00007M21 21L19.8455 19.8221M9.74194 4.06811C9.83646 4.04279 9.93334 4.02428 10.0319 4.01299C10.1453 4 10.2683 4 10.5141 4H13.5327C13.7786 4 13.9015 4 14.015 4.01299C14.6068 4.08078 15.1375 4.40882 15.4628 4.90782C15.5252 5.00345 15.5802 5.11345 15.6901 5.33333C15.7451 5.44329 15.7726 5.49827 15.8037 5.54609C15.9664 5.79559 16.2318 5.95961 16.5277 5.9935C16.5844 6 16.6459 6 16.7688 6H17.8234C18.9435 6 19.5036 6 19.9314 6.21799C20.3077 6.40973 20.6137 6.71569 20.8055 7.09202C21.0234 7.51984 21.0234 8.0799 21.0234 9.2V15.3496M19.8455 19.8221C19.4278 20 18.8702 20 17.8234 20H6.22344C5.10333 20 4.54328 20 4.11546 19.782C3.73913 19.5903 3.43317 19.2843 3.24142 18.908C3.02344 18.4802 3.02344 17.9201 3.02344 16.8V9.2C3.02344 8.0799 3.02344 7.51984 3.24142 7.09202C3.43317 6.71569 3.73913 6.40973 4.11546 6.21799C4.51385 6.015 5.0269 6.00103 6.00007 6.00007M19.8455 19.8221L14.5619 14.5619M14.5619 14.5619C14.0349 15.4243 13.0847 16 12 16C10.3431 16 9 14.6569 9 13C9 11.9153 9.57566 10.9651 10.4381 10.4381M14.5619 14.5619L10.4381 10.4381M10.4381 10.4381L6.00007 6.00007"})]})}function ux(o){const{onClick:r,disabled:i,className:s}=o,u={cursor:i?"default":"pointer",stroke:i?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...o.style};return m.jsxs("svg",{onClick:i?void 0:r,className:s,style:u,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("title",{children:"Camera On"}),m.jsx("path",{d:"M12 16C13.6569 16 15 14.6569 15 13C15 11.3431 13.6569 10 12 10C10.3431 10 9 11.3431 9 13C9 14.6569 10.3431 16 12 16Z"}),m.jsx("path",{d:"M3 16.8V9.2C3 8.0799 3 7.51984 3.21799 7.09202C3.40973 6.71569 3.71569 6.40973 4.09202 6.21799C4.51984 6 5.0799 6 6.2 6H7.25464C7.37758 6 7.43905 6 7.49576 5.9935C7.79166 5.95961 8.05705 5.79559 8.21969 5.54609C8.25086 5.49827 8.27836 5.44328 8.33333 5.33333C8.44329 5.11342 8.49827 5.00346 8.56062 4.90782C8.8859 4.40882 9.41668 4.08078 10.0085 4.01299C10.1219 4 10.2448 4 10.4907 4H13.5093C13.7552 4 13.8781 4 13.9915 4.01299C14.5833 4.08078 15.1141 4.40882 15.4394 4.90782C15.5017 5.00345 15.5567 5.11345 15.6667 5.33333C15.7216 5.44329 15.7491 5.49827 15.7803 5.54609C15.943 5.79559 16.2083 5.95961 16.5042 5.9935C16.561 6 16.6224 6 16.7454 6H17.8C18.9201 6 19.4802 6 19.908 6.21799C20.2843 6.40973 20.5903 6.71569 20.782 7.09202C21 7.51984 21 8.0799 21 9.2V16.8C21 17.9201 21 18.4802 20.782 18.908C20.5903 19.2843 20.2843 19.5903 19.908 19.782C19.4802 20 18.9201 20 17.8 20H6.2C5.0799 20 4.51984 20 4.09202 19.782C3.71569 19.5903 3.40973 19.2843 3.21799 18.908C3 18.4802 3 17.9201 3 16.8Z"})]})}function fx(o){const{scanning:r,startScanning:i,stopScanning:s}=o,[u,g]=Le.useState(!1);function A(){g(!0),r?s():i(),setTimeout(()=>g(!1),1e3)}return m.jsx("div",{style:{bottom:85,right:8,position:"absolute",zIndex:2,cursor:u?"default":"pointer"},children:m.jsx(r?cx:ux,{disabled:u,onClick:A})})}function dx(o){const{onClick:r,className:i,style:s}=o;return m.jsxs("svg",{onClick:r,width:"30px",height:"30px",viewBox:"0 0 24 24",className:i,style:s,xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("title",{children:"Torch Off"}),m.jsx("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M14.516 15.158l.714.714-4.595 6.14-.75-.364L12.337 13H6.978L8.22 8.861l.803.803L8.322 12h3.036l1.793 1.792-1.475 5.16zm5.984 4.05L4.793 3.5l.707-.707 3.492 3.492L10.278 2h7.972l-5.025 7h7.149l-3.71 4.957 4.543 4.543zM12.707 10l3.243 3.243L18.376 10zM9.795 7.088l2.079 2.079L16.3 3h-5.278z"})]})}function hx(o){const{onClick:r,className:i,style:s}=o;return m.jsxs("svg",{onClick:r,width:"30px",height:"30px",viewBox:"0 0 24 24",className:i,style:s,xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("title",{children:"Torch On"}),m.jsx("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M13.225 9l5.025-7h-7.972l-3.3 11h5.359l-2.452 8.648.75.364L20.374 9zm.438 3H8.322l2.7-9H16.3l-5.025 7h7.101l-6.7 8.953z"})]})}function px(o){const{status:r,scanning:i,torchToggle:s}=o;function u(g){s(g)}return i&&s?m.jsx("div",{style:{bottom:35,right:8,position:"absolute",zIndex:2,cursor:"pointer"},children:r?m.jsx(dx,{onClick:()=>u(!1)}):m.jsx(hx,{onClick:()=>u(!0)})}):null}function gx(o){const{onClick:r,className:i,disabled:s=!1}=o,u={cursor:s?"default":"pointer",stroke:s?"grey":"yellow",fill:s?"grey":"yellow",...o.style};return m.jsxs("svg",{onClick:s?void 0:r,width:"30px",height:"30px",viewBox:"0 0 24 24",className:i,style:u,xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("title",{children:"Zoom In"}),m.jsx("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-7.46,0.5l-1.5,0c-0.645,0 -0.643,-1 -0,-1l1.5,0l-0,-1.5c-0,-0.645 1,-0.643 1,0l-0,1.5l1.5,0c0.645,0 0.643,1 -0,1l-1.5,0l-0,1.5c-0,0.645 -1,0.643 -1,0l-0,-1.5Z"})]})}function mx(o){const{onClick:r,className:i,disabled:s=!1}=o,u={cursor:s?"default":"pointer",stroke:s?"grey":"yellow",fill:s?"grey":"yellow",...o.style};return m.jsxs("svg",{onClick:s?void 0:r,width:"30px",height:"30px",viewBox:"0 0 24 24",className:i,style:u,xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("title",{children:"Zoom Out"}),m.jsx("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-4.96,-0.5c0.645,0 0.643,1 -0,1l-4,0c-0.645,0 -0.643,-1 -0,-1l4,0Z"})]})}function yx(o){const{scanning:r,capabilities:i,onZoom:s,value:u}=o;if(!r||!s)return null;const g=(i.max-i.min)/3;return m.jsxs(Le.Fragment,{children:[m.jsx("div",{style:{bottom:130,right:8,position:"absolute",zIndex:2,cursor:"pointer"},children:m.jsx(mx,{disabled:u<=i.min,onClick:function(){s(Math.max(u-g,i.min))}})}),m.jsx("div",{style:{bottom:180,right:8,position:"absolute",zIndex:2,cursor:"pointer"},children:m.jsx(gx,{disabled:u>=i.max,onClick:function(){s(Math.min(u+g,i.max))}})})]})}const is={fullContainer:{width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},innerContainer:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},overlay:{position:"absolute",top:0,right:0,bottom:0,left:0,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},borderBox:{position:"relative",width:"70%",aspectRatio:"1 / 1",border:"2px dashed rgba(239, 68, 68, 0.4)",borderRadius:"0.5rem"},cornerTopLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,left:0,borderBottomColor:"transparent",borderRightColor:"transparent",borderTopLeftRadius:"0.5rem"},cornerTopRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,right:0,borderBottomColor:"transparent",borderLeftColor:"transparent",borderTopRightRadius:"0.5rem"},cornerBottomLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,left:0,borderTopColor:"transparent",borderRightColor:"transparent",borderBottomLeftRadius:"0.5rem"},cornerBottomRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,right:0,borderTopColor:"transparent",borderLeftColor:"transparent",borderBottomRightRadius:"0.5rem"}};function vx(o){const{scanning:r,capabilities:i,onOff:s,torch:u,zoom:g,startScanning:A,stopScanning:M}=o;return m.jsx("div",{style:is.fullContainer,children:m.jsxs("div",{style:is.innerContainer,children:[m.jsx("div",{style:is.overlay,children:m.jsxs("div",{style:is.borderBox,children:[m.jsx("div",{style:is.cornerTopLeft}),m.jsx("div",{style:is.cornerTopRight}),m.jsx("div",{style:is.cornerBottomLeft}),m.jsx("div",{style:is.cornerBottomRight})]})}),s&&m.jsx(fx,{scanning:r,startScanning:A,stopScanning:M}),u&&i.torch&&m.jsx(px,{scanning:r,status:u.status,torchToggle:u.toggle}),g&&i.zoom&&m.jsx(yx,{scanning:r,capabilities:i.zoom,value:g.value,onZoom:g.onChange})]})})}function yc(o){if(o===null)throw new Error("Canvas should always be defined when component is mounted.");const r=o.getContext("2d");if(r===null)throw new Error("Canvas 2D context should be non-null");r.clearRect(0,0,o.width,o.height)}function xx(o){const{onScan:r,constraints:i,formats:s=["any"],paused:u=!1,components:g,children:A,styles:M,classNames:b,allowMultiple:S,scanDelay:_,onError:j,sound:I}=o,X=Le.useRef(null),fe=Le.useRef(null),pe=Le.useRef(null),Pe=Le.useMemo(()=>({...sx,...i}),[i]),ot=Le.useMemo(()=>({...ix,...g}),[g]),[st,He]=Le.useState(!1),[mt,Oe]=Le.useState(!0),[We,Xe]=Le.useState(Pe),Bt=(function(){const Ie=Le.useRef(Promise.resolve({type:"stop",data:{}})),Re=Le.useRef(null),Qe=Le.useRef(null),[K,me]=Le.useState({}),[_e,Ke]=Le.useState({}),Ge=Le.useCallback(async(Fe,Mt)=>{if(!window.isSecureContext)throw new Error("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.");if(navigator?.mediaDevices?.getUserMedia===void 0)throw new Error("this browser has no Stream API support");const ft=await navigator.mediaDevices.getUserMedia({audio:!1,video:Mt});Fe.srcObject!==void 0?Fe.srcObject=ft:Fe.mozSrcObject!==void 0?Fe.mozSrcObject=ft:window.URL.createObjectURL?Fe.src=window.URL.createObjectURL(ft):window.webkitURL?Fe.src=window.webkitURL.createObjectURL(ft):Fe.src=ft.id,await Promise.race([Fe.play(),new Promise(Wt=>setTimeout(Wt,3e3)).then(()=>{throw new Error("Loading camera stream timed out after 3 seconds.")})]),await new Promise(Wt=>setTimeout(Wt,500));const[fn]=ft.getVideoTracks();return Ke(fn.getSettings()),me(fn?.getCapabilities?.()??{}),Re.current=ft,Qe.current=fn,{type:"start",data:{videoEl:Fe,stream:ft,constraints:Mt}}},[]),rt=Le.useCallback(async(Fe,Mt)=>{Fe.src="",Fe.srcObject=null,Fe.load();for(const ft of Mt.getTracks())Mt.removeTrack(ft),ft.stop();return Re.current=null,Qe.current=null,Ke({}),{type:"stop",data:{}}},[]),qt=Le.useCallback(async(Fe,{constraints:Mt,restart:ft=!1})=>{if(Ie.current=Ie.current.then(fn=>{if(fn.type==="start"){const{data:{videoEl:Wt,stream:Ct,constraints:qe}}=fn;return ft||Fe!==Wt||Mt!==qe?rt(Wt,Ct).then(()=>Ge(Fe,Mt)):fn}return Ge(Fe,Mt)}),(await Ie.current).type==="stop")throw new Error("Something went wrong with the camera task queue (start task).")},[Ge,rt]),sn=Le.useCallback(async()=>{if(Ie.current=Ie.current.then(Fe=>{if(Fe.type==="stop")return Fe;const{data:{videoEl:Mt,stream:ft}}=Fe;return rt(Mt,ft)}),(await Ie.current).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")},[rt]),Ve=Le.useCallback(async Fe=>{const Mt=Qe.current;if(!Mt)throw new Error("No active video track found.");{Fe.advanced?.[0].zoom&&Mt.getCapabilities().torch&&await Mt.applyConstraints({advanced:[{torch:!1}]}),await Mt.applyConstraints(Fe);const ft=Mt.getCapabilities(),fn=Mt.getSettings();me(ft),Ke(fn)}},[]);return Le.useEffect(()=>()=>{(async()=>await sn())()},[sn]),{capabilities:K,settings:_e,startCamera:qt,stopCamera:sn,updateConstraints:Ve}})(),Pt=Le.useRef(Bt),Me=Le.useRef(j),Ue=Le.useRef(ot.tracker);Le.useEffect(()=>{Pt.current=Bt},[Bt]),Le.useEffect(()=>{Me.current=j},[j]),Le.useEffect(()=>{Ue.current=ot.tracker},[ot.tracker]);const Ce=Le.useCallback(Ie=>{(function(Re,Qe,K,me){const _e=K;if(_e==null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas is always defined.");const Ke=Qe;if(Ke==null)throw new Error("onFound handler should only be called when component is mounted. Thus video element is always defined.");if(Re.length===0||me===void 0)yc(_e);else{const Ge=Ke.offsetWidth,rt=Ke.offsetHeight,qt=Ke.videoWidth,sn=Ke.videoHeight,Ve=Math.max(Ge/qt,rt/sn),Fe=qt*Ve,Mt=sn*Ve,ft=Fe/qt,fn=Mt/sn,Wt=(Ge-Fe)/2,Ct=(rt-Mt)/2,qe=({x:nn,y:xn})=>({x:Math.floor(nn*ft),y:Math.floor(xn*fn)}),Vt=({x:nn,y:xn})=>({x:Math.floor(nn+Wt),y:Math.floor(xn+Ct)}),Ft=Re.map(nn=>{const{boundingBox:xn,cornerPoints:Qr}=nn,{x:wr,y:Un}=Vt(qe({x:xn.x,y:xn.y})),{x:zr,y:yr}=qe({x:xn.width,y:xn.height});return{...nn,cornerPoints:Qr.map(Sr=>Vt(qe(Sr))),boundingBox:DOMRectReadOnly.fromRect({x:wr,y:Un,width:zr,height:yr})}});_e.width=Ke.offsetWidth,_e.height=Ke.offsetHeight;const En=_e.getContext("2d");if(En===null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas 2D context is always defined.");me(Ft,En)}})(Ie,X.current,pe.current,Ue.current)},[]),{startScanning:xe,stopScanning:Tt}=(function(Ie){const{videoElementRef:Re,onScan:Qe,onFound:K,retryDelay:me=100,scanDelay:_e=0,formats:Ke=[],allowMultiple:Ge=!1,sound:rt=!0}=Ie,qt=Le.useRef(new rd({formats:Ke})),sn=Le.useRef(null),Ve=Le.useRef(null);Le.useEffect(()=>{qt.current=new rd({formats:Ke})},[Ke]),Le.useEffect(()=>{typeof window<"u"&&rt&&(sn.current=new Audio(typeof rt=="string"?rt:"data:audio/mp3;base64,//PkZAAhghE0AKToAJra/n0FQygAAAGIkYJgmCYXBMAAGCTJz3zhCEM//z//1hz//8MMMMN08ssV6e5DDWIQreAgCvFKy8bXgIKMkUDDBgzJwIBtkRMQAocxIFdxghQGKDoEziAzQxOBOdH92i/iGi+zDCAEIX46a73HrSybZw1x3JZjXp7dSNy/P68rjcbt7p7fakMP5LVMyzCaj1pjvejYYAIDgDGzECjEAk1Jl3559HIon8hzlfPVTCvGJZzfcKSxXfyMWM88//9VKSxXdtnb9vomOuuRyiWVYbf+X8zp6fKGHIdycuWMMMMMMKSnp+6wsYc/9f/7z7rPPWHN556p6fP8MMMP///PPP/7+GHK9PT6p7f/unldP2np7YeHjweiYA4GLNAgAiI7u57n5//oc5/yfk6znOcPhwOBwggHCMpA4HA4KEyHOc5znO+hPIc5//+fqJh8XQPh90JU5xQinOf//87/zvP+ggAYuhCKHxdA+Hxd0EA4KKHA4ciB3kOXfXB/gmf8p/B96lAMKAgAADU+BujARHgwdisgHMfAUHAiceBg4ASBgZBiBIBH4ZaHOJsLhf8R+HYEciIgYSwj/+Bi7EqBh+AcBn5P6Bh4TuBmrAMBiZH7gaLEWgew//PkZFMlyek60MpYAShzqqZhm6gCUWeEUWAewEWYGN4X4GDEPwGE8S4GDoOIGAYKgIQOkz//gGARAUB+CwGxTwMAACAEgyAwdAlAxKhzAxXiZ///AxcEwAwJjDAziCAAwQgdAwRgdAsJQDAmAcGzYDwAhZIAKAcIQB4GT9TQMJ9/4Gi1Fv/AcAYUqKBAwGgNAwVBAAwGhwAwdBlAxFg1AwlgzAwNBuAkJQDBgEEDEqGECgChFgBgL//CIswYYH//+HKCpk4K0C9AaKKCAOBeMcR4X9C44BwABCgGAsGYCgTwHAcAwXAiAwSAQV///CJP9lwMBQAwAAAWGo5lVLCcaeneVhJAVGai3//ioaUEf//gaTAYGCj8BnEwfrIqDcsIQb/vmhU/8fAs0G8YGGwKST8Igj4GCATipksVzY8p//90FWJwh45AkX//4fCF9wMEgkL3uQc+gbGJ8t4MBAMBP/hEXf9FRuWBcAfIFjYzQdoLCBwh7IWVlxaX/w8oMCP/+EQT5poGB1Ir90DhiV6af/jFYBpT2BgoQyyt2M0ToBdEaZyzt8nTo3xdNDCTSd//o6F06CjooxRr4jVF/0bOKD6OMUNDRxiMUVFR0FFQPhGXRjDpr4MAEA4wIQUhYOIw//PkZE4nrg08sOx4ACQ0CopD2aAAlwTTBxQeMcwd8w8gZTAgABXwGABOkzpI0wAQAExnWfP4x8ZjKunWdZ1o1Qe6lFGKCNULORQCELAAPnRUf/GIx/0FHGfo3SdZ0qP2cukXKLlRtBKFgAQwCkwJgFRYBEEATmDsLSY2QiQYCEnEra+UZo6F1aKMRr6GhoaP/+j//ov+i+hjLqBgMkYoqChoo1GqCjoY06TpRqjjLOYzRRmMuizmgdKhdF8kjTAAAPMCwGswzglgwAJfzqxmioKH/////////////+ijLOAwFmN0f/////////Q///8ZjP/9DGYyFwIDBeB3MA4AlBWidKM5spykAUAQOCakK+udGqN8VDYjTRuN//0bVX//6Kio4xQFv//nf//kKOoAEIB6SY6hcxenp85///4/DEPf/84Xvl4vF4dwtxfEJgCYQHMSgKCROp4+fn////L4tQf0unz89OecLxeL0ul09y6enzp4dIhKAQFA5hKfLu1nU7/Wr71rRKJUBQSUVt////l08GUPVWgAAYAeNKsxbQNAAhQx3/oKGMM6dZ1Yy6sajMbfKio7lNcv0sScZ47lNcw32ekVFMP9fp/f+mklI6at6u/dBMQuW6y+C5BcgwAA//PkZEomGg1HYGe0riWsCqbEwiY0BJFJMxrCcxGgQ2VK8xxCF1wsABgQBBgQBAYAFCkYCgALkK4fJ00E5ctJN1Uxy5au3XoGcM4dSN0EYZwzhW0WCh1PZwzhnFFQxtnbO2d0Kt6CdXbruggkTEX5Rs4TEQUVsdVXaCcuWXIBQUGmwmgoAGcJiM4dSioHQdBnEY+hjcbov//jcb/43G43G/jCRibfxugdBnDqULO2duvQumztncbo4xGKKNxugooxGIxQULoOgFgUMTA/jbrxiMDmETL+eLhcPThzOeeOZfL5fIcBYuXD/OHv8t//LJFxjxQYHHKDGFkZMtlmKM0RgQfbVtxFIHbQBDRuzRguEI1c9XZ/rWmrZfVU3Oc/9utNNygRQkCoHlAYstNN6DJ1IINpoINppv+WG/+g2mmnUmmmpBAoJIJhnwB5xkymn606Df/t000xhU03UXC5Ol8uFyXy+Xy/l8v5w4cLk4XAvwAYUvl/QL5fTdlKZkEEEEGumaKaX00zIOemf6CH///ywI3LKpiQ2Ef4xYWMSDyI0XwzikpL0ajVHZ3j9DGIjeuXcNfjn96/S/TUz/X/vX////5K/r+v7Jn+LlAoGZOIQIwMKBQM/yppKYURmhGZkR2b//PkZE0mHg1HEG8wyiD7mlwAyDU8nJHi5htakZmZGNiRcpkJhBmUmZYQcM1VDEEBggNDV/ASEZRYKFZIhkXKLlKmk7IVTKmZNJ5KhiqVUqpX+k7+qlVKyV/ZIqZDFDWTJlFyi5TJpKhiXKBQyZzIS5JhBoayV/AQWVpGWkcYTV5O/rIVSv8/0nkr+v6/vyR/X9f1/ZN8kf5/n99/n+f5/lTKmf9/mRP8yFUqpWSv4yJUqpX9kj/MmZNJ5K/z/P9J5P/v6yFUz/CEoywgUMqZkz/FssECIsVq0aPRrRRatFFFykQZJ2Ukl///5KjmksOaA7ALROJLDnEsLbq3GTMVrwb/0dGzmM0DlfBlHQOmrdR0MYi92TX6b/cmDHLclyUVYO/4O8sFTKFTKFf8yhUyhUyhXzKlDKlCsr/+ZUoVlSsr/+ZQqZUoZUoceMfcoZUoZUoVlfOPGcmDHKcpynKg9yXJcr3JclyXJclyYO+DXJclyfgxFZVb3KcqD/g2MxzsY72L9LubPR0dCyf5K5NNd+Tv9GXRdV0XJclyfcl/n+k8kf6SX/iVynvXf///4Mg/1OkxguYzmM5jMcLHMxwwGhgNCwXMLAcwMXTLi1MD7w7tmTdBvMmE0xQFzCwHMDAd//PkZGMpigkmAGOUvCfTgcgAuC+ITswMFzC4oMLhYMByn0xvU+p9Tr0xUxf/0xv///1PBYDhgNTFTFTGTGTGTGTGTGTGTGC4GTFMDAcLAdMVMVMULAcMBpgYDhcDGFwsYXFBikLGFwMGA4MBxgcDKfTEMUoAx2BisD+mKp5Tv1OkxkxkxkxkxkxkxkxlO0xVPJi/6nv////U7CwHTFTFTGTGTGTGU+p71PpjJipihYDpipi/6n1Ov//C4GC4GTGTGTGTFU8WBSZdLhWB//yKlotyLZFiLf8tyyRUipFSKkVGRBZQMiWC3yx//wxUGKsSvDFQGHUAL3QMsHDFIYpCYy2Bmagy6BjLgy6Bh3od58DCLAizBgRb+EQiyEQiwGBFuDAi3/////20QqSBJf/qcumv/////wMZdGXAYMu1gYy6MuBEZdBgy4BjLgy6BjLgy6BjLgy6BjLQy6DBlz2cJDLgRGXAMZdGXAYMuhMZcCIy6sJGaoGMuppwNRl3WBjLgy63wiEWAwIt/+EQi0IhFsDCLAi0GBFkGBFgMJCqaqYAgAYIhBBvwf7kwcqRq7V3IctacvlN6NxqgooxRRuNRiijEZjMGRuMvz9FGozQ+1X2qe1T1S//+VhaWAtKwtML//PkZEIkbgcaAHc1xCJrjeAAtfuUAtLAWf///mWePH95ZFgsyssvM88+jzO6K+z7OM48sH+WDiweZx5YOK+zxWLGJWsa6xadAv02fTZLSpsFpvLSga0tMgWgUgWmwgUmyWl8tMgWWmLSoFJsoFlpSwsmyBg4HhEdgwHAYPBwGDgeBg8HwMHg4DB4PBgOAwcOwMHLwDn5lAwcDgiDgYDwMHA/4MB3//+EQeDAdwiDwYLPhEWQYLODBYERZBgt8Ii34GLBaB5pfAZ0FvEAQ/UfwxULlx+IXx+8f5CELH8fxKhAIDFoHBEDRc3////gwHgaRXgMHYMB2EU/gwZ/gYbw3gY3QbgYNgbgYiAbgwN3/+EQbBEG4MBuDAbAwG4RBtAwbg2////+B9B6F//////////hEdD//////////8DRahEQGCInMNg3LBElgNjDciCwG/lgNiwGxWG///mG4bf/+WA3Kw3KyIMNw2Kw3MNg3MNg3MNiIMiQ2OK0xMiA3KyJLAEZgRARmBEDEYFwBBgEgEeomowol5YAJKwCDAIAJ8sAE+gGBgCJYAQUZ/13LubMu5dyiYOAhKwEFGf9AOoz/g4CFAIol/lgAjysAgsAElYBP////lgJksBM//lgRUxF//PkZGApggsIAHt2wiNLoggAqCz8RFSwIqYioipkjEjHCCSN/+WJg5iYOYmPK5krmTmZk5mZ8sTJYmf8yJiNiIisi/ywRmRkZkZGZGRmRERkREZERGRERkREZERGxEf///hETIMEyBiZEyBiZEzwiJgDEwU4DV2gQGFOBgmP8GAiAwRAiBgIgYCIGAi/4MBHAwRgjAwRgjwMEQIgMcgY8DBGCMDBGCMDEyJn///+BiYQIBlObj4eYLIwsjAOBGFkYBoEQ84eULIw88LIA88PKHnw8sPKFkeHlANAiAaFUDAiMYPIHmDzBZBhZB///8GBOA1sH/Awni7AwnhPCITwYE/CKzBgt8Ig8GA4Ig6EQdww4Yb+F1sIgtwYCwGAsAwWAsBgLAYCwDBYCwDBaHUDF+VEDKgC2BgtBaDAWgYLQW////gYLAWQMFgLAMFoLcGAt////4RMABmBSj4NgwMOGHBsHhdcLrwbB4XXC6+F14YcLrww4Ng8MOGHBsHww4Ng8AUC4AoMQMC4fgw3wutV4QIsAgFYIBWCCVgHeVgHeWABCwAIVgH+YBwB5aRAstKgV6Ba1oMg9avtUVN/qdLWciD/cqD3Jg6DFPuTB/////lYAn//mC8C+YLwL5gvgvGC//PkZFEpLgMKYXt2xB5LogAArbdc+C8VgvlYL/mC8C+YLwL5YBfMNgNkwXixDWoHPMc4VUxVA2TBeDZPYXzXl815fK14sLxYXvK1//NeXzXl815fMtdDLSw3UsMtLCstMtLDLSwsFhWWlgt//8sFhW6f/////+WF7zXl8sL5ry+Vrxry+WF/wMLwX4MC+EQv/AwvBfAxsjYAyqpKA0lpLAwvBfBgXv///4RA2DANAYGgNgYGgNgYGwN+EQvf/BgXwYF//8DC+F4Dd6NgGBf4AgFwbB0MMF1wuuDYMBsGwusDYOBsHA2Dvg2DQuuDYOhdcMMF14YYDGYDEGwfhhgbB0MN///4RBaEQWgZByoYRWYMFvwiDsGwaF1gbB34GDwdC64XW/w1aKxDVgatir4YcLrQbBwNg7////////////+ESfgZPyff/////////4MFmBvvMAERZ8CC5adNj02E2S0qbCBSBZaYtN///oFlpU2QMXIFAYuQK9AtAo7IxLTpsIFJs/5aZRxQawaxGfIg9CsrI+PUqkWdOHp7ODsOl6cOHZ4dsulfLI9/8BAAgMBACsBLACVgBjoAWAE5OTM6WDAR0zodMdHCsJLASWAjzCQgsBJhASWAjysI8wkJMICU//PkZFkeqgcaYDd1th6DogAAqCuIxQwtDA5MdMULgyY6YqnXqdep5TpMdMVRNRL/UT9AN6jCiSjKAZRNRhAMomgFQDfCIJwYCQiCAiCMGAkGAgDBJUA3eVAMEgj////8SrDFIYqh5g8kPMHkDzB5OFkYeYPJ+HlDzB5+AYVQDibCyIPLLEZIsjIliWS0WywWyyWuWCyWJaLZbLJYDHgLAItFvy3///4eYPKBlQTh5QYEODBb//hhoNg7/C62DYPFUKwKsVgNWBq8VkVcVkVUVYrH//hGff/8Iz8GT7//////wiX4ML3gwvgwvf4ML3gZeqoHVGyBl4vgZfL2F1oNg4Lrg2DcLrg2DQw0Lrhh8Lr4YcMNBsGhdcGBcMOGGAFGAGMQsF1guuGG4XXV/4uQXOLmF1kL/8lCXkuSk4O8/FzHzuP0hIucf/CIFAMCgFPgYFAKAwCgGBQCgGHYO4GBVM4GgQI4RCMEQKQOtQjUI1CNcI14MqDKwDIAGQDzh5wsjDyw8uHmDzYeUPN+DEYRRhFEIowYgDQgIhWDApgwKAwKQYFAYFQMKkYDOxHAzsRgMKBUGBX/h5v+Hm4ecPNh5A8wBwjhZHhZAHlDzBZAFkAeQPKHnCyILIAsih5QsgDz//PkZLQgIgsMAFp1xCGLogAAA2rkB5w8oeYLIQ8kPMHkCyGHnAMKoGmAgFkUPMHmDYAtfHPHNkr/JYl8c8lCWHPHMkqSo5onMAkBDnfJX//8IgDBgBhEdAaxSQMHUGAEIgAV4risCcipBOMVRVBO////hEvAxsAwvf////8MPDDww4XWC64XXDDww4YcMPC6wYb/wYGgiGwMplMDYhTCIaCIaBga/////8GA+EQdgYPB4MB4GDwdhEH8Ig8Ig8GA6EQcEQf8DBxlBjoAweDuFwgCQXiL//iLiKCKCL4XCiKRFwEgoRT4iqpMQU1FMy4xMDCqqqqqqqr////xuDd8fv/DVwrArEIg6EQdhEHAYPBwMB+ERYBi0WAwWAZ0FoGLYOB+JfgZ0FoGdBaDBYbn+WHm9xW7/Nzzc83PLDzc8reWlA7S0oHamx//6BflpU2C0qbBaf/8yk/ysn+VkMhTKQrKVk8yE8rIVkKyYsAn/5WC+YICmCApWCGTkxtKMcVWlgFMEBTBAX////0C0C0C/////////LTFpvTZLTlpv/0Ci0xaYtOgWmymyWkAxcWmTZTYTY8tMmygUWmLTIFpsFpv9NnywLmLCx2RgWmQKTZ98UjnzZ1/++D4M6/////3//PkZOgjIg8IAFcbxCaTogAAoCuIzfJ8vfJ8Wcs5fBnD5//++L5f////////6nCKv//+o0o0FUYwqDNGCwgUMKC0VVGkVv//4Yf8LrxVCriqDVoasDVuKsNWw1bisBqwVkVkVX//gy/4YYMMGGhhgwwNg4LrhdcLrAYWGAA0zBsH4Ng3C6/////4MAoGBQIDAKBgUCAwCgYEAsDAoEAwKBAYBYMAoGBQIBgUCYGBQIBgUCwiBAYBYMAoRAgRAoGBBMBooCAYFAkIgTEUxFv/EWxFxFhFoi0LhQuFiLCL/EWqTEFNRTMuMTAwqqqq//////8TWJriV/hERAwRgYiEYGIhGBmIRgYiEYMEQMEcDMSiA1GYwMR+UDMTkA7KIgMRGIGGM0SIrRGjRlhEV4jxov8rR/5YRFhEdQSViCsR5iRJWIKxPlgQYgSViSsR5WJMQJLC78IiKERF4REeERGEREERHwMRGOBmIRhERhERAwRAYiEQGIhGBmIRAajkgG5TEEREDBHwYIwYI4REXCIV/4MCmDArgwKAYUO/gYVCkGBUGBTgYUCsGBUIhUDCoUCIVBgVBgVBgUhEKQMKhUDCoUBgVAwoFAYFcGBQDI6oA5+qQiFAMjBUGBXCyEPIFkOH//PkZPMj6gr6AFdVwifkBdwAoC2Ilh5/8PPh5Qsih5IeUA0TAZrE8PP////wMRiIIqID8piAxEIwMxCMDEQjCIj//BiIDRo8Iogii/4MKwYVhEoESkDEiIGJEgYlfBgmDBIMEAYgSBiBIREAwSERH/8I7wPfuCO4I7v/8GBvAw3Bv/////gwN34RBuBg2BuBg2BuBg2BuEQbhEG+EQbAwG4MBtwiDaDAbhEGwMBuDAbAwG4GDYG8DBsDcDBuNwDRWDcIg2AwbA34RBv///CINvCINgMRIN/////wiG4DDeG+TEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq/zB4OLAP8rBxWDisHlYOKxb5WLTFgsMWiw18LDOnjPxZoxadDOgsLAtLAbKymVhsrDZWG/LAb8w2GywGysNlgNFgNGFwuBQuWnTZLToFFpisLJsFp0Cy0voFAQLFZkMCAQwIBCsC/5WBCwBCwBCwBCsCeVgUwIBCwBDEwEMCAQrAhgUClgCFgTlgCGJgJ5gQTGJwKWAKYFApgQTGBQL5kY0HMjQYnAhWJvKwIWAIVgQrApYAhWBPBgECIEBgE/8IgXhECQiBAMCkcDEwEwMCAQGAQIhoIhsGBsIhvgwN//PkZN4irgr2AAOVqiUThegAnCtMgwNwiG/8IhuDA1hENhENgYbKYHb2IBhoNhENAwN////8IhsDKZS////8IhuBhspgc0KQRDWEQ3///CNf4GAIMDAwgAwAAwhAwAwYAIgwiHBgAMAYGAAGHv///CIBqBqESDEIgRYGoGHBiDEIgGoGgMAYgxgwgxCIETwYFYMCoMCuDApBgU8DCoU//gY3G//wYFOBhUKBEKQYFfBgV8IhSEQoBkYK8IhT/wMKhXBgUCIU4RCoRCvgYVCsDCp3A1SqAYFAiFP////gY3G1TEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVgwCAwCBEC///////8IgUIgWEQIBgUCAwTQMCAQDAoEhECAYFIwGaRMBotWAasdwH/KqBmhFgaKI4GRgKVpjCBTCBPMJHNMFMIFKwnlgJ5hUxhUwGWlpAMuMuWLTFpvQKQLQKLTIFJsoFIFFZb/8woQwoT///MIF8rC+WAphAphAppgpYClgsmwBC6bHoFFpUCi0wGXFguWCwFLgUsgX6BZaVNj0Ci03//+EQKEQKEQLCIFAxMBcDAgFAwIBQYBODAKBgUCAYEAuDAKBgUCAYFAgRAngwCgwCwiBIRAmE//PkZN4iogj2AFdVxiUrhewAhOkwQIBgQ0gbOI4GRhOBiYCgYEAv////CIFAyMBQYBf///CIF8IgUDAgFBgEAwIRwMCCcDEwFAwIBf///CIEQGMDGEXCKBpCIDCEQDCAsYInDFQMMAuYSoTQMVfBlf//+DKfBgAiGDAQMIMIgCIQYADAEGAgwP////8ItgNu2/8DAAAiABgHhECBgQGEQARA8GAeEQIMABECEQIMAwYBBgCDAARA4GAAgYACDAARAwiAgwDhED4RABEBCIGBgDoH2dgZwCBgAP//BhX/+DCiTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqF1ww////////hdeGGDDBhwjeF102E2fTYAowMLjE0zTDfyyMYjEDJTwMLSwFi0/gQLoFIFpsegWmyBQsWlQL9ApNgtIWn8tMgX6BaBX+WmQL9Nn02f9NktIgUgWmwWl9Avy06bCBSbJaUtImyWkQKLTIFgYWoFFpAKFwMLzZgwAwvLTIFlpU2fQLQK///4Yf4YaF1sLrg2DAuuDYNDDQw4NgwLrhh4XXC64Ng3C60MNwbB4XWC64YcMODYPCJYDlMQBlwRLg2DOF1v/////PkZM0eKgz0AE+UuCnLFfAAk3Fsg2DAYX/ww//4YaGGDDhdbDDACFwMuXA2DADlygusDYOBsGhhv//wNU/CKQusF1oXX+F1wuuGGC6wXWDDBdbC6wXXhHv//4AHIFgC0BZAA4Ba4FkADwFsC3AtQAOcC0BYAtgAcAA9+BYAsgW4FvgWOABwC1oq+it4RT0VVG0VFGkVywo1/RWU4U59TlFb1GvRX////QK9Nj/9AtNn02fTY9NhNlAr/QK//TYTZLSJsIFemx///oF/5aZNj02U2C0yBaBfoFAS6bKBfoFVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQiA8GAO/4RAf//////wYA4GAO+EQHAwB4GDoB4GA4HQRB0BhlDIBpEAcBgPDIBgPAeDAHIFAYuLTpspsJsFpi0haRApAtAstIYKClgF/ysF/ysE/ysF//LAJ6plTlYC1ZUypmqtWVK1VqyplSFgBaqqcwAAVIqcrEBAAKmMBERCQhwD5iICIQEyABMAABBVGXF4gIA4DLAAWAEQgLVSsBaq1ZUv+YKClgELAJ////5YBP//LAL5WC+Vgn+WAX/LT+gW//PkZMIhLgrsAFt1yiD7FiB6A9qwmwViybCbCbCBSBabCBSBabPpsegWmwWn9ApApApNgCGBmEwWlLSpsf////hEHgYOB3////4GDkiBxMHhEdgYOB4GDwcBg4HW23gooFYHd/+BnAz8O8Vv//FaBm4rBWh38es2zbAtD1m2PVBqBrBqBrAF7AF3/5el84MkuHTgyy+dL0dRnEajMIyOn8RsZ5HGG/kbIpHIkYUiD0y2WctlZaWSwrKx6FZbxnL54ul04eLhw9Ol84dl86cOHT3Ipb5Z8qKpVx6/j0EkLctVTEFNRTMuMTAwgWQLQAHgLf/////4Fn+EQESEcIgInCIRW9TkrCzH0YIjjWtI+YeCD0woLCBQwsKRWUaRVCBZFZRtRtFRTlTlThRtAr0C0C//02E2fTZQK/0Ck2f9TlFRTlTlFT/9TlFVFRFb/9ThThynIQbWkAREue5S11rKdlkDEVABh61ExYPU+tOD4MQgcn4iwigivxFRFoXDcRQLhoiwioXCeAkFBcNiL8RURQBIKEVEWiLBcKIqIpEXC4QReIoIpCIKAQMxFAFAsIuIr/4YYLr//ww4XWBgwC64XX/hhgw3hhwuv8MNhhguvhdcAUYgaYTAAoWDDg2DQbBg//PkZPYe6gzuADd1uDKsBhBAe89cYYdGjtDT2hDmlD2leaOv9oX0OX/0NNLplNf8ewakNWGrTfTRpphNJtfaeh7T1/tStdtTpqN532lpX/1/kmQ5eaf2hoaV9paGleJAvd0rer2pWu1ar2vk56vVrV5Hj1Nop+/lfv5Zpkem5kX/2vtata2rq783nbvtbW6VjW6a2rq13+rO6VysV58K7tbp0ru6Vrtqa1a67tr6sau1ulYrnfa2v927Vrt21NSuN5X927/D4diAQANh4gEIfxB+IQG/D/4gDw/iGIRD+HRATEFNRTMuMTAwqqqqqqqqqqqqqqqqqiIEK/ititFX///8VcVuK38VsVhXBOQTpq/qm8QCAcBmIxgdfFZCHECpxFBFAuFEUC4cLhsRTEVEUDVoDQD+KrFYirFX+KwKoVgVUVUVeKwGrhWRWBViqFYDV4rMViKyGroauBg/A0YThVgNAEVQqw1fisis4quKxxWYrAatxWIqoqg1dFYxVxWIrAavAaAArIrAqoqhWYrIqvxWMVYrARCADhcKoVYavDVgqhV4qorIrHFWKuKxFViscVUVYasAaAfFY/4YcMNhdfwuuGGC64YfDDA2DwusANygbBwAxhAECwNg8MOF1hD4//PkZOkc4g7yBjd1sDNkDhgqYwtcYoUyiQ0NCkxQ0NCQkSIbGKIyRGEo5mUaNEhGKEHMmaGhI0UokORvMmZmZSZSiMZQkRnKKZkzRoSNCQpQ0NEZoaNFJkhh3KOUJEhIcoSJCQkIzlDlEjMDMyMpQ0JCQzNCRGaNCRISEZoZihoaIwlEHKNGiMzFEjRmSIwlHMyZmcyiGyMxRyhIkIxRSZokSEYGBkiRojAPESNGjQxvKHMmMoSKTJCQkIwlFKLDYWGhoZhYWAAUGBsAwsMDYUAcK4XDPhQVwwLAH/DfgHC6TEFNRaqqBgjwYI//wYI/8GCL///+DBFhERgwRcIiPAzGYgMRKIDcskBgjAxEIwYI4GiRwNEjhFH4MRwYjA0aOEUf8Io/BiLgxGEUYRRQij/BiKDEYMR+DBGBiMRQiIgYIwiIwYIgiIgMRGIDUSjhEReEREBiIRAwR/wYI/8IiP4MEcGCIIiOERH8GCIIiMIiIIiODBHBgjBgjwiIoREcIiOEREDBFCKiAxHJcIiMGCMGCLwYI8IiPhERgwRAwRAYjEUIiIGCP/AxGIgiIsGCL//4REYMEXhERBERhExhExAzyAZiEWDBGERGeKsVsVRVFcVwTnFcVxVgnYqipFUV//PkZPkcfgzeAFaVxDgUBgAgatvIYrgnYqgnQJyK4riqK4rwTsVor4rQAjABAgnQritFSKoqQTsE5C1haxfF7F4XQtULSFqC1i4LwWkXIWkXRdF+LwqAnME4iqCdwToVuK+HAERWAkAlgJB0OB3Doc8OYc8VCsVgIB3DuHAERUAkAkHMOBwOAIisO4dwEAEAEg6AkAl4CeHA4AkKhXioBIOiv8OB3F+LgWkXxeF8XouxcF0XBeF8XBdF8XhdAdouC8AEsXYWsXOKsVBU/FaKmK/FTxXFbFUVPiv/8VfxXitVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVAXX/8MN/wwwYf//DDBh4Yf/+DYODDfCIFAwKBQiaANFgUDAgFAwIBcADwFuBY/At8C1wLfgAdAtwLGBawLcC3AsgWeBYwLX4XW8LrBhgiFgMlhYLrhh4XWhdb8MOGGhdcMP4YaF1gw8LrwuvhhoYYLrYXWDDBdcGwfC60MN/ww8GwZ4XXC64GZQsF1wbBnDD4XXg2DcLrBdaDYPhhgusF1uGGC64YfhhoNg0LrQwwYcMNC62F1/g2DYXW4XXC6+GH8DTIW4YeB/wR/wjwR+DP/y06bJaRAtAtAtAs//PkZNwY2grqBFW1xDhTRegABLBstL6BRaVAstN5aYtN/psIFf5aQtIgWgUWk8tImyWkQL9Avy0qbKbKbJaf02f/0CkCy05adAsC3K7+mx5aVAv0C/TZ8tOmymwB2pspsFpPLSlpy0qbCBSBXlpk2E2E2C0paUtP6Bfpslp0CkCy0ibJaZAosWQLLTJsemwgUmz6BZaYtOgUWmLTpsJsoFJslpPLT+mwmz//6Bfpsf6BSBSbCBXoFeWk9NhNhAr0Cy0/+WnTZ8tJ/oFf6bP+myWn//8tMmz/lpf//////8sPTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVBgJwiCYMBP//gwE//////wiCAMEgkIggIqIDKpUCIIgwE8IzA4j+EYhGAZMIyDJA5gGRhGcIyDIhEQiIGAgwIRDwiAGAAwYMHBghGAZMGRCMhGYRgGRA5gIyDIwZPBk/wZIRmEY/gyOBxIMgIzCMgcTgwRBgjwYJBgngwTwYJhEQBiBGERMIrwOouAxAgGCQYIhERhEQDBGDBAREgwTCIgGCQYJgwSDBHwiI4MEAwSBiRHCIkGCYGJEQiI/Bgn4REYREeBiBIH6XhERhETwogoy04mpZibFmJuWYmx8n//PkZN4ZrgrkAFZUyDcjofgAA9qc0HafZ8HwNrjaG3xtjaDtJwTo+D55Ow7fxNRNSyLPlqJsAr/lmA/FmWYm5acTQVgTkVQTnBOQTgVxVBOBVFWK4J3FUE7gBABOwToVQTsVhUFcVRXBOhUBORWiuKkVYrCqK+KoqgnQrAnEV+K8E7FQE5xWBOQToVQTsVRW8V4qRUFYVgTsVhXioKgrCqKwqAnYqCtBOhUioK+CcisK8VRUFSKnirFQVBVFcE6FcVoJwKoqCrFXFUE7gnAqiuCcQTsE7xU8VP8VYrgnYrCuTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqn3/l/J/8vHL5f/BhwCETgGpIDOATgEIOFoDcHzgEIDgC+pG7eve1S/6tat7rXupDXSStWoIpGS4TSMQNIySMwpIyAaRkkZ8GJGdBtbwYkZ63tCKRkoIpGWDEjLCKRmEkjOvsEUjJOsIpGa6bOrgxIzsEkjIGJGYUkZVKCKRmqoDkgEjMJJGSYMSMAikZJ3qhp0dq9ru3X1I36FujPbXuxwKbr//waABfg0AC6DUDUDXBqBoAmQawJiGrhqDUGoN//PkZL8USgKcAAblrroTgfQAbhtQAag1QawaYNIAuQa12Lv9si7F2NnXa2Vsi7i/DZl2tlL9l+vL8tlUTUTUTUYQDIBlGUAyifqJKJqJ+p5Mf/U7TETEU7CxkxVO1PKdqeU8u4vq2ddnrsbM2Zs/tl9s67V2NlbIu5sgaA1Q14ExAmAaA0BrDVDXhpgTPDQGuBMA0gTKGgCYgTHDQGrDUGgNcNQaw1hoAmcNIaRIAtALVEgC1gteI8FpBaBIAtcRwkAWgFpBaILVBaIkAWgRwjhIiPEeDXwa/4NUGr+DRwaKBgX/8IhP//wiF8GBMGBP/wYEhEKEQmEQuDAoGFTAwLgwLhG/4MvCM8GSDJCNwZQOXg2DwbB8MPDDhhuGGBsHhh8Lrf4MCQYFCIUGJgiE8GBQMIFhELDDhdaGHhdYGwaGGDDhhuDYMBsHg2D8MMGHBsH8GwYDYMhEKEQgMCeDAsIhAiFBgQIhAYFhEKDAkGBMIhYGEC4GFCBELgYUKDAuEQsGBQMKEwiEBgUGBcIhQYFwYFAwgWDAoRC8GBAYE4RCgwKEQvhEJgYUIBhQkIhAiECIUGBIMC4RCgwJCIUGBAiFgaYLwiEA5cGXCNhGBGwZAw4Ng0MPBkqNqcoqorlh//PkZP8cygrkAFI0wjo7lfAAjhq4SnPor//psoFemygWmwWm/0C0Ci05adApNn/TZQLU5RU9FRFVFdTn1OFG1Gywv/UbUa9Ff0VoFgCwBbAtQLUCzAtgAchHAN8ImAbgBvwDd4RwjQDeAN8I0ImEQEQAbwRgiQjBHhHAN0A3vgG6Ab/CIhEgG5AN6EQESAbmEYI4RABvYRoRABuYRgDehEQiAiIRABvcA3QiQDfwjwDfCICPCJCJCJ4RwiYRwjBEwDehEYRgDfCNCOEQEQEcI+BagAd4FrAscCxAswLfwLAFgC1wLNVMQU1FMy4xMDBVVVVVVVVVBlBkwO3wZAZMIz//////+DJwO0IwI0DsA7cGUI34Rn4RgMuEZgywZQjAZP/hGAcmDKEYDIB28GQGQGXhGgcgRoMgRoHYBywZAZYMmBygyQYFCIUDChQYE4MCgaYJ/gwKEQsGBAiEBgXAwgQLrhdcGwcGHBsGA2Dgw4YYGwZC6/hdYMMF14YcLrYYcMPDDhdYGweF1oYb4MCwYEwYEgwJBgTCIQGBIRC/BgQDCBcIhAMKFhEKDAsGBQYFAwgTgwKDAoMCQiEgwIBhAnCIUGBQiFwiEBicIhAiFhEIgIoBooGieDPA+4GeDPCP//PkZOobXgrkAEY0jjazieQgBKKIBGgyBGhGhGgyAdoMmEaDIB2gyhGwZYMsI0GSDIEaDKB2QOWEaDKB2hGgygcoHYBygdkDtgygcngyAyhG4MgMgRgRmDJCNBkA7QjAZIRoRoMuByhGgyAyAyhGwZYHKByAcgMgRoHIEbCNCNA7fCNA7AZAO0GSEYEaDLA7cDthGgyAyAyQjAOwGUIyDKEYEaEYEYEaEbA5AZQZAZAZIMgRkGXBlBkCMgyAyQZYMngcmEb8GUGQIyDIBywZAZOEZhGBGwO2EbwjcI3hGYMqTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqquDqz8GMDQIvBj///+DGDEGAMAifBj8IuEThFCIEQGPCLwiQYBFCKESDCETBhhGAZGEZ4MjgcSEY4GoRQigxCIEQGPCKBiBrgxwiBEwMIRAY4MQNMIkImDEGIRYMIRYRAYhFBjwYwNQYgwBgBh4GAMQiwYgxA0gahFBgBjgYBFhFhFCKEWBgEWEUGEIgMQYQMYRAMQigxhFBh4GkIgRIRYRAY4RIMQYgYhFA18IoMQYQihFhEgwhFCIDEGIRQieBiEUIoRQYhEwYDAFwGrBog0waAaQawacGsGiDQp9MZMVT3piJjJjK//PkZOYZBgjoaUJQ0DprofQgbhq0dep71PqeU69TpMdMVT6n1OlPKdJjpiKdFZkxlPKdJiJj+mKp/0xFPBoAmYaw0BpwJhDSBMQ1BqAmIEzDSGgNXDRDRhp+GsNMNAEyAmYagJkBMA1BpDXAmECZhoDXhqAmYawJjgTICZBrDSGsNAExDVDQGqGgNHDWBMIaQ0BrAmcCYgTHAmIEzDWGgNYaOBMw0BqDSBMYaA04aA1hqwJhw0ATKGqBM8NYEz4aQJkGoNMNIag1+GsCY+BMQJlDVw0cCYfDXw1ho4aQ0gTCTEFNRTMuMTAwqqoD37wjuhHf/////hGf////hHf/gycEZwRn4MnYMncIzsGTwOdOA507A507hGeEZ8GTuDJ4Rn4HPn4Mn4RnhGcDJwM3YM3gzdBm6DNwR3QjvA927Bm//Bm7Bm/Bm8GbgZvBm4GboR3gzeEd+DN8GbvBm6EZ+Bzp4Mn4HOnBGfA588IzsDnTgZPCM8Iz+EZ/CM4DnTgOdPBk8Iz4RJwGTidBi7AycTgiT4RJ8GE6ESdhEngZPJwGTieDCcESfwYToMJ3AycTwiTsDJ5OhEnwibwYb+ETdwibwibvCJuwYb/4RN/Btf/jYGyNv8bHLUtSzE0/LQBW//PkZPQcHgjQAFKVrjfDmgAge1eMLITcshNy1LX8si0LUTQtCyLQTUteWQmvLItSz4mgmnTJops0umEymDSPsnR9HwfB8k7Pvn0fAvwtcLXF/F+L4vQtQWuFoC0BaReF7AeBfwtcXBdF4XheFwXAtAui9C1haRdi6LwvirgnUE6FcVBVisKgrCvioK+KoqiqAhh3AQFXhwVYrFYCWHMOioVAI4dFWHPDgCAdDgdDmHcBIBEO+HRWAiKsBMO4dFQCAdATw6HBWHBWAgHBUHMOf/gICsOCoV4qw7+KxWHA6KhVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVC11Fz1+NP+/Xkqpr9OfuhQ6lZNWf+XsZc/si+KNoOj/Ntai9j7IISgZAklTqQhjToNTeQoreRdaSDODWvYAVFaWWkQmVuZPP8bRUzq896vc+XS6mm5gnnW7JLnV4z9N5XnW4k86x+uyHyxnWkmdborzraff2SvOtvljOtjd/5XRW8MivOsry/K3gUzrFPS1eFTOttTsul1+lLGdbV3c53h51mdbK7xPOr1SpnWlM63kedZnV4XPK86onnW7myrnWTmRTOqascoabXd/L+yuzS95dv1efjhl92ntYyTuIb6wuWRZFmWRa//PkZOcb/gqMACDf1LTLofggA9qc/gKRZiblqWYm3E24moSQnR9BJj6JwfBaFqWZZFoWvLUshNPxNuWn6bTZHgozRTSaNAY5oGjFQVgTkE6FUVorioK8VBXBO8VRUioAhxVioK4qAnIrYrCqKsVRVBORXBORVFcVcVwTgVBUBORUisK4rCoKwrxXFYE4FYVATjFcVhX4rcVBVFQV4rxVFSKwqCpFcV+K8VhXFYV4qivFUE4FaCdivBORUBOfBOgToE6FUVYqisKgqCtxWFbFQVxXisKgqRU4qioKuKwqCvxVBkH/4Mgf4Rg4RgfgxZBizhFYEVuDFvhFbBi3CKyEVsGLf/4MgAxaDFoGsWYMWgaxYBrFngxaDFnCKwIrAYswNas+DFgRWYGtWYMWBFZgxbgaxbgxZCKwGLIRWgxZCK2EVmDFmDFgMW4GtW8IrAYtBi3Bi0GLAYsCK0IrQit4MWeEVgRW+DFsI9cDW9AYtgxZhFaBrVgMWgxaDFvCKwIrIGtWhFaBrFuEVvBi3hFZA1i0IrYMWYMWAxaEVkGLAisCKzBizCK0DWrIRg+EYIRgQjABkHwODABkDhGDwODBgyAEYIRoRvww4YcKILYKILfhRg5htjY4OQbQ2hNAH8su//PkZP8cRgjWAFAUYjwDofQAi9pcJry1E1LUsuWvE2E0LQTcB+E2LMTctQFEEcWnFYVwTkAI4rRWFYE6BOhWwToBBAQgnIrisETANwIiAb/COEQEbgG+EcA38A3wjhGCMEeEaEeKoJwK4J2KoARBVBOIJ1FWKoJ0CcCuCdRWFcV4rioK4rAnYJ2K0V8VYr8E4xWFUVBVFQE6FXBORWFSKorxVFcVwToE5wTvBOoqwToVIJziuKwJxAQgnUVBUgnAqQCaCdxWirFaKwrRWFcE7FfFeK4rgnIrAnYrCoKoqgnAqCrip4qgnCr/////8Iu8BjvP4Ry5/8Izggc4Zw4RnD/hGcP8GThBk4eDJwgycIMnDwjOD4MnBA3eu9hF3kGO8gx3vBjvAN3jvMGO8CLvAY72DHeAbvXe+DHehF3kGO8gbvHeBF3oG713gG713vgx3oMd5BjvAi7wGO9A3eu8BjvMDd470Iu9wN3jvQY7wGO9wN3jvIRd4Bu9d6Bu9d6DHeAbvHewi7yEXecGO9BjvQN3rvIG7zykGO9A3eO9CLvYMd6EXegx3gG7x3kDd470Dd472DHewY7yDHeAKomwmhZFkAof8tCy4m5aCbcTUswFYsy0/LQTX9NBqBgJgYaY//PkZPcaTdCuAFgWlkI0DfQAe9r8Jxz6CShr8++JsArgjxNBNC0LQsyyLMsgRxallyyLIsi0LUTUtS0AVwFPia8si0LMTXiacsxNizLMTYTcsi1LMsy0E2LUsuJqJvxNyy/E1LMteWgm4mpZlkJuWRZFmWnLQTfgncVATkVcVQTsVIqQToVxWFeK4rwTmATCsCcAnQJyKoriqKwrxWiqKoqwToVRWBORWBOBVFSKgq4qAnAqAnArRVgnIJ3FYVQAgCriqK4qYqivBOsVoJwKgJ3FYVBWFfBOIqCoCcivipxUFSCd4qRV4rCvFaCc/BOhW8VxWFUVhX4r1eX/+DHgaYMOEX/CJgwwYQY8GODH/wYf4RAiQiAxCKBj4GAMYRQiwYcGEGMIoMfhECIBgEXAwCJhEA1BjhF+BhCIDEGARYGoRAYgxCLwYeESEUGMDEIoGAMAiAwBiBrCJ8GMGGEWEUGIRYMAYAxCKBiBgBqDDA1wiBEBiDAIsGIMANANMIoMAYhEBh4GMGMGARfAxBj8GAMANYRAYBFAwCIBhgYhEwNQMYGIRAMAiwNYRQi4RQYwYgahEBiBqBgESEUIqa6Z6bTBpGkmUwmkwaZpJlNCkifmkaaaBymgm0wmRPxSDTTa//PkZOYYTgboZUAQIkCEFgAAe898YTZpJtMJhNilphNdMJhMGgmemDSNJNmkaX6aNJN9MJhMc0E2mzSNJMpg0umU2mDS5oJlNJtNJnpg0DSTBoml0wmzTE8TRpGgm00mkzzRNNMJg0jQTSb/NFNdNGl02KTzRTfTPTSbTKZNLphNJpNmgmUymkwaaaTKZ/TSYTBoJr/ifptMpr9MJlNptMpg0kymumEwmf+mEwmOmkymTT5ppv80eaHTCYTHTSaNBNJtN80/0yaBoJo0k2aPTPNA0OaSaTJoplMJv9MgBAB4MBUGwbwVwUBkFAYDAU4NBoMBqhAELk//h/y1/vz6/6zMnEglwqnIsVSHBzAMMIqXiLgxS8ucoLCKl7VwipeupwYpeAxS8Z22hSl4U+qE1L2goKUva1GUJqXqwkpeAxS81IQpS8smBqXql6E1LyEVLxdEJqXoSUvAmpeJhFS8rpH3CKl6EVLxPWFKXgDUvVL1LCal4kuDFL2EVLxFlPClLyEVL2FKXhdwYpeswGpeqXkGKXqLAxS8wYpeqWk8KUvATUvQYpehJS9Bil6yoUpegipeZT2x1vN5NR2X3KrRuXjFmaS0AUCyE1BHflmWZacTYsvy05ZgAIs+WQCqJoWZ//PkZOwZ+gaYBgbm6EQMAfQAe9r8ZCbiaFkWv5ZibialoArlryyDtCSnyfR8hrE7PpNmiaIxDTGKafTJalqJoJoWQm4mnLUtSzE1LUsxNyy4mpZlqJpy14mgD8WpagKvLIEcJuWnLItBNhNhNxNgH8tSyLMTflmA/iaCaFqJqWf4mxZFmCdCvFWKwqivgnQJzFfwToAIwqgnOKgqCoK4J2KwqisKwJwKwqCqKgJwK4rYqirgnIJ2K8VhVwTmKorYrioK4JwKwrRWFQE5FUE6BOwTgV4qYqiuCdAnYqAnMVBVFUVATkVBVirioKoqCviuK8VwTjxWFfivFUVxXBOcVuKvFaKoqiuCdeEW3Bjb/gxvhFvCLYGN8GNwi3CLf8DbtuEW//CM7+DG+EW+DG8DbNgi3CLfA2zYItwY3gbZuDG8GT/Bk+DJ+DJ/hGdCM+EZwMnQZP8GT8GToRngc6dBk4IzwZOBk8GTvhGdBk+DG8Dbt8DbtgY2CLbBjYGNwi2A2zYDbN4RbhFtA2zcDbNwNu3CLaEW4RbeEW2DG8DbNwY3BjYDbNgY3A2zYItwi3CLbgbdvA27YGN/CLaDG4RbgxsDG4Rb8ItsI7oR3cGb00m0wmTT6aTZoJgUpMc0kwaa//PkZNcYqeLUAAAUHjw8DgQAe88cYTXTXNBpXiQdfLVpLJoaCSJs0TQNAbRpJpDWleaGlDmlfQ9fQ7tBZoa0IeOw3Ccq44TcHgrufDVzQNA0Om0wmDTNE0EymkymumU2mU0aSY6ZE8NFMmiaaYNDptMGn+aJpdNptNps0OmU0J50wNtMGmmEz/zQTJpppNplMJlM9M8FAYCoKAAApgqDIMACwAQbBsAMGQAQaCkGg0GgyCkGeCgNABwAAUgrwA+CoAQNAeHCAOAeAyIQHBwgDg4QYDAGgMEEOEAeA0Q4DxAHh0PEMGYMBsFQYDPgoDMGQV4NBqryAZfhGfwjMDl4Rv/wjcGT/4R/CPBH//hH4H3gzv4M7A+/gzoR4GdBnAf+DPBnwj4M7BnwivA1QIpCKcIpgaqDFgaqBogMWBqgGqgxQinA0XBi8IqEUCKBFcD7/CPwj0I+DPA/8GfBnQZ8I+EeCPwZ4R6EfhGcI0GSDIDJCNCMBkgdsIwGQDkBk4HIEZgy4RoHZwZQjcDtCMgcoRgRoRgHKDJBl4RgHIDKDIEYEaEZgyYMoRsIwGQGQIwGUGUI3A5AZMI2EaDLBlwjQZQjAjAZQoqIqqN+pypx/qNIqoqqNKNKcqchwGrCAPqN//PkZOsaCgjiBUZRnkhEBfAgw9tw+iu1RUqp2qNUNalOVG1GkV/U58sLU48sLLCiwFU4hAYA+qQQgasVhVIYQNWKwmAKpvasNoHIDm4OQHIDlGwNgbH4D+JuWQm4mhZFoJsWgm4I4TcbA2xtA5ODnGyNoHJ+NgHKDl/LMBXLUtS04mvLQteAqCaCbFoWQmha8bQ2Acg2ht8bI2RsjaGyNrjYGwNvjbByja/GxFYE4ipBOIrwTiK4J2KuK8BAK4rAnAJwKkE4FYE7FUVgEIqgIRVBO4qRXFQVBVBOMVwCcE5itBOoqAnQqCpBOIrxVBOoJ0KwJxgnQrCuKsVBXioCcCqCdAnYJyKsVYqipBOgjwiAj/8InhH4RMIkIioAC4RiJCMRP////CNk//Blkv4M6F8I9C/8GWT/8I2SwjZOEbJQZZIGWShGyYMsnwj0P///CPQ/hGyQRsn8I2SCNkgOyVkoMsnhGyQMslCNkoMsl4MsnhGyXCNk4MsmEbJ/wZZP8I2SA7JWTgyyQMiKDIieEYiAcRIihGIkIxFwZEUIxEA4iREgcRYihGIoHESIkDiJEUIxFwjEQIxEwZEWDIihGIoRiKEYiHcYJRIr9kzDmO5cIaApXE/NA0TTTKZGym/0//PkZMQWjdCsAwAWCsQ8Cfwoe89cyaXTKZACgKxsmybQFQCyPQPUbRtA9x6QAoegHKmRtClpk0RSkwaCYE/GyaaZ6ZFJTaaTCbTabTBomgmk2mxS0x0waSaTI2gcgOcT0T5MiedM9M9NCfCeGgNhMJlNJoT1MdNJhMjaNPptNGkmhtpnmgmv+KQmRSE0aaY6ZTKZTRoJg0U0aBopg0emU1/xPzTTaa5o80DRTZoJs0TRNEUhMikJs0P0x0wmkwmUymkwaKb5pppNJg0OaInhpGgmeaSbTBp9N/ptNJo0DTNAbOCkGAwGABgA4NgwAAAMAPBgAQKAyDAZgoCkFINAABWAEDAUBTAABgMBTgqACDcGAAQYDAUqLUlVt///+Bj4MIRcGH/hE//hEwY/wi8GPBj8GH8IgRcIv4RYMQi+DAIsIsIn8GHCLCJCJ/BhBgBpgwwifhFhEhF/gwCIDAGIMIMAMQYBFhFBgDH4GAMQiQNAYAwwYBECIAMIAMAAiHBgAMIAiAIg4MABgABhADAhEAGAARCBhCEQhEIMABh6EQAwIMABgCEQwMAQYD4MDCIcGACIQiHwYGDAhEOEQ4MAENB8hJD7PsnXJ0fZ98+D6LItQR3PgnZHmgPYYRopk0xj//PkZMkU/gLsKkITrkL0CfzIetvgJtNdNGkmkwCPLITf8s+WpaFmApAjgFUsyz49jSTCaGMmkyaRZlkJsWpaiagKBZlmWomh8c+CdcnROj4Pk+Akh9E6DsJ0fJ8c+OTs+idk4J2Tg+j7Pr8nB9nwfAa59k7598+D74Sk+eEkFQdDmKsOhwBEVYCeAiAmAiHcBEV4CYCIWmCHF6FqC0haRcF4XYvxfF2LwvC+FqC0xcC0C/FwLSFoF0XBfi7C0xei8LwvcLQLoWoXheC0BaIWoXBdiNiMY6cZ8RkZxnjqOojAz4zx0HUdBGozjoMw6iMjpxdi+L4uC5F/xd/haIui/bZ/+DGBp4RYMQYgw8Ivgw/CJ4RfBh/hECKBgEUGODH8InhFwY4GoMcIgRIMcInCIBrBhCIESESBp+DEGARfhEA1gxBjBj4RAYQYgxgYwiYRcIgMAiAwBjCJgYAawYYRQMQMAYhFgagYhEA0AxA1A1CJBhBgEXwMQNAihFhFAxwYAwgaYMPCJA1hEBiBrwYQiwYwiBFwYhFgxgawihFCLA0gYAwCKESBoBpCJ4MIRcGOEVB9ALR8BJj7/PonB9HyEoJwfZ9E4Dt5OeTnlqJtxNAH7nwfHPonJ8E759E6PoJI//PkZOAWKgjoZUAQYka0Ffgge9VcfZOCdE7J0To+Cc8JWTo+D7J0EqPoO0+T5PsJSfJ9n0TkJUfJOeTknPPo+z6J2Ts+ycE759/k7Pg+z5J2TonBOeTkJUTg+T5DtJ0Tvk5Pjk5DXPg+idH2HYfR9E6PgnR9k5JyfZ9cnR9cNYJSfROidE6Ps+Cdn0fB8E6DtPs+CdHwfH5OAlR8nyfB98+SdE4J0ff5OidH2TknfPkJMfYSg+Cd8+D6PsnP/JwTk++fYSQO0+D5J0fZ8HwTjn2AWDgdAL8ApALQCkO8GACwMgyAVBiAVhzwY4BeDIMgFMOh0ArDgc4BeAV4cgFsOhz/wP225HGw7wCsO4M8AqHP/+DEGQ7/8OgzgFoM4Bf4MhwO4BT4cDmHcGfDnw78GcVhUFTFXFeKoqYJ3isKuKkVgTsVoqCsKwrCoKsVQTqKorYWoXhfxeF/xdi58XOL4WmLnFYVQToE4FXiuK0VwTnFQVRVFcVhU4JzFfDgdhzBnDuHfALgyDAMQZBgGQCgBUAoDAMh3BkAsDMGcGAYgxBn+HAC0ArwCwMAS5adAry0yBSBfoFBVaKqKwVUVrRXUa9FUOEqVUjV3ySPLkvkzlNlNn02E2S06pvVKWACECpW//PkZN8VDgj+zymq5krb1ewAxJvkqe1XysDVFSqlVIo2o0ispyFVoqKNIrKcqNKcKcFhSjaKiKyKhYWiv6nCnCKijajSnPorKNKcKcqcIrqNoqKNqcKNoqKNKNqNKcIqKN//orf6BSbKbKBSBXlp0CvQKTYTZ/0C/LTxFxFoigioigCLC4cRYRWItEXC4cRcI0IoFwwXCiKwjQXC8LhRFcRcRQRSFwoikRcLhxFRFguHiKRF8E7FYVhVBOgCYVRUACKKgqgE0E6ACJFYVoJ0CcgnQrAnMVwTgE6ioKoRwDdhHhG4RARgDcCMEaEYIiAbwRIRuESEcIwRwiYRwjQjBEgWoFuBa4FngWkIQQigwhEwigx/CL/4RfCKEQGP/wYiEUwYHwYGDAwYAGA4RCEQBEGB0rCNcGU4RrBlcIsGGDCESBiEWDCBhCIEWBiDAGHCKEUGEGEGMIgMAiwigxCIDADQGIRfCIEQDXgYYRfBgBoESEXwY/CJCKEQIsGIRODEGIRQYgw8IgRYMMGAGGDEDGDAIoMcDQIkGMGGBrgwCKDAIsIkDUDWDGDDA1hE4RQMQYgwBhhFBhBh4MAMYRMIoRAiAxBjhF4mhZFpxNBNy0LQTUTXhKglR9FqWpaAP5Zi//PkZNYXkgTkGEJwlkXcDfQAe9r8bCa/k5JwTriacsizBHE6CSH1w7efHLPgjuJqWnLITYTX8tRNAH/ialqJuJuWZaFkCO4m5aE7J2TonB8E559nyEnJyfB8FmJrxNxNhNS1E3LT8sxNC0E0LTlqJuWQm3E15ZiaFqWRZiaCagP5aCblkKoqCsCdioKoqwToE6FcVwAhRWBOIrCpFbgnEVRVFUVIJ2K4rAnIqioKgrcV4riuK0E4FcVQTsVxUBOoJ3FUE7itFYE7FYVRXFUVwTkVoqAnYJxBO4rReF4XYWsLWLoui4LwuC9AdsLQL0LQA9C8Lgvi6LguBahfFwXAtIvQQ4vCqKwrxX/8E5xXit4JwKzBnwj+DF+F1guvBiQYkDRIR8I/gz8Gd4R/wYsGLBi8I8DPBneDPBnwZ/8I8DP8I8B/0Gd+DPA+8I/+Ef+DOgzvwj4R/hHoM+Ee4M4D74M+Ef/A/7gfcDPBn4R7BnfCPgz4M7Bngf8DPwjwR6B/3CPwj0Gfgz+EfBnhH8GfwioRQGIBqgRUDVAYoGiBFcIoBqoMWEUA1UDRYRUIqEUA1WBooGiAaqBogRUGJwigM8I/gz+DOCPwj/Bnwj3BnBHgZ4M4I+DOhHhNCz5aiaCb//PkZM0YugrgAAASBEUEBfQAe9rclmWompZ8shNyzLMsy1LMBUAfhNxNicBJCcE5J0JpyyLMTcBVLXloCO5aCagKACiAqflqWYmvE3E3BHlmArFnxNRNC1LUBS5aFoWhZFmWR8k5CTnxz4PonZ8E5Pg+j4LUshNQH4TYtSzLMshNBNhNSyAViyE0FQE4FYVoJ0CcRUgnYqisKoJxFWAhiuKgrCtFUE7FQE5iqKgqRVFWKorwTsVxVFYE7FTFTBOxVgnAqRXBOPisK4BOK0VoriuK0E5BOxUivFcE5FYE5FQVBXFQE6FQVBVFYVxWioCcCoLovi4LoWiL0LSL+LouBaIvBahdi6LoWgEMFoC1hacXxdC14uipiqKn8VPFbiqKsVb//Bm/+EXgx4RdhFb///hE1/8GLP//CKwIrQjoGa/wPewZqEdYM1wZqDNAetgzWEd8GagzYM2DN4M1wjoI7Bm+DNhHcD3rA9awZuEdwZvCOwjsGaA964M1A978I7hHQR0DNge98I6hHYR1wZrBmwPWgPWwZsI7wjqB63COvgzQR3BmwZsGaget8D3rCOgZoGa4R1gzYM0EdwZsI6CO+DN4R1wZsD3oGaBmwjqEdAzXCO/4R0DNAzYR0WgI8TQT//PkZL4XFgTcAE6Tekf8EfQAe9t8YTXiagKwCsJuWXLMTUtC1LMTT8TYTUJP+fAdomomoD8JuWoCgWoI7iaFkJqJqfZ8hrk4CSE5Pk+Cdk5PgnBOT7JwTg+uWZaiaCbcsgFAsy0LPlmJsWYmom5ZFmWpaibiaAjy15ZFkWQm5Zll+JsJqJvy1E0CThJz65OQlJ8H2TknZOT759k6J3z4PgTQTcsy0LITflmWfLUsiyLITYTcTT8syzLQsi0LMEcWZa8tSyE1LTibibFqWYI/8shNCyE1LQsy1LUTUBTLLloWXLUsiyLUtBN+JqJvy1E05Z8TcsxNeWn/LTnxydHwfZ9n1ydk4PsnHJyfR9E4JwTgnB8k4588nB9cnR8c+D7PjxV4q4r8VsVgTgE4/itFShX/xV4rirxVFWKoq4qfxX8E6xVxUBOYrCtwTvwTj/xV8E5/irBOsVuKwqRXFTFQVorCrFf/xWioKwrCtioCcxUFUVAToE4FUVxWFQVhUBO4rgnUVIJyKkVgToE4ipFUVoq4qisKsE64qCoCdxUFUVxXFUE78VxWFQV4qiuKgqiuK4CCK2KoqirBOATsE4FWK4qxVFUVhVFYE4gnIriuCcQTiK4rCoCdCtirBORUiqK2//PkZLAWsgzuADQNNkZj/fjIe9r8K/FXFUVwSE5aiaAKgmhaFpxNQkp8n3z5PsJOGsffLQsyyE1LItS1E1Af+CPLMTUTfibFmJoWQmxanzydHwTsnASknBaCalqWom5ZcsxNyc8nASsnHDt59BrhJgkpOicBKg7D7JyfZ8E5Pk+Cd8EeWXE0LQsiyLQtSyLIsi0LUTYsy0E3LITQshNiyLUsiy4I78shNy0LMVcE6ipgnArRVgncE4wTsVIrCqCcCtBOYrwTgE7iuKwqCoKwrcE7BOQTqKgqiqFpBEC1gPYD3F0X4WoLTF0Xxei6FqC0BaAtQWgXxdwtWFqC0haBW/FQVRUBOBUFcE6ioCcAnEVRX4rYrxWFUVBViuLsXgtAuC6FoBDBaYvi7F8XxexdF8XhcFyI//gx//CJBhgxhEwY/+EXwYgx8ImDH8GPhE8GPhEwigwhFwNQNQNfhE+DGDAGHCIBrhEhEBh4RQMAY/gYBFBhhEAxCIDCEUDEDHBiEUIoRQY+DCBp4McGEIgGgMcGIGMGIGIGgRQYgxCKBiBjBgDGESDADWBgEUDEIuDADWBpBiEUDEDDgYgwBgDEDQDUGIGgRAYQYAxCKBhCKEThEBgBiEUGIRQMQiQiwNAY//PkZKwWNgjoZUAQREakFfQAe9t8YMfwi4GBaFoJsWpaFlyyBHctCzE25ZiaFoAocsy1E24Sk+idk6LMTYTYTQsyyLUtCyLQTUswFYJMGuTg+CdHwErPotAFAsuJtxNCz4m4mvBHiafloWZZ8YppBqzTNI0jTNBMpg0jTTZZFqWfE3Af/xNf+WomhZ8suWZZCb8tC1LQtS14m/LQtBNhNOfR8hKCc8nHJ2EqCUE5CSHxydk6Pg+D7Ps+Sdk6LUTQTcTcTctSz4mwmha8TXlmJvyy5ZiaFl+WpZFoWZa8TQshNCz4mhalmJsWfLQsuWRactBNRNC1E1LLlly0E2PgJWfR8h2H2fJOSdnx+fXPs+T5PgNbnzz6Po+T7JwTk+z4PonROglJ84qCvxXxUirFX4q4qeCd1f8InCI/4R/CP//4RMI/CMEYI4RAR8I8IjCJ4REI/gG8ESEfCOERCP4R/+EaERCPCNCNCI4BvQjYRMHINobIOfjZBzDZG3xtja42gcw2PwcvG2Nng5+NgbY2wcn42htDYGwNrjYGwNsbX42vxscbI2gc3Bzg5Qcg2uNvjaGwNgbI2+Dl4OUbI2Qc42RsjbBy//g5eAboR4RwjQDeCP+EcI8IwBuwjwjBEBEA//PkZKoZMgrqADXt9EV8FfQAe9scG+EThEBGCMESESEbhEQjwjwjwjBHCIwiQDcCNCI/hHE0/LQBSLITf/lqWoSvk7LT8BWLMtRNAk58E7Po+CyLQTcsyyLUsi0Afi1LUTUTUtBNS05aFkWpZHzwkoSgnB9HwfQSsTYsizLQtRNRNgFf/8NcJWEmAWCdn0To+T4CUHyGtxNiyLT/lmJqJqJqWgmpZFqJsWgmwmwmwmv5ZiaibiactBNv/yyLTiaFkWZagKgCmJqWQmgmom3E0LTibAKfE0LLiuKgrYqipBO4JzFUE5BORXBOhVioKwqRWBOYJyKkE6BOIrYqCqCcxVxVFUV8E4FSCdcVgAgCuKkLTBDC6CHi+LwuRfha4uC+FpF8XQtAWgB2wtAWoXBchaBfwtQWnFSCdxVxXFUVhUFYV4rgnOK3wTiKir//1eDCsf//7/+wOYd///ei/f6lmiqGXpyOlCSRm+yP3UtDhFIzqBhwCFHAGFHABYGcAnAAMOAAYcAAw4BYKOAIROANgicAQYcABE4AAzgE4B+1wmcAwYcAK+sDOADgFLCJwAlWBnABwABnABwDWraETgEDOADgDBiRkgoJpGaP+64RSMoRSMGBiRkkwMSMlq7AxIy4//PkZJUYEgieBFw3fkL8FgAied8AROAAicA8DOATgAGHAAROAFwM4BOAGBhwADDgAGHANQUcAgicAYROAfgw4AIkbPNNNpo0TSNBNJgUs0l7lomEwmRSOaRp80zQFK4nvTInnTEGgwGwAwYmOmkyaInppJpMJg0k1+KUaaaTCb42U0mBsGiaSaNNNpo0OaKZNE0jTTSY5oGmaZpJrphM9MGkmDQTCZBzpg0OKR+mBtdMJobfTSbTfG2KSaBpGgaZomiaBomn02mOmkwmjSNPpjmmaKZNA0zSNFNCeClJkT40DTTCY5oJk0kyaJpdMppMdMdN80TR6ZTXTfNJNmimumem+aKZTKaTaaTRops0kwaZppk0+aSa6ZTKYTfTfTPTHTKa5omgmEyaJo9NmkaRp/pnmmaf6aNNMplMplMdMpv8TxMJlNplNJn9MdM1OM6hWa/EjiRiRiO/xIcSP+GgCZQ1+GvDRDV//4aP///4I8EwTwTBLwS/4AHgnBHBHgiwR4JgAgS4IwAYPA8ADg+AAAAFwfB4L4WADC2AGAGFwsFwuD2FgAcAPC+F/B8L4X/B7B4L4WwuD+AGDwXACAAC2D2AEFgfCwAAAAXB8LhcLeDwXCwPYPA+ACACD+AH4XwA//PkZJMVIgb2ejVLxkBMEgTIe898vwv4X/ACB/C4WwtgBg/gA4PA9gBeFhLRTXTRomkmP0yJ6J+mPy0NA0OvibNDQmfzTNNMjaFKNATxMiemiaRoGkmE2mkwmTRTHNBMGiaCZTSZTZomh0PaV9fX2hoX14kzSmOaCY5pJr80U0aPTfNFMps0jSNJMmiaSaTKb6aTKYNLphMpg0eaJoGkJ8aBoppMppMJg00xzTTabNFNJpNJpNpnpg0DT6bTRoppoJMWrSh/690NQ5paV5D2le/LND2hoQxDF/rzR1/r/aWhfaWleQxfXmheaevNDS0tLQ0ryGoch/X15D+vLy+0oc0ry/19DUOXuvIc0oav9oXkNX1/r3X18QCGHQGQHB8PiAPAaHgPDsBgcH+Hqv//+DJ0GNuEW4MbQY2wZO4Rn///4R34R3Qjv//8Gbv//8GbgZuwZvCO4GbsD37+Ed3A586DJ4Rn8DnToRn8GTsGT8GToRn4HOngyf4HOnBGeDJ0IzgjOCM8DnTwjOgydwOdP4RnYMncDbtwY2A27cItgNs3CLeDGwMbwY3CLaEWwRbQi3A27eDG0GN4G2bBFvA2zcItgY3A27YGN4G2bAxtA58/gc6eDJwHOnAyfCM7A588//PkZLMYngTSAFAUhEYcDfggw9V8DnzwOdOBk8IzuEZ4MnAyfgychsy7F3oE13Nl9sy7myrsL6qqOU5anCqkHqNDI3KVUTEU8GNU7U6gxyHKchyVV/Xa2Zspfds3rubK2VsjZmztk9djZi/TZV2NnXYu0vsm0yaBoDZNEbA2k0aKZNjmwbH/Nvm2bRtGyBVArD1G0bQPUevg9h6/+PRzZNkCrzZNgesegesermyPQPXzbHpNvm0PQPUPSbJs82TaHqAtj082h6DaNn8eo2DbHrHpNjj1m1zYHqNo2jYNnmwbPNgek2ja5sj0D1m0bJs80xtJlMdMCeps0U0meaaa6b5p/mmmU3zRTfNFN/pgHPzQNPmkaaaTXTKbTRoJk0zS6b/NBNdNJlNGj02aH6Z4IgAEEYJ4I+CMEQJcEUEXBOpHDX/w1Q0Q1Q1cNWGvw0Q0/hp/AmIaA0cCYhow0w1/w0hoDRhpw1w1BrgTLDXw1BrhrDQGgNQEzAmOGuGiGgNfgTHDQGoCZw1w0BrDWBMIEzDVDTDUGgNfAFwGjBrg1A1YNcGsAXAaQaABcBqg1g1QagaINYaoEyw1Bow1YaA1hoDSBMw1gTICYQJkGrDQGoNGGmGsNcNQawJkGuBM4aIa//PkZKAYngTsATQNQkKMFgDifh7AYagJkGsCZ+GkNWGiGsNAaYaOGgCYgTENQaw0Yaw1Q1Q0/hqw1BkAfmkaCb6ZTCY6bNBNLwmqGA5fzSTCb/lgwXOmMmMmTQ5pmkmUwmkymfzRTaZFJ6aNM002NrppMpg0kwKQmE2m0yKUaKaE95o9MJj9N9NJk0UymOaSaE/TabNNNmmmk2mU2aHTKZTCaNDjaTJoGimkyNvpk0TRTHTf6bTRopg001+mU0aXNBMjYNA0k2mjR5pfps0U100mUz0ym02mDRTHTaaTRpplMc0kz0ySA000mDSTKbNI002mzQTHTaYTf//NA0zQTBodNJk0UyKSaaZNJMprmkaP5oGmKUmEymUyaCbTHNBMJlN80DRNBMmkm/00mUwaZpprplNpvmiaJo80+aSa//TaY/6ZaH//wY4ReEX4RIMfwiAxBh/BhCJ/+ESDDwYcIn+EQIoMAiQYAw8IsGIGGETBj4MP4MQiAxhEAwAxAxBjBiEUIgMIMcDCDAGIMcGMDEGGBgEUDTwNfAx4MAiwiQYgwBgEUIgMIRAiQYhFwYAwBhA1CKDEIoGoGgMQi4MeDADGEQIkIgGMDCDAIoMAiQiAYwYYMQNQigwCJBiDEGAR//PkZJwV+gzoZUAQRkZsCfQAe9tcQYgx8GEGIMQiwMAY4MANAMcIoMSyE1E1/LMTUtCz5OD5PkJJz5Pk+uA/FqWRaib8TUTUTQtC05alqWYm4momgI8TYsxNCzE3LUtQFEsgFM+z6J0fB8nz+TsNcnB9BK+Tk+g7CdhJT6LTiaFqWYI7lqWoCvy05ZlnxNy0/LUshNBNvwR4moCj+Wv5ZlkJqWpalkCOE1E1LQsiyLITUBULLlqWZZlmJsWhZcsi1/4CiWpalkJqJuWvLXlkJsJpyy4mwm5ZlmJuWXLUTQteWgmgmwCsJoWfE3LMsiyLP8TTlkJuAolqJryzE1LTibCbloJuWhZFoWYmxZ8TcXIvxeC0i+FrF0B2i4L8LSL4uBaIDyCHF8XRfF6FqgiwtIuYWoXIrYqAncVvxVip8VIqCvUxPqtFbFf/4q/8V/8V/iririr8VATjxXipxWgnYq+KwqfFTFQVoq+KsVBW8VhUisKuK0VRXivFYE4FTBOhVFcVRV4riuCdCuCdCtwTiCcCqCcgnYqxWFcVIJwKsVxWisK8VxVgnArYqRWFeK0V4qgnQrgnYrfBOoqAnAq4J0CciqKviuK3BOoJyKsE4FUVoqisK2KwrAnArgBAFSK4//PkZJ0VagjyJgGtbkOkFfwAbh4AqRViuK4J0KgrCrFUVxVjOEeDQgjlcT4T40xtjaNI0uaI2QciGNJIl4kJZtCGIaSckIm6GL3TQ2zRTY2UwmjSNE0fxS02aY2BsJs0/+mzSE8TQpHTKZTaaG0aQpApZp/mmm+aHTfTCZGwNgUk0E0aRp/ilJlNJgT5MmkJ9zQNA0TQTH6ZG2mk0mk0mk3zQTKY/G3zQTHTabTBpGgmU0aKaTJpJpNJtMphNjYTfNE0emkymE2mEyaCbNBNfmkaJpdNJnpg0k0mDTTCbTaZTBp80k2aCbTfNE00yaCb6bTZoplMmmaKZTKaTJpmiaHTXNJNdMDbTab6Y6Z6ZNNMJhMJhN9NJrmim02m0ymU300aPTSa6Y//5pJpNdN/9NppxWxU4Jx/xWxU/xU4qcV/ipiuKwqxWFbioK/8VIqivFTwTkVgTkVor4JxFXxX8VcVxUFQE4FaCcwTvBOIqwToVuKwqCtFUVYqxXxWFeK0E7FQVYrwTnwTsV4rCqCcfFaCcRVFQE5gnAr4JyK4r4Jz4J0Koqip4rCvisKoJ3xWBOME7iuKgriuKgrAnAqgnArxXiqCcgnYJzFQVQTmAEIVYrwToAIYrwTiKkVQTkE5//PkZK4XGgzsADQNAkIcCfwAe898FXFTFYVxXxUFQVkzzS5oilg5TTTY2kyaJpJtNGgJ8aKaTQ2k2aCaNI0eaSYNJM/tKHEiQxfJG09MmgaSYTRppg0TRNNMJlMptMCfppNprmiaA2jQNLmmaRppk0jRFLNP9NJhMGmaQpZpJhNCkGkmE0J+mxSk0m0x02mjRTKbTCZ42EwaQpJpptNprmgaRpmim00J4mzSNM0kymkyKWmE0muaKYGwNjmgafTPNE0U0mUwJ7+mem01+J8mhSk2mjRTSb6aTCbNBM9MpjpjppMpk0E2mE2mE2mjSTfTaZ6YNFMcT1MpnprptNmim0wmE100aSaTRo9MGjzTTHTaaTfTSaNLpoFMAAFYNBQGwAvwAYM4NgqqkjaAN3d3d3etERNK5CZ/3Ctf8AaiAc/u7vaIn/+8XPv//+GDKv8W1/+AC8K4Yw+94xe940jgceOBwOcRaxGwH4EuNIjBfxazB8HhkwVjIAII/vDkjG/wAcJPeF5e98hNgSYLWMFvhZ73pX06aoehpmh01hMJtM9K3TKY9E10x+memvlIpZM9MUTCbShbUrtM+n5ophNZuXK+0wmemumMCemkmvc0Uwm/lJJlLe5oJZI0SyW6R0mE//PkZLcXlgrzECFvrEmMEfgAfh7k2aORpbTYUo9SBNsekGYNVKgqg6hrUXK4Q42DOwPWbILEzBSumEgkWJPU8S72G5wUuGDwguEKa1Q0UykS3Bn7FJNgg5qoEgpsGabBtGabZt7NrKCNgLYes1idmabBtm2bZsBRm0PQbF9mwPSPUBbMwzB6QojYM42ePTzbMwzR6TaNs1eBVNv81yDUJ2QYhJtD0m0PVe+x6T2M8HsbFwsh6B6D7HpugT2uZhO6HqZhmE7ISZhhkFNcghtmybBnnsD1Ho49ZtG2bZs5PVBc2EEepCaEHNjj1EJHq5smabZtmwbNEEPR+bJse9z2PY2T1SN0rdNJq6yXI06COvNJj9MGmkkGmUj7pI0TToNGlEsNEnCW10ymi5FtNFKpvps0kz0uW3aaTF00mTSzdNJu0KFYz1KjaGAhyoQCFGM//zFARgIUZ/oZpdCttay6M5drW1joSj6Ekk1b7J7R7aoQNlPrWBKLTTzOsGT5yYxLrtHTy2iUxEkES0HIBVD066VjGj31odPkkSjJtbWs6OIjKmlXHR9K5MTv5pdZolE10kk2lly74TFx5KTXeTGLrS6ExiucvJSSDUdXZm3NLn1rtYBCUEoRj77WOhCPc+g5//PkZJ8XPgzoAABMTrz8BfQyY9ONGxJULutaa1TE5LHxWEo+XecmMa3p0kqBCR6qOFaFUGpNJIIjqVi0ylBqJIkiSJIkmJj605EkSRJPetWAyVacmodBUVhGfrAZPF0AUrgRLNiqDU4VHo8h6HRObJJNdqlRBMFT0qdNE0WZhmay2tCuOY6oieWieianCnVSbzjd7SGhrLi6eUSeLcZTWqdML5PM50uOGJms9VqtYU6hrgrm4V0frUzTvYsiegR2FOkqUxSKdVCpmRCSkIAUZ4VPhqEKgFDU2VhUiIhUaIg0RAkTBYEjYBUbBMuCJgLAkCUBUinABgBE3/9EQqFRM0s0qzktk9ZFqqFC6RULE11JVDkd8Y1vVFOx9oUIpZ8Vnq5klkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"))},[rt]);const Fe=Le.useCallback(Mt=>async ft=>{if(Re.current!==null&&Re.current.readyState>1){const{lastScan:fn,contentBefore:Wt,lastScanHadContent:Ct}=Mt;if(ft-fn<me)Ve.current=window.requestAnimationFrame(Fe(Mt));else{const qe=await qt.current.detect(Re.current),Vt=qe.some(xn=>!Wt.includes(xn.rawValue)),Ft=qe.length>0;let En=Mt.lastOnScan;(Vt||Ge&&Ft&&ft-En>=_e)&&(rt&&sn.current&&sn.current.paused&&sn.current.play().catch(xn=>console.error("Error playing the sound",xn)),En=ft,Qe(qe)),Ft&&K(qe),!Ft&&Ct&&K(qe);const nn={lastScan:ft,lastOnScan:En,lastScanHadContent:Ft,contentBefore:Vt?qe.map(xn=>xn.rawValue):Wt};Ve.current=window.requestAnimationFrame(Fe(nn))}}},[Re.current,Qe,K,me,Ge,_e,rt]);return{startScanning:Le.useCallback(()=>{const Mt=performance.now(),ft={lastScan:Mt,lastOnScan:Mt,contentBefore:[],lastScanHadContent:!1};Ve.current=window.requestAnimationFrame(Fe(ft))},[Fe]),stopScanning:Le.useCallback(()=>{Ve.current!==null&&(window.cancelAnimationFrame(Ve.current),Ve.current=null)},[])}})({videoElementRef:X,onScan:r,onFound:Ce,formats:s,retryDelay:ot.tracker===void 0?500:10,scanDelay:_,allowMultiple:S,sound:I});Le.useEffect(()=>(He(!0),()=>{He(!1)}),[]),Le.useEffect(()=>{st&&(Tt(),xe())},[st,xe,Tt]),Le.useEffect(()=>{if(!mm(Pe,We)){const Ie=Pe;i?.deviceId&&delete Ie.facingMode,Xe(Ie)}},[i,Pe,We]);const Ze=Le.useMemo(()=>({constraints:We,shouldStream:st&&!u}),[We,st,u]),se=Le.useCallback(async()=>{const Ie=X.current;if(Ie==null)throw new Error("Video should be defined when component is mounted.");const Re=fe.current;if(Re==null)throw new Error("Canvas should be defined when component is mounted.");const Qe=Re.getContext("2d");if(Qe==null)throw new Error("Canvas should be defined when component is mounted.");if(Ze.shouldStream){await Pt.current.stopCamera(),Oe(!1);try{await Pt.current.startCamera(Ie,Ze),Ie?Oe(!0):await Pt.current.stopCamera()}catch(K){Me.current?.(K),console.error("error",K)}}else Re.width=Ie.videoWidth,Re.height=Ie.videoHeight,Qe.drawImage(Ie,0,0,Ie.videoWidth,Ie.videoHeight),await Pt.current.stopCamera(),Oe(!1)},[Ze]);Le.useEffect(()=>{(async()=>await se())()},[se]);const Ye=Le.useMemo(()=>Ze.shouldStream&&mt,[Ze.shouldStream,mt]);return Le.useEffect(()=>{if(Ye){if(fe.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus pause frame canvas is defined");if(yc(fe.current),pe.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus tracking canvas is defined");if(yc(pe.current),X.current==null)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus video element is defined");xe()}},[Ye,xe]),m.jsxs("div",{style:{...ox,...M?.container},className:b?.container,children:[m.jsx("video",{ref:X,style:{...lx,...M?.video,visibility:u?"hidden":"visible"},className:b?.video,autoPlay:!0,muted:!0,playsInline:!0}),m.jsx("canvas",{ref:fe,style:{display:u?"block":"none",position:"absolute",width:"100%",height:"100%"}}),m.jsx("canvas",{ref:pe,style:{position:"absolute",width:"100%",height:"100%"}}),m.jsxs("div",{style:{position:"absolute",width:"100%",height:"100%"},children:[ot.finder&&m.jsx(vx,{scanning:mt,capabilities:Bt.capabilities,onOff:ot.onOff,zoom:ot.zoom&&Bt.settings.zoom?{value:Bt.settings.zoom,onChange:async Ie=>{const Re={...We,advanced:[{zoom:Ie}]};await Bt.updateConstraints(Re)}}:void 0,torch:ot.torch?{status:Bt.settings.torch??!1,toggle:async Ie=>{const Re={...We,advanced:[{torch:Ie}]};await Bt.updateConstraints(Re)}}:void 0,startScanning:async()=>await se(),stopScanning:async()=>{await Bt.stopCamera(),yc(pe.current),Oe(!1)}}),A]})]})}const jr=[];for(let o=0;o<256;++o)jr.push((o+256).toString(16).slice(1));function bx(o,r=0){return(jr[o[r+0]]+jr[o[r+1]]+jr[o[r+2]]+jr[o[r+3]]+"-"+jr[o[r+4]]+jr[o[r+5]]+"-"+jr[o[r+6]]+jr[o[r+7]]+"-"+jr[o[r+8]]+jr[o[r+9]]+"-"+jr[o[r+10]]+jr[o[r+11]]+jr[o[r+12]]+jr[o[r+13]]+jr[o[r+14]]+jr[o[r+15]]).toLowerCase()}let Uf;const Cx=new Uint8Array(16);function wx(){if(!Uf){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Uf=crypto.getRandomValues.bind(crypto)}return Uf(Cx)}const Sx=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Qp={randomUUID:Sx};function Ax(o,r,i){o=o||{};const s=o.random??o.rng?.()??wx();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,bx(s)}function ym(o,r,i){return Qp.randomUUID&&!o?Qp.randomUUID():Ax(o)}class js{static async createInvite(r,i=1,s,u){const g=Wa.getState().identity;if(!g)throw new Error("No identity found");const A=ym(),M=tn.decodeBase64(g.secretKey),b=So(tn.decodeBase64(g.publicKey)),S=Jf(M),_=Ip(g.userId,A,b,S),j={inviteId:A,nonce:_.nonce,valid:!0,useCount:0,useLimit:i>0?i:void 0,name:r,note:u,expiry:s,createdAt:Date.now()};i<=0&&delete j.useLimit,await Fn.addInvite(j);const X=`adun-app://invite?data=${btoa(JSON.stringify(_))}`;return{invite:j,link:X,psi:_}}static async getInvites(){return await Fn.getInvites()}static async revokeInvite(r){await Fn.invalidateInvite(r)}static async deleteInvite(r){await Fn.deleteInvite(r)}static getInviteLink(r){const i=Wa.getState().identity;if(!i)throw new Error("No identity found");const s=tn.decodeBase64(i.secretKey),u=So(tn.decodeBase64(i.publicKey)),g=Jf(s),A=Ip(i.userId,r.inviteId,u,g,r.nonce);return`adun-app://invite?data=${btoa(JSON.stringify(A))}`}static parseInviteLink(r){try{const i=new URL(r);if(i.protocol!=="p2pchat:"&&i.protocol!=="adun-app:")return null;const s=i.searchParams.get("data");if(!s)return null;const u=JSON.parse(atob(s));return i.host==="add"?{type:"identity",data:u}:i.host==="invite"?{type:"invite",data:u}:null}catch(i){return console.error("Failed to parse invite link",i),null}}}function Ex({onClose:o}){const{identity:r}=Wa(),{addContact:i}=qr(),[s,u]=Le.useState("invite"),[g,A]=Le.useState("new"),[M,b]=Le.useState("link"),[S,_]=Le.useState(""),[j,I]=Le.useState(null),[X,fe]=Le.useState(!1),[pe,Pe]=Le.useState("Contact added successfully!"),[ot,st]=Le.useState("idle"),[He,mt]=Le.useState(""),[Oe,We]=Le.useState(1),[Xe,Bt]=Le.useState(!0),[Pt,Me]=Le.useState("days"),[Ue,Ce]=Le.useState(10),[xe,Tt]=Le.useState(()=>{const qe=new Date;return qe.setDate(qe.getDate()+10),qe.toISOString().split("T")[0]}),[Ze,se]=Le.useState(null),[Ye,Ie]=Le.useState(!1),[Re,Qe]=Le.useState(!1),[K,me]=Le.useState([]),[_e,Ke]=Le.useState(null),[Ge,rt]=Le.useState(null);Le.useEffect(()=>{(async()=>{try{const Vt=await js.getInvites(),Ft=Date.now(),En=Vt.filter(nn=>nn.valid&&(!nn.expiry||nn.expiry>Ft)&&(nn.useLimit===void 0||nn.useCount<nn.useLimit));me(En)}catch(Vt){console.error("Failed to load invites:",Vt)}})()},[Ze]);const qt=qe=>{Ke(qe);try{const Vt=js.getInviteLink(qe);rt(Vt)}catch(Vt){console.error("Failed to generate invite link:",Vt),I("Failed to generate invite link")}};if(!r)return null;const sn={version:1,publicKey:r.publicKey},Ve=`adun-app://add?data=${btoa(JSON.stringify(sn))}`,Fe=async()=>{if(!He.trim()){I("Please enter a name for the invite");return}Ie(!0),I(null);try{let qe;if(Xe)if(Pt==="days")qe=Date.now()+Ue*24*60*60*1e3;else{const Ft=new Date(xe);Ft.setHours(23,59,59,999),qe=Ft.getTime()}const Vt=await js.createInvite(He.trim(),Oe,qe);se({link:Vt.link,invite:Vt.invite})}catch(qe){console.error("Failed to create invite:",qe),I("Failed to create invite")}finally{Ie(!1)}},Mt=async qe=>{const Vt=qe.target.files?.[0];if(Vt){I(null);try{const Ft=await createImageBitmap(Vt);if("BarcodeDetector"in window){const nn=await new window.BarcodeDetector({formats:["qr_code"]}).detect(Ft);if(nn.length>0){await ft(nn[0].rawValue);return}}I("QR code not found. Try the camera scanner or paste the link manually.")}catch(Ft){I("Could not scan image. Try pasting the link manually."),console.error("QR scan failed:",Ft)}}},ft=async qe=>{console.log("[AddContactModal] Processing data:",qe),I(null);try{const Vt=js.parseInviteLink(qe);if(!Vt)throw new Error("Invalid link format");if(Vt.type==="identity"){const Ft=Vt.data;if(!Ft.publicKey)throw new Error("Incomplete contact data");const En=Yg(Ft.publicKey);if(En===r.userId){I("You cannot add yourself as a contact");return}i({userId:En,publicKey:Ft.publicKey,addedAt:Date.now(),status:"offline",localProfile:{}},!0),Pe("Contact added successfully!")}else if(Vt.type==="invite"){const Ft=Vt.data;if(Ft.invitingId===r.userId){I("You cannot use your own invite");return}await mr.initiateInviteHandshake(Ft),Pe("Invite accepted! Connecting to peer...")}console.log("[AddContactModal] Success"),fe(!0),setTimeout(()=>{o()},2e3)}catch(Vt){I("Invalid data. Please check and try again."),console.error("[AddContactModal] Error:",Vt)}},fn=()=>{if(console.log("[AddContactModal] Manual add clicked. Input:",S),!S.trim()){I("Please enter the link");return}ft(S.trim())},Wt=async(qe,Vt)=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(qe),Vt("copied"),setTimeout(()=>Vt("idle"),2e3);else{const Ft=document.createElement("textarea");Ft.value=qe,Ft.style.position="fixed",Ft.style.left="-999999px",Ft.style.top="-999999px",document.body.appendChild(Ft),Ft.focus(),Ft.select();const En=document.execCommand("copy");if(document.body.removeChild(Ft),En)Vt("copied"),setTimeout(()=>Vt("idle"),2e3);else throw new Error("Copy command failed")}}catch(Ft){console.error("Failed to copy:",Ft),Vt("error"),setTimeout(()=>Vt("idle"),2e3)}},Ct=async(qe,Vt,Ft)=>{if(navigator.share)try{await navigator.share({title:Vt,text:Ft,url:qe})}catch{console.log("Share cancelled")}else Wt(qe,st)};return m.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in",onClick:o,children:m.jsxs("div",{className:"bg-[var(--color-bg-card)] border border-slate-700 text-slate-200 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:qe=>qe.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[m.jsxs("div",{className:"sticky top-0 bg-[var(--color-bg-card)]/95 backdrop-blur border-b border-slate-700/50 px-6 py-4 flex items-center justify-between z-10",children:[m.jsx("h2",{id:"modal-title",className:"text-xl font-bold text-white",children:"Add Contact"}),m.jsx("button",{onClick:o,"aria-label":"Close",className:"p-2 hover:bg-slate-700 rounded-full transition-colors text-slate-400 hover:text-white",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsxs("div",{className:"flex border-b border-slate-700/50",children:[m.jsx("button",{onClick:()=>{u("invite"),I(null)},className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${s==="invite"?"border-b-2 border-indigo-500 text-indigo-400":"text-slate-400 hover:text-slate-200"}`,children:"Invite"}),m.jsx("button",{onClick:()=>{u("scan"),I(null)},className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${s==="scan"?"border-b-2 border-indigo-500 text-indigo-400":"text-slate-400 hover:text-slate-200"}`,children:"Scan"}),m.jsx("button",{onClick:()=>{u("manual"),I(null)},className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${s==="manual"?"border-b-2 border-indigo-500 text-indigo-400":"text-slate-400 hover:text-slate-200"}`,children:"Manual"})]}),m.jsxs("div",{className:"p-6",children:[X&&m.jsx("div",{className:"mb-4 p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl",children:m.jsxs("p",{className:"text-sm text-emerald-400 font-medium flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),pe]})}),j&&m.jsx("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/20 rounded-xl",children:m.jsxs("p",{className:"text-sm text-red-400 flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),j]})}),s==="invite"&&m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex bg-slate-800/50 p-1 rounded-xl",children:[m.jsx("button",{onClick:()=>{A("new"),Ke(null)},className:`flex-1 py-2 text-sm font-medium rounded-lg transition-all ${g==="new"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-200"}`,children:"New"}),m.jsxs("button",{onClick:()=>{A("active"),se(null)},className:`flex-1 py-2 text-sm font-medium rounded-lg transition-all ${g==="active"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-200"}`,children:["Active ",K.length>0&&`(${K.length})`]})]}),g==="new"&&!Ze&&m.jsxs("div",{className:"space-y-4 animate-fade-in",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Name (for your reference)"}),m.jsx("input",{type:"text",value:He,onChange:qe=>mt(qe.target.value),placeholder:"e.g. Bob, Work Colleagues",className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Use Limit"}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsx("button",{onClick:()=>We(1),className:`px-3 py-2 rounded-lg text-sm font-medium border transition-all ${Oe===1?"bg-indigo-500/20 border-indigo-500 text-indigo-300":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:"Single Use (1 Peer)"}),m.jsx("button",{onClick:()=>We(0),className:`px-3 py-2 rounded-lg text-sm font-medium border transition-all ${Oe===0?"bg-indigo-500/20 border-indigo-500 text-indigo-300":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:"Unlimited (Group)"})]}),m.jsx("p",{className:"mt-2 text-xs text-slate-500",children:Oe===1?"Single use. The name will be used as the contact name.":"Multiple uses. The name will be used as the group name."})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Expiry"}),m.jsx("div",{className:"flex items-center",children:m.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[m.jsx("input",{type:"checkbox",className:"sr-only peer",checked:Xe,onChange:qe=>Bt(qe.target.checked)}),m.jsx("div",{className:"w-9 h-5 bg-slate-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-indigo-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-indigo-600"}),m.jsx("span",{className:"ml-2 text-xs font-medium text-slate-300",children:Xe?"Enabled":"Disabled"})]})})]}),Xe&&m.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-3 space-y-3 animate-fade-in",children:[m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("button",{onClick:()=>Me("days"),className:`flex-1 py-1.5 text-xs font-medium rounded-lg transition-all ${Pt==="days"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-slate-200"}`,children:"Days"}),m.jsx("button",{onClick:()=>Me("date"),className:`flex-1 py-1.5 text-xs font-medium rounded-lg transition-all ${Pt==="date"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-slate-200"}`,children:"Date"})]}),Pt==="days"?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"flex gap-1",children:[1,10,30].map(qe=>m.jsx("button",{onClick:()=>Ce(qe),className:`px-3 py-2 rounded-lg text-sm font-medium border transition-all ${Ue===qe?"bg-indigo-500/20 border-indigo-500 text-indigo-300":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:qe},qe))}),m.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[m.jsx("input",{type:"number",min:"1",value:Ue,onChange:qe=>Ce(Math.max(1,parseInt(qe.target.value)||0)),className:"w-full px-3 py-2 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 text-center"}),m.jsx("span",{className:"text-sm text-slate-400 whitespace-nowrap",children:"days"})]})]}):m.jsx("input",{type:"date",value:xe,min:new Date().toISOString().split("T")[0],onChange:qe=>Tt(qe.target.value),className:"w-full px-3 py-2.5 bg-slate-900/50 border border-slate-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/50"})]})]}),m.jsx("button",{onClick:Fe,disabled:Ye,className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-colors font-medium shadow-lg shadow-indigo-500/20 flex items-center justify-center",children:Ye?"Generating...":"Generate Invite Link"})]}),g==="new"&&Ze&&m.jsxs("div",{className:"space-y-6 animate-fade-in",children:[m.jsx("div",{className:"flex justify-center",children:m.jsx("div",{className:"bg-white p-4 rounded-xl",children:m.jsx(Bc,{value:Ze.link,size:200,level:"H",includeMargin:!0})})}),m.jsx("p",{className:"text-center text-sm text-slate-400",children:"Share this invite QR code."}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("button",{onClick:()=>Wt(Ze.link,st),className:`w-full px-4 py-3 rounded-xl transition-all font-medium flex items-center justify-center ${ot==="copied"?"bg-emerald-600 text-white":ot==="error"?"bg-red-600 text-white":"bg-slate-700 text-white hover:bg-slate-600"}`,children:ot==="copied"?"Copied Link!":"Copy Link"}),"share"in navigator&&m.jsx("button",{onClick:()=>Ct(Ze.link,"Add Contact","Scan to add"),className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-colors font-medium shadow-lg shadow-indigo-500/20 flex items-center justify-center",children:"Share via..."}),m.jsx("button",{onClick:()=>{se(null),mt("")},className:"w-full px-4 py-3 bg-slate-800 text-slate-300 rounded-xl hover:bg-slate-700 transition-colors font-medium",children:"Create Another Invite"})]})]}),g==="active"&&!_e&&m.jsx("div",{className:"space-y-3 animate-fade-in",children:K.length===0?m.jsxs("div",{className:"text-center py-8",children:[m.jsx("p",{className:"text-slate-400 mb-4",children:"No active invites"}),m.jsx("button",{onClick:()=>A("new"),className:"text-indigo-400 hover:text-indigo-300 text-sm font-medium",children:"Create one now"})]}):K.map(qe=>m.jsx("button",{onClick:()=>qt(qe),className:"w-full p-4 bg-slate-800/50 hover:bg-slate-700/50 rounded-xl border border-slate-700/50 hover:border-slate-600/50 transition-all text-left",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-white",children:qe.name||"Unnamed Invite"}),m.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-slate-400",children:[m.jsx("span",{children:qe.useLimit===void 0?`${qe.useCount} uses`:`${qe.useCount}/${qe.useLimit} uses`}),qe.expiry&&m.jsxs("span",{children:["Expires ",new Date(qe.expiry).toLocaleDateString()]})]})]}),m.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},qe.inviteId))}),g==="active"&&_e&&Ge&&m.jsxs("div",{className:"space-y-6 animate-fade-in",children:[m.jsxs("button",{onClick:()=>{Ke(null),rt(null)},className:"flex items-center text-sm text-slate-400 hover:text-slate-200",children:[m.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to list"]}),m.jsxs("div",{className:"text-center",children:[m.jsx("h4",{className:"font-medium text-white text-lg",children:_e.name||"Unnamed Invite"}),m.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[_e.useLimit===void 0?`${_e.useCount} uses`:`${_e.useCount}/${_e.useLimit} uses`,_e.expiry&&`  Expires ${new Date(_e.expiry).toLocaleDateString()}`]})]}),m.jsx("div",{className:"flex justify-center",children:m.jsx("div",{className:"bg-white p-4 rounded-xl",children:m.jsx(Bc,{value:Ge,size:200,level:"H",includeMargin:!0})})}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("button",{onClick:()=>Wt(Ge,st),className:`w-full px-4 py-3 rounded-xl transition-all font-medium flex items-center justify-center ${ot==="copied"?"bg-emerald-600 text-white":ot==="error"?"bg-red-600 text-white":"bg-slate-700 text-white hover:bg-slate-600"}`,children:ot==="copied"?"Copied Link!":"Copy Link"}),"share"in navigator&&m.jsx("button",{onClick:()=>Ct(Ge,"Add Contact","Scan to add"),className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-colors font-medium shadow-lg shadow-indigo-500/20 flex items-center justify-center",children:"Share via..."})]})]})]}),s==="scan"&&m.jsx("div",{className:"space-y-4",children:Re?m.jsxs("div",{className:"space-y-6 animate-fade-in",children:[m.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl",children:m.jsxs("p",{className:"text-sm text-amber-400 flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Camera access denied or not available"]})}),m.jsx("input",{type:"file",accept:"image/*",onChange:Mt,className:"hidden",id:"qr-scan-input-fallback"}),m.jsxs("label",{htmlFor:"qr-scan-input-fallback",className:"flex items-center justify-center gap-3 w-full px-4 py-4 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-colors font-medium shadow-lg shadow-indigo-500/20 cursor-pointer",children:[m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Select QR Image from Gallery"]}),m.jsx("p",{className:"text-sm text-slate-500 text-center",children:"Select an image containing a QR code to scan it"})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"rounded-xl overflow-hidden bg-black aspect-square",children:m.jsx(xx,{onScan:qe=>{qe?.[0]?.rawValue&&ft(qe[0].rawValue)},onError:qe=>{console.error("Scanner error:",qe),Qe(!0)},formats:["qr_code"]})}),m.jsx("p",{className:"text-sm text-slate-400 text-center",children:"Point camera at a QR code to scan"}),m.jsxs("div",{className:"border-t border-slate-700 pt-4",children:[m.jsx("input",{type:"file",accept:"image/*",onChange:Mt,className:"hidden",id:"qr-scan-input"}),m.jsxs("label",{htmlFor:"qr-scan-input",className:"flex items-center justify-center gap-2 text-sm text-slate-400 hover:text-slate-200 cursor-pointer",children:[m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Or select image from gallery"]})]})]})}),s==="manual"&&m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex bg-slate-800/50 p-1 rounded-xl",children:[m.jsx("button",{onClick:()=>b("link"),className:`flex-1 py-2 text-sm font-medium rounded-lg transition-all ${M==="link"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-200"}`,children:"Identity Link"}),m.jsx("button",{onClick:()=>b("identity"),className:`flex-1 py-2 text-sm font-medium rounded-lg transition-all ${M==="identity"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-200"}`,children:"My Identity"})]}),M==="link"&&m.jsxs("div",{className:"space-y-6 animate-fade-in",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"manual-input",className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Paste Link"}),m.jsx("textarea",{id:"manual-input",value:S,onChange:qe=>_(qe.target.value),placeholder:"adun-app://...",rows:4,className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 font-mono text-xs text-slate-300 placeholder-slate-600 resize-none"}),m.jsxs("p",{className:"mt-2 text-xs text-amber-500/80 flex items-start",children:[m.jsx("svg",{className:"w-4 h-4 mr-1.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Paste the full link starting with adun-app://"]})]}),m.jsx("button",{onClick:fn,className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-colors font-medium shadow-lg shadow-indigo-500/20",children:"Add Contact"})]}),M==="identity"&&m.jsxs("div",{className:"space-y-6 animate-fade-in",children:[m.jsx("div",{className:"flex justify-center",children:m.jsx("div",{className:"bg-white p-4 rounded-xl",children:m.jsx(Bc,{value:Ve,size:200,level:"H",includeMargin:!0})})}),m.jsx("p",{className:"text-center text-sm text-slate-400",children:"Share this QR code to let others add you directly."}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("button",{onClick:()=>Wt(Ve,st),className:`w-full px-4 py-3 rounded-xl transition-all font-medium flex items-center justify-center ${ot==="copied"?"bg-emerald-600 text-white":ot==="error"?"bg-red-600 text-white":"bg-slate-700 text-white hover:bg-slate-600"}`,children:ot==="copied"?"Copied Link!":"Copy Link"}),"share"in navigator&&m.jsx("button",{onClick:()=>Ct(Ve,"Add Contact","Scan to add"),className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-colors font-medium shadow-lg shadow-indigo-500/20 flex items-center justify-center",children:"Share via..."})]})]})]})]}),m.jsx("div",{className:"px-6 pb-6",children:m.jsx("button",{onClick:o,className:"w-full px-4 py-3 bg-slate-800 text-slate-300 rounded-xl hover:bg-slate-700 transition-colors font-medium",children:"Close"})})]})})}function Tx(){try{const o=mr.getActiveSignalingServices();return{status:o.length>0?"connected":"disconnected",services:o}}catch{return{status:"disconnected",services:[]}}}function Mx(){const o=Le.useMemo(()=>Tx(),[]),[r,i]=Le.useState(o.status),[s,u]=Le.useState(o.services);return Le.useEffect(()=>{const A=setInterval(()=>{try{const M=mr.getActiveSignalingServices();u(M),M.length>0?i("connected"):i("disconnected")}catch{i("disconnected"),u([])}},3e3);return()=>clearInterval(A)},[]),{status:r,services:s}}function _x({status:o,onRetry:r}){return o==="offline"?null:o==="handshake"?m.jsxs("div",{className:"flex items-center space-x-1",title:"Connecting...",children:[m.jsx("div",{className:"w-2.5 h-2.5 bg-yellow-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-xs text-yellow-500",children:"Connecting"})]}):o==="online"?m.jsxs("div",{className:"flex items-center space-x-1",title:"Online",children:[m.jsx("div",{className:"w-2.5 h-2.5 bg-green-500 rounded-full shadow-[0_0_8px_rgba(34,197,94,0.6)]"}),m.jsx("span",{className:"text-xs text-green-500",children:"Online"})]}):o==="failed"?m.jsxs("div",{className:"flex items-center space-x-2",title:"Connection failed",children:[m.jsxs("div",{className:"flex items-center space-x-1",children:[m.jsx("div",{className:"w-2.5 h-2.5 bg-red-500 rounded-full"}),m.jsx("span",{className:"text-xs text-red-500",children:"Failed"})]}),r&&m.jsx("button",{onClick:i=>{i.stopPropagation(),r()},className:"px-2 py-0.5 bg-red-500/10 hover:bg-red-500/20 text-red-500 text-xs rounded transition-colors",children:"Retry"})]}):null}function kx({count:o}){if(o<=0)return null;const r=o>99?"99":o.toString(),i=o>=10;return m.jsx("div",{className:`absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold flex items-center justify-center border-2 border-[var(--color-bg-card)] shadow-sm ${i?"min-w-[1.25rem] h-5 px-1 rounded-full":"w-5 h-5 rounded-full"}`,children:r})}function Bx(o){return o.status==="online"?m.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-emerald-500 border-2 border-[var(--color-bg-card)] rounded-full"}):o.status==="handshake"?m.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-yellow-500 border-2 border-[var(--color-bg-card)] rounded-full animate-pulse"}):o.status==="failed"?m.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 border-2 border-[var(--color-bg-card)] rounded-full bg-red-500 flex items-center justify-center",children:m.jsx("svg",{className:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})}):null}function Rx(){const{identity:o,activeView:r,activeContactId:i,setActiveView:s,setActiveContact:u,miniChatVisibility:g}=Wa(),{contacts:A,retryHandshake:M,removeContact:b}=qr(),{messages:S}=Mo(),[_,j]=Le.useState(!1),[I,X]=Le.useState(null),{status:fe,services:pe}=Mx();console.log("[ContactsView] Rendering with",A.length,"contacts");const Pe=Oe=>{u(Oe),s("chat"),qr.getState().clearUnread(Oe)},ot=Oe=>{M(Oe)},st=Oe=>{mr.removePeer(Oe.userId),b(Oe.userId),i===Oe.userId&&(u(null),s("contacts")),X(null)},He=(Oe,We)=>{if(!o)return[];const Xe=[o.userId,Oe].sort().join("-");return(S[Xe]||[]).slice(-3)},mt=Oe=>{const We=Oe.localProfile?.name,Xe=Oe.peerProfile?.name,Bt=!We&&!!Xe;return{displayName:We||Xe||`User ${Oe.userId.slice(0,8).toUpperCase()}`,isPeerProvided:Bt}};return m.jsxs("div",{className:"h-screen flex flex-col bg-[var(--color-bg-dark)] text-[var(--color-text-primary)] animate-fade-in",children:[m.jsx("div",{className:"bg-[var(--color-bg-card)]/80 backdrop-blur-md border-b border-slate-700/50 px-6 py-5 sticky top-0 z-10",children:m.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto w-full",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"Messages"}),m.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[m.jsxs("p",{className:"text-xs text-slate-400 font-mono opacity-70",children:["ID: ",o?.userId.slice(0,8).toUpperCase()]}),m.jsxs("div",{className:"flex items-center gap-1.5",title:`Signaling: ${pe.join(", ")||"None"}`,children:[m.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${fe==="connected"?"bg-emerald-500":fe==="connecting"?"bg-yellow-500 animate-pulse":"bg-red-500"}`}),m.jsx("span",{className:`text-[10px] font-medium uppercase tracking-wider ${fe==="connected"?"text-emerald-400":fe==="connecting"?"text-yellow-400":"text-red-400"}`,children:fe==="connected"?pe.join(", ")||"Connected":fe==="connecting"?"Connecting":"Offline"})]})]})]}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsx("button",{onClick:()=>j(!0),className:"p-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full transition-all shadow-lg shadow-indigo-500/20 hover:shadow-indigo-500/40 active:scale-95",title:"Add contact",children:m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})}),m.jsx("button",{onClick:()=>s("settings"),className:"p-2.5 bg-slate-700/50 hover:bg-slate-700 text-slate-200 rounded-full transition-all hover:text-white active:scale-95",title:"Settings",children:m.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]})}),m.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:m.jsx("div",{className:"max-w-3xl mx-auto w-full space-y-2",children:A.length===0?m.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center",children:[m.jsx("div",{className:"w-20 h-20 bg-slate-800/50 rounded-2xl flex items-center justify-center mb-6 border border-slate-700/50",children:m.jsx("svg",{className:"w-10 h-10 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),m.jsx("h3",{className:"text-xl font-semibold text-slate-200 mb-2",children:"No contacts yet"}),m.jsx("p",{className:"text-slate-400 mb-8 max-w-xs mx-auto leading-relaxed",children:"Connect with friends by scanning their QR code or sharing your link."}),m.jsx("button",{onClick:()=>j(!0),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-all font-medium shadow-lg shadow-indigo-500/25 hover:shadow-indigo-500/40 active:scale-95",children:"Add New Contact"})]}):m.jsx("div",{className:"grid gap-2",children:A.map(Oe=>{const We=He(Oe.userId),Xe=Oe.unreadCount||0,{displayName:Bt,isPeerProvided:Pt}=mt(Oe),Me=Oe.localProfile?.group;return m.jsxs("div",{onClick:()=>Pe(Oe.userId),className:"w-full p-4 flex items-start space-x-4 bg-[var(--color-bg-card)] hover:bg-slate-700/50 rounded-2xl transition-all border border-transparent hover:border-slate-600/50 group cursor-pointer",children:[m.jsxs("div",{className:"relative flex-shrink-0",children:[m.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg shadow-indigo-500/10 group-hover:scale-105 transition-transform duration-300",children:m.jsx("span",{className:"text-white font-bold text-lg",children:Bt?.[0]?.toUpperCase()||Oe.userId.slice(0,2).toUpperCase()})}),Bx(Oe),m.jsx(kx,{count:Xe})]}),m.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h3",{className:`text-lg truncate pr-4 ${Pt?"text-slate-300 italic":"text-white font-semibold"}`,children:Bt}),m.jsx("div",{className:"flex items-center space-x-2",children:m.jsx("button",{onClick:Ue=>{Ue.stopPropagation(),X(Oe)},className:"p-1.5 text-slate-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"Delete contact",children:m.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]}),m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"flex-shrink-0 w-[120px] mr-4 pt-0.5",children:Me?m.jsx("p",{className:"text-sm text-indigo-400 font-medium truncate",children:Me}):m.jsx(_x,{status:Oe.status,onRetry:()=>ot(Oe.userId)})}),m.jsx("div",{className:`flex-1 min-w-0 space-y-1 p-2 bg-slate-800/40 rounded-lg border border-slate-700/30 ${g==="never"?"hidden":g==="always"?"md:hidden lg:block":i===Oe.userId&&r==="chat"?"hidden":"md:hidden lg:block"}`,children:We.length>0?We.map(Ue=>{const Ce=Ue.from===o?.userId;return m.jsxs("p",{className:"text-xs text-slate-400 truncate leading-tight flex items-center",children:[m.jsx("span",{className:`mr-1 font-bold flex-shrink-0 ${Ce?"text-indigo-300":"text-slate-500"}`,children:Ce?"You:":"Them:"}),m.jsx("span",{className:"truncate opacity-90",children:Ue.content})]},Ue.msg_uuid)}):m.jsx("p",{className:"text-xs text-slate-600 italic text-center py-1",children:"No messages yet"})})]})]})]},Oe.userId)})})})}),_&&m.jsx(Ex,{onClose:()=>j(!1)}),I&&m.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in",children:m.jsxs("div",{className:"bg-[var(--color-bg-card)] border border-red-500/30 rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[m.jsx("h2",{className:"text-xl font-bold text-red-500 mb-4",children:"Delete Contact?"}),m.jsxs("p",{className:"text-slate-400 mb-6",children:["Are you sure you want to delete ",m.jsx("span",{className:"text-white font-medium",children:mt(I).displayName}),"? This will remove the contact and all messages with them. This action cannot be undone."]}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsx("button",{onClick:()=>X(null),className:"flex-1 px-4 py-2.5 bg-slate-700 hover:bg-slate-600 text-white rounded-xl transition-colors font-medium",children:"Cancel"}),m.jsx("button",{onClick:()=>st(I),className:"flex-1 px-4 py-2.5 bg-red-600 hover:bg-red-500 text-white rounded-xl transition-colors font-medium",children:"Delete"})]})]})})]})}const Nx=()=>ym(),qc=o=>({id:o.msg_uuid,timestamp:o.timestamp,type:"text",content:o.content}),Dx=(o,r)=>({id:o,timestamp:r,type:"ack"}),jx=(o,r,i)=>{if(o.type==="ack")throw new Error("Cannot convert ACK to Message - ACKs are not stored");return{msg_uuid:o.id,conversationId:i,from:r,content:o.content||"",timestamp:o.timestamp,delivered:!0,firstAttemptTimestamp:o.timestamp,showAsFailedInUI:!1,type:"text"}};class Ox{userId;queues=new Map;lastActivity=new Map;minNextTime=0;timerId=null;unsubscribe=null;config;onTimeout=null;constructor(r,i){this.userId=r,this.config=i,this.unsubscribe=mr.onPeerOnline((s,u)=>{console.log("[RetryService] onPeerOnline callback:",s.substring(0,8),"online:",u),u?this.loadUndeliveredForPeer(s):(this.clearQueue(s),this.lastActivity.delete(s))}),this.startTimer(),console.log("[RetryService] Initialized for user:",r.substring(0,8))}startTimer(){this.timerId||(this.timerId=setInterval(()=>this.timerTick(),this.config.timerInterval),console.log("[RetryService] Timer started"))}stopTimer(){this.timerId&&(clearInterval(this.timerId),this.timerId=null,console.log("[RetryService] Timer stopped"))}async timerTick(){const r=Date.now();for(const[i,s]of this.queues){for(;s.length>0&&r-s[0].firstAttemptTimestamp>=this.config.timeoutMs;){const g=s.shift();console.log("[RetryService] Message timed out:",g.msg_uuid.substring(0,8)),g.msg_id!==void 0&&this.onTimeout?.(g.msg_id)}if(s.length===0){this.queues.delete(i);continue}if(r<this.minNextTime)continue;const u=this.lastActivity.get(i)||0;if(r-u>=this.config.minPeerInterval){this.lastActivity.set(i,r),this.minNextTime=r+this.config.minPeerInterval;const g=s[0];try{console.log("[RetryService] Timer sending:",g.msg_uuid.substring(0,8),"to:",i.substring(0,8)),await mr.sendMessage(i,qc(g)),console.log("[RetryService] Timer  sent:",g.msg_uuid.substring(0,8))}catch(A){console.error("[RetryService] Timer  failed:",g.msg_uuid.substring(0,8),A)}return}}}setOnTimeout(r){this.onTimeout=r}async loadUndeliveredForPeer(r){console.log("[RetryService] loadUndeliveredForPeer called for:",r.substring(0,8)),console.log("[RetryService] My userId:",this.userId.substring(0,8));const i=[this.userId,r].sort().join("-");console.log("[RetryService] Looking up conversationId:",i.substring(0,24));const s=await Fn.getMessages(i);console.log("[RetryService] Found",s.length,"total messages in conversation");const u=s.filter(M=>!M.delivered&&M.from===this.userId);if(console.log("[RetryService] Loading",u.length,"undelivered messages for:",r.substring(0,8)),u.length===0)return;const g=Date.now(),A=u.map(M=>({...M,firstAttemptTimestamp:g}));this.queues.set(r,A),this.lastActivity.set(r,0)}addToQueue(r,i){const s=this.queues.get(r)||[];if(s.some(u=>u.msg_uuid===i.msg_uuid)){console.log(`[RetryService] Message ${i.msg_uuid.substring(0,8)} already in queue, skipping`);return}s.push(i),this.queues.set(r,s),console.log(`[RetryService] Added ${i.msg_uuid.substring(0,8)} to queue (size: ${s.length})`)}removeFromQueue(r,i){const s=this.queues.get(r);if(!s)return;const u=s.findIndex(g=>g.msg_uuid===i);u>-1&&(s.splice(u,1),console.log(`[RetryService] Removed ${i.substring(0,8)} from queue (size: ${s.length})`)),s.length===0&&this.queues.delete(r)}async sendNextForPeer(r){const i=this.queues.get(r);if(!i||i.length===0)return;const s=Date.now();this.lastActivity.set(r,s),this.minNextTime=s+this.config.minPeerInterval;const u=i[0];try{console.log("[RetryService] Sending next:",u.msg_uuid.substring(0,8)),await mr.sendMessage(r,qc(u)),console.log("[RetryService]  Sent:",u.msg_uuid.substring(0,8))}catch(g){console.error("[RetryService]  Failed to send next:",u.msg_uuid.substring(0,8),g)}}getQueue(r){return this.queues.get(r)||[]}clearQueue(r){this.queues.has(r)&&(this.queues.delete(r),console.log(`[RetryService] Cleared queue for ${r.substring(0,8)}`))}destroy(){this.stopTimer(),this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),this.queues.clear(),this.lastActivity.clear(),console.log("[RetryService] Destroyed")}}let qa=null;const Ix=(o,r)=>(qa&&qa.destroy(),qa=new Ox(o,r),qa),qx=o=>{qa?.setOnTimeout(o)},vm=()=>{qa&&(qa.destroy(),qa=null)},ad=(o,r)=>{qa?.addToQueue(o,r)},xm=(o,r)=>{qa?.removeFromQueue(o,r)},bm=o=>{qa?.sendNextForPeer(o)},Ux=Object.freeze(Object.defineProperty({__proto__:null,addToRetryQueue:ad,destroyRetryService:vm,initRetryService:Ix,removeFromRetryQueue:xm,sendNextMessage:bm,setRetryTimeoutCallback:qx},Symbol.toStringTag,{value:"Module"}));function Lx(){const{identity:o,setActiveView:r,clearIdentity:i,updateProfile:s,miniChatVisibility:u,setMiniChatVisibility:g}=Wa(),{contacts:A}=qr(),[M,b]=Le.useState(!1),[S,_]=Le.useState(!1),[j,I]=Le.useState(!1),[X,fe]=Le.useState(!1),[pe,Pe]=Le.useState(""),[ot,st]=Le.useState(null),[He,mt]=Le.useState(!1),Oe=Le.useRef(null),[We,Xe]=Le.useState(o?.profile?.name||""),[Bt,Pt]=Le.useState(o?.profile?.description||""),[Me,Ue]=Le.useState(!1),[Ce,xe]=Le.useState(!1),[Tt,Ze]=Le.useState([]),[se,Ye]=Le.useState(!1);Le.useEffect(()=>{Ie()},[]);const Ie=async()=>{Ye(!0);try{const Fe=await js.getInvites();Ze(Fe.sort((Mt,ft)=>ft.createdAt-Mt.createdAt))}catch(Fe){console.error("Failed to load invites",Fe)}finally{Ye(!1)}},Re=async Fe=>{try{await js.revokeInvite(Fe),await Ie()}catch(Mt){console.error("Failed to revoke invite",Mt)}},Qe=async Fe=>{try{await js.deleteInvite(Fe),await Ie()}catch(Mt){console.error("Failed to delete invite",Mt)}},K=async()=>{if(o){Ue(!0);try{const Fe={...o.profile,name:We,description:Bt};s(Fe);const Mt={...o,profile:Fe};Os.save(Mt),xe(!0),setTimeout(()=>xe(!1),2e3)}catch(Fe){console.error("Failed to save profile",Fe)}finally{Ue(!1)}}},me=async()=>{if(o){if(!pe){st("Password is required to encrypt your identity");return}try{const Fe={version:1,encrypted:!0,data:Os.exportToJSON(o),passwordHint:"Password protected"},Mt=JSON.stringify(Fe,null,2),ft=new Blob([Mt],{type:"application/json"}),fn=URL.createObjectURL(ft),Wt=document.createElement("a");Wt.href=fn,Wt.download=`chat-identity-${o.userId.slice(0,8)}.json`,document.body.appendChild(Wt),Wt.click(),document.body.removeChild(Wt),URL.revokeObjectURL(fn),b(!1),Pe(""),st(null)}catch(Fe){st("Failed to export identity"),console.error(Fe)}}},_e=()=>{const Fe={version:1,type:"contacts",timestamp:Date.now(),contacts:A.map(Ct=>({userId:Ct.userId,publicKey:Ct.publicKey,displayName:Ct.displayName,addedAt:Ct.addedAt}))},Mt=JSON.stringify(Fe,null,2),ft=new Blob([Mt],{type:"application/json"}),fn=URL.createObjectURL(ft),Wt=document.createElement("a");Wt.href=fn,Wt.download=`chat-contacts-${Date.now()}.json`,document.body.appendChild(Wt),Wt.click(),document.body.removeChild(Wt),URL.revokeObjectURL(fn)},Ke=()=>{o&&(navigator.clipboard.writeText(o.userId),I(!0),setTimeout(()=>I(!1),2e3))},Ge=()=>{vm(),mr.destroyAll(),Os.delete(),i(),r("setup")},rt=Fe=>{const Mt=document.getElementById(Fe);Mt&&Mt.scrollIntoView({behavior:"smooth"})},qt=()=>{if(Oe.current){const{scrollTop:Fe}=Oe.current;mt(Fe>200)}},sn=()=>{Oe.current&&Oe.current.scrollTo({top:0,behavior:"smooth"})};if(!o)return null;const Ve=()=>m.jsxs("nav",{className:"space-y-1",children:[m.jsxs("button",{onClick:()=>rt("public-profile"),className:"w-full flex items-center px-3 py-2 text-sm font-medium text-slate-300 rounded-lg hover:bg-slate-800 hover:text-white transition-colors group",children:[m.jsx("svg",{className:"w-5 h-5 mr-3 text-indigo-400 group-hover:text-indigo-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Public Profile"]}),m.jsxs("button",{onClick:()=>rt("identity"),className:"w-full flex items-center px-3 py-2 text-sm font-medium text-slate-300 rounded-lg hover:bg-slate-800 hover:text-white transition-colors group",children:[m.jsx("svg",{className:"w-5 h-5 mr-3 text-indigo-400 group-hover:text-indigo-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0c0 .884-.956 1.676-2 2.5-1.044-.824-2-1.616-2-2.5s.956-1.676 2-2.5c1.044.824 2 1.616 2 2.5z"})}),"Identity"]}),m.jsxs("button",{onClick:()=>rt("invites"),className:"w-full flex items-center px-3 py-2 text-sm font-medium text-slate-300 rounded-lg hover:bg-slate-800 hover:text-white transition-colors group",children:[m.jsx("svg",{className:"w-5 h-5 mr-3 text-indigo-400 group-hover:text-indigo-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})}),"Invites"]}),m.jsxs("button",{onClick:()=>rt("features"),className:"w-full flex items-center px-3 py-2 text-sm font-medium text-slate-300 rounded-lg hover:bg-slate-800 hover:text-white transition-colors group",children:[m.jsx("svg",{className:"w-5 h-5 mr-3 text-indigo-400 group-hover:text-indigo-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Features"]}),m.jsxs("button",{onClick:()=>rt("danger-zone"),className:"w-full flex items-center px-3 py-2 text-sm font-medium text-red-400 rounded-lg hover:bg-red-500/10 transition-colors group",children:[m.jsx("svg",{className:"w-5 h-5 mr-3 text-red-500 group-hover:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Danger Zone"]})]});return m.jsxs("div",{className:"h-screen flex flex-col bg-[var(--color-bg-dark)] text-slate-200",children:[m.jsx("div",{className:"bg-[var(--color-bg-card)] border-b border-slate-700/50 px-4 py-4 shadow-sm z-10 flex-shrink-0",children:m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsxs("button",{onClick:()=>r("contacts"),"aria-label":"Back to contacts",className:"flex items-center px-3 py-2 -ml-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:[m.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),m.jsx("span",{className:"font-medium",children:"Back"})]}),m.jsx("h1",{className:"text-xl font-bold text-white",children:"Settings"})]})}),m.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[m.jsx("div",{className:"hidden md:block w-64 bg-[var(--color-bg-card)] border-r border-slate-700/50 p-4 overflow-y-auto flex-shrink-0",children:m.jsx(Ve,{})}),m.jsxs("div",{ref:Oe,onScroll:qt,className:"flex-1 overflow-y-auto p-4 md:p-8 scroll-smooth relative",children:[m.jsxs("div",{className:"md:hidden mb-8 bg-[var(--color-bg-card)]/50 rounded-2xl border border-slate-700/50 p-4",children:[m.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:"Table of Contents"}),m.jsx(Ve,{})]}),m.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 pb-20",children:[m.jsxs("section",{id:"public-profile",className:"bg-[var(--color-bg-card)] rounded-2xl border border-slate-700/50 p-6 shadow-xl scroll-mt-6",children:[m.jsxs("h2",{className:"text-lg font-bold text-white mb-6 flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Public Profile"]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Display Name"}),m.jsx("input",{type:"text",value:We,onChange:Fe=>Xe(Fe.target.value),placeholder:"Your Name",className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Description"}),m.jsx("textarea",{value:Bt,onChange:Fe=>Pt(Fe.target.value),placeholder:"Tell others about yourself...",rows:3,className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all resize-none"})]}),m.jsx("div",{className:"pt-2 flex justify-end",children:m.jsx("button",{onClick:K,disabled:Me,className:`px-6 py-2.5 rounded-xl font-medium transition-all flex items-center ${Ce?"bg-green-500/20 text-green-400 border border-green-500/50":"bg-indigo-600 text-white hover:bg-indigo-500 shadow-lg shadow-indigo-500/20"}`,children:Me?m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-4 h-4 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Saving..."]}):Ce?m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Saved!"]}):"Save Profile"})})]})]}),m.jsxs("section",{id:"identity",className:"bg-[var(--color-bg-card)] rounded-2xl border border-slate-700/50 p-6 shadow-xl scroll-mt-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("h2",{className:"text-lg font-bold text-white flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0c0 .884-.956 1.676-2 2.5-1.044-.824-2-1.616-2-2.5s.956-1.676 2-2.5c1.044.824 2 1.616 2 2.5z"})}),"Identity"]}),m.jsx("button",{onClick:()=>fe(!X),className:"text-xs font-medium text-indigo-400 hover:text-indigo-300 transition-colors",children:X?"Hide Keys":"Show Keys"})]}),m.jsxs("div",{className:"space-y-5",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"User ID"}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"text",value:o.userId,readOnly:!0,className:"flex-1 px-3 py-2.5 bg-slate-900/50 border border-slate-700 rounded-xl font-mono text-sm text-slate-300 focus:outline-none"}),m.jsx("button",{onClick:Ke,className:"px-4 py-2.5 bg-slate-700 hover:bg-slate-600 text-white rounded-xl transition-colors font-medium",children:j?"Copied!":"Copy"})]})]}),X&&m.jsx("div",{className:"space-y-4 pt-4 border-t border-slate-700/50 animate-fade-in",children:m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Public Key (Signing)"}),m.jsx("input",{type:"text",value:o.publicKey,readOnly:!0,className:"w-full px-3 py-2 bg-slate-900/50 border border-slate-700 rounded-xl font-mono text-xs text-slate-400"})]})})]}),m.jsx("div",{className:"mt-6 pt-6 border-t border-slate-700/50",children:m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[m.jsxs("button",{onClick:()=>b(!0),className:"px-2 py-3 bg-slate-800 text-slate-200 rounded-xl hover:bg-slate-700 transition-colors font-medium flex flex-col items-center justify-center text-center text-xs sm:text-sm",children:[m.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Identity"]}),m.jsxs("button",{onClick:_e,className:"px-2 py-3 bg-slate-800 text-slate-200 rounded-xl hover:bg-slate-700 transition-colors font-medium flex flex-col items-center justify-center text-center text-xs sm:text-sm",children:[m.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Export Contacts"]}),m.jsxs("button",{disabled:!0,className:"px-2 py-3 bg-slate-800/50 text-slate-500 rounded-xl cursor-not-allowed font-medium flex flex-col items-center justify-center border border-slate-700/30 text-center text-xs sm:text-sm",children:[m.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),"Export Messages"]})]})})]}),m.jsxs("section",{id:"invites",className:"bg-[var(--color-bg-card)] rounded-2xl border border-slate-700/50 p-6 shadow-xl scroll-mt-6",children:[m.jsxs("h2",{className:"text-lg font-bold text-white mb-6 flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})}),"Active Invites"]}),se?m.jsx("div",{className:"text-center py-4 text-slate-400",children:"Loading invites..."}):Tt.length===0?m.jsxs("div",{className:"text-center py-8 bg-slate-800/30 rounded-xl border border-slate-700/30",children:[m.jsx("p",{className:"text-slate-400 text-sm",children:"No active invites found."}),m.jsx("p",{className:"text-slate-500 text-xs mt-1",children:'Create invites from the "Add Contact" screen.'})]}):m.jsx("div",{className:"space-y-3",children:Tt.map(Fe=>m.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl p-4 flex items-center justify-between group hover:border-indigo-500/30 transition-colors",children:[m.jsxs("div",{className:"min-w-0 flex-1 mr-4",children:[m.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[m.jsx("h3",{className:"text-white font-medium truncate",children:Fe.name||"Unnamed Invite"}),m.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${Fe.valid?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"}`,children:Fe.valid?"Active":"Revoked"})]}),m.jsxs("div",{className:"text-xs text-slate-400 flex items-center space-x-3",children:[m.jsxs("span",{children:["Uses: ",Fe.useCount," / ",Fe.useLimit===void 0?"":Fe.useLimit]}),m.jsxs("span",{children:["Created: ",new Date(Fe.createdAt).toLocaleDateString()]}),Fe.expiry&&m.jsxs("span",{className:Date.now()>Fe.expiry?"text-red-400":"",children:["Expires: ",new Date(Fe.expiry).toLocaleDateString()]})]})]}),m.jsx("div",{className:"flex items-center space-x-2",children:Fe.valid?m.jsx("button",{onClick:()=>Re(Fe.inviteId),className:"p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Revoke Invite",children:m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}):m.jsx("button",{onClick:()=>Qe(Fe.inviteId),className:"p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete Invite",children:m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},Fe.inviteId))})]}),m.jsxs("section",{id:"features",className:"bg-[var(--color-bg-card)] rounded-2xl border border-slate-700/50 p-6 shadow-xl scroll-mt-6",children:[m.jsxs("h2",{className:"text-lg font-bold text-white mb-6 flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Features"]}),m.jsx("div",{className:"space-y-6",children:m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-white mb-3",children:"Mini-chats visible"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[m.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center transition-colors ${u==="never"?"border-indigo-500 bg-indigo-500":"border-slate-600 bg-slate-800 group-hover:border-slate-500"}`,children:u==="never"&&m.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})}),m.jsx("input",{type:"radio",name:"miniChatVisibility",value:"never",checked:u==="never",onChange:Fe=>g(Fe.target.value),className:"hidden"}),m.jsxs("span",{className:"text-slate-300 group-hover:text-white transition-colors",children:["Never ",m.jsx("span",{className:"text-slate-500 text-sm ml-1",children:"(minichats are never shown)"})]})]}),m.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[m.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center transition-colors ${u==="contacts"?"border-indigo-500 bg-indigo-500":"border-slate-600 bg-slate-800 group-hover:border-slate-500"}`,children:u==="contacts"&&m.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})}),m.jsx("input",{type:"radio",name:"miniChatVisibility",value:"contacts",checked:u==="contacts",onChange:Fe=>g(Fe.target.value),className:"hidden"}),m.jsxs("span",{className:"text-slate-300 group-hover:text-white transition-colors",children:["Contacts ",m.jsx("span",{className:"text-slate-500 text-sm ml-1",children:"(shown when space available and chat closed)"})]})]}),m.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[m.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center transition-colors ${u==="always"?"border-indigo-500 bg-indigo-500":"border-slate-600 bg-slate-800 group-hover:border-slate-500"}`,children:u==="always"&&m.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})}),m.jsx("input",{type:"radio",name:"miniChatVisibility",value:"always",checked:u==="always",onChange:Fe=>g(Fe.target.value),className:"hidden"}),m.jsxs("span",{className:"text-slate-300 group-hover:text-white transition-colors",children:["Always ",m.jsx("span",{className:"text-slate-500 text-sm ml-1",children:"(shown when space available)"})]})]})]})]})})]}),m.jsxs("section",{id:"danger-zone",className:"bg-[var(--color-bg-card)] rounded-2xl border border-red-500/30 p-6 shadow-xl scroll-mt-6",children:[m.jsxs("h2",{className:"text-lg font-bold text-red-400 mb-6 flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Danger Zone"]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("button",{onClick:()=>_(!0),className:"w-full px-4 py-3 bg-red-500/10 text-red-400 border border-red-500/50 rounded-xl hover:bg-red-500 hover:text-white transition-all font-medium",children:"Delete Identity"}),m.jsx("p",{className:"text-xs text-slate-500 text-center",children:"This will permanently delete your identity and all local data"})]})]})]}),m.jsx("button",{onClick:sn,className:`fixed bottom-6 right-6 p-3 bg-indigo-600 text-white rounded-full shadow-lg shadow-indigo-500/30 hover:bg-indigo-500 transition-all duration-300 z-20 ${He?"opacity-100 translate-y-0":"opacity-0 translate-y-10 pointer-events-none"}`,"aria-label":"Back to top",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]})]}),M&&m.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in",children:m.jsxs("div",{className:"bg-[var(--color-bg-card)] border border-slate-700 rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Export Identity"}),m.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4 mb-6",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx("svg",{className:"w-5 h-5 text-yellow-500 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),m.jsx("p",{className:"text-sm text-yellow-200",children:"Your identity file contains your private key. Anyone with this file and password can impersonate you."})]})}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Encryption Password"}),m.jsx("input",{type:"password",value:pe,onChange:Fe=>Pe(Fe.target.value),placeholder:"Enter a strong password",className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50"}),ot&&m.jsx("p",{className:"mt-2 text-sm text-red-400",children:ot})]}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsx("button",{onClick:()=>{b(!1),Pe(""),st(null)},className:"flex-1 px-4 py-3 bg-slate-800 text-slate-300 rounded-xl hover:bg-slate-700 transition-colors font-medium",children:"Cancel"}),m.jsx("button",{onClick:me,className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-colors font-medium",children:"Export"})]})]})}),S&&m.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in",children:m.jsxs("div",{className:"bg-[var(--color-bg-card)] border border-red-500/30 rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[m.jsx("h2",{className:"text-xl font-bold text-red-500 mb-4",children:"Delete Identity?"}),m.jsx("p",{className:"text-slate-400 mb-6",children:"This action cannot be undone. Your identity and all local messages will be permanently deleted."}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsx("button",{onClick:()=>_(!1),className:"flex-1 px-4 py-3 bg-slate-800 text-slate-300 rounded-xl hover:bg-slate-700 transition-colors font-medium",children:"Cancel"}),m.jsx("button",{onClick:Ge,className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-xl hover:bg-red-500 transition-colors font-medium",children:"Delete"})]})]})})]})}function zx({contactId:o,onClose:r}){const{getContact:i,updateLocalProfile:s}=qr(),u=i(o),[g,A]=Le.useState(""),[M,b]=Le.useState(""),[S,_]=Le.useState(""),[j,I]=Le.useState(!1);if(Le.useEffect(()=>{u&&(A(u.localProfile?.name||u.displayName||""),b(u.localProfile?.description||""),_(u.localProfile?.group||""))},[u]),!u)return null;const X=async()=>{I(!0);try{await s(o,{name:g,description:M,group:S}),r()}catch(pe){console.error("Failed to update profile:",pe)}finally{I(!1)}},fe=()=>{u.peerProfile&&(A(u.peerProfile.name||""),b(u.peerProfile.description||""),_(u.peerProfile.group||""))};return m.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in",children:m.jsxs("div",{className:"bg-[var(--color-bg-card)] border border-slate-700 rounded-2xl max-w-4xl w-full shadow-2xl flex flex-col max-h-[90vh] overflow-hidden",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700/50",children:[m.jsx("h2",{className:"text-xl font-bold text-white",children:"Edit Contact Profile"}),m.jsx("button",{onClick:r,className:"text-slate-400 hover:text-white transition-colors",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 p-6",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[m.jsxs("div",{className:"space-y-6",children:[m.jsxs("h3",{className:"text-lg font-semibold text-indigo-400 flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Local Profile"]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Display Name"}),m.jsx("input",{type:"text",value:g,onChange:pe=>A(pe.target.value),className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all",placeholder:"Name for this contact"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Description"}),m.jsx("textarea",{value:M,onChange:pe=>b(pe.target.value),rows:4,className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all resize-none",placeholder:"Add notes or description..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Group"}),m.jsx("input",{type:"text",value:S,onChange:pe=>_(pe.target.value),className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all",placeholder:"e.g. Friends, Work"})]})]})]}),m.jsxs("div",{className:"space-y-6 md:border-l md:border-slate-700/50 md:pl-8",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("h3",{className:"text-lg font-semibold text-emerald-400 flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Peer's Public Profile"]}),m.jsxs("button",{onClick:fe,disabled:!u.peerProfile,className:"text-xs px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-indigo-400 rounded-lg transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",title:"Copy details from peer's public profile",children:[m.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Pull from Peer"]})]}),u.peerProfile?m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wider mb-2",children:"Public Name"}),m.jsx("div",{className:"px-4 py-3 bg-slate-800/30 border border-slate-700/30 rounded-xl text-slate-300",children:u.peerProfile.name||m.jsx("span",{className:"text-slate-600 italic",children:"Not set"})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wider mb-2",children:"Public Description"}),m.jsx("div",{className:"px-4 py-3 bg-slate-800/30 border border-slate-700/30 rounded-xl text-slate-300 min-h-[100px] whitespace-pre-wrap",children:u.peerProfile.description||m.jsx("span",{className:"text-slate-600 italic",children:"Not set"})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wider mb-2",children:"Public Group"}),m.jsx("div",{className:"px-4 py-3 bg-slate-800/30 border border-slate-700/30 rounded-xl text-slate-300",children:u.peerProfile.group||m.jsx("span",{className:"text-slate-600 italic",children:"Not set"})})]})]}):m.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center p-6 bg-slate-800/20 rounded-2xl border border-slate-700/30 border-dashed",children:[m.jsx("svg",{className:"w-12 h-12 text-slate-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),m.jsx("p",{className:"text-slate-400 font-medium",children:"No public profile available"}),m.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"The peer hasn't shared their profile yet."})]})]})]})}),m.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-slate-700/50 bg-slate-800/20",children:[m.jsx("button",{onClick:r,className:"px-6 py-2.5 bg-slate-800 text-slate-300 rounded-xl hover:bg-slate-700 transition-colors font-medium",children:"Cancel"}),m.jsx("button",{onClick:X,disabled:j,className:"px-6 py-2.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-colors font-medium shadow-lg shadow-indigo-500/20 flex items-center",children:j?m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-4 h-4 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Saving..."]}):"Save Changes"})]})]})})}const vc=100;function Yx(){const{identity:o,activeContactId:r,setActiveView:i}=Wa(),{getContact:s}=qr(),{messages:u,addMessage:g,setMessages:A,prependMessages:M,updateMessageDelivery:b}=Mo(),[S,_]=Le.useState(""),[j,I]=Le.useState(!1),[X,fe]=Le.useState(!0),[pe,Pe]=Le.useState(!1),[ot,st]=Le.useState(!1),He=Le.useRef(null),mt=Le.useRef(null),Oe=r?s(r):null,We=o&&Oe?[o.userId,Oe.userId].sort().join("-"):"";Le.useEffect(()=>{if(!We)return;(async()=>{const Qe=await Fn.getRecentMessages(We,vc);A(We,Qe),fe(Qe.length===vc)})()},[We,A]);const Xe=Le.useCallback(async()=>{if(!We||pe||!X)return;const Re=u[We]||[];if(Re.length===0)return;const Qe=Re[0].msg_id;if(Qe!==void 0){Pe(!0);try{const K=await Fn.getMessagesBefore(We,Qe,vc);if(K.length>0){const me=mt.current,_e=me?.scrollHeight||0;M(We,K),requestAnimationFrame(()=>{if(me){const Ke=me.scrollHeight;me.scrollTop=Ke-_e}})}fe(K.length===vc)}finally{Pe(!1)}}},[We,u,pe,X,M]),Bt=Le.useCallback(Re=>{const{scrollTop:Qe}=Re.currentTarget;Qe<100&&X&&!pe&&Xe()},[X,pe,Xe]);Le.useEffect(()=>{He.current?.scrollIntoView({behavior:"smooth"})},[u[We]]);const Pt=async()=>{if(!S.trim()||!o||!Oe||j)return;I(!0);const Re=Nx();try{const Qe={msg_uuid:Re,conversationId:We,from:o.userId,content:S.trim(),timestamp:Date.now(),delivered:!1,firstAttemptTimestamp:Date.now(),showAsFailedInUI:!1,type:"text"};console.log("[ChatView] Saving message to db, conversationId:",We,"msgUuid:",Re);const K=await Fn.addMessage(Qe);Qe.msg_id=K,g(We,Qe),_(""),ad(Oe.userId,Qe),console.log("[ChatView] Sending message to",Oe.userId,"status:",Oe.status);try{await mr.sendMessage(Oe.userId,qc(Qe)),console.log("[ChatView]  Message sent (waiting for ACK)")}catch(me){const _e=me instanceof Error?me.message:"Unknown error";console.log("[ChatView] Send pending:",_e)}}catch(Qe){console.error("Failed to create/send message:",Qe)}finally{I(!1)}},Me=async Re=>{if(!(!o||!Oe)){if(Re.msg_id===void 0){console.error("Cannot retry message without msg_id");return}console.log("[ChatView] Manual retry for message:",Re.msg_uuid);try{const Qe=Date.now();await Fn.updateMessageDelivery(Re.msg_id,!1,!1,Qe),b(Re.msg_id,!1,!1);const K={...Re,firstAttemptTimestamp:Qe,showAsFailedInUI:!1};ad(Oe.userId,K),await mr.sendMessage(Oe.userId,qc(K)),console.log("[ChatView]  Retry sent (waiting for ACK)")}catch(Qe){console.error("[ChatView]  Manual retry failed:",Qe)}}},Ue=async Re=>{if(confirm("Are you sure you want to delete this message?")){await Fn.deleteMessage(Re);const{deleteMessage:Qe}=Mo.getState();Qe(Re)}},Ce=Re=>{Re.key==="Enter"&&!Re.shiftKey&&(Re.preventDefault(),Pt())},xe=Re=>{const Qe=Re.localProfile?.name,K=Re.peerProfile?.name,me=!Qe&&!!K;return{displayName:Qe||K||`User ${Re.userId.slice(0,8).toUpperCase()}`,isPeerProvided:me}},Tt=Re=>Re.status==="online"?m.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-emerald-500 border-2 border-[var(--color-bg-card)] rounded-full"}):Re.status==="handshake"?m.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-yellow-500 border-2 border-[var(--color-bg-card)] rounded-full animate-pulse"}):Re.status==="failed"?m.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 border-2 border-[var(--color-bg-card)] rounded-full bg-red-500 flex items-center justify-center",children:m.jsx("svg",{className:"w-1.5 h-1.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})}):null;if(!o||!Oe)return m.jsx("div",{className:"h-screen flex items-center justify-center bg-[var(--color-bg-dark)]",children:m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-slate-400",children:"No contact selected"}),m.jsx("button",{onClick:()=>i("contacts"),className:"mt-4 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-500 transition-colors",children:"Back to Contacts"})]})});const Ze=u[We]||[],{displayName:se,isPeerProvided:Ye}=xe(Oe),Ie=Oe.localProfile?.group;return m.jsxs("div",{className:"h-screen flex flex-col bg-[var(--color-bg-dark)] animate-fade-in",children:[m.jsxs("div",{className:"bg-[var(--color-bg-card)]/80 backdrop-blur-md border-b border-slate-700/50 px-4 py-3 flex items-center space-x-4 sticky top-0 z-10",children:[m.jsx("button",{onClick:()=>i("contacts"),"aria-label":"Back to Contacts",className:"p-2 hover:bg-slate-700/50 rounded-full transition-colors text-slate-300 hover:text-white",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-500/20",children:m.jsx("span",{className:"text-white font-bold",children:se?.[0]?.toUpperCase()||Oe.userId.slice(0,2).toUpperCase()})}),Tt(Oe)]}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h2",{className:`font-semibold truncate ${Ye?"text-slate-300 italic":"text-slate-100"}`,children:se}),m.jsx("div",{className:"flex items-center space-x-2",children:Ie?m.jsx("span",{className:"text-xs text-indigo-400 font-medium",children:Ie}):m.jsx(m.Fragment,{children:Oe.status==="online"?m.jsxs("div",{className:"flex items-center space-x-1.5",children:[m.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-xs text-emerald-400 font-medium",children:"Online"})]}):Oe.status==="handshake"?m.jsxs("div",{className:"flex items-center space-x-1.5",children:[m.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-xs text-yellow-400 font-medium",children:"Connecting"})]}):Oe.status==="failed"?m.jsxs("div",{className:"flex items-center space-x-1.5",children:[m.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),m.jsx("span",{className:"text-xs text-red-400 font-medium",children:"Failed"})]}):m.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Offline"})})})]}),m.jsxs("div",{className:"flex space-x-1",children:[m.jsx("button",{onClick:()=>st(!0),className:"p-2 hover:bg-slate-700/50 rounded-full transition-colors text-slate-400 hover:text-white",title:"Edit Profile",children:m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),m.jsx("button",{className:"p-2 hover:bg-slate-700/50 rounded-full transition-colors text-slate-400 hover:text-white",title:"Voice call",children:m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),m.jsx("button",{className:"p-2 hover:bg-slate-700/50 rounded-full transition-colors text-slate-400 hover:text-white",title:"Video call",children:m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),m.jsxs("div",{ref:mt,onScroll:Bt,className:"flex-1 overflow-y-auto p-4 space-y-6",children:[pe&&m.jsx("div",{className:"flex justify-center py-2",children:m.jsxs("svg",{className:"w-5 h-5 animate-spin text-slate-400",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})}),Ze.length===0?m.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center opacity-50",children:[m.jsx("div",{className:"w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mb-4 border border-slate-700",children:m.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),m.jsx("h3",{className:"text-lg font-semibold text-slate-300 mb-2",children:"No messages yet"}),m.jsx("p",{className:"text-slate-500 text-sm",children:"Send a message to start the conversation"})]}):m.jsxs(m.Fragment,{children:[Ze.map(Re=>{const Qe=Re.from===o.userId;return m.jsx("div",{className:`flex ${Qe?"justify-end":"justify-start"} animate-fade-in group`,children:m.jsxs("div",{className:`max-w-xs lg:max-w-md xl:max-w-lg ${Qe?"order-2":"order-1"}`,children:[m.jsx("div",{className:`rounded-2xl px-5 py-3 shadow-sm ${Qe?"bg-indigo-600 text-white rounded-br-sm shadow-indigo-500/10":"bg-[var(--color-bg-card)] text-slate-200 rounded-bl-sm border border-slate-700/50"}`,children:m.jsx("p",{className:"text-sm whitespace-pre-wrap break-words leading-relaxed",children:Re.content})}),m.jsxs("div",{className:`flex items-center space-x-2 mt-1.5 px-1 ${Qe?"justify-end":"justify-start"}`,children:[m.jsx("span",{className:"text-[11px] text-slate-500 font-medium",children:Kx(Re.timestamp)}),Qe&&Re.msg_id!==void 0&&m.jsx("button",{onClick:()=>Ue(Re.msg_id),className:"opacity-0 group-hover:opacity-100 p-1 text-slate-500 hover:text-red-400 transition-all",title:"Delete message",children:m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),Qe&&m.jsxs(m.Fragment,{children:[Re.delivered&&m.jsx("span",{className:"text-[11px] text-indigo-400",children:"Received"}),!Re.delivered&&!Re.showAsFailedInUI&&m.jsxs("span",{className:"text-[11px] text-slate-500 flex items-center",children:[m.jsx("svg",{className:"w-3 h-3 animate-spin mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Pending"]}),!Re.delivered&&Re.showAsFailedInUI&&m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsxs("span",{className:"text-[11px] text-red-400 flex items-center",title:Re.error,children:[m.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"Failed"]}),m.jsx("button",{onClick:()=>Me(Re),className:"text-[11px] text-indigo-400 hover:text-indigo-300 underline",children:"Retry"})]})]})]})]})},Re.msg_uuid)}),m.jsx("div",{ref:He})]})]}),m.jsxs("div",{className:"bg-[var(--color-bg-card)] border-t border-slate-700/50 p-4",children:[Oe.status!=="online"&&m.jsxs("div",{className:"flex items-center justify-center py-2 px-4 bg-yellow-900/20 border border-yellow-700/50 rounded-lg mb-3 max-w-4xl mx-auto",children:[m.jsx("svg",{className:"w-5 h-5 text-yellow-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),m.jsx("span",{className:"text-sm text-yellow-400",children:Oe.status==="handshake"?"Establishing secure connection...":Oe.status==="failed"?"Connection failed. Messages will be queued.":"Contact is disconnected. Messages might be delayed."})]}),m.jsxs("div",{className:"flex items-end space-x-3 max-w-4xl mx-auto",children:[m.jsx("div",{className:"flex-1 relative",children:m.jsx("textarea",{value:S,onChange:Re=>_(Re.target.value),onKeyPress:Ce,placeholder:"Type a message...",rows:1,className:"w-full px-5 py-3.5 bg-slate-900/50 border border-slate-700 rounded-2xl focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 text-slate-200 placeholder-slate-500 resize-none transition-all",style:{minHeight:"50px",maxHeight:"120px"}})}),m.jsx("button",{onClick:Pt,disabled:!S.trim()||j,className:`p-3.5 rounded-xl transition-all shadow-lg ${S.trim()&&!j?"bg-indigo-600 hover:bg-indigo-500 text-white shadow-indigo-500/20 hover:shadow-indigo-500/40 active:scale-95":"bg-slate-800 text-slate-600 cursor-not-allowed"}`,children:j?m.jsx("svg",{className:"w-6 h-6 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}):m.jsx("svg",{className:"w-6 h-6 transform rotate-90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),m.jsxs("p",{className:"text-[10px] text-slate-500 mt-3 text-center flex items-center justify-center gap-1.5 uppercase tracking-widest font-medium opacity-60",children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"End-to-End Encrypted"]})]}),ot&&m.jsx(zx,{contactId:Oe.userId,onClose:()=>st(!1)})]})}function Kx(o){const r=new Date(o),i=new Date,s=i.getTime()-r.getTime();return r.toDateString()===i.toDateString()?r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):s<10080*60*1e3?r.toLocaleDateString("en-US",{weekday:"short"})+" "+r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):r.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" "+r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}const Gx=()=>typeof window<"u"&&window.__TEST_MODE__===!0;async function Vx(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission==="denied"?!1:await Notification.requestPermission()==="granted":!1}function Fx(o,r){"Notification"in window&&Notification.permission==="granted"&&document.visibilityState!=="visible"&&new Notification(o,{body:r,icon:"/icon-192.png",tag:"chat-message"})}function Hx(){const{identity:o,activeView:r,setIdentity:i,setActiveView:s,setInitialized:u}=Wa(),[,g]=Le.useState(null),A=Le.useRef(null);return Le.useEffect(()=>{const M=Os.load();M?(i(M),window.history.replaceState({view:"contacts"},""),s("contacts")):u(!0)},[i,s,u]),Le.useEffect(()=>{const M=b=>{b.state?.view?s(b.state.view):o&&s("contacts")};return window.addEventListener("popstate",M),()=>window.removeEventListener("popstate",M)},[s,o]),Le.useEffect(()=>{if(!o)return;window.history.state?.view!==r&&window.history.pushState({view:r},"",`#${r}`)},[r,o]),Le.useEffect(()=>((async()=>{if(o){if(A.current===o.userId){console.log("[App] Transport already initialized for this identity (React guard)");const{useContactStore:b}=await kf(async()=>{const{useContactStore:S}=await Promise.resolve().then(()=>Yp);return{useContactStore:S}},void 0);b.getState().loaded||(console.log("[App] Reloading contacts after HMR"),await b.getState().loadContacts());return}console.log("[App] Initializing transport for identity:",o.userId.substring(0,8)),A.current=o.userId;try{await mr.initialize(o);const{initRetryService:b,setRetryTimeoutCallback:S}=await kf(async()=>{const{initRetryService:I,setRetryTimeoutCallback:X}=await Promise.resolve().then(()=>Ux);return{initRetryService:I,setRetryTimeoutCallback:X}},void 0);b(o.userId,Gx()?{minPeerInterval:2e3,timerInterval:100,timeoutMs:5e3}:{minPeerInterval:5e3,timerInterval:300,timeoutMs:3e4}),S(async I=>{const{updateMessageDelivery:X}=Mo.getState();await Fn.updateMessageDelivery(I,!1,!0),X(I,!1,!0)});const{useContactStore:_}=await kf(async()=>{const{useContactStore:I}=await Promise.resolve().then(()=>Yp);return{useContactStore:I}},void 0);await _.getState().loadContacts(),console.log("[App]  Contacts loaded and registered with transport"),Vx();const{addMessage:j}=Mo.getState();mr.onMessage(async(I,X)=>{if(X.type==="ack"){console.log("[App] Received ACK for message:",X.id);const{getMessage:Oe,updateMessageDelivery:We}=Mo.getState();let Xe=Oe(X.id);Xe||(Xe=await Fn.getMessageByUuid(X.id)),Xe?.msg_id!==void 0&&(await Fn.updateMessageDelivery(Xe.msg_id,!0),We(Xe.msg_id,!0,!1)),xm(I,X.id),bm(I);return}const fe=[o.userId,I].sort().join("-"),pe=jx(X,I,fe);await Fn.addMessage(pe),j(fe,pe);const{activeContactId:Pe,activeView:ot}=Wa.getState();ot==="chat"&&Pe===I||_.getState().incrementUnread(I);const He=_.getState().getContact(I),mt=He?.localProfile?.name||He?.peerProfile?.name||`User ${I.slice(0,8)}`;if(Fx(mt,X.content||"New message"),o)try{await mr.sendMessage(I,Dx(X.id,X.timestamp)),console.log("[App] Sent ACK for:",X.id)}catch(Oe){console.error("[App] Failed to send ACK:",Oe)}})}catch(b){console.error("[App] Transport initialization failed:",b),A.current=null,g(b instanceof Error?b.message:"Failed to initialize network connection")}}})(),()=>{console.log("[App] Component unmount - preserving all state")}),[o]),!o||r==="setup"?m.jsx(f1,{}):m.jsxs("div",{className:"flex h-screen overflow-hidden bg-[var(--color-bg-dark)]",children:[m.jsx("div",{className:`
        ${r==="contacts"?"flex w-full":r==="settings"?"hidden":"hidden md:flex md:w-80 lg:w-96 border-r border-slate-700/50"}
        flex-col h-full z-20 bg-[var(--color-bg-dark)] transition-all duration-300
      `,children:m.jsx(Rx,{})}),m.jsxs("div",{className:`
        ${r==="contacts"?"hidden":"flex"}
        flex-1 flex-col h-full relative z-10 bg-[var(--color-bg-dark)]
      `,children:[r==="settings"&&m.jsx(Lx,{}),r==="chat"&&m.jsx(Yx,{})]})]})}Jy.createRoot(document.getElementById("root")).render(m.jsx(Le.StrictMode,{children:m.jsx(Hx,{})}));

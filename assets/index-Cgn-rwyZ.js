function Oy(o,r){for(var i=0;i<r.length;i++){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){for(const u in s)if(u!=="default"&&!(u in o)){const g=Object.getOwnPropertyDescriptor(s,u);g&&Object.defineProperty(o,u,g.get?g:{enumerable:!0,get:()=>s[u]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const g of u)if(g.type==="childList")for(const A of g.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&s(A)}).observe(document,{childList:!0,subtree:!0});function i(u){const g={};return u.integrity&&(g.integrity=u.integrity),u.referrerPolicy&&(g.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?g.credentials="include":u.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function s(u){if(u.ep)return;u.ep=!0;const g=i(u);fetch(u.href,g)}})();var Iy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vl(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function qy(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var r=o.default;if(typeof r=="function"){var i=function s(){var u=!1;try{u=this instanceof s}catch{}return u?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};i.prototype=r.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(o).forEach(function(s){var u=Object.getOwnPropertyDescriptor(o,s);Object.defineProperty(i,s,u.get?u:{enumerable:!0,get:function(){return o[s]}})}),i}var wf={exports:{}},ul={};var lp;function Uy(){if(lp)return ul;lp=1;var o=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(s,u,g){var A=null;if(g!==void 0&&(A=""+g),u.key!==void 0&&(A=""+u.key),"key"in u){g={};for(var M in u)M!=="key"&&(g[M]=u[M])}else g=u;return u=g.ref,{$$typeof:o,type:s,key:A,ref:u!==void 0?u:null,props:g}}return ul.Fragment=r,ul.jsx=i,ul.jsxs=i,ul}var cp;function Ly(){return cp||(cp=1,wf.exports=Uy()),wf.exports}var v=Ly(),Sf={exports:{}},Zt={};var up;function zy(){if(up)return Zt;up=1;var o=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),A=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),L=Symbol.iterator;function X(K){return K===null||typeof K!="object"?null:(K=L&&K[L]||K["@@iterator"],typeof K=="function"?K:null)}var ge={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},de=Object.assign,Pe={};function pt(K,me,De){this.props=K,this.context=me,this.refs=Pe,this.updater=De||ge}pt.prototype.isReactComponent={},pt.prototype.setState=function(K,me){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,me,"setState")},pt.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function Ke(){}Ke.prototype=pt.prototype;function He(K,me,De){this.props=K,this.context=me,this.refs=Pe,this.updater=De||ge}var ut=He.prototype=new Ke;ut.constructor=He,de(ut,pt.prototype),ut.isPureReactComponent=!0;var $e=Array.isArray;function rt(){}var it={H:null,A:null,T:null,S:null},Bt=Object.prototype.hasOwnProperty;function Pt(K,me,De){var Ge=De.ref;return{$$typeof:o,type:K,key:me,ref:Ge!==void 0?Ge:null,props:De}}function ke(K,me){return Pt(K.type,me,K.props)}function Le(K){return typeof K=="object"&&K!==null&&K.$$typeof===o}function Se(K){var me={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(De){return me[De]})}var xe=/\/+/g;function At(K,me){return typeof K=="object"&&K!==null&&K.key!=null?Se(""+K.key):me.toString(36)}function Ze(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(rt,rt):(K.status="pending",K.then(function(me){K.status==="pending"&&(K.status="fulfilled",K.value=me)},function(me){K.status==="pending"&&(K.status="rejected",K.reason=me)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function se(K,me,De,Ge,Ve){var Me=typeof K;(Me==="undefined"||Me==="boolean")&&(K=null);var gt=!1;if(K===null)gt=!0;else switch(Me){case"bigint":case"string":case"number":gt=!0;break;case"object":switch(K.$$typeof){case o:case r:gt=!0;break;case _:return gt=K._init,se(gt(K._payload),me,De,Ge,Ve)}}if(gt)return Ve=Ve(K),gt=Ge===""?"."+At(K,0):Ge,$e(Ve)?(De="",gt!=null&&(De=gt.replace(xe,"$&/")+"/"),se(Ve,me,De,"",function(Fe){return Fe})):Ve!=null&&(Le(Ve)&&(Ve=ke(Ve,De+(Ve.key==null||K&&K.key===Ve.key?"":(""+Ve.key).replace(xe,"$&/")+"/")+gt)),me.push(Ve)),1;gt=0;var Ct=Ge===""?".":Ge+":";if($e(K))for(var ze=0;ze<K.length;ze++)Ge=K[ze],Me=Ct+At(Ge,ze),gt+=se(Ge,me,De,Me,Ve);else if(ze=X(K),typeof ze=="function")for(K=ze.call(K),ze=0;!(Ge=K.next()).done;)Ge=Ge.value,Me=Ct+At(Ge,ze++),gt+=se(Ge,me,De,Me,Ve);else if(Me==="object"){if(typeof K.then=="function")return se(Ze(K),me,De,Ge,Ve);throw me=String(K),Error("Objects are not valid as a React child (found: "+(me==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":me)+"). If you meant to render a collection of children, use an array instead.")}return gt}function Ue(K,me,De){if(K==null)return K;var Ge=[],Ve=0;return se(K,Ge,"","",function(Me){return me.call(De,Me,Ve++)}),Ge}function Ie(K){if(K._status===-1){var me=K._result;me=me(),me.then(function(De){(K._status===0||K._status===-1)&&(K._status=1,K._result=De)},function(De){(K._status===0||K._status===-1)&&(K._status=2,K._result=De)}),K._status===-1&&(K._status=0,K._result=me)}if(K._status===1)return K._result.default;throw K._result}var Re=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var me=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(me))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},Qe={map:Ue,forEach:function(K,me,De){Ue(K,function(){me.apply(this,arguments)},De)},count:function(K){var me=0;return Ue(K,function(){me++}),me},toArray:function(K){return Ue(K,function(me){return me})||[]},only:function(K){if(!Le(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return Zt.Activity=j,Zt.Children=Qe,Zt.Component=pt,Zt.Fragment=i,Zt.Profiler=u,Zt.PureComponent=He,Zt.StrictMode=s,Zt.Suspense=b,Zt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=it,Zt.__COMPILER_RUNTIME={__proto__:null,c:function(K){return it.H.useMemoCache(K)}},Zt.cache=function(K){return function(){return K.apply(null,arguments)}},Zt.cacheSignal=function(){return null},Zt.cloneElement=function(K,me,De){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var Ge=de({},K.props),Ve=K.key;if(me!=null)for(Me in me.key!==void 0&&(Ve=""+me.key),me)!Bt.call(me,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&me.ref===void 0||(Ge[Me]=me[Me]);var Me=arguments.length-2;if(Me===1)Ge.children=De;else if(1<Me){for(var gt=Array(Me),Ct=0;Ct<Me;Ct++)gt[Ct]=arguments[Ct+2];Ge.children=gt}return Pt(K.type,Ve,Ge)},Zt.createContext=function(K){return K={$$typeof:A,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:g,_context:K},K},Zt.createElement=function(K,me,De){var Ge,Ve={},Me=null;if(me!=null)for(Ge in me.key!==void 0&&(Me=""+me.key),me)Bt.call(me,Ge)&&Ge!=="key"&&Ge!=="__self"&&Ge!=="__source"&&(Ve[Ge]=me[Ge]);var gt=arguments.length-2;if(gt===1)Ve.children=De;else if(1<gt){for(var Ct=Array(gt),ze=0;ze<gt;ze++)Ct[ze]=arguments[ze+2];Ve.children=Ct}if(K&&K.defaultProps)for(Ge in gt=K.defaultProps,gt)Ve[Ge]===void 0&&(Ve[Ge]=gt[Ge]);return Pt(K,Me,Ve)},Zt.createRef=function(){return{current:null}},Zt.forwardRef=function(K){return{$$typeof:M,render:K}},Zt.isValidElement=Le,Zt.lazy=function(K){return{$$typeof:_,_payload:{_status:-1,_result:K},_init:Ie}},Zt.memo=function(K,me){return{$$typeof:S,type:K,compare:me===void 0?null:me}},Zt.startTransition=function(K){var me=it.T,De={};it.T=De;try{var Ge=K(),Ve=it.S;Ve!==null&&Ve(De,Ge),typeof Ge=="object"&&Ge!==null&&typeof Ge.then=="function"&&Ge.then(rt,Re)}catch(Me){Re(Me)}finally{me!==null&&De.types!==null&&(me.types=De.types),it.T=me}},Zt.unstable_useCacheRefresh=function(){return it.H.useCacheRefresh()},Zt.use=function(K){return it.H.use(K)},Zt.useActionState=function(K,me,De){return it.H.useActionState(K,me,De)},Zt.useCallback=function(K,me){return it.H.useCallback(K,me)},Zt.useContext=function(K){return it.H.useContext(K)},Zt.useDebugValue=function(){},Zt.useDeferredValue=function(K,me){return it.H.useDeferredValue(K,me)},Zt.useEffect=function(K,me){return it.H.useEffect(K,me)},Zt.useEffectEvent=function(K){return it.H.useEffectEvent(K)},Zt.useId=function(){return it.H.useId()},Zt.useImperativeHandle=function(K,me,De){return it.H.useImperativeHandle(K,me,De)},Zt.useInsertionEffect=function(K,me){return it.H.useInsertionEffect(K,me)},Zt.useLayoutEffect=function(K,me){return it.H.useLayoutEffect(K,me)},Zt.useMemo=function(K,me){return it.H.useMemo(K,me)},Zt.useOptimistic=function(K,me){return it.H.useOptimistic(K,me)},Zt.useReducer=function(K,me,De){return it.H.useReducer(K,me,De)},Zt.useRef=function(K){return it.H.useRef(K)},Zt.useState=function(K){return it.H.useState(K)},Zt.useSyncExternalStore=function(K,me,De){return it.H.useSyncExternalStore(K,me,De)},Zt.useTransition=function(){return it.H.useTransition()},Zt.version="19.2.0",Zt}var fp;function rd(){return fp||(fp=1,Sf.exports=zy()),Sf.exports}var Ye=rd();const Jn=vl(Ye);var Af={exports:{}},fl={},Ef={exports:{}},Tf={};var dp;function Yy(){return dp||(dp=1,(function(o){function r(se,Ue){var Ie=se.length;se.push(Ue);e:for(;0<Ie;){var Re=Ie-1>>>1,Qe=se[Re];if(0<u(Qe,Ue))se[Re]=Ue,se[Ie]=Qe,Ie=Re;else break e}}function i(se){return se.length===0?null:se[0]}function s(se){if(se.length===0)return null;var Ue=se[0],Ie=se.pop();if(Ie!==Ue){se[0]=Ie;e:for(var Re=0,Qe=se.length,K=Qe>>>1;Re<K;){var me=2*(Re+1)-1,De=se[me],Ge=me+1,Ve=se[Ge];if(0>u(De,Ie))Ge<Qe&&0>u(Ve,De)?(se[Re]=Ve,se[Ge]=Ie,Re=Ge):(se[Re]=De,se[me]=Ie,Re=me);else if(Ge<Qe&&0>u(Ve,Ie))se[Re]=Ve,se[Ge]=Ie,Re=Ge;else break e}}return Ue}function u(se,Ue){var Ie=se.sortIndex-Ue.sortIndex;return Ie!==0?Ie:se.id-Ue.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;o.unstable_now=function(){return g.now()}}else{var A=Date,M=A.now();o.unstable_now=function(){return A.now()-M}}var b=[],S=[],_=1,j=null,L=3,X=!1,ge=!1,de=!1,Pe=!1,pt=typeof setTimeout=="function"?setTimeout:null,Ke=typeof clearTimeout=="function"?clearTimeout:null,He=typeof setImmediate<"u"?setImmediate:null;function ut(se){for(var Ue=i(S);Ue!==null;){if(Ue.callback===null)s(S);else if(Ue.startTime<=se)s(S),Ue.sortIndex=Ue.expirationTime,r(b,Ue);else break;Ue=i(S)}}function $e(se){if(de=!1,ut(se),!ge)if(i(b)!==null)ge=!0,rt||(rt=!0,Se());else{var Ue=i(S);Ue!==null&&Ze($e,Ue.startTime-se)}}var rt=!1,it=-1,Bt=5,Pt=-1;function ke(){return Pe?!0:!(o.unstable_now()-Pt<Bt)}function Le(){if(Pe=!1,rt){var se=o.unstable_now();Pt=se;var Ue=!0;try{e:{ge=!1,de&&(de=!1,Ke(it),it=-1),X=!0;var Ie=L;try{t:{for(ut(se),j=i(b);j!==null&&!(j.expirationTime>se&&ke());){var Re=j.callback;if(typeof Re=="function"){j.callback=null,L=j.priorityLevel;var Qe=Re(j.expirationTime<=se);if(se=o.unstable_now(),typeof Qe=="function"){j.callback=Qe,ut(se),Ue=!0;break t}j===i(b)&&s(b),ut(se)}else s(b);j=i(b)}if(j!==null)Ue=!0;else{var K=i(S);K!==null&&Ze($e,K.startTime-se),Ue=!1}}break e}finally{j=null,L=Ie,X=!1}Ue=void 0}}finally{Ue?Se():rt=!1}}}var Se;if(typeof He=="function")Se=function(){He(Le)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,At=xe.port2;xe.port1.onmessage=Le,Se=function(){At.postMessage(null)}}else Se=function(){pt(Le,0)};function Ze(se,Ue){it=pt(function(){se(o.unstable_now())},Ue)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(se){se.callback=null},o.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Bt=0<se?Math.floor(1e3/se):5},o.unstable_getCurrentPriorityLevel=function(){return L},o.unstable_next=function(se){switch(L){case 1:case 2:case 3:var Ue=3;break;default:Ue=L}var Ie=L;L=Ue;try{return se()}finally{L=Ie}},o.unstable_requestPaint=function(){Pe=!0},o.unstable_runWithPriority=function(se,Ue){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var Ie=L;L=se;try{return Ue()}finally{L=Ie}},o.unstable_scheduleCallback=function(se,Ue,Ie){var Re=o.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?Re+Ie:Re):Ie=Re,se){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=Ie+Qe,se={id:_++,callback:Ue,priorityLevel:se,startTime:Ie,expirationTime:Qe,sortIndex:-1},Ie>Re?(se.sortIndex=Ie,r(S,se),i(b)===null&&se===i(S)&&(de?(Ke(it),it=-1):de=!0,Ze($e,Ie-Re))):(se.sortIndex=Qe,r(b,se),ge||X||(ge=!0,rt||(rt=!0,Se()))),se},o.unstable_shouldYield=ke,o.unstable_wrapCallback=function(se){var Ue=L;return function(){var Ie=L;L=Ue;try{return se.apply(this,arguments)}finally{L=Ie}}}})(Tf)),Tf}var hp;function Ky(){return hp||(hp=1,Ef.exports=Yy()),Ef.exports}var Mf={exports:{}},Ir={};var pp;function Gy(){if(pp)return Ir;pp=1;var o=rd();function r(b){var S="https://react.dev/errors/"+b;if(1<arguments.length){S+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)S+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+b+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},u=Symbol.for("react.portal");function g(b,S,_){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:j==null?null:""+j,children:b,containerInfo:S,implementation:_}}var A=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function M(b,S){if(b==="font")return"";if(typeof S=="string")return S==="use-credentials"?S:""}return Ir.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ir.createPortal=function(b,S){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S||S.nodeType!==1&&S.nodeType!==9&&S.nodeType!==11)throw Error(r(299));return g(b,S,null,_)},Ir.flushSync=function(b){var S=A.T,_=s.p;try{if(A.T=null,s.p=2,b)return b()}finally{A.T=S,s.p=_,s.d.f()}},Ir.preconnect=function(b,S){typeof b=="string"&&(S?(S=S.crossOrigin,S=typeof S=="string"?S==="use-credentials"?S:"":void 0):S=null,s.d.C(b,S))},Ir.prefetchDNS=function(b){typeof b=="string"&&s.d.D(b)},Ir.preinit=function(b,S){if(typeof b=="string"&&S&&typeof S.as=="string"){var _=S.as,j=M(_,S.crossOrigin),L=typeof S.integrity=="string"?S.integrity:void 0,X=typeof S.fetchPriority=="string"?S.fetchPriority:void 0;_==="style"?s.d.S(b,typeof S.precedence=="string"?S.precedence:void 0,{crossOrigin:j,integrity:L,fetchPriority:X}):_==="script"&&s.d.X(b,{crossOrigin:j,integrity:L,fetchPriority:X,nonce:typeof S.nonce=="string"?S.nonce:void 0})}},Ir.preinitModule=function(b,S){if(typeof b=="string")if(typeof S=="object"&&S!==null){if(S.as==null||S.as==="script"){var _=M(S.as,S.crossOrigin);s.d.M(b,{crossOrigin:_,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0})}}else S==null&&s.d.M(b)},Ir.preload=function(b,S){if(typeof b=="string"&&typeof S=="object"&&S!==null&&typeof S.as=="string"){var _=S.as,j=M(_,S.crossOrigin);s.d.L(b,_,{crossOrigin:j,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0,type:typeof S.type=="string"?S.type:void 0,fetchPriority:typeof S.fetchPriority=="string"?S.fetchPriority:void 0,referrerPolicy:typeof S.referrerPolicy=="string"?S.referrerPolicy:void 0,imageSrcSet:typeof S.imageSrcSet=="string"?S.imageSrcSet:void 0,imageSizes:typeof S.imageSizes=="string"?S.imageSizes:void 0,media:typeof S.media=="string"?S.media:void 0})}},Ir.preloadModule=function(b,S){if(typeof b=="string")if(S){var _=M(S.as,S.crossOrigin);s.d.m(b,{as:typeof S.as=="string"&&S.as!=="script"?S.as:void 0,crossOrigin:_,integrity:typeof S.integrity=="string"?S.integrity:void 0})}else s.d.m(b)},Ir.requestFormReset=function(b){s.d.r(b)},Ir.unstable_batchedUpdates=function(b,S){return b(S)},Ir.useFormState=function(b,S,_){return A.H.useFormState(b,S,_)},Ir.useFormStatus=function(){return A.H.useHostTransitionStatus()},Ir.version="19.2.0",Ir}var gp;function Vy(){if(gp)return Mf.exports;gp=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(r){console.error(r)}}return o(),Mf.exports=Gy(),Mf.exports}var mp;function Fy(){if(mp)return fl;mp=1;var o=Ky(),r=rd(),i=Vy();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function g(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function A(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function M(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(g(e)!==e)throw Error(s(188))}function S(e){var t=e.alternate;if(!t){if(t=g(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,a=t;;){var c=n.return;if(c===null)break;var d=c.alternate;if(d===null){if(a=c.return,a!==null){n=a;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===n)return b(c),e;if(d===a)return b(c),t;d=d.sibling}throw Error(s(188))}if(n.return!==a.return)n=c,a=d;else{for(var C=!1,D=c.child;D;){if(D===n){C=!0,n=c,a=d;break}if(D===a){C=!0,a=c,n=d;break}D=D.sibling}if(!C){for(D=d.child;D;){if(D===n){C=!0,n=d,a=c;break}if(D===a){C=!0,a=d,n=c;break}D=D.sibling}if(!C)throw Error(s(189))}}if(n.alternate!==a)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function _(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=_(e),t!==null)return t;e=e.sibling}return null}var j=Object.assign,L=Symbol.for("react.element"),X=Symbol.for("react.transitional.element"),ge=Symbol.for("react.portal"),de=Symbol.for("react.fragment"),Pe=Symbol.for("react.strict_mode"),pt=Symbol.for("react.profiler"),Ke=Symbol.for("react.consumer"),He=Symbol.for("react.context"),ut=Symbol.for("react.forward_ref"),$e=Symbol.for("react.suspense"),rt=Symbol.for("react.suspense_list"),it=Symbol.for("react.memo"),Bt=Symbol.for("react.lazy"),Pt=Symbol.for("react.activity"),ke=Symbol.for("react.memo_cache_sentinel"),Le=Symbol.iterator;function Se(e){return e===null||typeof e!="object"?null:(e=Le&&e[Le]||e["@@iterator"],typeof e=="function"?e:null)}var xe=Symbol.for("react.client.reference");function At(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===xe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case de:return"Fragment";case pt:return"Profiler";case Pe:return"StrictMode";case $e:return"Suspense";case rt:return"SuspenseList";case Pt:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ge:return"Portal";case He:return e.displayName||"Context";case Ke:return(e._context.displayName||"Context")+".Consumer";case ut:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case it:return t=e.displayName||null,t!==null?t:At(e.type)||"Memo";case Bt:t=e._payload,e=e._init;try{return At(e(t))}catch{}}return null}var Ze=Array.isArray,se=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ue=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie={pending:!1,data:null,method:null,action:null},Re=[],Qe=-1;function K(e){return{current:e}}function me(e){0>Qe||(e.current=Re[Qe],Re[Qe]=null,Qe--)}function De(e,t){Qe++,Re[Qe]=e.current,e.current=t}var Ge=K(null),Ve=K(null),Me=K(null),gt=K(null);function Ct(e,t){switch(De(Me,t),De(Ve,e),De(Ge,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?R0(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=R0(t),e=D0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}me(Ge),De(Ge,e)}function ze(){me(Ge),me(Ve),me(Me)}function Fe(e){e.memoizedState!==null&&De(gt,e);var t=Ge.current,n=D0(t,e.type);t!==n&&(De(Ve,e),De(Ge,n))}function Rt(e){Ve.current===e&&(me(Ge),me(Ve)),gt.current===e&&(me(gt),sl._currentValue=Ie)}var mt,gn;function rn(e){if(mt===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);mt=t&&t[1]||"",gn=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mt+e+gn}var kt=!1;function Dt(e,t){if(!e||kt)return"";kt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var Oe=function(){throw Error()};if(Object.defineProperty(Oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Oe,[])}catch(be){var pe=be}Reflect.construct(e,[],Oe)}else{try{Oe.call()}catch(be){pe=be}e.call(Oe.prototype)}}else{try{throw Error()}catch(be){pe=be}(Oe=e())&&typeof Oe.catch=="function"&&Oe.catch(function(){})}}catch(be){if(be&&pe&&typeof be.stack=="string")return[be.stack,pe.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=a.DetermineComponentFrameRoot(),C=d[0],D=d[1];if(C&&D){var F=C.split(`
`),ue=D.split(`
`);for(c=a=0;a<F.length&&!F[a].includes("DetermineComponentFrameRoot");)a++;for(;c<ue.length&&!ue[c].includes("DetermineComponentFrameRoot");)c++;if(a===F.length||c===ue.length)for(a=F.length-1,c=ue.length-1;1<=a&&0<=c&&F[a]!==ue[c];)c--;for(;1<=a&&0<=c;a--,c--)if(F[a]!==ue[c]){if(a!==1||c!==1)do if(a--,c--,0>c||F[a]!==ue[c]){var Te=`
`+F[a].replace(" at new "," at ");return e.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",e.displayName)),Te}while(1<=a&&0<=c);break}}}finally{kt=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?rn(n):""}function Mr(e,t){switch(e.tag){case 26:case 27:case 5:return rn(e.type);case 16:return rn("Lazy");case 13:return e.child!==t&&t!==null?rn("Suspense Fallback"):rn("Suspense");case 19:return rn("SuspenseList");case 0:case 15:return Dt(e.type,!1);case 11:return Dt(e.type.render,!1);case 1:return Dt(e.type,!0);case 31:return rn("Activity");default:return""}}function pr(e){try{var t="",n=null;do t+=Mr(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Zn=Object.prototype.hasOwnProperty,wn=o.unstable_scheduleCallback,mn=o.unstable_cancelCallback,Qr=o.unstable_shouldYield,Cr=o.unstable_requestPaint,On=o.unstable_now,Lr=o.unstable_getCurrentPriorityLevel,gr=o.unstable_ImmediatePriority,wr=o.unstable_UserBlockingPriority,Jr=o.unstable_NormalPriority,ha=o.unstable_LowPriority,Ua=o.unstable_IdlePriority,pa=o.log,zr=o.unstable_setDisableYieldValue,ar=null,In=null;function Tn(e){if(typeof pa=="function"&&zr(e),In&&typeof In.setStrictMode=="function")try{In.setStrictMode(ar,e)}catch{}}var et=Math.clz32?Math.clz32:Zr,ir=Math.log,sr=Math.LN2;function Zr(e){return e>>>=0,e===0?32:31-(ir(e)/sr|0)|0}var Xe=256,mr=262144,Aa=4194304;function Yr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function yr(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var c=0,d=e.suspendedLanes,C=e.pingedLanes;e=e.warmLanes;var D=a&134217727;return D!==0?(a=D&~d,a!==0?c=Yr(a):(C&=D,C!==0?c=Yr(C):n||(n=D&~e,n!==0&&(c=Yr(n))))):(D=a&~d,D!==0?c=Yr(D):C!==0?c=Yr(C):n||(n=a&~e,n!==0&&(c=Yr(n)))),c===0?0:t!==0&&t!==c&&(t&d)===0&&(d=c&-c,n=t&-t,d>=n||d===32&&(n&4194048)!==0)?t:c}function or(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function zn(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xr(){var e=Aa;return Aa<<=1,(Aa&62914560)===0&&(Aa=4194304),e}function Jt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _r(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Sr(e,t,n,a,c,d){var C=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var D=e.entanglements,F=e.expirationTimes,ue=e.hiddenUpdates;for(n=C&~n;0<n;){var Te=31-et(n),Oe=1<<Te;D[Te]=0,F[Te]=-1;var pe=ue[Te];if(pe!==null)for(ue[Te]=null,Te=0;Te<pe.length;Te++){var be=pe[Te];be!==null&&(be.lane&=-536870913)}n&=~Oe}a!==0&&Sn(e,a,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(C&~t))}function Sn(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-et(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function vn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-et(n),c=1<<a;c&t|e[a]&t&&(e[a]|=t),n&=~c}}function w(e,t){var n=t&-t;return n=(n&42)!==0?1:R(n),(n&(e.suspendedLanes|t))!==0?0:n}function R(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function B(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function h(){var e=Ue.p;return e!==0?e:(e=window.event,e===void 0?32:tp(e.type))}function O(e,t){var n=Ue.p;try{return Ue.p=e,t()}finally{Ue.p=n}}var te=Math.random().toString(36).slice(2),W="__reactFiber$"+te,Ce="__reactProps$"+te,qe="__reactContainer$"+te,ft="__reactEvents$"+te,st="__reactListeners$"+te,Ht="__reactHandles$"+te,ct="__reactResources$"+te,Et="__reactMarker$"+te;function jt(e){delete e[W],delete e[Ce],delete e[ft],delete e[st],delete e[Ht]}function Ot(e){var t=e[W];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qe]||n[W]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=L0(e);e!==null;){if(n=e[W])return n;e=L0(e)}return t}e=n,n=e.parentNode}return null}function dt(e){if(e=e[W]||e[qe]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function wt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function xt(e){var t=e[ct];return t||(t=e[ct]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function yt(e){e[Et]=!0}var ot=new Set,vt={};function tt(e,t){lt(e,t),lt(e+"Capture",t)}function lt(e,t){for(vt[e]=t,e=0;e<t.length;e++)ot.add(t[e])}var ht=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},he={};function ye(e){return Zn.call(he,e)?!0:Zn.call(at,e)?!1:ht.test(e)?he[e]=!0:(at[e]=!0,!1)}function ve(e,t,n){if(ye(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Ee(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Ae(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function je(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function St(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nt(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,d=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(C){n=""+C,d.call(this,C)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(C){n=""+C},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zt(e){if(!e._valueTracker){var t=St(e)?"checked":"value";e._valueTracker=nt(e,t,""+e[t])}}function Yt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=St(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function z(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Kt=/[\n"\\]/g;function It(e){return e.replace(Kt,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Gt(e,t,n,a,c,d,C,D){e.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.type=C:e.removeAttribute("type"),t!=null?C==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+je(t)):e.value!==""+je(t)&&(e.value=""+je(t)):C!=="submit"&&C!=="reset"||e.removeAttribute("value"),t!=null?Qt(e,C,je(t)):n!=null?Qt(e,C,je(n)):a!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?e.name=""+je(D):e.removeAttribute("name")}function Vt(e,t,n,a,c,d,C,D){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||n!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){zt(e);return}n=n!=null?""+je(n):"",t=t!=null?""+je(t):n,D||t===e.value||(e.value=t),e.defaultValue=t}a=a??c,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=D?e.checked:!!a,e.defaultChecked=!!a,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(e.name=C),zt(e)}function Qt(e,t,n){t==="number"&&z(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ft(e,t,n,a){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&a&&(e[n].defaultSelected=!0)}else{for(n=""+je(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function An(e,t,n){if(t!=null&&(t=""+je(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+je(n):""}function tn(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(s(92));if(Ze(a)){if(1<a.length)throw Error(s(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=je(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),zt(e)}function un(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Rn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mt(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||Rn.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function yn(e,t,n){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var c in t)a=t[c],t.hasOwnProperty(c)&&n[c]!==a&&Mt(e,c,a)}else for(var d in t)t.hasOwnProperty(d)&&Mt(e,d,t[d])}function Yn(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oa(e){return fn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Or(){}var Wr=null;function bi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ea=null,qn=null;function Kr(e){var t=dt(e);if(t&&(e=t.stateNode)){var n=e[Ce]||null;e:switch(e=t.stateNode,t.type){case"input":if(Gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+It(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var c=a[Ce]||null;if(!c)throw Error(s(90));Gt(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&Yt(a)}break e;case"textarea":An(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ft(e,!!n.multiple,t,!1)}}}var Ta=!1;function La(e,t,n){if(Ta)return e(t,n);Ta=!0;try{var a=e(t);return a}finally{if(Ta=!1,(Ea!==null||qn!==null)&&(Ql(),Ea&&(t=Ea,e=qn,qn=Ea=null,Kr(t),e)))for(t=0;t<e.length;t++)Kr(e[t])}}function Ma(e,t){var n=e.stateNode;if(n===null)return null;var a=n[Ce]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ci=!1;if(Kn)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){Ci=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{Ci=!1}var Gr=null,wi=null,za=null;function _a(){if(za)return za;var e,t=wi,n=t.length,a,c="value"in Gr?Gr.value:Gr.textContent,d=c.length;for(e=0;e<n&&t[e]===c[e];e++);var C=n-e;for(a=1;a<=C&&t[n-a]===c[d-a];a++);return za=c.slice(e,1<a?1-a:void 0)}function Ya(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wa(){return!0}function Ls(){return!1}function Xn(e){function t(n,a,c,d,C){this._reactName=n,this._targetInst=c,this.type=a,this.nativeEvent=d,this.target=C,this.currentTarget=null;for(var D in e)e.hasOwnProperty(D)&&(n=e[D],this[D]=n?n(d):d[D]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Wa:Ls,this.isPropagationStopped=Ls,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wa)},persist:function(){},isPersistent:Wa}),t}var ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Si=Xn(ka),ga=j({},ka,{view:0,detail:0}),Ai=Xn(ga),$a,ls,Ba,Ei=j({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ra,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ba&&(Ba&&e.type==="mousemove"?($a=e.screenX-Ba.screenX,ls=e.screenY-Ba.screenY):ls=$a=0,Ba=e),$a)},movementY:function(e){return"movementY"in e?e.movementY:ls}}),Ti=Xn(Ei),cs=j({},Ei,{dataTransfer:0}),us=Xn(cs),Mi=j({},ga,{relatedTarget:0}),Ka=Xn(Mi),ei=j({},ka,{animationName:0,elapsedTime:0,pseudoElement:0}),zs=Xn(ei),To=j({},ka,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ga=Xn(To),fs=j({},ka,{data:0}),_i=Xn(fs),ds={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ti(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lr[e])?!!t[e]:!1}function Ra(){return ti}var Ys=j({},ga,{key:function(e){if(e.key){var t=ds[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ya(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hs[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ra,charCode:function(e){return e.type==="keypress"?Ya(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ya(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ki=Xn(Ys),Bi=j({},Ei,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ps=Xn(Bi),ma=j({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ra}),gs=Xn(ma),Da=j({},ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),ms=Xn(Da),ys=j({},Ei,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ri=Xn(ys),vs=j({},ka,{newState:0,oldState:0}),Ks=Xn(vs),Mo=[9,13,27,32],ni=Kn&&"CompositionEvent"in window,dn=null;Kn&&"documentMode"in document&&(dn=document.documentMode);var _o=Kn&&"TextEvent"in window&&!dn,$r=Kn&&(!ni||dn&&8<dn&&11>=dn),ri=" ",Gs=!1;function Xt(e,t){switch(e){case"keyup":return Mo.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vs(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Na=!1;function Fs(e,t){switch(e){case"compositionend":return Vs(t);case"keypress":return t.which!==32?null:(Gs=!0,ri);case"textInput":return e=t.data,e===ri&&Gs?null:e;default:return null}}function ko(e,t){if(Na)return e==="compositionend"||!ni&&Xt(e,t)?(e=_a(),za=wi=Gr=null,Na=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $r&&t.locale!=="ko"?null:t.data;default:return null}}var Hs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Hs[e.type]:t==="textarea"}function xs(e,t,n,a){Ea?qn?qn.push(a):qn=[a]:Ea=a,t=tc(t,"onChange"),0<t.length&&(n=new Si("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Va=null,ai=null;function Bo(e){E0(e,0)}function Ni(e){var t=wt(e);if(Yt(t))return e}function ii(e,t){if(e==="change")return t}var ea=!1;if(Kn){var Un;if(Kn){var Fa="oninput"in document;if(!Fa){var kr=document.createElement("div");kr.setAttribute("oninput","return;"),Fa=typeof kr.oninput=="function"}Un=Fa}else Un=!1;ea=Un&&(!document.documentMode||9<document.documentMode)}function Ps(){Va&&(Va.detachEvent("onpropertychange",ji),ai=Va=null)}function ji(e){if(e.propertyName==="value"&&Ni(ai)){var t=[];xs(t,ai,e,bi(e)),La(Bo,t)}}function Qs(e,t,n){e==="focusin"?(Ps(),Va=t,ai=n,Va.attachEvent("onpropertychange",ji)):e==="focusout"&&Ps()}function ja(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ni(ai)}function bs(e,t){if(e==="click")return Ni(t)}function Ha(e,t){if(e==="input"||e==="change")return Ni(t)}function ya(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ar=typeof Object.is=="function"?Object.is:ya;function l(e,t){if(Ar(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var c=n[a];if(!Zn.call(t,c)||!Ar(e[c],t[c]))return!1}return!0}function f(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function p(e,t){var n=f(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=f(n)}}function x(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?x(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function E(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=z(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=z(e.document)}return t}function k(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var q=Kn&&"documentMode"in document&&11>=document.documentMode,Y=null,P=null,Q=null,ne=!1;function V(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ne||Y==null||Y!==z(a)||(a=Y,"selectionStart"in a&&k(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Q&&l(Q,a)||(Q=a,a=tc(P,"onSelect"),0<a.length&&(t=new Si("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=Y)))}function ae(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var J={animationend:ae("Animation","AnimationEnd"),animationiteration:ae("Animation","AnimationIteration"),animationstart:ae("Animation","AnimationStart"),transitionrun:ae("Transition","TransitionRun"),transitionstart:ae("Transition","TransitionStart"),transitioncancel:ae("Transition","TransitionCancel"),transitionend:ae("Transition","TransitionEnd")},$={},ee={};Kn&&(ee=document.createElement("div").style,"AnimationEvent"in window||(delete J.animationend.animation,delete J.animationiteration.animation,delete J.animationstart.animation),"TransitionEvent"in window||delete J.transitionend.transition);function re(e){if($[e])return $[e];if(!J[e])return e;var t=J[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ee)return $[e]=t[n];return e}var oe=re("animationend"),fe=re("animationiteration"),we=re("animationstart"),Ne=re("transitionrun"),y=re("transitionstart"),m=re("transitioncancel"),T=re("transitionend"),N=new Map,I="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");I.push("scrollEnd");function U(e,t){N.set(e,t),tt(t,[e])}var G=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},H=[],le=0,_e=0;function We(){for(var e=le,t=_e=le=0;t<e;){var n=H[t];H[t++]=null;var a=H[t];H[t++]=null;var c=H[t];H[t++]=null;var d=H[t];if(H[t++]=null,a!==null&&c!==null){var C=a.pending;C===null?c.next=c:(c.next=C.next,C.next=c),a.pending=c}d!==0&&xn(n,c,d)}}function Je(e,t,n,a){H[le++]=e,H[le++]=t,H[le++]=n,H[le++]=a,_e|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Ut(e,t,n,a){return Je(e,t,n,a),en(e)}function Nt(e,t){return Je(e,null,null,t),en(e)}function xn(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var c=!1,d=e.return;d!==null;)d.childLanes|=n,a=d.alternate,a!==null&&(a.childLanes|=n),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&t!==null&&(c=31-et(n),e=d.hiddenUpdates,a=e[c],a===null?e[c]=[t]:a.push(t),t.lane=n|536870912),d):null}function en(e){if(50<$o)throw $o=0,Fu=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var hn={};function Fn(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(e,t,n,a){return new Fn(e,t,n,a)}function Er(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wn(e,t){var n=e.alternate;return n===null?(n=Qn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Cs(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Js(e,t,n,a,c,d){var C=0;if(a=e,typeof e=="function")Er(e)&&(C=1);else if(typeof e=="string")C=Sy(e,n,Ge.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Pt:return e=Qn(31,n,t,c),e.elementType=Pt,e.lanes=d,e;case de:return Pa(n.children,c,d,t);case Pe:C=8,c|=24;break;case pt:return e=Qn(12,n,t,c|2),e.elementType=pt,e.lanes=d,e;case $e:return e=Qn(13,n,t,c),e.elementType=$e,e.lanes=d,e;case rt:return e=Qn(19,n,t,c),e.elementType=rt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case He:C=10;break e;case Ke:C=9;break e;case ut:C=11;break e;case it:C=14;break e;case Bt:C=16,a=null;break e}C=29,n=Error(s(130,e===null?"null":typeof e,"")),a=null}return t=Qn(C,n,t,c),t.elementType=e,t.type=a,t.lanes=d,t}function Pa(e,t,n,a){return e=Qn(7,e,a,t),e.lanes=n,e}function Zs(e,t,n){return e=Qn(6,e,null,t),e.lanes=n,e}function Ro(e){var t=Qn(18,null,null,0);return t.stateNode=e,t}function Oi(e,t,n){return t=Qn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ws=new WeakMap;function Vr(e,t){if(typeof e=="object"&&e!==null){var n=ws.get(e);return n!==void 0?n:(t={value:e,source:t,stack:pr(t)},ws.set(e,t),t)}return{value:e,source:t,stack:pr(t)}}var Xs=[],Ws=0,xl=null,Do=0,va=[],xa=0,Ii=null,Qa=1,Ja="";function si(e,t){Xs[Ws++]=Do,Xs[Ws++]=xl,xl=e,Do=t}function ud(e,t,n){va[xa++]=Qa,va[xa++]=Ja,va[xa++]=Ii,Ii=e;var a=Qa;e=Ja;var c=32-et(a)-1;a&=~(1<<c),n+=1;var d=32-et(t)+c;if(30<d){var C=c-c%5;d=(a&(1<<C)-1).toString(32),a>>=C,c-=C,Qa=1<<32-et(t)+c|n<<c|a,Ja=d+e}else Qa=1<<d|n<<c|a,Ja=e}function zc(e){e.return!==null&&(si(e,1),ud(e,1,0))}function Yc(e){for(;e===xl;)xl=Xs[--Ws],Xs[Ws]=null,Do=Xs[--Ws],Xs[Ws]=null;for(;e===Ii;)Ii=va[--xa],va[xa]=null,Ja=va[--xa],va[xa]=null,Qa=va[--xa],va[xa]=null}function fd(e,t){va[xa++]=Qa,va[xa++]=Ja,va[xa++]=Ii,Qa=t.id,Ja=t.overflow,Ii=e}var Br=null,Gn=null,pn=!1,qi=null,ba=!1,Kc=Error(s(519));function Ui(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw No(Vr(t,e)),Kc}function dd(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[W]=e,t[Ce]=a,n){case"dialog":sn("cancel",t),sn("close",t);break;case"iframe":case"object":case"embed":sn("load",t);break;case"video":case"audio":for(n=0;n<tl.length;n++)sn(tl[n],t);break;case"source":sn("error",t);break;case"img":case"image":case"link":sn("error",t),sn("load",t);break;case"details":sn("toggle",t);break;case"input":sn("invalid",t),Vt(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":sn("invalid",t);break;case"textarea":sn("invalid",t),tn(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||k0(t.textContent,n)?(a.popover!=null&&(sn("beforetoggle",t),sn("toggle",t)),a.onScroll!=null&&sn("scroll",t),a.onScrollEnd!=null&&sn("scrollend",t),a.onClick!=null&&(t.onclick=Or),t=!0):t=!1,t||Ui(e,!0)}function hd(e){for(Br=e.return;Br;)switch(Br.tag){case 5:case 31:case 13:ba=!1;return;case 27:case 3:ba=!0;return;default:Br=Br.return}}function $s(e){if(e!==Br)return!1;if(!pn)return hd(e),pn=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||of(e.type,e.memoizedProps)),n=!n),n&&Gn&&Ui(e),hd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Gn=U0(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Gn=U0(e)}else t===27?(t=Gn,Wi(e.type)?(e=df,df=null,Gn=e):Gn=t):Gn=Br?wa(e.stateNode.nextSibling):null;return!0}function Ss(){Gn=Br=null,pn=!1}function Gc(){var e=qi;return e!==null&&(aa===null?aa=e:aa.push.apply(aa,e),qi=null),e}function No(e){qi===null?qi=[e]:qi.push(e)}var Vc=K(null),As=null,oi=null;function Li(e,t,n){De(Vc,t._currentValue),t._currentValue=n}function li(e){e._currentValue=Vc.current,me(Vc)}function Fc(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Hc(e,t,n,a){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var C=c.child;d=d.firstContext;e:for(;d!==null;){var D=d;d=c;for(var F=0;F<t.length;F++)if(D.context===t[F]){d.lanes|=n,D=d.alternate,D!==null&&(D.lanes|=n),Fc(d.return,n,e),a||(C=null);break e}d=D.next}}else if(c.tag===18){if(C=c.return,C===null)throw Error(s(341));C.lanes|=n,d=C.alternate,d!==null&&(d.lanes|=n),Fc(C,n,e),C=null}else C=c.child;if(C!==null)C.return=c;else for(C=c;C!==null;){if(C===e){C=null;break}if(c=C.sibling,c!==null){c.return=C.return,C=c;break}C=C.return}c=C}}function eo(e,t,n,a){e=null;for(var c=t,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var C=c.alternate;if(C===null)throw Error(s(387));if(C=C.memoizedProps,C!==null){var D=c.type;Ar(c.pendingProps.value,C.value)||(e!==null?e.push(D):e=[D])}}else if(c===gt.current){if(C=c.alternate,C===null)throw Error(s(387));C.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(sl):e=[sl])}c=c.return}e!==null&&Hc(t,e,n,a),t.flags|=262144}function bl(e){for(e=e.firstContext;e!==null;){if(!Ar(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Es(e){As=e,oi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Rr(e){return pd(As,e)}function Cl(e,t){return As===null&&Es(e),pd(e,t)}function pd(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},oi===null){if(e===null)throw Error(s(308));oi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else oi=oi.next=t;return n}var xm=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},bm=o.unstable_scheduleCallback,Cm=o.unstable_NormalPriority,cr={$$typeof:He,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pc(){return{controller:new xm,data:new Map,refCount:0}}function jo(e){e.refCount--,e.refCount===0&&bm(Cm,function(){e.controller.abort()})}var Oo=null,Qc=0,to=0,no=null;function wm(e,t){if(Oo===null){var n=Oo=[];Qc=0,to=Xu(),no={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Qc++,t.then(gd,gd),t}function gd(){if(--Qc===0&&Oo!==null){no!==null&&(no.status="fulfilled");var e=Oo;Oo=null,to=0,no=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Sm(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(c){n.push(c)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var c=0;c<n.length;c++)(0,n[c])(t)},function(c){for(a.status="rejected",a.reason=c,c=0;c<n.length;c++)(0,n[c])(void 0)}),a}var md=se.S;se.S=function(e,t){$h=On(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&wm(e,t),md!==null&&md(e,t)};var Ts=K(null);function Jc(){var e=Ts.current;return e!==null?e:Ln.pooledCache}function wl(e,t){t===null?De(Ts,Ts.current):De(Ts,t.pool)}function yd(){var e=Jc();return e===null?null:{parent:cr._currentValue,pool:e}}var ro=Error(s(460)),Zc=Error(s(474)),Sl=Error(s(542)),Al={then:function(){}};function vd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function xd(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Or,Or),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Cd(e),e;default:if(typeof t.status=="string")t.then(Or,Or);else{if(e=Ln,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=a}},function(a){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Cd(e),e}throw _s=t,ro}}function Ms(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(_s=n,ro):n}}var _s=null;function bd(){if(_s===null)throw Error(s(459));var e=_s;return _s=null,e}function Cd(e){if(e===ro||e===Sl)throw Error(s(483))}var ao=null,Io=0;function El(e){var t=Io;return Io+=1,ao===null&&(ao=[]),xd(ao,e,t)}function qo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Tl(e,t){throw t.$$typeof===L?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function wd(e){function t(ie,Z){if(e){var ce=ie.deletions;ce===null?(ie.deletions=[Z],ie.flags|=16):ce.push(Z)}}function n(ie,Z){if(!e)return null;for(;Z!==null;)t(ie,Z),Z=Z.sibling;return null}function a(ie){for(var Z=new Map;ie!==null;)ie.key!==null?Z.set(ie.key,ie):Z.set(ie.index,ie),ie=ie.sibling;return Z}function c(ie,Z){return ie=Wn(ie,Z),ie.index=0,ie.sibling=null,ie}function d(ie,Z,ce){return ie.index=ce,e?(ce=ie.alternate,ce!==null?(ce=ce.index,ce<Z?(ie.flags|=67108866,Z):ce):(ie.flags|=67108866,Z)):(ie.flags|=1048576,Z)}function C(ie){return e&&ie.alternate===null&&(ie.flags|=67108866),ie}function D(ie,Z,ce,Be){return Z===null||Z.tag!==6?(Z=Zs(ce,ie.mode,Be),Z.return=ie,Z):(Z=c(Z,ce),Z.return=ie,Z)}function F(ie,Z,ce,Be){var qt=ce.type;return qt===de?Te(ie,Z,ce.props.children,Be,ce.key):Z!==null&&(Z.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===Bt&&Ms(qt)===Z.type)?(Z=c(Z,ce.props),qo(Z,ce),Z.return=ie,Z):(Z=Js(ce.type,ce.key,ce.props,null,ie.mode,Be),qo(Z,ce),Z.return=ie,Z)}function ue(ie,Z,ce,Be){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ce.containerInfo||Z.stateNode.implementation!==ce.implementation?(Z=Oi(ce,ie.mode,Be),Z.return=ie,Z):(Z=c(Z,ce.children||[]),Z.return=ie,Z)}function Te(ie,Z,ce,Be,qt){return Z===null||Z.tag!==7?(Z=Pa(ce,ie.mode,Be,qt),Z.return=ie,Z):(Z=c(Z,ce),Z.return=ie,Z)}function Oe(ie,Z,ce){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Zs(""+Z,ie.mode,ce),Z.return=ie,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case X:return ce=Js(Z.type,Z.key,Z.props,null,ie.mode,ce),qo(ce,Z),ce.return=ie,ce;case ge:return Z=Oi(Z,ie.mode,ce),Z.return=ie,Z;case Bt:return Z=Ms(Z),Oe(ie,Z,ce)}if(Ze(Z)||Se(Z))return Z=Pa(Z,ie.mode,ce,null),Z.return=ie,Z;if(typeof Z.then=="function")return Oe(ie,El(Z),ce);if(Z.$$typeof===He)return Oe(ie,Cl(ie,Z),ce);Tl(ie,Z)}return null}function pe(ie,Z,ce,Be){var qt=Z!==null?Z.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return qt!==null?null:D(ie,Z,""+ce,Be);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case X:return ce.key===qt?F(ie,Z,ce,Be):null;case ge:return ce.key===qt?ue(ie,Z,ce,Be):null;case Bt:return ce=Ms(ce),pe(ie,Z,ce,Be)}if(Ze(ce)||Se(ce))return qt!==null?null:Te(ie,Z,ce,Be,null);if(typeof ce.then=="function")return pe(ie,Z,El(ce),Be);if(ce.$$typeof===He)return pe(ie,Z,Cl(ie,ce),Be);Tl(ie,ce)}return null}function be(ie,Z,ce,Be,qt){if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return ie=ie.get(ce)||null,D(Z,ie,""+Be,qt);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case X:return ie=ie.get(Be.key===null?ce:Be.key)||null,F(Z,ie,Be,qt);case ge:return ie=ie.get(Be.key===null?ce:Be.key)||null,ue(Z,ie,Be,qt);case Bt:return Be=Ms(Be),be(ie,Z,ce,Be,qt)}if(Ze(Be)||Se(Be))return ie=ie.get(ce)||null,Te(Z,ie,Be,qt,null);if(typeof Be.then=="function")return be(ie,Z,ce,El(Be),qt);if(Be.$$typeof===He)return be(ie,Z,ce,Cl(Z,Be),qt);Tl(Z,Be)}return null}function bt(ie,Z,ce,Be){for(var qt=null,bn=null,_t=Z,$t=Z=0,cn=null;_t!==null&&$t<ce.length;$t++){_t.index>$t?(cn=_t,_t=null):cn=_t.sibling;var Cn=pe(ie,_t,ce[$t],Be);if(Cn===null){_t===null&&(_t=cn);break}e&&_t&&Cn.alternate===null&&t(ie,_t),Z=d(Cn,Z,$t),bn===null?qt=Cn:bn.sibling=Cn,bn=Cn,_t=cn}if($t===ce.length)return n(ie,_t),pn&&si(ie,$t),qt;if(_t===null){for(;$t<ce.length;$t++)_t=Oe(ie,ce[$t],Be),_t!==null&&(Z=d(_t,Z,$t),bn===null?qt=_t:bn.sibling=_t,bn=_t);return pn&&si(ie,$t),qt}for(_t=a(_t);$t<ce.length;$t++)cn=be(_t,ie,$t,ce[$t],Be),cn!==null&&(e&&cn.alternate!==null&&_t.delete(cn.key===null?$t:cn.key),Z=d(cn,Z,$t),bn===null?qt=cn:bn.sibling=cn,bn=cn);return e&&_t.forEach(function(rs){return t(ie,rs)}),pn&&si(ie,$t),qt}function Lt(ie,Z,ce,Be){if(ce==null)throw Error(s(151));for(var qt=null,bn=null,_t=Z,$t=Z=0,cn=null,Cn=ce.next();_t!==null&&!Cn.done;$t++,Cn=ce.next()){_t.index>$t?(cn=_t,_t=null):cn=_t.sibling;var rs=pe(ie,_t,Cn.value,Be);if(rs===null){_t===null&&(_t=cn);break}e&&_t&&rs.alternate===null&&t(ie,_t),Z=d(rs,Z,$t),bn===null?qt=rs:bn.sibling=rs,bn=rs,_t=cn}if(Cn.done)return n(ie,_t),pn&&si(ie,$t),qt;if(_t===null){for(;!Cn.done;$t++,Cn=ce.next())Cn=Oe(ie,Cn.value,Be),Cn!==null&&(Z=d(Cn,Z,$t),bn===null?qt=Cn:bn.sibling=Cn,bn=Cn);return pn&&si(ie,$t),qt}for(_t=a(_t);!Cn.done;$t++,Cn=ce.next())Cn=be(_t,ie,$t,Cn.value,Be),Cn!==null&&(e&&Cn.alternate!==null&&_t.delete(Cn.key===null?$t:Cn.key),Z=d(Cn,Z,$t),bn===null?qt=Cn:bn.sibling=Cn,bn=Cn);return e&&_t.forEach(function(jy){return t(ie,jy)}),pn&&si(ie,$t),qt}function jn(ie,Z,ce,Be){if(typeof ce=="object"&&ce!==null&&ce.type===de&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case X:e:{for(var qt=ce.key;Z!==null;){if(Z.key===qt){if(qt=ce.type,qt===de){if(Z.tag===7){n(ie,Z.sibling),Be=c(Z,ce.props.children),Be.return=ie,ie=Be;break e}}else if(Z.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===Bt&&Ms(qt)===Z.type){n(ie,Z.sibling),Be=c(Z,ce.props),qo(Be,ce),Be.return=ie,ie=Be;break e}n(ie,Z);break}else t(ie,Z);Z=Z.sibling}ce.type===de?(Be=Pa(ce.props.children,ie.mode,Be,ce.key),Be.return=ie,ie=Be):(Be=Js(ce.type,ce.key,ce.props,null,ie.mode,Be),qo(Be,ce),Be.return=ie,ie=Be)}return C(ie);case ge:e:{for(qt=ce.key;Z!==null;){if(Z.key===qt)if(Z.tag===4&&Z.stateNode.containerInfo===ce.containerInfo&&Z.stateNode.implementation===ce.implementation){n(ie,Z.sibling),Be=c(Z,ce.children||[]),Be.return=ie,ie=Be;break e}else{n(ie,Z);break}else t(ie,Z);Z=Z.sibling}Be=Oi(ce,ie.mode,Be),Be.return=ie,ie=Be}return C(ie);case Bt:return ce=Ms(ce),jn(ie,Z,ce,Be)}if(Ze(ce))return bt(ie,Z,ce,Be);if(Se(ce)){if(qt=Se(ce),typeof qt!="function")throw Error(s(150));return ce=qt.call(ce),Lt(ie,Z,ce,Be)}if(typeof ce.then=="function")return jn(ie,Z,El(ce),Be);if(ce.$$typeof===He)return jn(ie,Z,Cl(ie,ce),Be);Tl(ie,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,Z!==null&&Z.tag===6?(n(ie,Z.sibling),Be=c(Z,ce),Be.return=ie,ie=Be):(n(ie,Z),Be=Zs(ce,ie.mode,Be),Be.return=ie,ie=Be),C(ie)):n(ie,Z)}return function(ie,Z,ce,Be){try{Io=0;var qt=jn(ie,Z,ce,Be);return ao=null,qt}catch(_t){if(_t===ro||_t===Sl)throw _t;var bn=Qn(29,_t,null,ie.mode);return bn.lanes=Be,bn.return=ie,bn}finally{}}}var ks=wd(!0),Sd=wd(!1),zi=!1;function Xc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Yi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ki(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(En&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,t=en(e),xn(e,null,n),t}return Je(e,a,t,n),en(e)}function Uo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,vn(e,n)}}function $c(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var c=null,d=null;if(n=n.firstBaseUpdate,n!==null){do{var C={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};d===null?c=d=C:d=d.next=C,n=n.next}while(n!==null);d===null?c=d=t:d=d.next=t}else c=d=t;n={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var eu=!1;function Lo(){if(eu){var e=no;if(e!==null)throw e}}function zo(e,t,n,a){eu=!1;var c=e.updateQueue;zi=!1;var d=c.firstBaseUpdate,C=c.lastBaseUpdate,D=c.shared.pending;if(D!==null){c.shared.pending=null;var F=D,ue=F.next;F.next=null,C===null?d=ue:C.next=ue,C=F;var Te=e.alternate;Te!==null&&(Te=Te.updateQueue,D=Te.lastBaseUpdate,D!==C&&(D===null?Te.firstBaseUpdate=ue:D.next=ue,Te.lastBaseUpdate=F))}if(d!==null){var Oe=c.baseState;C=0,Te=ue=F=null,D=d;do{var pe=D.lane&-536870913,be=pe!==D.lane;if(be?(ln&pe)===pe:(a&pe)===pe){pe!==0&&pe===to&&(eu=!0),Te!==null&&(Te=Te.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var bt=e,Lt=D;pe=t;var jn=n;switch(Lt.tag){case 1:if(bt=Lt.payload,typeof bt=="function"){Oe=bt.call(jn,Oe,pe);break e}Oe=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=Lt.payload,pe=typeof bt=="function"?bt.call(jn,Oe,pe):bt,pe==null)break e;Oe=j({},Oe,pe);break e;case 2:zi=!0}}pe=D.callback,pe!==null&&(e.flags|=64,be&&(e.flags|=8192),be=c.callbacks,be===null?c.callbacks=[pe]:be.push(pe))}else be={lane:pe,tag:D.tag,payload:D.payload,callback:D.callback,next:null},Te===null?(ue=Te=be,F=Oe):Te=Te.next=be,C|=pe;if(D=D.next,D===null){if(D=c.shared.pending,D===null)break;be=D,D=be.next,be.next=null,c.lastBaseUpdate=be,c.shared.pending=null}}while(!0);Te===null&&(F=Oe),c.baseState=F,c.firstBaseUpdate=ue,c.lastBaseUpdate=Te,d===null&&(c.shared.lanes=0),Pi|=C,e.lanes=C,e.memoizedState=Oe}}function Ad(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Ed(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Ad(n[e],t)}var io=K(null),Ml=K(0);function Td(e,t){e=yi,De(Ml,e),De(io,t),yi=e|t.baseLanes}function tu(){De(Ml,yi),De(io,io.current)}function nu(){yi=Ml.current,me(io),me(Ml)}var la=K(null),Ca=null;function Gi(e){var t=e.alternate;De(nr,nr.current&1),De(la,e),Ca===null&&(t===null||io.current!==null||t.memoizedState!==null)&&(Ca=e)}function ru(e){De(nr,nr.current),De(la,e),Ca===null&&(Ca=e)}function Md(e){e.tag===22?(De(nr,nr.current),De(la,e),Ca===null&&(Ca=e)):Vi()}function Vi(){De(nr,nr.current),De(la,la.current)}function ca(e){me(la),Ca===e&&(Ca=null),me(nr)}var nr=K(0);function _l(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||uf(n)||ff(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ci=0,Wt=null,Dn=null,ur=null,kl=!1,so=!1,Bs=!1,Bl=0,Yo=0,oo=null,Am=0;function $n(){throw Error(s(321))}function au(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ar(e[n],t[n]))return!1;return!0}function iu(e,t,n,a,c,d){return ci=d,Wt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,se.H=e===null||e.memoizedState===null?uh:bu,Bs=!1,d=n(a,c),Bs=!1,so&&(d=kd(t,n,a,c)),_d(e),d}function _d(e){se.H=Vo;var t=Dn!==null&&Dn.next!==null;if(ci=0,ur=Dn=Wt=null,kl=!1,Yo=0,oo=null,t)throw Error(s(300));e===null||fr||(e=e.dependencies,e!==null&&bl(e)&&(fr=!0))}function kd(e,t,n,a){Wt=e;var c=0;do{if(so&&(oo=null),Yo=0,so=!1,25<=c)throw Error(s(301));if(c+=1,ur=Dn=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}se.H=fh,d=t(n,a)}while(so);return d}function Em(){var e=se.H,t=e.useState()[0];return t=typeof t.then=="function"?Ko(t):t,e=e.useState()[0],(Dn!==null?Dn.memoizedState:null)!==e&&(Wt.flags|=1024),t}function su(){var e=Bl!==0;return Bl=0,e}function ou(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function lu(e){if(kl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}kl=!1}ci=0,ur=Dn=Wt=null,so=!1,Yo=Bl=0,oo=null}function Fr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ur===null?Wt.memoizedState=ur=e:ur=ur.next=e,ur}function rr(){if(Dn===null){var e=Wt.alternate;e=e!==null?e.memoizedState:null}else e=Dn.next;var t=ur===null?Wt.memoizedState:ur.next;if(t!==null)ur=t,Dn=e;else{if(e===null)throw Wt.alternate===null?Error(s(467)):Error(s(310));Dn=e,e={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},ur===null?Wt.memoizedState=ur=e:ur=ur.next=e}return ur}function Rl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ko(e){var t=Yo;return Yo+=1,oo===null&&(oo=[]),e=xd(oo,e,t),t=Wt,(ur===null?t.memoizedState:ur.next)===null&&(t=t.alternate,se.H=t===null||t.memoizedState===null?uh:bu),e}function Dl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ko(e);if(e.$$typeof===He)return Rr(e)}throw Error(s(438,String(e)))}function cu(e){var t=null,n=Wt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=Wt.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Rl(),Wt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=ke;return t.index++,n}function ui(e,t){return typeof t=="function"?t(e):t}function Nl(e){var t=rr();return uu(t,Dn,e)}function uu(e,t,n){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var c=e.baseQueue,d=a.pending;if(d!==null){if(c!==null){var C=c.next;c.next=d.next,d.next=C}t.baseQueue=c=d,a.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{t=c.next;var D=C=null,F=null,ue=t,Te=!1;do{var Oe=ue.lane&-536870913;if(Oe!==ue.lane?(ln&Oe)===Oe:(ci&Oe)===Oe){var pe=ue.revertLane;if(pe===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),Oe===to&&(Te=!0);else if((ci&pe)===pe){ue=ue.next,pe===to&&(Te=!0);continue}else Oe={lane:0,revertLane:ue.revertLane,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},F===null?(D=F=Oe,C=d):F=F.next=Oe,Wt.lanes|=pe,Pi|=pe;Oe=ue.action,Bs&&n(d,Oe),d=ue.hasEagerState?ue.eagerState:n(d,Oe)}else pe={lane:Oe,revertLane:ue.revertLane,gesture:ue.gesture,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},F===null?(D=F=pe,C=d):F=F.next=pe,Wt.lanes|=Oe,Pi|=Oe;ue=ue.next}while(ue!==null&&ue!==t);if(F===null?C=d:F.next=D,!Ar(d,e.memoizedState)&&(fr=!0,Te&&(n=no,n!==null)))throw n;e.memoizedState=d,e.baseState=C,e.baseQueue=F,a.lastRenderedState=d}return c===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function fu(e){var t=rr(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var a=n.dispatch,c=n.pending,d=t.memoizedState;if(c!==null){n.pending=null;var C=c=c.next;do d=e(d,C.action),C=C.next;while(C!==c);Ar(d,t.memoizedState)||(fr=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),n.lastRenderedState=d}return[d,a]}function Bd(e,t,n){var a=Wt,c=rr(),d=pn;if(d){if(n===void 0)throw Error(s(407));n=n()}else n=t();var C=!Ar((Dn||c).memoizedState,n);if(C&&(c.memoizedState=n,fr=!0),c=c.queue,pu(Nd.bind(null,a,c,e),[e]),c.getSnapshot!==t||C||ur!==null&&ur.memoizedState.tag&1){if(a.flags|=2048,lo(9,{destroy:void 0},Dd.bind(null,a,c,n,t),null),Ln===null)throw Error(s(349));d||(ci&127)!==0||Rd(a,t,n)}return n}function Rd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Wt.updateQueue,t===null?(t=Rl(),Wt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Dd(e,t,n,a){t.value=n,t.getSnapshot=a,jd(t)&&Od(e)}function Nd(e,t,n){return n(function(){jd(t)&&Od(e)})}function jd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ar(e,n)}catch{return!0}}function Od(e){var t=Nt(e,2);t!==null&&ia(t,e,2)}function du(e){var t=Fr();if(typeof e=="function"){var n=e;if(e=n(),Bs){Tn(!0);try{n()}finally{Tn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:e},t}function Id(e,t,n,a){return e.baseState=n,uu(e,Dn,typeof a=="function"?a:ui)}function Tm(e,t,n,a,c){if(Il(e))throw Error(s(485));if(e=t.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){d.listeners.push(C)}};se.T!==null?n(!0):d.isTransition=!1,a(d),n=t.pending,n===null?(d.next=t.pending=d,qd(t,d)):(d.next=n.next,t.pending=n.next=d)}}function qd(e,t){var n=t.action,a=t.payload,c=e.state;if(t.isTransition){var d=se.T,C={};se.T=C;try{var D=n(c,a),F=se.S;F!==null&&F(C,D),Ud(e,t,D)}catch(ue){hu(e,t,ue)}finally{d!==null&&C.types!==null&&(d.types=C.types),se.T=d}}else try{d=n(c,a),Ud(e,t,d)}catch(ue){hu(e,t,ue)}}function Ud(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Ld(e,t,a)},function(a){return hu(e,t,a)}):Ld(e,t,n)}function Ld(e,t,n){t.status="fulfilled",t.value=n,zd(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,qd(e,n)))}function hu(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,zd(t),t=t.next;while(t!==a)}e.action=null}function zd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Yd(e,t){return t}function Kd(e,t){if(pn){var n=Ln.formState;if(n!==null){e:{var a=Wt;if(pn){if(Gn){t:{for(var c=Gn,d=ba;c.nodeType!==8;){if(!d){c=null;break t}if(c=wa(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){Gn=wa(c.nextSibling),a=c.data==="F!";break e}}Ui(a)}a=!1}a&&(t=n[0])}}return n=Fr(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yd,lastRenderedState:t},n.queue=a,n=oh.bind(null,Wt,a),a.dispatch=n,a=du(!1),d=xu.bind(null,Wt,!1,a.queue),a=Fr(),c={state:t,dispatch:null,action:e,pending:null},a.queue=c,n=Tm.bind(null,Wt,c,d,n),c.dispatch=n,a.memoizedState=e,[t,n,!1]}function Gd(e){var t=rr();return Vd(t,Dn,e)}function Vd(e,t,n){if(t=uu(e,t,Yd)[0],e=Nl(ui)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=Ko(t)}catch(C){throw C===ro?Sl:C}else a=t;t=rr();var c=t.queue,d=c.dispatch;return n!==t.memoizedState&&(Wt.flags|=2048,lo(9,{destroy:void 0},Mm.bind(null,c,n),null)),[a,d,e]}function Mm(e,t){e.action=t}function Fd(e){var t=rr(),n=Dn;if(n!==null)return Vd(t,n,e);rr(),t=t.memoizedState,n=rr();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function lo(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=Wt.updateQueue,t===null&&(t=Rl(),Wt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Hd(){return rr().memoizedState}function jl(e,t,n,a){var c=Fr();Wt.flags|=e,c.memoizedState=lo(1|t,{destroy:void 0},n,a===void 0?null:a)}function Ol(e,t,n,a){var c=rr();a=a===void 0?null:a;var d=c.memoizedState.inst;Dn!==null&&a!==null&&au(a,Dn.memoizedState.deps)?c.memoizedState=lo(t,d,n,a):(Wt.flags|=e,c.memoizedState=lo(1|t,d,n,a))}function Pd(e,t){jl(8390656,8,e,t)}function pu(e,t){Ol(2048,8,e,t)}function _m(e){Wt.flags|=4;var t=Wt.updateQueue;if(t===null)t=Rl(),Wt.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Qd(e){var t=rr().memoizedState;return _m({ref:t,nextImpl:e}),function(){if((En&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Jd(e,t){return Ol(4,2,e,t)}function Zd(e,t){return Ol(4,4,e,t)}function Xd(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wd(e,t,n){n=n!=null?n.concat([e]):null,Ol(4,4,Xd.bind(null,t,e),n)}function gu(){}function $d(e,t){var n=rr();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&au(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function eh(e,t){var n=rr();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&au(t,a[1]))return a[0];if(a=e(),Bs){Tn(!0);try{e()}finally{Tn(!1)}}return n.memoizedState=[a,t],a}function mu(e,t,n){return n===void 0||(ci&1073741824)!==0&&(ln&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=t0(),Wt.lanes|=e,Pi|=e,n)}function th(e,t,n,a){return Ar(n,t)?n:io.current!==null?(e=mu(e,n,a),Ar(e,t)||(fr=!0),e):(ci&42)===0||(ci&1073741824)!==0&&(ln&261930)===0?(fr=!0,e.memoizedState=n):(e=t0(),Wt.lanes|=e,Pi|=e,t)}function nh(e,t,n,a,c){var d=Ue.p;Ue.p=d!==0&&8>d?d:8;var C=se.T,D={};se.T=D,xu(e,!1,t,n);try{var F=c(),ue=se.S;if(ue!==null&&ue(D,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var Te=Sm(F,a);Go(e,t,Te,da(e))}else Go(e,t,a,da(e))}catch(Oe){Go(e,t,{then:function(){},status:"rejected",reason:Oe},da())}finally{Ue.p=d,C!==null&&D.types!==null&&(C.types=D.types),se.T=C}}function km(){}function yu(e,t,n,a){if(e.tag!==5)throw Error(s(476));var c=rh(e).queue;nh(e,c,t,Ie,n===null?km:function(){return ah(e),n(a)})}function rh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ie,baseState:Ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:Ie},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ah(e){var t=rh(e);t.next===null&&(t=e.alternate.memoizedState),Go(e,t.next.queue,{},da())}function vu(){return Rr(sl)}function ih(){return rr().memoizedState}function sh(){return rr().memoizedState}function Bm(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=da();e=Yi(n);var a=Ki(t,e,n);a!==null&&(ia(a,t,n),Uo(a,t,n)),t={cache:Pc()},e.payload=t;return}t=t.return}}function Rm(e,t,n){var a=da();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Il(e)?lh(t,n):(n=Ut(e,t,n,a),n!==null&&(ia(n,e,a),ch(n,t,a)))}function oh(e,t,n){var a=da();Go(e,t,n,a)}function Go(e,t,n,a){var c={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Il(e))lh(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var C=t.lastRenderedState,D=d(C,n);if(c.hasEagerState=!0,c.eagerState=D,Ar(D,C))return Je(e,t,c,0),Ln===null&&We(),!1}catch{}finally{}if(n=Ut(e,t,c,a),n!==null)return ia(n,e,a),ch(n,t,a),!0}return!1}function xu(e,t,n,a){if(a={lane:2,revertLane:Xu(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Il(e)){if(t)throw Error(s(479))}else t=Ut(e,n,a,2),t!==null&&ia(t,e,2)}function Il(e){var t=e.alternate;return e===Wt||t!==null&&t===Wt}function lh(e,t){so=kl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ch(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,vn(e,n)}}var Vo={readContext:Rr,use:Dl,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useInsertionEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useSyncExternalStore:$n,useId:$n,useHostTransitionStatus:$n,useFormState:$n,useActionState:$n,useOptimistic:$n,useMemoCache:$n,useCacheRefresh:$n};Vo.useEffectEvent=$n;var uh={readContext:Rr,use:Dl,useCallback:function(e,t){return Fr().memoizedState=[e,t===void 0?null:t],e},useContext:Rr,useEffect:Pd,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,jl(4194308,4,Xd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jl(4194308,4,e,t)},useInsertionEffect:function(e,t){jl(4,2,e,t)},useMemo:function(e,t){var n=Fr();t=t===void 0?null:t;var a=e();if(Bs){Tn(!0);try{e()}finally{Tn(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=Fr();if(n!==void 0){var c=n(t);if(Bs){Tn(!0);try{n(t)}finally{Tn(!1)}}}else c=t;return a.memoizedState=a.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},a.queue=e,e=e.dispatch=Rm.bind(null,Wt,e),[a.memoizedState,e]},useRef:function(e){var t=Fr();return e={current:e},t.memoizedState=e},useState:function(e){e=du(e);var t=e.queue,n=oh.bind(null,Wt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:gu,useDeferredValue:function(e,t){var n=Fr();return mu(n,e,t)},useTransition:function(){var e=du(!1);return e=nh.bind(null,Wt,e.queue,!0,!1),Fr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=Wt,c=Fr();if(pn){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),Ln===null)throw Error(s(349));(ln&127)!==0||Rd(a,t,n)}c.memoizedState=n;var d={value:n,getSnapshot:t};return c.queue=d,Pd(Nd.bind(null,a,d,e),[e]),a.flags|=2048,lo(9,{destroy:void 0},Dd.bind(null,a,d,n,t),null),n},useId:function(){var e=Fr(),t=Ln.identifierPrefix;if(pn){var n=Ja,a=Qa;n=(a&~(1<<32-et(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Bl++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Am++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:vu,useFormState:Kd,useActionState:Kd,useOptimistic:function(e){var t=Fr();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=xu.bind(null,Wt,!0,n),n.dispatch=t,[e,t]},useMemoCache:cu,useCacheRefresh:function(){return Fr().memoizedState=Bm.bind(null,Wt)},useEffectEvent:function(e){var t=Fr(),n={impl:e};return t.memoizedState=n,function(){if((En&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},bu={readContext:Rr,use:Dl,useCallback:$d,useContext:Rr,useEffect:pu,useImperativeHandle:Wd,useInsertionEffect:Jd,useLayoutEffect:Zd,useMemo:eh,useReducer:Nl,useRef:Hd,useState:function(){return Nl(ui)},useDebugValue:gu,useDeferredValue:function(e,t){var n=rr();return th(n,Dn.memoizedState,e,t)},useTransition:function(){var e=Nl(ui)[0],t=rr().memoizedState;return[typeof e=="boolean"?e:Ko(e),t]},useSyncExternalStore:Bd,useId:ih,useHostTransitionStatus:vu,useFormState:Gd,useActionState:Gd,useOptimistic:function(e,t){var n=rr();return Id(n,Dn,e,t)},useMemoCache:cu,useCacheRefresh:sh};bu.useEffectEvent=Qd;var fh={readContext:Rr,use:Dl,useCallback:$d,useContext:Rr,useEffect:pu,useImperativeHandle:Wd,useInsertionEffect:Jd,useLayoutEffect:Zd,useMemo:eh,useReducer:fu,useRef:Hd,useState:function(){return fu(ui)},useDebugValue:gu,useDeferredValue:function(e,t){var n=rr();return Dn===null?mu(n,e,t):th(n,Dn.memoizedState,e,t)},useTransition:function(){var e=fu(ui)[0],t=rr().memoizedState;return[typeof e=="boolean"?e:Ko(e),t]},useSyncExternalStore:Bd,useId:ih,useHostTransitionStatus:vu,useFormState:Fd,useActionState:Fd,useOptimistic:function(e,t){var n=rr();return Dn!==null?Id(n,Dn,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:cu,useCacheRefresh:sh};fh.useEffectEvent=Qd;function Cu(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:j({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var wu={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=da(),c=Yi(a);c.payload=t,n!=null&&(c.callback=n),t=Ki(e,c,a),t!==null&&(ia(t,e,a),Uo(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=da(),c=Yi(a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=Ki(e,c,a),t!==null&&(ia(t,e,a),Uo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=da(),a=Yi(n);a.tag=2,t!=null&&(a.callback=t),t=Ki(e,a,n),t!==null&&(ia(t,e,n),Uo(t,e,n))}};function dh(e,t,n,a,c,d,C){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,C):t.prototype&&t.prototype.isPureReactComponent?!l(n,a)||!l(c,d):!0}function hh(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&wu.enqueueReplaceState(t,t.state,null)}function Rs(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=j({},n));for(var c in e)n[c]===void 0&&(n[c]=e[c])}return n}function ph(e){G(e)}function gh(e){console.error(e)}function mh(e){G(e)}function ql(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function yh(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Su(e,t,n){return n=Yi(n),n.tag=3,n.payload={element:null},n.callback=function(){ql(e,t)},n}function vh(e){return e=Yi(e),e.tag=3,e}function xh(e,t,n,a){var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=a.value;e.payload=function(){return c(d)},e.callback=function(){yh(t,n,a)}}var C=n.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(e.callback=function(){yh(t,n,a),typeof c!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var D=a.stack;this.componentDidCatch(a.value,{componentStack:D!==null?D:""})})}function Dm(e,t,n,a,c){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&eo(t,n,c,!0),n=la.current,n!==null){switch(n.tag){case 31:case 13:return Ca===null?Jl():n.alternate===null&&er===0&&(er=3),n.flags&=-257,n.flags|=65536,n.lanes=c,a===Al?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Qu(e,a,c)),!1;case 22:return n.flags|=65536,a===Al?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Qu(e,a,c)),!1}throw Error(s(435,n.tag))}return Qu(e,a,c),Jl(),!1}if(pn)return t=la.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,a!==Kc&&(e=Error(s(422),{cause:a}),No(Vr(e,n)))):(a!==Kc&&(t=Error(s(423),{cause:a}),No(Vr(t,n))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,a=Vr(a,n),c=Su(e.stateNode,a,c),$c(e,c),er!==4&&(er=2)),!1;var d=Error(s(520),{cause:a});if(d=Vr(d,n),Wo===null?Wo=[d]:Wo.push(d),er!==4&&(er=2),t===null)return!0;a=Vr(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=c&-c,n.lanes|=e,e=Su(n.stateNode,a,e),$c(n,e),!1;case 1:if(t=n.type,d=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Qi===null||!Qi.has(d))))return n.flags|=65536,c&=-c,n.lanes|=c,c=vh(c),xh(c,e,n,a),$c(n,c),!1}n=n.return}while(n!==null);return!1}var Au=Error(s(461)),fr=!1;function Dr(e,t,n,a){t.child=e===null?Sd(t,null,n,a):ks(t,e.child,n,a)}function bh(e,t,n,a,c){n=n.render;var d=t.ref;if("ref"in a){var C={};for(var D in a)D!=="ref"&&(C[D]=a[D])}else C=a;return Es(t),a=iu(e,t,n,C,d,c),D=su(),e!==null&&!fr?(ou(e,t,c),fi(e,t,c)):(pn&&D&&zc(t),t.flags|=1,Dr(e,t,a,c),t.child)}function Ch(e,t,n,a,c){if(e===null){var d=n.type;return typeof d=="function"&&!Er(d)&&d.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=d,wh(e,t,d,a,c)):(e=Js(n.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!Du(e,c)){var C=d.memoizedProps;if(n=n.compare,n=n!==null?n:l,n(C,a)&&e.ref===t.ref)return fi(e,t,c)}return t.flags|=1,e=Wn(d,a),e.ref=t.ref,e.return=t,t.child=e}function wh(e,t,n,a,c){if(e!==null){var d=e.memoizedProps;if(l(d,a)&&e.ref===t.ref)if(fr=!1,t.pendingProps=a=d,Du(e,c))(e.flags&131072)!==0&&(fr=!0);else return t.lanes=e.lanes,fi(e,t,c)}return Eu(e,t,n,a,c)}function Sh(e,t,n,a){var c=a.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|n:n,e!==null){for(a=t.child=e.child,c=0;a!==null;)c=c|a.lanes|a.childLanes,a=a.sibling;a=c&~d}else a=0,t.child=null;return Ah(e,t,d,n,a)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&wl(t,d!==null?d.cachePool:null),d!==null?Td(t,d):tu(),Md(t);else return a=t.lanes=536870912,Ah(e,t,d!==null?d.baseLanes|n:n,n,a)}else d!==null?(wl(t,d.cachePool),Td(t,d),Vi(),t.memoizedState=null):(e!==null&&wl(t,null),tu(),Vi());return Dr(e,t,c,n),t.child}function Fo(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ah(e,t,n,a,c){var d=Jc();return d=d===null?null:{parent:cr._currentValue,pool:d},t.memoizedState={baseLanes:n,cachePool:d},e!==null&&wl(t,null),tu(),Md(t),e!==null&&eo(e,t,a,!0),t.childLanes=c,null}function Ul(e,t){return t=zl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Eh(e,t,n){return ks(t,e.child,null,n),e=Ul(t,t.pendingProps),e.flags|=2,ca(t),t.memoizedState=null,e}function Nm(e,t,n){var a=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(pn){if(a.mode==="hidden")return e=Ul(t,a),t.lanes=536870912,Fo(null,e);if(ru(t),(e=Gn)?(e=q0(e,ba),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ii!==null?{id:Qa,overflow:Ja}:null,retryLane:536870912,hydrationErrors:null},n=Ro(e),n.return=t,t.child=n,Br=t,Gn=null)):e=null,e===null)throw Ui(t);return t.lanes=536870912,null}return Ul(t,a)}var d=e.memoizedState;if(d!==null){var C=d.dehydrated;if(ru(t),c)if(t.flags&256)t.flags&=-257,t=Eh(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(fr||eo(e,t,n,!1),c=(n&e.childLanes)!==0,fr||c){if(a=Ln,a!==null&&(C=w(a,n),C!==0&&C!==d.retryLane))throw d.retryLane=C,Nt(e,C),ia(a,e,C),Au;Jl(),t=Eh(e,t,n)}else e=d.treeContext,Gn=wa(C.nextSibling),Br=t,pn=!0,qi=null,ba=!1,e!==null&&fd(t,e),t=Ul(t,a),t.flags|=4096;return t}return e=Wn(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ll(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(s(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Eu(e,t,n,a,c){return Es(t),n=iu(e,t,n,a,void 0,c),a=su(),e!==null&&!fr?(ou(e,t,c),fi(e,t,c)):(pn&&a&&zc(t),t.flags|=1,Dr(e,t,n,c),t.child)}function Th(e,t,n,a,c,d){return Es(t),t.updateQueue=null,n=kd(t,a,n,c),_d(e),a=su(),e!==null&&!fr?(ou(e,t,d),fi(e,t,d)):(pn&&a&&zc(t),t.flags|=1,Dr(e,t,n,d),t.child)}function Mh(e,t,n,a,c){if(Es(t),t.stateNode===null){var d=hn,C=n.contextType;typeof C=="object"&&C!==null&&(d=Rr(C)),d=new n(a,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=wu,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=a,d.state=t.memoizedState,d.refs={},Xc(t),C=n.contextType,d.context=typeof C=="object"&&C!==null?Rr(C):hn,d.state=t.memoizedState,C=n.getDerivedStateFromProps,typeof C=="function"&&(Cu(t,n,C,a),d.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(C=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),C!==d.state&&wu.enqueueReplaceState(d,d.state,null),zo(t,a,d,c),Lo(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){d=t.stateNode;var D=t.memoizedProps,F=Rs(n,D);d.props=F;var ue=d.context,Te=n.contextType;C=hn,typeof Te=="object"&&Te!==null&&(C=Rr(Te));var Oe=n.getDerivedStateFromProps;Te=typeof Oe=="function"||typeof d.getSnapshotBeforeUpdate=="function",D=t.pendingProps!==D,Te||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(D||ue!==C)&&hh(t,d,a,C),zi=!1;var pe=t.memoizedState;d.state=pe,zo(t,a,d,c),Lo(),ue=t.memoizedState,D||pe!==ue||zi?(typeof Oe=="function"&&(Cu(t,n,Oe,a),ue=t.memoizedState),(F=zi||dh(t,n,F,a,pe,ue,C))?(Te||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=ue),d.props=a,d.state=ue,d.context=C,a=F):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{d=t.stateNode,Wc(e,t),C=t.memoizedProps,Te=Rs(n,C),d.props=Te,Oe=t.pendingProps,pe=d.context,ue=n.contextType,F=hn,typeof ue=="object"&&ue!==null&&(F=Rr(ue)),D=n.getDerivedStateFromProps,(ue=typeof D=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(C!==Oe||pe!==F)&&hh(t,d,a,F),zi=!1,pe=t.memoizedState,d.state=pe,zo(t,a,d,c),Lo();var be=t.memoizedState;C!==Oe||pe!==be||zi||e!==null&&e.dependencies!==null&&bl(e.dependencies)?(typeof D=="function"&&(Cu(t,n,D,a),be=t.memoizedState),(Te=zi||dh(t,n,Te,a,pe,be,F)||e!==null&&e.dependencies!==null&&bl(e.dependencies))?(ue||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,be,F),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,be,F)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||C===e.memoizedProps&&pe===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&pe===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=be),d.props=a,d.state=be,d.context=F,a=Te):(typeof d.componentDidUpdate!="function"||C===e.memoizedProps&&pe===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&pe===e.memoizedState||(t.flags|=1024),a=!1)}return d=a,Ll(e,t),a=(t.flags&128)!==0,d||a?(d=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&a?(t.child=ks(t,e.child,null,c),t.child=ks(t,null,n,c)):Dr(e,t,n,c),t.memoizedState=d.state,e=t.child):e=fi(e,t,c),e}function _h(e,t,n,a){return Ss(),t.flags|=256,Dr(e,t,n,a),t.child}var Tu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mu(e){return{baseLanes:e,cachePool:yd()}}function _u(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=fa),e}function kh(e,t,n){var a=t.pendingProps,c=!1,d=(t.flags&128)!==0,C;if((C=d)||(C=e!==null&&e.memoizedState===null?!1:(nr.current&2)!==0),C&&(c=!0,t.flags&=-129),C=(t.flags&32)!==0,t.flags&=-33,e===null){if(pn){if(c?Gi(t):Vi(),(e=Gn)?(e=q0(e,ba),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ii!==null?{id:Qa,overflow:Ja}:null,retryLane:536870912,hydrationErrors:null},n=Ro(e),n.return=t,t.child=n,Br=t,Gn=null)):e=null,e===null)throw Ui(t);return ff(e)?t.lanes=32:t.lanes=536870912,null}var D=a.children;return a=a.fallback,c?(Vi(),c=t.mode,D=zl({mode:"hidden",children:D},c),a=Pa(a,c,n,null),D.return=t,a.return=t,D.sibling=a,t.child=D,a=t.child,a.memoizedState=Mu(n),a.childLanes=_u(e,C,n),t.memoizedState=Tu,Fo(null,a)):(Gi(t),ku(t,D))}var F=e.memoizedState;if(F!==null&&(D=F.dehydrated,D!==null)){if(d)t.flags&256?(Gi(t),t.flags&=-257,t=Bu(e,t,n)):t.memoizedState!==null?(Vi(),t.child=e.child,t.flags|=128,t=null):(Vi(),D=a.fallback,c=t.mode,a=zl({mode:"visible",children:a.children},c),D=Pa(D,c,n,null),D.flags|=2,a.return=t,D.return=t,a.sibling=D,t.child=a,ks(t,e.child,null,n),a=t.child,a.memoizedState=Mu(n),a.childLanes=_u(e,C,n),t.memoizedState=Tu,t=Fo(null,a));else if(Gi(t),ff(D)){if(C=D.nextSibling&&D.nextSibling.dataset,C)var ue=C.dgst;C=ue,a=Error(s(419)),a.stack="",a.digest=C,No({value:a,source:null,stack:null}),t=Bu(e,t,n)}else if(fr||eo(e,t,n,!1),C=(n&e.childLanes)!==0,fr||C){if(C=Ln,C!==null&&(a=w(C,n),a!==0&&a!==F.retryLane))throw F.retryLane=a,Nt(e,a),ia(C,e,a),Au;uf(D)||Jl(),t=Bu(e,t,n)}else uf(D)?(t.flags|=192,t.child=e.child,t=null):(e=F.treeContext,Gn=wa(D.nextSibling),Br=t,pn=!0,qi=null,ba=!1,e!==null&&fd(t,e),t=ku(t,a.children),t.flags|=4096);return t}return c?(Vi(),D=a.fallback,c=t.mode,F=e.child,ue=F.sibling,a=Wn(F,{mode:"hidden",children:a.children}),a.subtreeFlags=F.subtreeFlags&65011712,ue!==null?D=Wn(ue,D):(D=Pa(D,c,n,null),D.flags|=2),D.return=t,a.return=t,a.sibling=D,t.child=a,Fo(null,a),a=t.child,D=e.child.memoizedState,D===null?D=Mu(n):(c=D.cachePool,c!==null?(F=cr._currentValue,c=c.parent!==F?{parent:F,pool:F}:c):c=yd(),D={baseLanes:D.baseLanes|n,cachePool:c}),a.memoizedState=D,a.childLanes=_u(e,C,n),t.memoizedState=Tu,Fo(e.child,a)):(Gi(t),n=e.child,e=n.sibling,n=Wn(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(C=t.deletions,C===null?(t.deletions=[e],t.flags|=16):C.push(e)),t.child=n,t.memoizedState=null,n)}function ku(e,t){return t=zl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function zl(e,t){return e=Qn(22,e,null,t),e.lanes=0,e}function Bu(e,t,n){return ks(t,e.child,null,n),e=ku(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bh(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Fc(e.return,t,n)}function Ru(e,t,n,a,c,d){var C=e.memoizedState;C===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:c,treeForkCount:d}:(C.isBackwards=t,C.rendering=null,C.renderingStartTime=0,C.last=a,C.tail=n,C.tailMode=c,C.treeForkCount=d)}function Rh(e,t,n){var a=t.pendingProps,c=a.revealOrder,d=a.tail;a=a.children;var C=nr.current,D=(C&2)!==0;if(D?(C=C&1|2,t.flags|=128):C&=1,De(nr,C),Dr(e,t,a,n),a=pn?Do:0,!D&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bh(e,n,t);else if(e.tag===19)Bh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&_l(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),Ru(t,!1,c,n,d,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&_l(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}Ru(t,!0,n,null,d,a);break;case"together":Ru(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function fi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Pi|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(eo(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=Wn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Wn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Du(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&bl(e)))}function jm(e,t,n){switch(t.tag){case 3:Ct(t,t.stateNode.containerInfo),Li(t,cr,e.memoizedState.cache),Ss();break;case 27:case 5:Fe(t);break;case 4:Ct(t,t.stateNode.containerInfo);break;case 10:Li(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ru(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(Gi(t),t.flags|=128,null):(n&t.child.childLanes)!==0?kh(e,t,n):(Gi(t),e=fi(e,t,n),e!==null?e.sibling:null);Gi(t);break;case 19:var c=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(eo(e,t,n,!1),a=(n&t.childLanes)!==0),c){if(a)return Rh(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),De(nr,nr.current),a)break;return null;case 22:return t.lanes=0,Sh(e,t,n,t.pendingProps);case 24:Li(t,cr,e.memoizedState.cache)}return fi(e,t,n)}function Dh(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)fr=!0;else{if(!Du(e,n)&&(t.flags&128)===0)return fr=!1,jm(e,t,n);fr=(e.flags&131072)!==0}else fr=!1,pn&&(t.flags&1048576)!==0&&ud(t,Do,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=Ms(t.elementType),t.type=e,typeof e=="function")Er(e)?(a=Rs(e,a),t.tag=1,t=Mh(null,t,e,a,n)):(t.tag=0,t=Eu(null,t,e,a,n));else{if(e!=null){var c=e.$$typeof;if(c===ut){t.tag=11,t=bh(null,t,e,a,n);break e}else if(c===it){t.tag=14,t=Ch(null,t,e,a,n);break e}}throw t=At(e)||e,Error(s(306,t,""))}}return t;case 0:return Eu(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,c=Rs(a,t.pendingProps),Mh(e,t,a,c,n);case 3:e:{if(Ct(t,t.stateNode.containerInfo),e===null)throw Error(s(387));a=t.pendingProps;var d=t.memoizedState;c=d.element,Wc(e,t),zo(t,a,null,n);var C=t.memoizedState;if(a=C.cache,Li(t,cr,a),a!==d.cache&&Hc(t,[cr],n,!0),Lo(),a=C.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:C.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=_h(e,t,a,n);break e}else if(a!==c){c=Vr(Error(s(424)),t),No(c),t=_h(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Gn=wa(e.firstChild),Br=t,pn=!0,qi=null,ba=!0,n=Sd(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ss(),a===c){t=fi(e,t,n);break e}Dr(e,t,a,n)}t=t.child}return t;case 26:return Ll(e,t),e===null?(n=G0(t.type,null,t.pendingProps,null))?t.memoizedState=n:pn||(n=t.type,e=t.pendingProps,a=nc(Me.current).createElement(n),a[W]=t,a[Ce]=e,Nr(a,n,e),yt(a),t.stateNode=a):t.memoizedState=G0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Fe(t),e===null&&pn&&(a=t.stateNode=z0(t.type,t.pendingProps,Me.current),Br=t,ba=!0,c=Gn,Wi(t.type)?(df=c,Gn=wa(a.firstChild)):Gn=c),Dr(e,t,t.pendingProps.children,n),Ll(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&pn&&((c=a=Gn)&&(a=uy(a,t.type,t.pendingProps,ba),a!==null?(t.stateNode=a,Br=t,Gn=wa(a.firstChild),ba=!1,c=!0):c=!1),c||Ui(t)),Fe(t),c=t.type,d=t.pendingProps,C=e!==null?e.memoizedProps:null,a=d.children,of(c,d)?a=null:C!==null&&of(c,C)&&(t.flags|=32),t.memoizedState!==null&&(c=iu(e,t,Em,null,null,n),sl._currentValue=c),Ll(e,t),Dr(e,t,a,n),t.child;case 6:return e===null&&pn&&((e=n=Gn)&&(n=fy(n,t.pendingProps,ba),n!==null?(t.stateNode=n,Br=t,Gn=null,e=!0):e=!1),e||Ui(t)),null;case 13:return kh(e,t,n);case 4:return Ct(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ks(t,null,a,n):Dr(e,t,a,n),t.child;case 11:return bh(e,t,t.type,t.pendingProps,n);case 7:return Dr(e,t,t.pendingProps,n),t.child;case 8:return Dr(e,t,t.pendingProps.children,n),t.child;case 12:return Dr(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Li(t,t.type,a.value),Dr(e,t,a.children,n),t.child;case 9:return c=t.type._context,a=t.pendingProps.children,Es(t),c=Rr(c),a=a(c),t.flags|=1,Dr(e,t,a,n),t.child;case 14:return Ch(e,t,t.type,t.pendingProps,n);case 15:return wh(e,t,t.type,t.pendingProps,n);case 19:return Rh(e,t,n);case 31:return Nm(e,t,n);case 22:return Sh(e,t,n,t.pendingProps);case 24:return Es(t),a=Rr(cr),e===null?(c=Jc(),c===null&&(c=Ln,d=Pc(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=n),c=d),t.memoizedState={parent:a,cache:c},Xc(t),Li(t,cr,c)):((e.lanes&n)!==0&&(Wc(e,t),zo(t,null,null,n),Lo()),c=e.memoizedState,d=t.memoizedState,c.parent!==a?(c={parent:a,cache:a},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Li(t,cr,a)):(a=d.cache,Li(t,cr,a),a!==c.cache&&Hc(t,[cr],n,!0))),Dr(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function di(e){e.flags|=4}function Nu(e,t,n,a,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(i0())e.flags|=8192;else throw _s=Al,Zc}else e.flags&=-16777217}function Nh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Q0(t))if(i0())e.flags|=8192;else throw _s=Al,Zc}function Yl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Xr():536870912,e.lanes|=t,ho|=t)}function Ho(e,t){if(!pn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Vn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags&65011712,a|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Om(e,t,n){var a=t.pendingProps;switch(Yc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(t),null;case 1:return Vn(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),li(cr),ze(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&($s(t)?di(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Gc())),Vn(t),null;case 26:var c=t.type,d=t.memoizedState;return e===null?(di(t),d!==null?(Vn(t),Nh(t,d)):(Vn(t),Nu(t,c,null,a,n))):d?d!==e.memoizedState?(di(t),Vn(t),Nh(t,d)):(Vn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&di(t),Vn(t),Nu(t,c,e,a,n)),null;case 27:if(Rt(t),n=Me.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&di(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Vn(t),null}e=Ge.current,$s(t)?dd(t):(e=z0(c,a,n),t.stateNode=e,di(t))}return Vn(t),null;case 5:if(Rt(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&di(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Vn(t),null}if(d=Ge.current,$s(t))dd(t);else{var C=nc(Me.current);switch(d){case 1:d=C.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:d=C.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":d=C.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":d=C.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":d=C.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof a.is=="string"?C.createElement("select",{is:a.is}):C.createElement("select"),a.multiple?d.multiple=!0:a.size&&(d.size=a.size);break;default:d=typeof a.is=="string"?C.createElement(c,{is:a.is}):C.createElement(c)}}d[W]=t,d[Ce]=a;e:for(C=t.child;C!==null;){if(C.tag===5||C.tag===6)d.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===t)break e;for(;C.sibling===null;){if(C.return===null||C.return===t)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}t.stateNode=d;e:switch(Nr(d,c,a),c){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&di(t)}}return Vn(t),Nu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&di(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(e=Me.current,$s(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,c=Br,c!==null)switch(c.tag){case 27:case 5:a=c.memoizedProps}e[W]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||k0(e.nodeValue,n)),e||Ui(t,!0)}else e=nc(e).createTextNode(a),e[W]=t,t.stateNode=e}return Vn(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=$s(t),n!==null){if(e===null){if(!a)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[W]=t}else Ss(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Vn(t),e=!1}else n=Gc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(ca(t),t):(ca(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Vn(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=$s(t),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(s(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));c[W]=t}else Ss(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Vn(t),c=!1}else c=Gc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(ca(t),t):(ca(t),null)}return ca(t),(t.flags&128)!==0?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,c=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(c=a.alternate.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==c&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Yl(t,t.updateQueue),Vn(t),null);case 4:return ze(),e===null&&tf(t.stateNode.containerInfo),Vn(t),null;case 10:return li(t.type),Vn(t),null;case 19:if(me(nr),a=t.memoizedState,a===null)return Vn(t),null;if(c=(t.flags&128)!==0,d=a.rendering,d===null)if(c)Ho(a,!1);else{if(er!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=_l(e),d!==null){for(t.flags|=128,Ho(a,!1),e=d.updateQueue,t.updateQueue=e,Yl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Cs(n,e),n=n.sibling;return De(nr,nr.current&1|2),pn&&si(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&On()>Hl&&(t.flags|=128,c=!0,Ho(a,!1),t.lanes=4194304)}else{if(!c)if(e=_l(d),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Yl(t,e),Ho(a,!0),a.tail===null&&a.tailMode==="hidden"&&!d.alternate&&!pn)return Vn(t),null}else 2*On()-a.renderingStartTime>Hl&&n!==536870912&&(t.flags|=128,c=!0,Ho(a,!1),t.lanes=4194304);a.isBackwards?(d.sibling=t.child,t.child=d):(e=a.last,e!==null?e.sibling=d:t.child=d,a.last=d)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=On(),e.sibling=null,n=nr.current,De(nr,c?n&1|2:n&1),pn&&si(t,a.treeForkCount),e):(Vn(t),null);case 22:case 23:return ca(t),nu(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(Vn(t),t.subtreeFlags&6&&(t.flags|=8192)):Vn(t),n=t.updateQueue,n!==null&&Yl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&me(Ts),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),li(cr),Vn(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Im(e,t){switch(Yc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return li(cr),ze(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Rt(t),null;case 31:if(t.memoizedState!==null){if(ca(t),t.alternate===null)throw Error(s(340));Ss()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ca(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Ss()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return me(nr),null;case 4:return ze(),null;case 10:return li(t.type),null;case 22:case 23:return ca(t),nu(),e!==null&&me(Ts),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return li(cr),null;case 25:return null;default:return null}}function jh(e,t){switch(Yc(t),t.tag){case 3:li(cr),ze();break;case 26:case 27:case 5:Rt(t);break;case 4:ze();break;case 31:t.memoizedState!==null&&ca(t);break;case 13:ca(t);break;case 19:me(nr);break;case 10:li(t.type);break;case 22:case 23:ca(t),nu(),e!==null&&me(Ts);break;case 24:li(cr)}}function Po(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var c=a.next;n=c;do{if((n.tag&e)===e){a=void 0;var d=n.create,C=n.inst;a=d(),C.destroy=a}n=n.next}while(n!==c)}}catch(D){Bn(t,t.return,D)}}function Fi(e,t,n){try{var a=t.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var d=c.next;a=d;do{if((a.tag&e)===e){var C=a.inst,D=C.destroy;if(D!==void 0){C.destroy=void 0,c=t;var F=n,ue=D;try{ue()}catch(Te){Bn(c,F,Te)}}}a=a.next}while(a!==d)}}catch(Te){Bn(t,t.return,Te)}}function Oh(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ed(t,n)}catch(a){Bn(e,e.return,a)}}}function Ih(e,t,n){n.props=Rs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Bn(e,t,a)}}function Qo(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(c){Bn(e,t,c)}}function Za(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(c){Bn(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(c){Bn(e,t,c)}else n.current=null}function qh(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(c){Bn(e,e.return,c)}}function ju(e,t,n){try{var a=e.stateNode;ay(a,e.type,n,t),a[Ce]=t}catch(c){Bn(e,e.return,c)}}function Uh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Wi(e.type)||e.tag===4}function Ou(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Wi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Iu(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Or));else if(a!==4&&(a===27&&Wi(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Iu(e,t,n),e=e.sibling;e!==null;)Iu(e,t,n),e=e.sibling}function Kl(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&Wi(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Kl(e,t,n),e=e.sibling;e!==null;)Kl(e,t,n),e=e.sibling}function Lh(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Nr(t,a,n),t[W]=e,t[Ce]=n}catch(d){Bn(e,e.return,d)}}var hi=!1,dr=!1,qu=!1,zh=typeof WeakSet=="function"?WeakSet:Set,Tr=null;function qm(e,t){if(e=e.containerInfo,af=cc,e=E(e),k(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var c=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{n.nodeType,d.nodeType}catch{n=null;break e}var C=0,D=-1,F=-1,ue=0,Te=0,Oe=e,pe=null;t:for(;;){for(var be;Oe!==n||c!==0&&Oe.nodeType!==3||(D=C+c),Oe!==d||a!==0&&Oe.nodeType!==3||(F=C+a),Oe.nodeType===3&&(C+=Oe.nodeValue.length),(be=Oe.firstChild)!==null;)pe=Oe,Oe=be;for(;;){if(Oe===e)break t;if(pe===n&&++ue===c&&(D=C),pe===d&&++Te===a&&(F=C),(be=Oe.nextSibling)!==null)break;Oe=pe,pe=Oe.parentNode}Oe=be}n=D===-1||F===-1?null:{start:D,end:F}}else n=null}n=n||{start:0,end:0}}else n=null;for(sf={focusedElem:e,selectionRange:n},cc=!1,Tr=t;Tr!==null;)if(t=Tr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Tr=e;else for(;Tr!==null;){switch(t=Tr,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)c=e[n],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,n=t,c=d.memoizedProps,d=d.memoizedState,a=n.stateNode;try{var bt=Rs(n.type,c);e=a.getSnapshotBeforeUpdate(bt,d),a.__reactInternalSnapshotBeforeUpdate=e}catch(Lt){Bn(n,n.return,Lt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)cf(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":cf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,Tr=e;break}Tr=t.return}}function Yh(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:gi(e,n),a&4&&Po(5,n);break;case 1:if(gi(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(C){Bn(n,n.return,C)}else{var c=Rs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(C){Bn(n,n.return,C)}}a&64&&Oh(n),a&512&&Qo(n,n.return);break;case 3:if(gi(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ed(e,t)}catch(C){Bn(n,n.return,C)}}break;case 27:t===null&&a&4&&Lh(n);case 26:case 5:gi(e,n),t===null&&a&4&&qh(n),a&512&&Qo(n,n.return);break;case 12:gi(e,n);break;case 31:gi(e,n),a&4&&Vh(e,n);break;case 13:gi(e,n),a&4&&Fh(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Hm.bind(null,n),dy(e,n))));break;case 22:if(a=n.memoizedState!==null||hi,!a){t=t!==null&&t.memoizedState!==null||dr,c=hi;var d=dr;hi=a,(dr=t)&&!d?mi(e,n,(n.subtreeFlags&8772)!==0):gi(e,n),hi=c,dr=d}break;case 30:break;default:gi(e,n)}}function Kh(e){var t=e.alternate;t!==null&&(e.alternate=null,Kh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&jt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Hn=null,ta=!1;function pi(e,t,n){for(n=n.child;n!==null;)Gh(e,t,n),n=n.sibling}function Gh(e,t,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(ar,n)}catch{}switch(n.tag){case 26:dr||Za(n,t),pi(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:dr||Za(n,t);var a=Hn,c=ta;Wi(n.type)&&(Hn=n.stateNode,ta=!1),pi(e,t,n),rl(n.stateNode),Hn=a,ta=c;break;case 5:dr||Za(n,t);case 6:if(a=Hn,c=ta,Hn=null,pi(e,t,n),Hn=a,ta=c,Hn!==null)if(ta)try{(Hn.nodeType===9?Hn.body:Hn.nodeName==="HTML"?Hn.ownerDocument.body:Hn).removeChild(n.stateNode)}catch(d){Bn(n,t,d)}else try{Hn.removeChild(n.stateNode)}catch(d){Bn(n,t,d)}break;case 18:Hn!==null&&(ta?(e=Hn,O0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Co(e)):O0(Hn,n.stateNode));break;case 4:a=Hn,c=ta,Hn=n.stateNode.containerInfo,ta=!0,pi(e,t,n),Hn=a,ta=c;break;case 0:case 11:case 14:case 15:Fi(2,n,t),dr||Fi(4,n,t),pi(e,t,n);break;case 1:dr||(Za(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&Ih(n,t,a)),pi(e,t,n);break;case 21:pi(e,t,n);break;case 22:dr=(a=dr)||n.memoizedState!==null,pi(e,t,n),dr=a;break;default:pi(e,t,n)}}function Vh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Co(e)}catch(n){Bn(t,t.return,n)}}}function Fh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Co(e)}catch(n){Bn(t,t.return,n)}}function Um(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new zh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new zh),t;default:throw Error(s(435,e.tag))}}function Gl(e,t){var n=Um(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var c=Pm.bind(null,e,a);a.then(c,c)}})}function na(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var c=n[a],d=e,C=t,D=C;e:for(;D!==null;){switch(D.tag){case 27:if(Wi(D.type)){Hn=D.stateNode,ta=!1;break e}break;case 5:Hn=D.stateNode,ta=!1;break e;case 3:case 4:Hn=D.stateNode.containerInfo,ta=!0;break e}D=D.return}if(Hn===null)throw Error(s(160));Gh(d,C,c),Hn=null,ta=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Hh(t,e),t=t.sibling}var Oa=null;function Hh(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:na(t,e),ra(e),a&4&&(Fi(3,e,e.return),Po(3,e),Fi(5,e,e.return));break;case 1:na(t,e),ra(e),a&512&&(dr||n===null||Za(n,n.return)),a&64&&hi&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var c=Oa;if(na(t,e),ra(e),a&512&&(dr||n===null||Za(n,n.return)),a&4){var d=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,c=c.ownerDocument||c;t:switch(a){case"title":d=c.getElementsByTagName("title")[0],(!d||d[Et]||d[W]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(a),c.head.insertBefore(d,c.querySelector("head > title"))),Nr(d,a,n),d[W]=e,yt(d),a=d;break e;case"link":var C=H0("link","href",c).get(a+(n.href||""));if(C){for(var D=0;D<C.length;D++)if(d=C[D],d.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&d.getAttribute("rel")===(n.rel==null?null:n.rel)&&d.getAttribute("title")===(n.title==null?null:n.title)&&d.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){C.splice(D,1);break t}}d=c.createElement(a),Nr(d,a,n),c.head.appendChild(d);break;case"meta":if(C=H0("meta","content",c).get(a+(n.content||""))){for(D=0;D<C.length;D++)if(d=C[D],d.getAttribute("content")===(n.content==null?null:""+n.content)&&d.getAttribute("name")===(n.name==null?null:n.name)&&d.getAttribute("property")===(n.property==null?null:n.property)&&d.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&d.getAttribute("charset")===(n.charSet==null?null:n.charSet)){C.splice(D,1);break t}}d=c.createElement(a),Nr(d,a,n),c.head.appendChild(d);break;default:throw Error(s(468,a))}d[W]=e,yt(d),a=d}e.stateNode=a}else P0(c,e.type,e.stateNode);else e.stateNode=F0(c,a,e.memoizedProps);else d!==a?(d===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):d.count--,a===null?P0(c,e.type,e.stateNode):F0(c,a,e.memoizedProps)):a===null&&e.stateNode!==null&&ju(e,e.memoizedProps,n.memoizedProps)}break;case 27:na(t,e),ra(e),a&512&&(dr||n===null||Za(n,n.return)),n!==null&&a&4&&ju(e,e.memoizedProps,n.memoizedProps);break;case 5:if(na(t,e),ra(e),a&512&&(dr||n===null||Za(n,n.return)),e.flags&32){c=e.stateNode;try{un(c,"")}catch(bt){Bn(e,e.return,bt)}}a&4&&e.stateNode!=null&&(c=e.memoizedProps,ju(e,c,n!==null?n.memoizedProps:c)),a&1024&&(qu=!0);break;case 6:if(na(t,e),ra(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(bt){Bn(e,e.return,bt)}}break;case 3:if(ic=null,c=Oa,Oa=rc(t.containerInfo),na(t,e),Oa=c,ra(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Co(t.containerInfo)}catch(bt){Bn(e,e.return,bt)}qu&&(qu=!1,Ph(e));break;case 4:a=Oa,Oa=rc(e.stateNode.containerInfo),na(t,e),ra(e),Oa=a;break;case 12:na(t,e),ra(e);break;case 31:na(t,e),ra(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Gl(e,a)));break;case 13:na(t,e),ra(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Fl=On()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Gl(e,a)));break;case 22:c=e.memoizedState!==null;var F=n!==null&&n.memoizedState!==null,ue=hi,Te=dr;if(hi=ue||c,dr=Te||F,na(t,e),dr=Te,hi=ue,ra(e),a&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(n===null||F||hi||dr||Ds(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){F=n=t;try{if(d=F.stateNode,c)C=d.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{D=F.stateNode;var Oe=F.memoizedProps.style,pe=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null;D.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(bt){Bn(F,F.return,bt)}}}else if(t.tag===6){if(n===null){F=t;try{F.stateNode.nodeValue=c?"":F.memoizedProps}catch(bt){Bn(F,F.return,bt)}}}else if(t.tag===18){if(n===null){F=t;try{var be=F.stateNode;c?I0(be,!0):I0(F.stateNode,!1)}catch(bt){Bn(F,F.return,bt)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Gl(e,n))));break;case 19:na(t,e),ra(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Gl(e,a)));break;case 30:break;case 21:break;default:na(t,e),ra(e)}}function ra(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(Uh(a)){n=a;break}a=a.return}if(n==null)throw Error(s(160));switch(n.tag){case 27:var c=n.stateNode,d=Ou(e);Kl(e,d,c);break;case 5:var C=n.stateNode;n.flags&32&&(un(C,""),n.flags&=-33);var D=Ou(e);Kl(e,D,C);break;case 3:case 4:var F=n.stateNode.containerInfo,ue=Ou(e);Iu(e,ue,F);break;default:throw Error(s(161))}}catch(Te){Bn(e,e.return,Te)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ph(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ph(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function gi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Yh(e,t.alternate,t),t=t.sibling}function Ds(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Fi(4,t,t.return),Ds(t);break;case 1:Za(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Ih(t,t.return,n),Ds(t);break;case 27:rl(t.stateNode);case 26:case 5:Za(t,t.return),Ds(t);break;case 22:t.memoizedState===null&&Ds(t);break;case 30:Ds(t);break;default:Ds(t)}e=e.sibling}}function mi(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,c=e,d=t,C=d.flags;switch(d.tag){case 0:case 11:case 15:mi(c,d,n),Po(4,d);break;case 1:if(mi(c,d,n),a=d,c=a.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(ue){Bn(a,a.return,ue)}if(a=d,c=a.updateQueue,c!==null){var D=a.stateNode;try{var F=c.shared.hiddenCallbacks;if(F!==null)for(c.shared.hiddenCallbacks=null,c=0;c<F.length;c++)Ad(F[c],D)}catch(ue){Bn(a,a.return,ue)}}n&&C&64&&Oh(d),Qo(d,d.return);break;case 27:Lh(d);case 26:case 5:mi(c,d,n),n&&a===null&&C&4&&qh(d),Qo(d,d.return);break;case 12:mi(c,d,n);break;case 31:mi(c,d,n),n&&C&4&&Vh(c,d);break;case 13:mi(c,d,n),n&&C&4&&Fh(c,d);break;case 22:d.memoizedState===null&&mi(c,d,n),Qo(d,d.return);break;case 30:break;default:mi(c,d,n)}t=t.sibling}}function Uu(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&jo(n))}function Lu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&jo(e))}function Ia(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Qh(e,t,n,a),t=t.sibling}function Qh(e,t,n,a){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Ia(e,t,n,a),c&2048&&Po(9,t);break;case 1:Ia(e,t,n,a);break;case 3:Ia(e,t,n,a),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&jo(e)));break;case 12:if(c&2048){Ia(e,t,n,a),e=t.stateNode;try{var d=t.memoizedProps,C=d.id,D=d.onPostCommit;typeof D=="function"&&D(C,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(F){Bn(t,t.return,F)}}else Ia(e,t,n,a);break;case 31:Ia(e,t,n,a);break;case 13:Ia(e,t,n,a);break;case 23:break;case 22:d=t.stateNode,C=t.alternate,t.memoizedState!==null?d._visibility&2?Ia(e,t,n,a):Jo(e,t):d._visibility&2?Ia(e,t,n,a):(d._visibility|=2,co(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Uu(C,t);break;case 24:Ia(e,t,n,a),c&2048&&Lu(t.alternate,t);break;default:Ia(e,t,n,a)}}function co(e,t,n,a,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,C=t,D=n,F=a,ue=C.flags;switch(C.tag){case 0:case 11:case 15:co(d,C,D,F,c),Po(8,C);break;case 23:break;case 22:var Te=C.stateNode;C.memoizedState!==null?Te._visibility&2?co(d,C,D,F,c):Jo(d,C):(Te._visibility|=2,co(d,C,D,F,c)),c&&ue&2048&&Uu(C.alternate,C);break;case 24:co(d,C,D,F,c),c&&ue&2048&&Lu(C.alternate,C);break;default:co(d,C,D,F,c)}t=t.sibling}}function Jo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,c=a.flags;switch(a.tag){case 22:Jo(n,a),c&2048&&Uu(a.alternate,a);break;case 24:Jo(n,a),c&2048&&Lu(a.alternate,a);break;default:Jo(n,a)}t=t.sibling}}var Zo=8192;function uo(e,t,n){if(e.subtreeFlags&Zo)for(e=e.child;e!==null;)Jh(e,t,n),e=e.sibling}function Jh(e,t,n){switch(e.tag){case 26:uo(e,t,n),e.flags&Zo&&e.memoizedState!==null&&Ay(n,Oa,e.memoizedState,e.memoizedProps);break;case 5:uo(e,t,n);break;case 3:case 4:var a=Oa;Oa=rc(e.stateNode.containerInfo),uo(e,t,n),Oa=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Zo,Zo=16777216,uo(e,t,n),Zo=a):uo(e,t,n));break;default:uo(e,t,n)}}function Zh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Xo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];Tr=a,Wh(a,e)}Zh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xh(e),e=e.sibling}function Xh(e){switch(e.tag){case 0:case 11:case 15:Xo(e),e.flags&2048&&Fi(9,e,e.return);break;case 3:Xo(e);break;case 12:Xo(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Vl(e)):Xo(e);break;default:Xo(e)}}function Vl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];Tr=a,Wh(a,e)}Zh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Fi(8,t,t.return),Vl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Vl(t));break;default:Vl(t)}e=e.sibling}}function Wh(e,t){for(;Tr!==null;){var n=Tr;switch(n.tag){case 0:case 11:case 15:Fi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:jo(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,Tr=a;else e:for(n=e;Tr!==null;){a=Tr;var c=a.sibling,d=a.return;if(Kh(a),a===n){Tr=null;break e}if(c!==null){c.return=d,Tr=c;break e}Tr=d}}}var Lm={getCacheForType:function(e){var t=Rr(cr),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Rr(cr).controller.signal}},zm=typeof WeakMap=="function"?WeakMap:Map,En=0,Ln=null,an=null,ln=0,kn=0,ua=null,Hi=!1,fo=!1,zu=!1,yi=0,er=0,Pi=0,Ns=0,Yu=0,fa=0,ho=0,Wo=null,aa=null,Ku=!1,Fl=0,$h=0,Hl=1/0,Pl=null,Qi=null,xr=0,Ji=null,po=null,vi=0,Gu=0,Vu=null,e0=null,$o=0,Fu=null;function da(){return(En&2)!==0&&ln!==0?ln&-ln:se.T!==null?Xu():h()}function t0(){if(fa===0)if((ln&536870912)===0||pn){var e=mr;mr<<=1,(mr&3932160)===0&&(mr=262144),fa=e}else fa=536870912;return e=la.current,e!==null&&(e.flags|=32),fa}function ia(e,t,n){(e===Ln&&(kn===2||kn===9)||e.cancelPendingCommit!==null)&&(go(e,0),Zi(e,ln,fa,!1)),_r(e,n),((En&2)===0||e!==Ln)&&(e===Ln&&((En&2)===0&&(Ns|=n),er===4&&Zi(e,ln,fa,!1)),Xa(e))}function n0(e,t,n){if((En&6)!==0)throw Error(s(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||or(e,t),c=a?Gm(e,t):Pu(e,t,!0),d=a;do{if(c===0){fo&&!a&&Zi(e,t,0,!1);break}else{if(n=e.current.alternate,d&&!Ym(n)){c=Pu(e,t,!1),d=!1;continue}if(c===2){if(d=t,e.errorRecoveryDisabledLanes&d)var C=0;else C=e.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){t=C;e:{var D=e;c=Wo;var F=D.current.memoizedState.isDehydrated;if(F&&(go(D,C).flags|=256),C=Pu(D,C,!1),C!==2){if(zu&&!F){D.errorRecoveryDisabledLanes|=d,Ns|=d,c=4;break e}d=aa,aa=c,d!==null&&(aa===null?aa=d:aa.push.apply(aa,d))}c=C}if(d=!1,c!==2)continue}}if(c===1){go(e,0),Zi(e,t,0,!0);break}e:{switch(a=e,d=c,d){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Zi(a,t,fa,!Hi);break e;case 2:aa=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(c=Fl+300-On(),10<c)){if(Zi(a,t,fa,!Hi),yr(a,0,!0)!==0)break e;vi=t,a.timeoutHandle=N0(r0.bind(null,a,n,aa,Pl,Ku,t,fa,Ns,ho,Hi,d,"Throttled",-0,0),c);break e}r0(a,n,aa,Pl,Ku,t,fa,Ns,ho,Hi,d,null,-0,0)}}break}while(!0);Xa(e)}function r0(e,t,n,a,c,d,C,D,F,ue,Te,Oe,pe,be){if(e.timeoutHandle=-1,Oe=t.subtreeFlags,Oe&8192||(Oe&16785408)===16785408){Oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Or},Jh(t,d,Oe);var bt=(d&62914560)===d?Fl-On():(d&4194048)===d?$h-On():0;if(bt=Ey(Oe,bt),bt!==null){vi=d,e.cancelPendingCommit=bt(f0.bind(null,e,t,d,n,a,c,C,D,F,Te,Oe,null,pe,be)),Zi(e,d,C,!ue);return}}f0(e,t,d,n,a,c,C,D,F)}function Ym(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var c=n[a],d=c.getSnapshot;c=c.value;try{if(!Ar(d(),c))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zi(e,t,n,a){t&=~Yu,t&=~Ns,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var c=t;0<c;){var d=31-et(c),C=1<<d;a[d]=-1,c&=~C}n!==0&&Sn(e,n,t)}function Ql(){return(En&6)===0?(el(0),!1):!0}function Hu(){if(an!==null){if(kn===0)var e=an.return;else e=an,oi=As=null,lu(e),ao=null,Io=0,e=an;for(;e!==null;)jh(e.alternate,e),e=e.return;an=null}}function go(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,oy(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),vi=0,Hu(),Ln=e,an=n=Wn(e.current,null),ln=t,kn=0,ua=null,Hi=!1,fo=or(e,t),zu=!1,ho=fa=Yu=Ns=Pi=er=0,aa=Wo=null,Ku=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var c=31-et(a),d=1<<c;t|=e[c],a&=~d}return yi=t,We(),n}function a0(e,t){Wt=null,se.H=Vo,t===ro||t===Sl?(t=bd(),kn=3):t===Zc?(t=bd(),kn=4):kn=t===Au?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ua=t,an===null&&(er=1,ql(e,Vr(t,e.current)))}function i0(){var e=la.current;return e===null?!0:(ln&4194048)===ln?Ca===null:(ln&62914560)===ln||(ln&536870912)!==0?e===Ca:!1}function s0(){var e=se.H;return se.H=Vo,e===null?Vo:e}function o0(){var e=se.A;return se.A=Lm,e}function Jl(){er=4,Hi||(ln&4194048)!==ln&&la.current!==null||(fo=!0),(Pi&134217727)===0&&(Ns&134217727)===0||Ln===null||Zi(Ln,ln,fa,!1)}function Pu(e,t,n){var a=En;En|=2;var c=s0(),d=o0();(Ln!==e||ln!==t)&&(Pl=null,go(e,t)),t=!1;var C=er;e:do try{if(kn!==0&&an!==null){var D=an,F=ua;switch(kn){case 8:Hu(),C=6;break e;case 3:case 2:case 9:case 6:la.current===null&&(t=!0);var ue=kn;if(kn=0,ua=null,mo(e,D,F,ue),n&&fo){C=0;break e}break;default:ue=kn,kn=0,ua=null,mo(e,D,F,ue)}}Km(),C=er;break}catch(Te){a0(e,Te)}while(!0);return t&&e.shellSuspendCounter++,oi=As=null,En=a,se.H=c,se.A=d,an===null&&(Ln=null,ln=0,We()),C}function Km(){for(;an!==null;)l0(an)}function Gm(e,t){var n=En;En|=2;var a=s0(),c=o0();Ln!==e||ln!==t?(Pl=null,Hl=On()+500,go(e,t)):fo=or(e,t);e:do try{if(kn!==0&&an!==null){t=an;var d=ua;t:switch(kn){case 1:kn=0,ua=null,mo(e,t,d,1);break;case 2:case 9:if(vd(d)){kn=0,ua=null,c0(t);break}t=function(){kn!==2&&kn!==9||Ln!==e||(kn=7),Xa(e)},d.then(t,t);break e;case 3:kn=7;break e;case 4:kn=5;break e;case 7:vd(d)?(kn=0,ua=null,c0(t)):(kn=0,ua=null,mo(e,t,d,7));break;case 5:var C=null;switch(an.tag){case 26:C=an.memoizedState;case 5:case 27:var D=an;if(C?Q0(C):D.stateNode.complete){kn=0,ua=null;var F=D.sibling;if(F!==null)an=F;else{var ue=D.return;ue!==null?(an=ue,Zl(ue)):an=null}break t}}kn=0,ua=null,mo(e,t,d,5);break;case 6:kn=0,ua=null,mo(e,t,d,6);break;case 8:Hu(),er=6;break e;default:throw Error(s(462))}}Vm();break}catch(Te){a0(e,Te)}while(!0);return oi=As=null,se.H=a,se.A=c,En=n,an!==null?0:(Ln=null,ln=0,We(),er)}function Vm(){for(;an!==null&&!Qr();)l0(an)}function l0(e){var t=Dh(e.alternate,e,yi);e.memoizedProps=e.pendingProps,t===null?Zl(e):an=t}function c0(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Th(n,t,t.pendingProps,t.type,void 0,ln);break;case 11:t=Th(n,t,t.pendingProps,t.type.render,t.ref,ln);break;case 5:lu(t);default:jh(n,t),t=an=Cs(t,yi),t=Dh(n,t,yi)}e.memoizedProps=e.pendingProps,t===null?Zl(e):an=t}function mo(e,t,n,a){oi=As=null,lu(t),ao=null,Io=0;var c=t.return;try{if(Dm(e,c,t,n,ln)){er=1,ql(e,Vr(n,e.current)),an=null;return}}catch(d){if(c!==null)throw an=c,d;er=1,ql(e,Vr(n,e.current)),an=null;return}t.flags&32768?(pn||a===1?e=!0:fo||(ln&536870912)!==0?e=!1:(Hi=e=!0,(a===2||a===9||a===3||a===6)&&(a=la.current,a!==null&&a.tag===13&&(a.flags|=16384))),u0(t,e)):Zl(t)}function Zl(e){var t=e;do{if((t.flags&32768)!==0){u0(t,Hi);return}e=t.return;var n=Om(t.alternate,t,yi);if(n!==null){an=n;return}if(t=t.sibling,t!==null){an=t;return}an=t=e}while(t!==null);er===0&&(er=5)}function u0(e,t){do{var n=Im(e.alternate,e);if(n!==null){n.flags&=32767,an=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){an=e;return}an=e=n}while(e!==null);er=6,an=null}function f0(e,t,n,a,c,d,C,D,F){e.cancelPendingCommit=null;do Xl();while(xr!==0);if((En&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(d=t.lanes|t.childLanes,d|=_e,Sr(e,n,d,C,D,F),e===Ln&&(an=Ln=null,ln=0),po=t,Ji=e,vi=n,Gu=d,Vu=c,e0=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Qm(Jr,function(){return m0(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=se.T,se.T=null,c=Ue.p,Ue.p=2,C=En,En|=4;try{qm(e,t,n)}finally{En=C,Ue.p=c,se.T=a}}xr=1,d0(),h0(),p0()}}function d0(){if(xr===1){xr=0;var e=Ji,t=po,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=se.T,se.T=null;var a=Ue.p;Ue.p=2;var c=En;En|=4;try{Hh(t,e);var d=sf,C=E(e.containerInfo),D=d.focusedElem,F=d.selectionRange;if(C!==D&&D&&D.ownerDocument&&x(D.ownerDocument.documentElement,D)){if(F!==null&&k(D)){var ue=F.start,Te=F.end;if(Te===void 0&&(Te=ue),"selectionStart"in D)D.selectionStart=ue,D.selectionEnd=Math.min(Te,D.value.length);else{var Oe=D.ownerDocument||document,pe=Oe&&Oe.defaultView||window;if(pe.getSelection){var be=pe.getSelection(),bt=D.textContent.length,Lt=Math.min(F.start,bt),jn=F.end===void 0?Lt:Math.min(F.end,bt);!be.extend&&Lt>jn&&(C=jn,jn=Lt,Lt=C);var ie=p(D,Lt),Z=p(D,jn);if(ie&&Z&&(be.rangeCount!==1||be.anchorNode!==ie.node||be.anchorOffset!==ie.offset||be.focusNode!==Z.node||be.focusOffset!==Z.offset)){var ce=Oe.createRange();ce.setStart(ie.node,ie.offset),be.removeAllRanges(),Lt>jn?(be.addRange(ce),be.extend(Z.node,Z.offset)):(ce.setEnd(Z.node,Z.offset),be.addRange(ce))}}}}for(Oe=[],be=D;be=be.parentNode;)be.nodeType===1&&Oe.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<Oe.length;D++){var Be=Oe[D];Be.element.scrollLeft=Be.left,Be.element.scrollTop=Be.top}}cc=!!af,sf=af=null}finally{En=c,Ue.p=a,se.T=n}}e.current=t,xr=2}}function h0(){if(xr===2){xr=0;var e=Ji,t=po,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=se.T,se.T=null;var a=Ue.p;Ue.p=2;var c=En;En|=4;try{Yh(e,t.alternate,t)}finally{En=c,Ue.p=a,se.T=n}}xr=3}}function p0(){if(xr===4||xr===3){xr=0,Cr();var e=Ji,t=po,n=vi,a=e0;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?xr=5:(xr=0,po=Ji=null,g0(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Qi=null),B(n),t=t.stateNode,In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(ar,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=se.T,c=Ue.p,Ue.p=2,se.T=null;try{for(var d=e.onRecoverableError,C=0;C<a.length;C++){var D=a[C];d(D.value,{componentStack:D.stack})}}finally{se.T=t,Ue.p=c}}(vi&3)!==0&&Xl(),Xa(e),c=e.pendingLanes,(n&261930)!==0&&(c&42)!==0?e===Fu?$o++:($o=0,Fu=e):$o=0,el(0)}}function g0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,jo(t)))}function Xl(){return d0(),h0(),p0(),m0()}function m0(){if(xr!==5)return!1;var e=Ji,t=Gu;Gu=0;var n=B(vi),a=se.T,c=Ue.p;try{Ue.p=32>n?32:n,se.T=null,n=Vu,Vu=null;var d=Ji,C=vi;if(xr=0,po=Ji=null,vi=0,(En&6)!==0)throw Error(s(331));var D=En;if(En|=4,Xh(d.current),Qh(d,d.current,C,n),En=D,el(0,!1),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(ar,d)}catch{}return!0}finally{Ue.p=c,se.T=a,g0(e,t)}}function y0(e,t,n){t=Vr(n,t),t=Su(e.stateNode,t,2),e=Ki(e,t,2),e!==null&&(_r(e,2),Xa(e))}function Bn(e,t,n){if(e.tag===3)y0(e,e,n);else for(;t!==null;){if(t.tag===3){y0(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Qi===null||!Qi.has(a))){e=Vr(n,e),n=vh(2),a=Ki(t,n,2),a!==null&&(xh(n,a,t,e),_r(a,2),Xa(a));break}}t=t.return}}function Qu(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new zm;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(n)||(zu=!0,c.add(n),e=Fm.bind(null,e,t,n),t.then(e,e))}function Fm(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ln===e&&(ln&n)===n&&(er===4||er===3&&(ln&62914560)===ln&&300>On()-Fl?(En&2)===0&&go(e,0):Yu|=n,ho===ln&&(ho=0)),Xa(e)}function v0(e,t){t===0&&(t=Xr()),e=Nt(e,t),e!==null&&(_r(e,t),Xa(e))}function Hm(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),v0(e,n)}function Pm(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(t),v0(e,n)}function Qm(e,t){return wn(e,t)}var Wl=null,yo=null,Ju=!1,$l=!1,Zu=!1,Xi=0;function Xa(e){e!==yo&&e.next===null&&(yo===null?Wl=yo=e:yo=yo.next=e),$l=!0,Ju||(Ju=!0,Zm())}function el(e,t){if(!Zu&&$l){Zu=!0;do for(var n=!1,a=Wl;a!==null;){if(e!==0){var c=a.pendingLanes;if(c===0)var d=0;else{var C=a.suspendedLanes,D=a.pingedLanes;d=(1<<31-et(42|e)+1)-1,d&=c&~(C&~D),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(n=!0,w0(a,d))}else d=ln,d=yr(a,a===Ln?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(d&3)===0||or(a,d)||(n=!0,w0(a,d));a=a.next}while(n);Zu=!1}}function Jm(){x0()}function x0(){$l=Ju=!1;var e=0;Xi!==0&&sy()&&(e=Xi);for(var t=On(),n=null,a=Wl;a!==null;){var c=a.next,d=b0(a,t);d===0?(a.next=null,n===null?Wl=c:n.next=c,c===null&&(yo=n)):(n=a,(e!==0||(d&3)!==0)&&($l=!0)),a=c}xr!==0&&xr!==5||el(e),Xi!==0&&(Xi=0)}function b0(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var C=31-et(d),D=1<<C,F=c[C];F===-1?((D&n)===0||(D&a)!==0)&&(c[C]=zn(D,t)):F<=t&&(e.expiredLanes|=D),d&=~D}if(t=Ln,n=ln,n=yr(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(kn===2||kn===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&mn(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||or(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&mn(a),B(n)){case 2:case 8:n=wr;break;case 32:n=Jr;break;case 268435456:n=Ua;break;default:n=Jr}return a=C0.bind(null,e),n=wn(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&mn(a),e.callbackPriority=2,e.callbackNode=null,2}function C0(e,t){if(xr!==0&&xr!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Xl()&&e.callbackNode!==n)return null;var a=ln;return a=yr(e,e===Ln?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(n0(e,a,t),b0(e,On()),e.callbackNode!=null&&e.callbackNode===n?C0.bind(null,e):null)}function w0(e,t){if(Xl())return null;n0(e,t,!0)}function Zm(){ly(function(){(En&6)!==0?wn(gr,Jm):x0()})}function Xu(){if(Xi===0){var e=to;e===0&&(e=Xe,Xe<<=1,(Xe&261888)===0&&(Xe=256)),Xi=e}return Xi}function S0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:oa(""+e)}function A0(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Xm(e,t,n,a,c){if(t==="submit"&&n&&n.stateNode===c){var d=S0((c[Ce]||null).action),C=a.submitter;C&&(t=(t=C[Ce]||null)?S0(t.formAction):C.getAttribute("formAction"),t!==null&&(d=t,C=null));var D=new Si("action","action",null,a,c);e.push({event:D,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Xi!==0){var F=C?A0(c,C):new FormData(c);yu(n,{pending:!0,data:F,method:c.method,action:d},null,F)}}else typeof d=="function"&&(D.preventDefault(),F=C?A0(c,C):new FormData(c),yu(n,{pending:!0,data:F,method:c.method,action:d},d,F))},currentTarget:c}]})}}for(var Wu=0;Wu<I.length;Wu++){var $u=I[Wu],Wm=$u.toLowerCase(),$m=$u[0].toUpperCase()+$u.slice(1);U(Wm,"on"+$m)}U(oe,"onAnimationEnd"),U(fe,"onAnimationIteration"),U(we,"onAnimationStart"),U("dblclick","onDoubleClick"),U("focusin","onFocus"),U("focusout","onBlur"),U(Ne,"onTransitionRun"),U(y,"onTransitionStart"),U(m,"onTransitionCancel"),U(T,"onTransitionEnd"),lt("onMouseEnter",["mouseout","mouseover"]),lt("onMouseLeave",["mouseout","mouseover"]),lt("onPointerEnter",["pointerout","pointerover"]),lt("onPointerLeave",["pointerout","pointerover"]),tt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tt("onBeforeInput",["compositionend","keypress","textInput","paste"]),tt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ey=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tl));function E0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],c=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var C=a.length-1;0<=C;C--){var D=a[C],F=D.instance,ue=D.currentTarget;if(D=D.listener,F!==d&&c.isPropagationStopped())break e;d=D,c.currentTarget=ue;try{d(c)}catch(Te){G(Te)}c.currentTarget=null,d=F}else for(C=0;C<a.length;C++){if(D=a[C],F=D.instance,ue=D.currentTarget,D=D.listener,F!==d&&c.isPropagationStopped())break e;d=D,c.currentTarget=ue;try{d(c)}catch(Te){G(Te)}c.currentTarget=null,d=F}}}}function sn(e,t){var n=t[ft];n===void 0&&(n=t[ft]=new Set);var a=e+"__bubble";n.has(a)||(T0(t,e,2,!1),n.add(a))}function ef(e,t,n){var a=0;t&&(a|=4),T0(n,e,a,t)}var ec="_reactListening"+Math.random().toString(36).slice(2);function tf(e){if(!e[ec]){e[ec]=!0,ot.forEach(function(n){n!=="selectionchange"&&(ey.has(n)||ef(n,!1,e),ef(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ec]||(t[ec]=!0,ef("selectionchange",!1,t))}}function T0(e,t,n,a){switch(tp(t)){case 2:var c=_y;break;case 8:c=ky;break;default:c=yf}n=c.bind(null,t,n,e),c=void 0,!Ci||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function nf(e,t,n,a,c){var d=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var C=a.tag;if(C===3||C===4){var D=a.stateNode.containerInfo;if(D===c)break;if(C===4)for(C=a.return;C!==null;){var F=C.tag;if((F===3||F===4)&&C.stateNode.containerInfo===c)return;C=C.return}for(;D!==null;){if(C=Ot(D),C===null)return;if(F=C.tag,F===5||F===6||F===26||F===27){a=d=C;continue e}D=D.parentNode}}a=a.return}La(function(){var ue=d,Te=bi(n),Oe=[];e:{var pe=N.get(e);if(pe!==void 0){var be=Si,bt=e;switch(e){case"keypress":if(Ya(n)===0)break e;case"keydown":case"keyup":be=ki;break;case"focusin":bt="focus",be=Ka;break;case"focusout":bt="blur",be=Ka;break;case"beforeblur":case"afterblur":be=Ka;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=Ti;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=us;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=gs;break;case oe:case fe:case we:be=zs;break;case T:be=ms;break;case"scroll":case"scrollend":be=Ai;break;case"wheel":be=Ri;break;case"copy":case"cut":case"paste":be=Ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=ps;break;case"toggle":case"beforetoggle":be=Ks}var Lt=(t&4)!==0,jn=!Lt&&(e==="scroll"||e==="scrollend"),ie=Lt?pe!==null?pe+"Capture":null:pe;Lt=[];for(var Z=ue,ce;Z!==null;){var Be=Z;if(ce=Be.stateNode,Be=Be.tag,Be!==5&&Be!==26&&Be!==27||ce===null||ie===null||(Be=Ma(Z,ie),Be!=null&&Lt.push(nl(Z,Be,ce))),jn)break;Z=Z.return}0<Lt.length&&(pe=new be(pe,bt,null,n,Te),Oe.push({event:pe,listeners:Lt}))}}if((t&7)===0){e:{if(pe=e==="mouseover"||e==="pointerover",be=e==="mouseout"||e==="pointerout",pe&&n!==Wr&&(bt=n.relatedTarget||n.fromElement)&&(Ot(bt)||bt[qe]))break e;if((be||pe)&&(pe=Te.window===Te?Te:(pe=Te.ownerDocument)?pe.defaultView||pe.parentWindow:window,be?(bt=n.relatedTarget||n.toElement,be=ue,bt=bt?Ot(bt):null,bt!==null&&(jn=g(bt),Lt=bt.tag,bt!==jn||Lt!==5&&Lt!==27&&Lt!==6)&&(bt=null)):(be=null,bt=ue),be!==bt)){if(Lt=Ti,Be="onMouseLeave",ie="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(Lt=ps,Be="onPointerLeave",ie="onPointerEnter",Z="pointer"),jn=be==null?pe:wt(be),ce=bt==null?pe:wt(bt),pe=new Lt(Be,Z+"leave",be,n,Te),pe.target=jn,pe.relatedTarget=ce,Be=null,Ot(Te)===ue&&(Lt=new Lt(ie,Z+"enter",bt,n,Te),Lt.target=ce,Lt.relatedTarget=jn,Be=Lt),jn=Be,be&&bt)t:{for(Lt=ty,ie=be,Z=bt,ce=0,Be=ie;Be;Be=Lt(Be))ce++;Be=0;for(var qt=Z;qt;qt=Lt(qt))Be++;for(;0<ce-Be;)ie=Lt(ie),ce--;for(;0<Be-ce;)Z=Lt(Z),Be--;for(;ce--;){if(ie===Z||Z!==null&&ie===Z.alternate){Lt=ie;break t}ie=Lt(ie),Z=Lt(Z)}Lt=null}else Lt=null;be!==null&&M0(Oe,pe,be,Lt,!1),bt!==null&&jn!==null&&M0(Oe,jn,bt,Lt,!0)}}e:{if(pe=ue?wt(ue):window,be=pe.nodeName&&pe.nodeName.toLowerCase(),be==="select"||be==="input"&&pe.type==="file")var bn=ii;else if(Di(pe))if(ea)bn=Ha;else{bn=ja;var _t=Qs}else be=pe.nodeName,!be||be.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?ue&&Yn(ue.elementType)&&(bn=ii):bn=bs;if(bn&&(bn=bn(e,ue))){xs(Oe,bn,n,Te);break e}_t&&_t(e,pe,ue),e==="focusout"&&ue&&pe.type==="number"&&ue.memoizedProps.value!=null&&Qt(pe,"number",pe.value)}switch(_t=ue?wt(ue):window,e){case"focusin":(Di(_t)||_t.contentEditable==="true")&&(Y=_t,P=ue,Q=null);break;case"focusout":Q=P=Y=null;break;case"mousedown":ne=!0;break;case"contextmenu":case"mouseup":case"dragend":ne=!1,V(Oe,n,Te);break;case"selectionchange":if(q)break;case"keydown":case"keyup":V(Oe,n,Te)}var $t;if(ni)e:{switch(e){case"compositionstart":var cn="onCompositionStart";break e;case"compositionend":cn="onCompositionEnd";break e;case"compositionupdate":cn="onCompositionUpdate";break e}cn=void 0}else Na?Xt(e,n)&&(cn="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(cn="onCompositionStart");cn&&($r&&n.locale!=="ko"&&(Na||cn!=="onCompositionStart"?cn==="onCompositionEnd"&&Na&&($t=_a()):(Gr=Te,wi="value"in Gr?Gr.value:Gr.textContent,Na=!0)),_t=tc(ue,cn),0<_t.length&&(cn=new _i(cn,e,null,n,Te),Oe.push({event:cn,listeners:_t}),$t?cn.data=$t:($t=Vs(n),$t!==null&&(cn.data=$t)))),($t=_o?Fs(e,n):ko(e,n))&&(cn=tc(ue,"onBeforeInput"),0<cn.length&&(_t=new _i("onBeforeInput","beforeinput",null,n,Te),Oe.push({event:_t,listeners:cn}),_t.data=$t)),Xm(Oe,e,ue,n,Te)}E0(Oe,t)})}function nl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function tc(e,t){for(var n=t+"Capture",a=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=Ma(e,n),c!=null&&a.unshift(nl(e,c,d)),c=Ma(e,t),c!=null&&a.push(nl(e,c,d))),e.tag===3)return a;e=e.return}return[]}function ty(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function M0(e,t,n,a,c){for(var d=t._reactName,C=[];n!==null&&n!==a;){var D=n,F=D.alternate,ue=D.stateNode;if(D=D.tag,F!==null&&F===a)break;D!==5&&D!==26&&D!==27||ue===null||(F=ue,c?(ue=Ma(n,d),ue!=null&&C.unshift(nl(n,ue,F))):c||(ue=Ma(n,d),ue!=null&&C.push(nl(n,ue,F)))),n=n.return}C.length!==0&&e.push({event:t,listeners:C})}var ny=/\r\n?/g,ry=/\u0000|\uFFFD/g;function _0(e){return(typeof e=="string"?e:""+e).replace(ny,`
`).replace(ry,"")}function k0(e,t){return t=_0(t),_0(e)===t}function Nn(e,t,n,a,c,d){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||un(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&un(e,""+a);break;case"className":Ee(e,"class",a);break;case"tabIndex":Ee(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Ee(e,n,a);break;case"style":yn(e,a,d);break;case"data":if(t!=="object"){Ee(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=oa(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(n==="formAction"?(t!=="input"&&Nn(e,t,"name",c.name,c,null),Nn(e,t,"formEncType",c.formEncType,c,null),Nn(e,t,"formMethod",c.formMethod,c,null),Nn(e,t,"formTarget",c.formTarget,c,null)):(Nn(e,t,"encType",c.encType,c,null),Nn(e,t,"method",c.method,c,null),Nn(e,t,"target",c.target,c,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=oa(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Or);break;case"onScroll":a!=null&&sn("scroll",e);break;case"onScrollEnd":a!=null&&sn("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=oa(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":sn("beforetoggle",e),sn("toggle",e),ve(e,"popover",a);break;case"xlinkActuate":Ae(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Ae(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Ae(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Ae(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Ae(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Ae(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Ae(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Ae(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Ae(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":ve(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Mn.get(n)||n,ve(e,n,a))}}function rf(e,t,n,a,c,d){switch(n){case"style":yn(e,a,d);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"children":typeof a=="string"?un(e,a):(typeof a=="number"||typeof a=="bigint")&&un(e,""+a);break;case"onScroll":a!=null&&sn("scroll",e);break;case"onScrollEnd":a!=null&&sn("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Or);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vt.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(c=n.endsWith("Capture"),t=n.slice(2,c?n.length-7:void 0),d=e[Ce]||null,d=d!=null?d[n]:null,typeof d=="function"&&e.removeEventListener(t,d,c),typeof a=="function")){typeof d!="function"&&d!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,c);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):ve(e,n,a)}}}function Nr(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":sn("error",e),sn("load",e);var a=!1,c=!1,d;for(d in n)if(n.hasOwnProperty(d)){var C=n[d];if(C!=null)switch(d){case"src":a=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Nn(e,t,d,C,n,null)}}c&&Nn(e,t,"srcSet",n.srcSet,n,null),a&&Nn(e,t,"src",n.src,n,null);return;case"input":sn("invalid",e);var D=d=C=c=null,F=null,ue=null;for(a in n)if(n.hasOwnProperty(a)){var Te=n[a];if(Te!=null)switch(a){case"name":c=Te;break;case"type":C=Te;break;case"checked":F=Te;break;case"defaultChecked":ue=Te;break;case"value":d=Te;break;case"defaultValue":D=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(s(137,t));break;default:Nn(e,t,a,Te,n,null)}}Vt(e,d,D,F,ue,C,c,!1);return;case"select":sn("invalid",e),a=C=d=null;for(c in n)if(n.hasOwnProperty(c)&&(D=n[c],D!=null))switch(c){case"value":d=D;break;case"defaultValue":C=D;break;case"multiple":a=D;default:Nn(e,t,c,D,n,null)}t=d,n=C,e.multiple=!!a,t!=null?Ft(e,!!a,t,!1):n!=null&&Ft(e,!!a,n,!0);return;case"textarea":sn("invalid",e),d=c=a=null;for(C in n)if(n.hasOwnProperty(C)&&(D=n[C],D!=null))switch(C){case"value":a=D;break;case"defaultValue":c=D;break;case"children":d=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(s(91));break;default:Nn(e,t,C,D,n,null)}tn(e,a,c,d);return;case"option":for(F in n)if(n.hasOwnProperty(F)&&(a=n[F],a!=null))switch(F){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Nn(e,t,F,a,n,null)}return;case"dialog":sn("beforetoggle",e),sn("toggle",e),sn("cancel",e),sn("close",e);break;case"iframe":case"object":sn("load",e);break;case"video":case"audio":for(a=0;a<tl.length;a++)sn(tl[a],e);break;case"image":sn("error",e),sn("load",e);break;case"details":sn("toggle",e);break;case"embed":case"source":case"link":sn("error",e),sn("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in n)if(n.hasOwnProperty(ue)&&(a=n[ue],a!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Nn(e,t,ue,a,n,null)}return;default:if(Yn(t)){for(Te in n)n.hasOwnProperty(Te)&&(a=n[Te],a!==void 0&&rf(e,t,Te,a,n,void 0));return}}for(D in n)n.hasOwnProperty(D)&&(a=n[D],a!=null&&Nn(e,t,D,a,n,null))}function ay(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,C=null,D=null,F=null,ue=null,Te=null;for(be in n){var Oe=n[be];if(n.hasOwnProperty(be)&&Oe!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":F=Oe;default:a.hasOwnProperty(be)||Nn(e,t,be,null,a,Oe)}}for(var pe in a){var be=a[pe];if(Oe=n[pe],a.hasOwnProperty(pe)&&(be!=null||Oe!=null))switch(pe){case"type":d=be;break;case"name":c=be;break;case"checked":ue=be;break;case"defaultChecked":Te=be;break;case"value":C=be;break;case"defaultValue":D=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(s(137,t));break;default:be!==Oe&&Nn(e,t,pe,be,a,Oe)}}Gt(e,C,D,F,ue,Te,d,c);return;case"select":be=C=D=pe=null;for(d in n)if(F=n[d],n.hasOwnProperty(d)&&F!=null)switch(d){case"value":break;case"multiple":be=F;default:a.hasOwnProperty(d)||Nn(e,t,d,null,a,F)}for(c in a)if(d=a[c],F=n[c],a.hasOwnProperty(c)&&(d!=null||F!=null))switch(c){case"value":pe=d;break;case"defaultValue":D=d;break;case"multiple":C=d;default:d!==F&&Nn(e,t,c,d,a,F)}t=D,n=C,a=be,pe!=null?Ft(e,!!n,pe,!1):!!a!=!!n&&(t!=null?Ft(e,!!n,t,!0):Ft(e,!!n,n?[]:"",!1));return;case"textarea":be=pe=null;for(D in n)if(c=n[D],n.hasOwnProperty(D)&&c!=null&&!a.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Nn(e,t,D,null,a,c)}for(C in a)if(c=a[C],d=n[C],a.hasOwnProperty(C)&&(c!=null||d!=null))switch(C){case"value":pe=c;break;case"defaultValue":be=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(s(91));break;default:c!==d&&Nn(e,t,C,c,a,d)}An(e,pe,be);return;case"option":for(var bt in n)if(pe=n[bt],n.hasOwnProperty(bt)&&pe!=null&&!a.hasOwnProperty(bt))switch(bt){case"selected":e.selected=!1;break;default:Nn(e,t,bt,null,a,pe)}for(F in a)if(pe=a[F],be=n[F],a.hasOwnProperty(F)&&pe!==be&&(pe!=null||be!=null))switch(F){case"selected":e.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:Nn(e,t,F,pe,a,be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Lt in n)pe=n[Lt],n.hasOwnProperty(Lt)&&pe!=null&&!a.hasOwnProperty(Lt)&&Nn(e,t,Lt,null,a,pe);for(ue in a)if(pe=a[ue],be=n[ue],a.hasOwnProperty(ue)&&pe!==be&&(pe!=null||be!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(s(137,t));break;default:Nn(e,t,ue,pe,a,be)}return;default:if(Yn(t)){for(var jn in n)pe=n[jn],n.hasOwnProperty(jn)&&pe!==void 0&&!a.hasOwnProperty(jn)&&rf(e,t,jn,void 0,a,pe);for(Te in a)pe=a[Te],be=n[Te],!a.hasOwnProperty(Te)||pe===be||pe===void 0&&be===void 0||rf(e,t,Te,pe,a,be);return}}for(var ie in n)pe=n[ie],n.hasOwnProperty(ie)&&pe!=null&&!a.hasOwnProperty(ie)&&Nn(e,t,ie,null,a,pe);for(Oe in a)pe=a[Oe],be=n[Oe],!a.hasOwnProperty(Oe)||pe===be||pe==null&&be==null||Nn(e,t,Oe,pe,a,be)}function B0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function iy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var c=n[a],d=c.transferSize,C=c.initiatorType,D=c.duration;if(d&&D&&B0(C)){for(C=0,D=c.responseEnd,a+=1;a<n.length;a++){var F=n[a],ue=F.startTime;if(ue>D)break;var Te=F.transferSize,Oe=F.initiatorType;Te&&B0(Oe)&&(F=F.responseEnd,C+=Te*(F<D?1:(D-ue)/(F-ue)))}if(--a,t+=8*(d+C)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var af=null,sf=null;function nc(e){return e.nodeType===9?e:e.ownerDocument}function R0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function D0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function of(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lf=null;function sy(){var e=window.event;return e&&e.type==="popstate"?e===lf?!1:(lf=e,!0):(lf=null,!1)}var N0=typeof setTimeout=="function"?setTimeout:void 0,oy=typeof clearTimeout=="function"?clearTimeout:void 0,j0=typeof Promise=="function"?Promise:void 0,ly=typeof queueMicrotask=="function"?queueMicrotask:typeof j0<"u"?function(e){return j0.resolve(null).then(e).catch(cy)}:N0;function cy(e){setTimeout(function(){throw e})}function Wi(e){return e==="head"}function O0(e,t){var n=t,a=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(c),Co(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")rl(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,rl(n);for(var d=n.firstChild;d;){var C=d.nextSibling,D=d.nodeName;d[Et]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&d.rel.toLowerCase()==="stylesheet"||n.removeChild(d),d=C}}else n==="body"&&rl(e.ownerDocument.body);n=c}while(n);Co(t)}function I0(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function cf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":cf(n),jt(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function uy(e,t,n,a){for(;e.nodeType===1;){var c=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Et])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=wa(e.nextSibling),e===null)break}return null}function fy(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=wa(e.nextSibling),e===null))return null;return e}function q0(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=wa(e.nextSibling),e===null))return null;return e}function uf(e){return e.data==="$?"||e.data==="$~"}function ff(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function dy(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function wa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var df=null;function U0(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return wa(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function L0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function z0(e,t,n){switch(t=nc(n),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function rl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);jt(e)}var Sa=new Map,Y0=new Set;function rc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var xi=Ue.d;Ue.d={f:hy,r:py,D:gy,C:my,L:yy,m:vy,X:by,S:xy,M:Cy};function hy(){var e=xi.f(),t=Ql();return e||t}function py(e){var t=dt(e);t!==null&&t.tag===5&&t.type==="form"?ah(t):xi.r(e)}var vo=typeof document>"u"?null:document;function K0(e,t,n){var a=vo;if(a&&typeof t=="string"&&t){var c=It(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof n=="string"&&(c+='[crossorigin="'+n+'"]'),Y0.has(c)||(Y0.add(c),e={rel:e,crossOrigin:n,href:t},a.querySelector(c)===null&&(t=a.createElement("link"),Nr(t,"link",e),yt(t),a.head.appendChild(t)))}}function gy(e){xi.D(e),K0("dns-prefetch",e,null)}function my(e,t){xi.C(e,t),K0("preconnect",e,t)}function yy(e,t,n){xi.L(e,t,n);var a=vo;if(a&&e&&t){var c='link[rel="preload"][as="'+It(t)+'"]';t==="image"&&n&&n.imageSrcSet?(c+='[imagesrcset="'+It(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(c+='[imagesizes="'+It(n.imageSizes)+'"]')):c+='[href="'+It(e)+'"]';var d=c;switch(t){case"style":d=xo(e);break;case"script":d=bo(e)}Sa.has(d)||(e=j({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Sa.set(d,e),a.querySelector(c)!==null||t==="style"&&a.querySelector(al(d))||t==="script"&&a.querySelector(il(d))||(t=a.createElement("link"),Nr(t,"link",e),yt(t),a.head.appendChild(t)))}}function vy(e,t){xi.m(e,t);var n=vo;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+It(a)+'"][href="'+It(e)+'"]',d=c;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=bo(e)}if(!Sa.has(d)&&(e=j({rel:"modulepreload",href:e},t),Sa.set(d,e),n.querySelector(c)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(il(d)))return}a=n.createElement("link"),Nr(a,"link",e),yt(a),n.head.appendChild(a)}}}function xy(e,t,n){xi.S(e,t,n);var a=vo;if(a&&e){var c=xt(a).hoistableStyles,d=xo(e);t=t||"default";var C=c.get(d);if(!C){var D={loading:0,preload:null};if(C=a.querySelector(al(d)))D.loading=5;else{e=j({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sa.get(d))&&hf(e,n);var F=C=a.createElement("link");yt(F),Nr(F,"link",e),F._p=new Promise(function(ue,Te){F.onload=ue,F.onerror=Te}),F.addEventListener("load",function(){D.loading|=1}),F.addEventListener("error",function(){D.loading|=2}),D.loading|=4,ac(C,t,a)}C={type:"stylesheet",instance:C,count:1,state:D},c.set(d,C)}}}function by(e,t){xi.X(e,t);var n=vo;if(n&&e){var a=xt(n).hoistableScripts,c=bo(e),d=a.get(c);d||(d=n.querySelector(il(c)),d||(e=j({src:e,async:!0},t),(t=Sa.get(c))&&pf(e,t),d=n.createElement("script"),yt(d),Nr(d,"link",e),n.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},a.set(c,d))}}function Cy(e,t){xi.M(e,t);var n=vo;if(n&&e){var a=xt(n).hoistableScripts,c=bo(e),d=a.get(c);d||(d=n.querySelector(il(c)),d||(e=j({src:e,async:!0,type:"module"},t),(t=Sa.get(c))&&pf(e,t),d=n.createElement("script"),yt(d),Nr(d,"link",e),n.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},a.set(c,d))}}function G0(e,t,n,a){var c=(c=Me.current)?rc(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=xo(n.href),n=xt(c).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=xo(n.href);var d=xt(c).hoistableStyles,C=d.get(e);if(C||(c=c.ownerDocument||c,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,C),(d=c.querySelector(al(e)))&&!d._p&&(C.instance=d,C.state.loading=5),Sa.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sa.set(e,n),d||wy(c,e,n,C.state))),t&&a===null)throw Error(s(528,""));return C}if(t&&a!==null)throw Error(s(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=bo(n),n=xt(c).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function xo(e){return'href="'+It(e)+'"'}function al(e){return'link[rel="stylesheet"]['+e+"]"}function V0(e){return j({},e,{"data-precedence":e.precedence,precedence:null})}function wy(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),Nr(t,"link",n),yt(t),e.head.appendChild(t))}function bo(e){return'[src="'+It(e)+'"]'}function il(e){return"script[async]"+e}function F0(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+It(n.href)+'"]');if(a)return t.instance=a,yt(a),a;var c=j({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),yt(a),Nr(a,"style",c),ac(a,n.precedence,e),t.instance=a;case"stylesheet":c=xo(n.href);var d=e.querySelector(al(c));if(d)return t.state.loading|=4,t.instance=d,yt(d),d;a=V0(n),(c=Sa.get(c))&&hf(a,c),d=(e.ownerDocument||e).createElement("link"),yt(d);var C=d;return C._p=new Promise(function(D,F){C.onload=D,C.onerror=F}),Nr(d,"link",a),t.state.loading|=4,ac(d,n.precedence,e),t.instance=d;case"script":return d=bo(n.src),(c=e.querySelector(il(d)))?(t.instance=c,yt(c),c):(a=n,(c=Sa.get(d))&&(a=j({},n),pf(a,c)),e=e.ownerDocument||e,c=e.createElement("script"),yt(c),Nr(c,"link",a),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,ac(a,n.precedence,e));return t.instance}function ac(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=a.length?a[a.length-1]:null,d=c,C=0;C<a.length;C++){var D=a[C];if(D.dataset.precedence===t)d=D;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function hf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function pf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ic=null;function H0(e,t,n){if(ic===null){var a=new Map,c=ic=new Map;c.set(n,a)}else c=ic,a=c.get(n),a||(a=new Map,c.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),c=0;c<n.length;c++){var d=n[c];if(!(d[Et]||d[W]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var C=d.getAttribute(t)||"";C=e+C;var D=a.get(C);D?D.push(d):a.set(C,[d])}}return a}function P0(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Sy(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Q0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ay(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=xo(a.href),d=t.querySelector(al(c));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=sc.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=d,yt(d);return}d=t.ownerDocument||t,a=V0(a),(c=Sa.get(c))&&hf(a,c),d=d.createElement("link"),yt(d);var C=d;C._p=new Promise(function(D,F){C.onload=D,C.onerror=F}),Nr(d,"link",a),n.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=sc.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var gf=0;function Ey(e,t){return e.stylesheets&&e.count===0&&lc(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&lc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&gf===0&&(gf=62500*iy());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&lc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>gf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(c)}}:null}function sc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)lc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var oc=null;function lc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,oc=new Map,t.forEach(Ty,e),oc=null,sc.call(e))}function Ty(e,t){if(!(t.state.loading&4)){var n=oc.get(e);if(n)var a=n.get(null);else{n=new Map,oc.set(e,n);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var C=c[d];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(n.set(C.dataset.precedence,C),a=C)}a&&n.set(null,a)}c=t.instance,C=c.getAttribute("data-precedence"),d=n.get(C)||a,d===a&&n.set(null,c),n.set(C,c),this.count++,a=sc.bind(this),c.addEventListener("load",a),c.addEventListener("error",a),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var sl={$$typeof:He,Provider:null,Consumer:null,_currentValue:Ie,_currentValue2:Ie,_threadCount:0};function My(e,t,n,a,c,d,C,D,F){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jt(0),this.hiddenUpdates=Jt(null),this.identifierPrefix=a,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function J0(e,t,n,a,c,d,C,D,F,ue,Te,Oe){return e=new My(e,t,n,C,F,ue,Te,Oe,D),t=1,d===!0&&(t|=24),d=Qn(3,null,null,t),e.current=d,d.stateNode=e,t=Pc(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:a,isDehydrated:n,cache:t},Xc(d),e}function Z0(e){return e?(e=hn,e):hn}function X0(e,t,n,a,c,d){c=Z0(c),a.context===null?a.context=c:a.pendingContext=c,a=Yi(t),a.payload={element:n},d=d===void 0?null:d,d!==null&&(a.callback=d),n=Ki(e,a,t),n!==null&&(ia(n,e,t),Uo(n,e,t))}function W0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function mf(e,t){W0(e,t),(e=e.alternate)&&W0(e,t)}function $0(e){if(e.tag===13||e.tag===31){var t=Nt(e,67108864);t!==null&&ia(t,e,67108864),mf(e,67108864)}}function ep(e){if(e.tag===13||e.tag===31){var t=da();t=R(t);var n=Nt(e,t);n!==null&&ia(n,e,t),mf(e,t)}}var cc=!0;function _y(e,t,n,a){var c=se.T;se.T=null;var d=Ue.p;try{Ue.p=2,yf(e,t,n,a)}finally{Ue.p=d,se.T=c}}function ky(e,t,n,a){var c=se.T;se.T=null;var d=Ue.p;try{Ue.p=8,yf(e,t,n,a)}finally{Ue.p=d,se.T=c}}function yf(e,t,n,a){if(cc){var c=vf(a);if(c===null)nf(e,t,a,uc,n),np(e,a);else if(Ry(c,e,t,n,a))a.stopPropagation();else if(np(e,a),t&4&&-1<By.indexOf(e)){for(;c!==null;){var d=dt(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var C=Yr(d.pendingLanes);if(C!==0){var D=d;for(D.pendingLanes|=2,D.entangledLanes|=2;C;){var F=1<<31-et(C);D.entanglements[1]|=F,C&=~F}Xa(d),(En&6)===0&&(Hl=On()+500,el(0))}}break;case 31:case 13:D=Nt(d,2),D!==null&&ia(D,d,2),Ql(),mf(d,2)}if(d=vf(a),d===null&&nf(e,t,a,uc,n),d===c)break;c=d}c!==null&&a.stopPropagation()}else nf(e,t,a,null,n)}}function vf(e){return e=bi(e),xf(e)}var uc=null;function xf(e){if(uc=null,e=Ot(e),e!==null){var t=g(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=A(t),e!==null)return e;e=null}else if(n===31){if(e=M(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return uc=e,null}function tp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lr()){case gr:return 2;case wr:return 8;case Jr:case ha:return 32;case Ua:return 268435456;default:return 32}default:return 32}}var bf=!1,$i=null,es=null,ts=null,ol=new Map,ll=new Map,ns=[],By="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function np(e,t){switch(e){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":ol.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ll.delete(t.pointerId)}}function cl(e,t,n,a,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:d,targetContainers:[c]},t!==null&&(t=dt(t),t!==null&&$0(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Ry(e,t,n,a,c){switch(t){case"focusin":return $i=cl($i,e,t,n,a,c),!0;case"dragenter":return es=cl(es,e,t,n,a,c),!0;case"mouseover":return ts=cl(ts,e,t,n,a,c),!0;case"pointerover":var d=c.pointerId;return ol.set(d,cl(ol.get(d)||null,e,t,n,a,c)),!0;case"gotpointercapture":return d=c.pointerId,ll.set(d,cl(ll.get(d)||null,e,t,n,a,c)),!0}return!1}function rp(e){var t=Ot(e.target);if(t!==null){var n=g(t);if(n!==null){if(t=n.tag,t===13){if(t=A(n),t!==null){e.blockedOn=t,O(e.priority,function(){ep(n)});return}}else if(t===31){if(t=M(n),t!==null){e.blockedOn=t,O(e.priority,function(){ep(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=vf(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Wr=a,n.target.dispatchEvent(a),Wr=null}else return t=dt(n),t!==null&&$0(t),e.blockedOn=n,!1;t.shift()}return!0}function ap(e,t,n){fc(e)&&n.delete(t)}function Dy(){bf=!1,$i!==null&&fc($i)&&($i=null),es!==null&&fc(es)&&(es=null),ts!==null&&fc(ts)&&(ts=null),ol.forEach(ap),ll.forEach(ap)}function dc(e,t){e.blockedOn===t&&(e.blockedOn=null,bf||(bf=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Dy)))}var hc=null;function ip(e){hc!==e&&(hc=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){hc===e&&(hc=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],c=e[t+2];if(typeof a!="function"){if(xf(a||n)===null)continue;break}var d=dt(n);d!==null&&(e.splice(t,3),t-=3,yu(d,{pending:!0,data:c,method:n.method,action:a},a,c))}}))}function Co(e){function t(F){return dc(F,e)}$i!==null&&dc($i,e),es!==null&&dc(es,e),ts!==null&&dc(ts,e),ol.forEach(t),ll.forEach(t);for(var n=0;n<ns.length;n++){var a=ns[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<ns.length&&(n=ns[0],n.blockedOn===null);)rp(n),n.blockedOn===null&&ns.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var c=n[a],d=n[a+1],C=c[Ce]||null;if(typeof d=="function")C||ip(n);else if(C){var D=null;if(d&&d.hasAttribute("formAction")){if(c=d,C=d[Ce]||null)D=C.formAction;else if(xf(c)!==null)continue}else D=C.action;typeof D=="function"?n[a+1]=D:(n.splice(a,3),a-=3),ip(n)}}}function sp(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(C){return c=C})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Cf(e){this._internalRoot=e}pc.prototype.render=Cf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var n=t.current,a=da();X0(n,a,e,t,null,null)},pc.prototype.unmount=Cf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;X0(e.current,2,null,e,null,null),Ql(),t[qe]=null}};function pc(e){this._internalRoot=e}pc.prototype.unstable_scheduleHydration=function(e){if(e){var t=h();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ns.length&&t!==0&&t<ns[n].priority;n++);ns.splice(n,0,e),n===0&&rp(e)}};var op=r.version;if(op!=="19.2.0")throw Error(s(527,op,"19.2.0"));Ue.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=S(t),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var Ny={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{ar=gc.inject(Ny),In=gc}catch{}}return fl.createRoot=function(e,t){if(!u(e))throw Error(s(299));var n=!1,a="",c=ph,d=gh,C=mh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(C=t.onRecoverableError)),t=J0(e,1,!1,null,null,n,a,null,c,d,C,sp),e[qe]=t.current,tf(e),new Cf(t)},fl.hydrateRoot=function(e,t,n){if(!u(e))throw Error(s(299));var a=!1,c="",d=ph,C=gh,D=mh,F=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(C=n.onCaughtError),n.onRecoverableError!==void 0&&(D=n.onRecoverableError),n.formState!==void 0&&(F=n.formState)),t=J0(e,1,!0,t,n??null,a,c,F,d,C,D,sp),t.context=Z0(null),n=t.current,a=da(),a=R(a),c=Yi(a),c.callback=null,Ki(n,c,a),n=a,t.current.lanes=n,_r(t,n),Xa(t),e[qe]=t.current,tf(e),new pc(t)},fl.version="19.2.0",fl}var yp;function Hy(){if(yp)return Af.exports;yp=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(r){console.error(r)}}return o(),Af.exports=Fy(),Af.exports}var Py=Hy();const Qy="modulepreload",Jy=function(o){return"/"+o},vp={},_f=function(r,i,s){let u=Promise.resolve();if(i&&i.length>0){let S=function(_){return Promise.all(_.map(j=>Promise.resolve(j).then(L=>({status:"fulfilled",value:L}),L=>({status:"rejected",reason:L}))))};var A=S;document.getElementsByTagName("link");const M=document.querySelector("meta[property=csp-nonce]"),b=M?.nonce||M?.getAttribute("nonce");u=S(i.map(_=>{if(_=Jy(_),_ in vp)return;vp[_]=!0;const j=_.endsWith(".css"),L=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${L}`))return;const X=document.createElement("link");if(X.rel=j?"stylesheet":Qy,j||(X.as="script"),X.crossOrigin="",X.href=_,b&&X.setAttribute("nonce",b),document.head.appendChild(X),j)return new Promise((ge,de)=>{X.addEventListener("load",ge),X.addEventListener("error",()=>de(new Error(`Unable to preload CSS for ${_}`)))})}))}function g(M){const b=new Event("vite:preloadError",{cancelable:!0});if(b.payload=M,window.dispatchEvent(b),!b.defaultPrevented)throw M}return u.then(M=>{for(const b of M||[])b.status==="rejected"&&g(b.reason);return r().catch(g)})},xp=o=>{let r;const i=new Set,s=(S,_)=>{const j=typeof S=="function"?S(r):S;if(!Object.is(j,r)){const L=r;r=_??(typeof j!="object"||j===null)?j:Object.assign({},r,j),i.forEach(X=>X(r,L))}},u=()=>r,M={setState:s,getState:u,getInitialState:()=>b,subscribe:S=>(i.add(S),()=>i.delete(S))},b=r=o(s,u,M);return M},Zy=(o=>o?xp(o):xp),Xy=o=>o;function Wy(o,r=Xy){const i=Jn.useSyncExternalStore(o.subscribe,Jn.useCallback(()=>r(o.getState()),[o,r]),Jn.useCallback(()=>r(o.getInitialState()),[o,r]));return Jn.useDebugValue(i),i}const bp=o=>{const r=Zy(o),i=s=>Wy(r,s);return Object.assign(i,r),i},ad=(o=>o?bp(o):bp);function $y(o,r){let i;try{i=o()}catch{return}return{getItem:u=>{var g;const A=b=>b===null?null:JSON.parse(b,void 0),M=(g=i.getItem(u))!=null?g:null;return M instanceof Promise?M.then(A):A(M)},setItem:(u,g)=>i.setItem(u,JSON.stringify(g,void 0)),removeItem:u=>i.removeItem(u)}}const Uf=o=>r=>{try{const i=o(r);return i instanceof Promise?i:{then(s){return Uf(s)(i)},catch(s){return this}}}catch(i){return{then(s){return this},catch(s){return Uf(s)(i)}}}},ev=(o,r)=>(i,s,u)=>{let g={storage:$y(()=>localStorage),partialize:de=>de,version:0,merge:(de,Pe)=>({...Pe,...de}),...r},A=!1;const M=new Set,b=new Set;let S=g.storage;if(!S)return o((...de)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),i(...de)},s,u);const _=()=>{const de=g.partialize({...s()});return S.setItem(g.name,{state:de,version:g.version})},j=u.setState;u.setState=(de,Pe)=>(j(de,Pe),_());const L=o((...de)=>(i(...de),_()),s,u);u.getInitialState=()=>L;let X;const ge=()=>{var de,Pe;if(!S)return;A=!1,M.forEach(Ke=>{var He;return Ke((He=s())!=null?He:L)});const pt=((Pe=g.onRehydrateStorage)==null?void 0:Pe.call(g,(de=s())!=null?de:L))||void 0;return Uf(S.getItem.bind(S))(g.name).then(Ke=>{if(Ke)if(typeof Ke.version=="number"&&Ke.version!==g.version){if(g.migrate){const He=g.migrate(Ke.state,Ke.version);return He instanceof Promise?He.then(ut=>[!0,ut]):[!0,He]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,Ke.state];return[!1,void 0]}).then(Ke=>{var He;const[ut,$e]=Ke;if(X=g.merge($e,(He=s())!=null?He:L),i(X,!0),ut)return _()}).then(()=>{pt?.(X,void 0),X=s(),A=!0,b.forEach(Ke=>Ke(X))}).catch(Ke=>{pt?.(void 0,Ke)})};return u.persist={setOptions:de=>{g={...g,...de},de.storage&&(S=de.storage)},clearStorage:()=>{S?.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>ge(),hasHydrated:()=>A,onHydrate:de=>(M.add(de),()=>{M.delete(de)}),onFinishHydration:de=>(b.add(de),()=>{b.delete(de)})},g.skipHydration||ge(),X||L},tv=ev,os=ad()(tv(o=>({identity:null,isInitialized:!1,activeView:"setup",activeContactId:null,firebaseEnabled:!1,firebaseConfigured:!1,miniChatVisibility:"never",setIdentity:r=>o({identity:r,isInitialized:!0}),setInitialized:r=>o({isInitialized:r}),setActiveView:r=>o({activeView:r}),setActiveContact:r=>o({activeContactId:r}),setFirebaseEnabled:r=>o({firebaseEnabled:r}),setFirebaseConfigured:r=>o({firebaseConfigured:r}),setMiniChatVisibility:r=>o({miniChatVisibility:r}),clearIdentity:()=>o({identity:null,isInitialized:!1,activeView:"setup",activeContactId:null}),updateProfile:r=>o(i=>({identity:i.identity?{...i.identity,profile:r}:null}))}),{name:"chat-app-storage",partialize:o=>({identity:o.identity,isInitialized:o.isInitialized,firebaseEnabled:o.firebaseEnabled,firebaseConfigured:o.firebaseConfigured,miniChatVisibility:o.miniChatVisibility})})),mc="chat-identity";class js{static save(r){try{const i=JSON.stringify(r);localStorage.setItem(mc,i)}catch(i){throw console.error("Failed to save identity:",i),new Error("Failed to save identity to storage")}}static load(){try{const r=localStorage.getItem(mc);if(!r)return null;const i=JSON.parse(r),s=i.secretKey||i.privateKey;return!i.userId||!i.publicKey||!s?(console.error("Invalid identity in storage"),null):{userId:i.userId,publicKey:i.publicKey,secretKey:s,profile:i.profile??{}}}catch(r){return console.error("Failed to load identity:",r),null}}static exists(){return localStorage.getItem(mc)!==null}static delete(){localStorage.removeItem(mc)}static exportToJSON(r){return JSON.stringify(r,null,2)}static importFromJSON(r){try{let i=JSON.parse(r);i.version&&i.data&&(i=JSON.parse(i.data));const s=i.secretKey||i.privateKey;if(!i.userId||!i.publicKey||!s)throw new Error("Invalid identity format");return{userId:i.userId,publicKey:i.publicKey,secretKey:s,profile:i.profile??{}}}catch(i){throw console.error("Failed to import identity:",i),new Error("Invalid identity JSON")}}}const nv={peerjs:{enabled:!0,host:"0.peerjs.com",port:443,secure:!0},gun:{enabled:!1,relays:["https://gun-manhattan.herokuapp.com/gun","https://gun-us.herokuapp.com/gun"]},webtorrent:{enabled:!1,trackers:["wss://tracker.openwebtorrent.com","wss://tracker.btorrent.xyz"]},firebase:{enabled:!1},custom:{enabled:!1,url:"",protocol:"websocket"}};class rv{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(r){this.flush(),this._parts.push(r)}append(r){this._pieces.push(r)}flush(){if(this._pieces.length>0){const r=new Uint8Array(this._pieces);this._parts.push(r),this._pieces=[]}}toArrayBuffer(){const r=[];for(const i of this._parts)r.push(i);return av(r).buffer}}function av(o){let r=0;for(const u of o)r+=u.byteLength;const i=new Uint8Array(r);let s=0;for(const u of o){const g=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);i.set(g,s),s+=u.byteLength}return i}function Hp(o){return new iv(o).unpack()}function Pp(o){const r=new sv,i=r.pack(o);return i instanceof Promise?i.then(()=>r.getBuffer()):r.getBuffer()}class iv{constructor(r){this.index=0,this.dataBuffer=r,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const r=this.unpack_uint8();if(r<128)return r;if((r^224)<32)return(r^224)-32;let i;if((i=r^160)<=15)return this.unpack_raw(i);if((i=r^176)<=15)return this.unpack_string(i);if((i=r^144)<=15)return this.unpack_array(i);if((i=r^128)<=15)return this.unpack_map(i);switch(r){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return i=this.unpack_uint16(),this.unpack_string(i);case 217:return i=this.unpack_uint32(),this.unpack_string(i);case 218:return i=this.unpack_uint16(),this.unpack_raw(i);case 219:return i=this.unpack_uint32(),this.unpack_raw(i);case 220:return i=this.unpack_uint16(),this.unpack_array(i);case 221:return i=this.unpack_uint32(),this.unpack_array(i);case 222:return i=this.unpack_uint16(),this.unpack_map(i);case 223:return i=this.unpack_uint32(),this.unpack_map(i)}}unpack_uint8(){const r=this.dataView[this.index]&255;return this.index++,r}unpack_uint16(){const r=this.read(2),i=(r[0]&255)*256+(r[1]&255);return this.index+=2,i}unpack_uint32(){const r=this.read(4),i=((r[0]*256+r[1])*256+r[2])*256+r[3];return this.index+=4,i}unpack_uint64(){const r=this.read(8),i=((((((r[0]*256+r[1])*256+r[2])*256+r[3])*256+r[4])*256+r[5])*256+r[6])*256+r[7];return this.index+=8,i}unpack_int8(){const r=this.unpack_uint8();return r<128?r:r-256}unpack_int16(){const r=this.unpack_uint16();return r<32768?r:r-65536}unpack_int32(){const r=this.unpack_uint32();return r<2**31?r:r-2**32}unpack_int64(){const r=this.unpack_uint64();return r<2**63?r:r-2**64}unpack_raw(r){if(this.length<this.index+r)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${r} ${this.length}`);const i=this.dataBuffer.slice(this.index,this.index+r);return this.index+=r,i}unpack_string(r){const i=this.read(r);let s=0,u="",g,A;for(;s<r;)g=i[s],g<160?(A=g,s++):(g^192)<32?(A=(g&31)<<6|i[s+1]&63,s+=2):(g^224)<16?(A=(g&15)<<12|(i[s+1]&63)<<6|i[s+2]&63,s+=3):(A=(g&7)<<18|(i[s+1]&63)<<12|(i[s+2]&63)<<6|i[s+3]&63,s+=4),u+=String.fromCodePoint(A);return this.index+=r,u}unpack_array(r){const i=new Array(r);for(let s=0;s<r;s++)i[s]=this.unpack();return i}unpack_map(r){const i={};for(let s=0;s<r;s++){const u=this.unpack();i[u]=this.unpack()}return i}unpack_float(){const r=this.unpack_uint32(),i=r>>31,s=(r>>23&255)-127,u=r&8388607|8388608;return(i===0?1:-1)*u*2**(s-23)}unpack_double(){const r=this.unpack_uint32(),i=this.unpack_uint32(),s=r>>31,u=(r>>20&2047)-1023,A=(r&1048575|1048576)*2**(u-20)+i*2**(u-52);return(s===0?1:-1)*A}read(r){const i=this.index;if(i+r<=this.length)return this.dataView.subarray(i,i+r);throw new Error("BinaryPackFailure: read index out of range")}}class sv{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(r){if(typeof r=="string")this.pack_string(r);else if(typeof r=="number")Math.floor(r)===r?this.pack_integer(r):this.pack_double(r);else if(typeof r=="boolean")r===!0?this._bufferBuilder.append(195):r===!1&&this._bufferBuilder.append(194);else if(r===void 0)this._bufferBuilder.append(192);else if(typeof r=="object")if(r===null)this._bufferBuilder.append(192);else{const i=r.constructor;if(r instanceof Array){const s=this.pack_array(r);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else if(r instanceof ArrayBuffer)this.pack_bin(new Uint8Array(r));else if("BYTES_PER_ELEMENT"in r){const s=r;this.pack_bin(new Uint8Array(s.buffer,s.byteOffset,s.byteLength))}else if(r instanceof Date)this.pack_string(r.toString());else{if(r instanceof Blob)return r.arrayBuffer().then(s=>{this.pack_bin(new Uint8Array(s)),this._bufferBuilder.flush()});if(i==Object||i.toString().startsWith("class")){const s=this.pack_object(r);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${i.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof r}" not yet supported`);this._bufferBuilder.flush()}pack_bin(r){const i=r.length;if(i<=15)this.pack_uint8(160+i);else if(i<=65535)this._bufferBuilder.append(218),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(i);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(r)}pack_string(r){const i=this._textEncoder.encode(r),s=i.length;if(s<=15)this.pack_uint8(176+s);else if(s<=65535)this._bufferBuilder.append(216),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(s);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(i)}pack_array(r){const i=r.length;if(i<=15)this.pack_uint8(144+i);else if(i<=65535)this._bufferBuilder.append(220),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(i);else throw new Error("Invalid length");const s=u=>{if(u<i){const g=this.pack(r[u]);return g instanceof Promise?g.then(()=>s(u+1)):s(u+1)}};return s(0)}pack_integer(r){if(r>=-32&&r<=127)this._bufferBuilder.append(r&255);else if(r>=0&&r<=255)this._bufferBuilder.append(204),this.pack_uint8(r);else if(r>=-128&&r<=127)this._bufferBuilder.append(208),this.pack_int8(r);else if(r>=0&&r<=65535)this._bufferBuilder.append(205),this.pack_uint16(r);else if(r>=-32768&&r<=32767)this._bufferBuilder.append(209),this.pack_int16(r);else if(r>=0&&r<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(r);else if(r>=-2147483648&&r<=2147483647)this._bufferBuilder.append(210),this.pack_int32(r);else if(r>=-9223372036854776e3&&r<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(r);else if(r>=0&&r<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(r);else throw new Error("Invalid integer")}pack_double(r){let i=0;r<0&&(i=1,r=-r);const s=Math.floor(Math.log(r)/Math.LN2),u=r/2**s-1,g=Math.floor(u*2**52),A=2**32,M=i<<31|s+1023<<20|g/A&1048575,b=g%A;this._bufferBuilder.append(203),this.pack_int32(M),this.pack_int32(b)}pack_object(r){const i=Object.keys(r),s=i.length;if(s<=15)this.pack_uint8(128+s);else if(s<=65535)this._bufferBuilder.append(222),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(s);else throw new Error("Invalid length");const u=g=>{if(g<i.length){const A=i[g];if(r.hasOwnProperty(A)){this.pack(A);const M=this.pack(r[A]);if(M instanceof Promise)return M.then(()=>u(g+1))}return u(g+1)}};return u(0)}pack_uint8(r){this._bufferBuilder.append(r)}pack_uint16(r){this._bufferBuilder.append(r>>8),this._bufferBuilder.append(r&255)}pack_uint32(r){const i=r&4294967295;this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}pack_uint64(r){const i=r/4294967296,s=r%2**32;this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}pack_int8(r){this._bufferBuilder.append(r&255)}pack_int16(r){this._bufferBuilder.append((r&65280)>>8),this._bufferBuilder.append(r&255)}pack_int32(r){this._bufferBuilder.append(r>>>24&255),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int64(r){const i=Math.floor(r/4294967296),s=r%2**32;this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}constructor(){this._bufferBuilder=new rv,this._textEncoder=new TextEncoder}}let Qp=!0,Jp=!0;function hl(o,r,i){const s=o.match(r);return s&&s.length>=i&&parseFloat(s[i],10)}function Is(o,r,i){if(!o.RTCPeerConnection)return;const s=o.RTCPeerConnection.prototype,u=s.addEventListener;s.addEventListener=function(A,M){if(A!==r)return u.apply(this,arguments);const b=S=>{const _=i(S);_&&(M.handleEvent?M.handleEvent(_):M(_))};return this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(M,b),u.apply(this,[A,b])};const g=s.removeEventListener;s.removeEventListener=function(A,M){if(A!==r||!this._eventMap||!this._eventMap[r])return g.apply(this,arguments);if(!this._eventMap[r].has(M))return g.apply(this,arguments);const b=this._eventMap[r].get(M);return this._eventMap[r].delete(M),this._eventMap[r].size===0&&delete this._eventMap[r],Object.keys(this._eventMap).length===0&&delete this._eventMap,g.apply(this,[A,b])},Object.defineProperty(s,"on"+r,{get(){return this["_on"+r]},set(A){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),A&&this.addEventListener(r,this["_on"+r]=A)},enumerable:!0,configurable:!0})}function ov(o){return typeof o!="boolean"?new Error("Argument type: "+typeof o+". Please use a boolean."):(Qp=o,o?"adapter.js logging disabled":"adapter.js logging enabled")}function lv(o){return typeof o!="boolean"?new Error("Argument type: "+typeof o+". Please use a boolean."):(Jp=!o,"adapter.js deprecation warnings "+(o?"disabled":"enabled"))}function Zp(){if(typeof window=="object"){if(Qp)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function id(o,r){Jp&&console.warn(o+" is deprecated, please use "+r+" instead.")}function cv(o){const r={browser:null,version:null};if(typeof o>"u"||!o.navigator||!o.navigator.userAgent)return r.browser="Not a browser.",r;const{navigator:i}=o;if(i.userAgentData&&i.userAgentData.brands){const s=i.userAgentData.brands.find(u=>u.brand==="Chromium");if(s)return{browser:"chrome",version:parseInt(s.version,10)}}if(i.mozGetUserMedia)r.browser="firefox",r.version=parseInt(hl(i.userAgent,/Firefox\/(\d+)\./,1));else if(i.webkitGetUserMedia||o.isSecureContext===!1&&o.webkitRTCPeerConnection)r.browser="chrome",r.version=parseInt(hl(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(o.RTCPeerConnection&&i.userAgent.match(/AppleWebKit\/(\d+)\./))r.browser="safari",r.version=parseInt(hl(i.userAgent,/AppleWebKit\/(\d+)\./,1)),r.supportsUnifiedPlan=o.RTCRtpTransceiver&&"currentDirection"in o.RTCRtpTransceiver.prototype,r._safariVersion=hl(i.userAgent,/Version\/(\d+(\.?\d+))/,1);else return r.browser="Not a supported browser.",r;return r}function Cp(o){return Object.prototype.toString.call(o)==="[object Object]"}function Xp(o){return Cp(o)?Object.keys(o).reduce(function(r,i){const s=Cp(o[i]),u=s?Xp(o[i]):o[i],g=s&&!Object.keys(u).length;return u===void 0||g?r:Object.assign(r,{[i]:u})},{}):o}function Lf(o,r,i){!r||i.has(r.id)||(i.set(r.id,r),Object.keys(r).forEach(s=>{s.endsWith("Id")?Lf(o,o.get(r[s]),i):s.endsWith("Ids")&&r[s].forEach(u=>{Lf(o,o.get(u),i)})}))}function wp(o,r,i){const s=i?"outbound-rtp":"inbound-rtp",u=new Map;if(r===null)return u;const g=[];return o.forEach(A=>{A.type==="track"&&A.trackIdentifier===r.id&&g.push(A)}),g.forEach(A=>{o.forEach(M=>{M.type===s&&M.trackId===A.id&&Lf(o,M,u)})}),u}const Sp=Zp;function Wp(o,r){const i=o&&o.navigator;if(!i.mediaDevices)return;const s=function(M){if(typeof M!="object"||M.mandatory||M.optional)return M;const b={};return Object.keys(M).forEach(S=>{if(S==="require"||S==="advanced"||S==="mediaSource")return;const _=typeof M[S]=="object"?M[S]:{ideal:M[S]};_.exact!==void 0&&typeof _.exact=="number"&&(_.min=_.max=_.exact);const j=function(L,X){return L?L+X.charAt(0).toUpperCase()+X.slice(1):X==="deviceId"?"sourceId":X};if(_.ideal!==void 0){b.optional=b.optional||[];let L={};typeof _.ideal=="number"?(L[j("min",S)]=_.ideal,b.optional.push(L),L={},L[j("max",S)]=_.ideal,b.optional.push(L)):(L[j("",S)]=_.ideal,b.optional.push(L))}_.exact!==void 0&&typeof _.exact!="number"?(b.mandatory=b.mandatory||{},b.mandatory[j("",S)]=_.exact):["min","max"].forEach(L=>{_[L]!==void 0&&(b.mandatory=b.mandatory||{},b.mandatory[j(L,S)]=_[L])})}),M.advanced&&(b.optional=(b.optional||[]).concat(M.advanced)),b},u=function(M,b){if(r.version>=61)return b(M);if(M=JSON.parse(JSON.stringify(M)),M&&typeof M.audio=="object"){const S=function(_,j,L){j in _&&!(L in _)&&(_[L]=_[j],delete _[j])};M=JSON.parse(JSON.stringify(M)),S(M.audio,"autoGainControl","googAutoGainControl"),S(M.audio,"noiseSuppression","googNoiseSuppression"),M.audio=s(M.audio)}if(M&&typeof M.video=="object"){let S=M.video.facingMode;S=S&&(typeof S=="object"?S:{ideal:S});const _=r.version<66;if(S&&(S.exact==="user"||S.exact==="environment"||S.ideal==="user"||S.ideal==="environment")&&!(i.mediaDevices.getSupportedConstraints&&i.mediaDevices.getSupportedConstraints().facingMode&&!_)){delete M.video.facingMode;let j;if(S.exact==="environment"||S.ideal==="environment"?j=["back","rear"]:(S.exact==="user"||S.ideal==="user")&&(j=["front"]),j)return i.mediaDevices.enumerateDevices().then(L=>{L=L.filter(ge=>ge.kind==="videoinput");let X=L.find(ge=>j.some(de=>ge.label.toLowerCase().includes(de)));return!X&&L.length&&j.includes("back")&&(X=L[L.length-1]),X&&(M.video.deviceId=S.exact?{exact:X.deviceId}:{ideal:X.deviceId}),M.video=s(M.video),Sp("chrome: "+JSON.stringify(M)),b(M)})}M.video=s(M.video)}return Sp("chrome: "+JSON.stringify(M)),b(M)},g=function(M){return r.version>=64?M:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[M.name]||M.name,message:M.message,constraint:M.constraint||M.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},A=function(M,b,S){u(M,_=>{i.webkitGetUserMedia(_,b,j=>{S&&S(g(j))})})};if(i.getUserMedia=A.bind(i),i.mediaDevices.getUserMedia){const M=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(b){return u(b,S=>M(S).then(_=>{if(S.audio&&!_.getAudioTracks().length||S.video&&!_.getVideoTracks().length)throw _.getTracks().forEach(j=>{j.stop()}),new DOMException("","NotFoundError");return _},_=>Promise.reject(g(_))))}}}function $p(o){o.MediaStream=o.MediaStream||o.webkitMediaStream}function eg(o){if(typeof o=="object"&&o.RTCPeerConnection&&!("ontrack"in o.RTCPeerConnection.prototype)){Object.defineProperty(o.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});const r=o.RTCPeerConnection.prototype.setRemoteDescription;o.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",u=>{let g;o.RTCPeerConnection.prototype.getReceivers?g=this.getReceivers().find(M=>M.track&&M.track.id===u.track.id):g={track:u.track};const A=new Event("track");A.track=u.track,A.receiver=g,A.transceiver={receiver:g},A.streams=[s.stream],this.dispatchEvent(A)}),s.stream.getTracks().forEach(u=>{let g;o.RTCPeerConnection.prototype.getReceivers?g=this.getReceivers().find(M=>M.track&&M.track.id===u.id):g={track:u};const A=new Event("track");A.track=u,A.receiver=g,A.transceiver={receiver:g},A.streams=[s.stream],this.dispatchEvent(A)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}else Is(o,"track",r=>(r.transceiver||Object.defineProperty(r,"transceiver",{value:{receiver:r.receiver}}),r))}function tg(o){if(typeof o=="object"&&o.RTCPeerConnection&&!("getSenders"in o.RTCPeerConnection.prototype)&&"createDTMFSender"in o.RTCPeerConnection.prototype){const r=function(u,g){return{track:g,get dtmf(){return this._dtmf===void 0&&(g.kind==="audio"?this._dtmf=u.createDTMFSender(g):this._dtmf=null),this._dtmf},_pc:u}};if(!o.RTCPeerConnection.prototype.getSenders){o.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const u=o.RTCPeerConnection.prototype.addTrack;o.RTCPeerConnection.prototype.addTrack=function(M,b){let S=u.apply(this,arguments);return S||(S=r(this,M),this._senders.push(S)),S};const g=o.RTCPeerConnection.prototype.removeTrack;o.RTCPeerConnection.prototype.removeTrack=function(M){g.apply(this,arguments);const b=this._senders.indexOf(M);b!==-1&&this._senders.splice(b,1)}}const i=o.RTCPeerConnection.prototype.addStream;o.RTCPeerConnection.prototype.addStream=function(g){this._senders=this._senders||[],i.apply(this,[g]),g.getTracks().forEach(A=>{this._senders.push(r(this,A))})};const s=o.RTCPeerConnection.prototype.removeStream;o.RTCPeerConnection.prototype.removeStream=function(g){this._senders=this._senders||[],s.apply(this,[g]),g.getTracks().forEach(A=>{const M=this._senders.find(b=>b.track===A);M&&this._senders.splice(this._senders.indexOf(M),1)})}}else if(typeof o=="object"&&o.RTCPeerConnection&&"getSenders"in o.RTCPeerConnection.prototype&&"createDTMFSender"in o.RTCPeerConnection.prototype&&o.RTCRtpSender&&!("dtmf"in o.RTCRtpSender.prototype)){const r=o.RTCPeerConnection.prototype.getSenders;o.RTCPeerConnection.prototype.getSenders=function(){const s=r.apply(this,[]);return s.forEach(u=>u._pc=this),s},Object.defineProperty(o.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ng(o){if(!(typeof o=="object"&&o.RTCPeerConnection&&o.RTCRtpSender&&o.RTCRtpReceiver))return;if(!("getStats"in o.RTCRtpSender.prototype)){const i=o.RTCPeerConnection.prototype.getSenders;i&&(o.RTCPeerConnection.prototype.getSenders=function(){const g=i.apply(this,[]);return g.forEach(A=>A._pc=this),g});const s=o.RTCPeerConnection.prototype.addTrack;s&&(o.RTCPeerConnection.prototype.addTrack=function(){const g=s.apply(this,arguments);return g._pc=this,g}),o.RTCRtpSender.prototype.getStats=function(){const g=this;return this._pc.getStats().then(A=>wp(A,g.track,!0))}}if(!("getStats"in o.RTCRtpReceiver.prototype)){const i=o.RTCPeerConnection.prototype.getReceivers;i&&(o.RTCPeerConnection.prototype.getReceivers=function(){const u=i.apply(this,[]);return u.forEach(g=>g._pc=this),u}),Is(o,"track",s=>(s.receiver._pc=s.srcElement,s)),o.RTCRtpReceiver.prototype.getStats=function(){const u=this;return this._pc.getStats().then(g=>wp(g,u.track,!1))}}if(!("getStats"in o.RTCRtpSender.prototype&&"getStats"in o.RTCRtpReceiver.prototype))return;const r=o.RTCPeerConnection.prototype.getStats;o.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof o.MediaStreamTrack){const s=arguments[0];let u,g,A;return this.getSenders().forEach(M=>{M.track===s&&(u?A=!0:u=M)}),this.getReceivers().forEach(M=>(M.track===s&&(g?A=!0:g=M),M.track===s)),A||u&&g?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):u?u.getStats():g?g.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return r.apply(this,arguments)}}function rg(o){o.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(A=>this._shimmedLocalStreams[A][0])};const r=o.RTCPeerConnection.prototype.addTrack;o.RTCPeerConnection.prototype.addTrack=function(A,M){if(!M)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const b=r.apply(this,arguments);return this._shimmedLocalStreams[M.id]?this._shimmedLocalStreams[M.id].indexOf(b)===-1&&this._shimmedLocalStreams[M.id].push(b):this._shimmedLocalStreams[M.id]=[M,b],b};const i=o.RTCPeerConnection.prototype.addStream;o.RTCPeerConnection.prototype.addStream=function(A){this._shimmedLocalStreams=this._shimmedLocalStreams||{},A.getTracks().forEach(S=>{if(this.getSenders().find(j=>j.track===S))throw new DOMException("Track already exists.","InvalidAccessError")});const M=this.getSenders();i.apply(this,arguments);const b=this.getSenders().filter(S=>M.indexOf(S)===-1);this._shimmedLocalStreams[A.id]=[A].concat(b)};const s=o.RTCPeerConnection.prototype.removeStream;o.RTCPeerConnection.prototype.removeStream=function(A){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[A.id],s.apply(this,arguments)};const u=o.RTCPeerConnection.prototype.removeTrack;o.RTCPeerConnection.prototype.removeTrack=function(A){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},A&&Object.keys(this._shimmedLocalStreams).forEach(M=>{const b=this._shimmedLocalStreams[M].indexOf(A);b!==-1&&this._shimmedLocalStreams[M].splice(b,1),this._shimmedLocalStreams[M].length===1&&delete this._shimmedLocalStreams[M]}),u.apply(this,arguments)}}function ag(o,r){if(!o.RTCPeerConnection)return;if(o.RTCPeerConnection.prototype.addTrack&&r.version>=65)return rg(o);const i=o.RTCPeerConnection.prototype.getLocalStreams;o.RTCPeerConnection.prototype.getLocalStreams=function(){const _=i.apply(this);return this._reverseStreams=this._reverseStreams||{},_.map(j=>this._reverseStreams[j.id])};const s=o.RTCPeerConnection.prototype.addStream;o.RTCPeerConnection.prototype.addStream=function(_){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},_.getTracks().forEach(j=>{if(this.getSenders().find(X=>X.track===j))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[_.id]){const j=new o.MediaStream(_.getTracks());this._streams[_.id]=j,this._reverseStreams[j.id]=_,_=j}s.apply(this,[_])};const u=o.RTCPeerConnection.prototype.removeStream;o.RTCPeerConnection.prototype.removeStream=function(_){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.apply(this,[this._streams[_.id]||_]),delete this._reverseStreams[this._streams[_.id]?this._streams[_.id].id:_.id],delete this._streams[_.id]},o.RTCPeerConnection.prototype.addTrack=function(_,j){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const L=[].slice.call(arguments,1);if(L.length!==1||!L[0].getTracks().find(de=>de===_))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(de=>de.track===_))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const ge=this._streams[j.id];if(ge)ge.addTrack(_),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const de=new o.MediaStream([_]);this._streams[j.id]=de,this._reverseStreams[de.id]=j,this.addStream(de)}return this.getSenders().find(de=>de.track===_)};function g(S,_){let j=_.sdp;return Object.keys(S._reverseStreams||[]).forEach(L=>{const X=S._reverseStreams[L],ge=S._streams[X.id];j=j.replace(new RegExp(ge.id,"g"),X.id)}),new RTCSessionDescription({type:_.type,sdp:j})}function A(S,_){let j=_.sdp;return Object.keys(S._reverseStreams||[]).forEach(L=>{const X=S._reverseStreams[L],ge=S._streams[X.id];j=j.replace(new RegExp(X.id,"g"),ge.id)}),new RTCSessionDescription({type:_.type,sdp:j})}["createOffer","createAnswer"].forEach(function(S){const _=o.RTCPeerConnection.prototype[S],j={[S](){const L=arguments;return arguments.length&&typeof arguments[0]=="function"?_.apply(this,[ge=>{const de=g(this,ge);L[0].apply(null,[de])},ge=>{L[1]&&L[1].apply(null,ge)},arguments[2]]):_.apply(this,arguments).then(ge=>g(this,ge))}};o.RTCPeerConnection.prototype[S]=j[S]});const M=o.RTCPeerConnection.prototype.setLocalDescription;o.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?M.apply(this,arguments):(arguments[0]=A(this,arguments[0]),M.apply(this,arguments))};const b=Object.getOwnPropertyDescriptor(o.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(o.RTCPeerConnection.prototype,"localDescription",{get(){const S=b.get.apply(this);return S.type===""?S:g(this,S)}}),o.RTCPeerConnection.prototype.removeTrack=function(_){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!_._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(_._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let L;Object.keys(this._streams).forEach(X=>{this._streams[X].getTracks().find(de=>_.track===de)&&(L=this._streams[X])}),L&&(L.getTracks().length===1?this.removeStream(this._reverseStreams[L.id]):L.removeTrack(_.track),this.dispatchEvent(new Event("negotiationneeded")))}}function zf(o,r){!o.RTCPeerConnection&&o.webkitRTCPeerConnection&&(o.RTCPeerConnection=o.webkitRTCPeerConnection),o.RTCPeerConnection&&r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=o.RTCPeerConnection.prototype[i],u={[i](){return arguments[0]=new(i==="addIceCandidate"?o.RTCIceCandidate:o.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};o.RTCPeerConnection.prototype[i]=u[i]})}function ig(o,r){Is(o,"negotiationneeded",i=>{const s=i.target;if(!((r.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")&&s.signalingState!=="stable"))return i})}const Ap=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:ig,shimAddTrackRemoveTrack:ag,shimAddTrackRemoveTrackWithNative:rg,shimGetSendersWithDtmf:tg,shimGetUserMedia:Wp,shimMediaStream:$p,shimOnTrack:eg,shimPeerConnection:zf,shimSenderReceiverGetStats:ng},Symbol.toStringTag,{value:"Module"}));function sg(o,r){const i=o&&o.navigator,s=o&&o.MediaStreamTrack;if(i.getUserMedia=function(u,g,A){id("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(u).then(g,A)},!(r.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const u=function(A,M,b){M in A&&!(b in A)&&(A[b]=A[M],delete A[M])},g=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(A){return typeof A=="object"&&typeof A.audio=="object"&&(A=JSON.parse(JSON.stringify(A)),u(A.audio,"autoGainControl","mozAutoGainControl"),u(A.audio,"noiseSuppression","mozNoiseSuppression")),g(A)},s&&s.prototype.getSettings){const A=s.prototype.getSettings;s.prototype.getSettings=function(){const M=A.apply(this,arguments);return u(M,"mozAutoGainControl","autoGainControl"),u(M,"mozNoiseSuppression","noiseSuppression"),M}}if(s&&s.prototype.applyConstraints){const A=s.prototype.applyConstraints;s.prototype.applyConstraints=function(M){return this.kind==="audio"&&typeof M=="object"&&(M=JSON.parse(JSON.stringify(M)),u(M,"autoGainControl","mozAutoGainControl"),u(M,"noiseSuppression","mozNoiseSuppression")),A.apply(this,[M])}}}}function uv(o,r){o.navigator.mediaDevices&&"getDisplayMedia"in o.navigator.mediaDevices||o.navigator.mediaDevices&&(o.navigator.mediaDevices.getDisplayMedia=function(s){if(!(s&&s.video)){const u=new DOMException("getDisplayMedia without video constraints is undefined");return u.name="NotFoundError",u.code=8,Promise.reject(u)}return s.video===!0?s.video={mediaSource:r}:s.video.mediaSource=r,o.navigator.mediaDevices.getUserMedia(s)})}function og(o){typeof o=="object"&&o.RTCTrackEvent&&"receiver"in o.RTCTrackEvent.prototype&&!("transceiver"in o.RTCTrackEvent.prototype)&&Object.defineProperty(o.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Yf(o,r){if(typeof o!="object"||!(o.RTCPeerConnection||o.mozRTCPeerConnection))return;!o.RTCPeerConnection&&o.mozRTCPeerConnection&&(o.RTCPeerConnection=o.mozRTCPeerConnection),r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(u){const g=o.RTCPeerConnection.prototype[u],A={[u](){return arguments[0]=new(u==="addIceCandidate"?o.RTCIceCandidate:o.RTCSessionDescription)(arguments[0]),g.apply(this,arguments)}};o.RTCPeerConnection.prototype[u]=A[u]});const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=o.RTCPeerConnection.prototype.getStats;o.RTCPeerConnection.prototype.getStats=function(){const[g,A,M]=arguments;return s.apply(this,[g||null]).then(b=>{if(r.version<53&&!A)try{b.forEach(S=>{S.type=i[S.type]||S.type})}catch(S){if(S.name!=="TypeError")throw S;b.forEach((_,j)=>{b.set(j,Object.assign({},_,{type:i[_.type]||_.type}))})}return b}).then(A,M)}}function lg(o){if(!(typeof o=="object"&&o.RTCPeerConnection&&o.RTCRtpSender)||o.RTCRtpSender&&"getStats"in o.RTCRtpSender.prototype)return;const r=o.RTCPeerConnection.prototype.getSenders;r&&(o.RTCPeerConnection.prototype.getSenders=function(){const u=r.apply(this,[]);return u.forEach(g=>g._pc=this),u});const i=o.RTCPeerConnection.prototype.addTrack;i&&(o.RTCPeerConnection.prototype.addTrack=function(){const u=i.apply(this,arguments);return u._pc=this,u}),o.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function cg(o){if(!(typeof o=="object"&&o.RTCPeerConnection&&o.RTCRtpSender)||o.RTCRtpSender&&"getStats"in o.RTCRtpReceiver.prototype)return;const r=o.RTCPeerConnection.prototype.getReceivers;r&&(o.RTCPeerConnection.prototype.getReceivers=function(){const s=r.apply(this,[]);return s.forEach(u=>u._pc=this),s}),Is(o,"track",i=>(i.receiver._pc=i.srcElement,i)),o.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ug(o){!o.RTCPeerConnection||"removeStream"in o.RTCPeerConnection.prototype||(o.RTCPeerConnection.prototype.removeStream=function(i){id("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&i.getTracks().includes(s.track)&&this.removeTrack(s)})})}function fg(o){o.DataChannel&&!o.RTCDataChannel&&(o.RTCDataChannel=o.DataChannel)}function dg(o){if(!(typeof o=="object"&&o.RTCPeerConnection))return;const r=o.RTCPeerConnection.prototype.addTransceiver;r&&(o.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let s=arguments[1]&&arguments[1].sendEncodings;s===void 0&&(s=[]),s=[...s];const u=s.length>0;u&&s.forEach(A=>{if("rid"in A&&!/^[a-z0-9]{0,16}$/i.test(A.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in A&&!(parseFloat(A.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in A&&!(parseFloat(A.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const g=r.apply(this,arguments);if(u){const{sender:A}=g,M=A.getParameters();(!("encodings"in M)||M.encodings.length===1&&Object.keys(M.encodings[0]).length===0)&&(M.encodings=s,A.sendEncodings=s,this.setParametersPromises.push(A.setParameters(M).then(()=>{delete A.sendEncodings}).catch(()=>{delete A.sendEncodings})))}return g})}function hg(o){if(!(typeof o=="object"&&o.RTCRtpSender))return;const r=o.RTCRtpSender.prototype.getParameters;r&&(o.RTCRtpSender.prototype.getParameters=function(){const s=r.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function pg(o){if(!(typeof o=="object"&&o.RTCPeerConnection))return;const r=o.RTCPeerConnection.prototype.createOffer;o.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}function gg(o){if(!(typeof o=="object"&&o.RTCPeerConnection))return;const r=o.RTCPeerConnection.prototype.createAnswer;o.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}const Ep=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:dg,shimCreateAnswer:gg,shimCreateOffer:pg,shimGetDisplayMedia:uv,shimGetParameters:hg,shimGetUserMedia:sg,shimOnTrack:og,shimPeerConnection:Yf,shimRTCDataChannel:fg,shimReceiverGetStats:cg,shimRemoveStream:ug,shimSenderGetStats:lg},Symbol.toStringTag,{value:"Module"}));function mg(o){if(!(typeof o!="object"||!o.RTCPeerConnection)){if("getLocalStreams"in o.RTCPeerConnection.prototype||(o.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in o.RTCPeerConnection.prototype)){const r=o.RTCPeerConnection.prototype.addTrack;o.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(u=>r.call(this,u,s)),s.getVideoTracks().forEach(u=>r.call(this,u,s))},o.RTCPeerConnection.prototype.addTrack=function(s,...u){return u&&u.forEach(g=>{this._localStreams?this._localStreams.includes(g)||this._localStreams.push(g):this._localStreams=[g]}),r.apply(this,arguments)}}"removeStream"in o.RTCPeerConnection.prototype||(o.RTCPeerConnection.prototype.removeStream=function(i){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(i);if(s===-1)return;this._localStreams.splice(s,1);const u=i.getTracks();this.getSenders().forEach(g=>{u.includes(g.track)&&this.removeTrack(g)})})}}function yg(o){if(!(typeof o!="object"||!o.RTCPeerConnection)&&("getRemoteStreams"in o.RTCPeerConnection.prototype||(o.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in o.RTCPeerConnection.prototype))){Object.defineProperty(o.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(u=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(u))return;this._remoteStreams.push(u);const g=new Event("addstream");g.stream=u,this.dispatchEvent(g)})})}});const r=o.RTCPeerConnection.prototype.setRemoteDescription;o.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(u){u.streams.forEach(g=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(g)>=0)return;s._remoteStreams.push(g);const A=new Event("addstream");A.stream=g,s.dispatchEvent(A)})}),r.apply(s,arguments)}}}function vg(o){if(typeof o!="object"||!o.RTCPeerConnection)return;const r=o.RTCPeerConnection.prototype,i=r.createOffer,s=r.createAnswer,u=r.setLocalDescription,g=r.setRemoteDescription,A=r.addIceCandidate;r.createOffer=function(S,_){const j=arguments.length>=2?arguments[2]:arguments[0],L=i.apply(this,[j]);return _?(L.then(S,_),Promise.resolve()):L},r.createAnswer=function(S,_){const j=arguments.length>=2?arguments[2]:arguments[0],L=s.apply(this,[j]);return _?(L.then(S,_),Promise.resolve()):L};let M=function(b,S,_){const j=u.apply(this,[b]);return _?(j.then(S,_),Promise.resolve()):j};r.setLocalDescription=M,M=function(b,S,_){const j=g.apply(this,[b]);return _?(j.then(S,_),Promise.resolve()):j},r.setRemoteDescription=M,M=function(b,S,_){const j=A.apply(this,[b]);return _?(j.then(S,_),Promise.resolve()):j},r.addIceCandidate=M}function xg(o){const r=o&&o.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){const i=r.mediaDevices,s=i.getUserMedia.bind(i);r.mediaDevices.getUserMedia=u=>s(bg(u))}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=(function(s,u,g){r.mediaDevices.getUserMedia(s).then(u,g)}).bind(r))}function bg(o){return o&&o.video!==void 0?Object.assign({},o,{video:Xp(o.video)}):o}function Cg(o){if(!o.RTCPeerConnection)return;const r=o.RTCPeerConnection;o.RTCPeerConnection=function(s,u){if(s&&s.iceServers){const g=[];for(let A=0;A<s.iceServers.length;A++){let M=s.iceServers[A];M.urls===void 0&&M.url?(id("RTCIceServer.url","RTCIceServer.urls"),M=JSON.parse(JSON.stringify(M)),M.urls=M.url,delete M.url,g.push(M)):g.push(s.iceServers[A])}s.iceServers=g}return new r(s,u)},o.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(o.RTCPeerConnection,"generateCertificate",{get(){return r.generateCertificate}})}function wg(o){typeof o=="object"&&o.RTCTrackEvent&&"receiver"in o.RTCTrackEvent.prototype&&!("transceiver"in o.RTCTrackEvent.prototype)&&Object.defineProperty(o.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Sg(o){const r=o.RTCPeerConnection.prototype.createOffer;o.RTCPeerConnection.prototype.createOffer=function(s){if(s){typeof s.offerToReceiveAudio<"u"&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const u=this.getTransceivers().find(A=>A.receiver.track.kind==="audio");s.offerToReceiveAudio===!1&&u?u.direction==="sendrecv"?u.setDirection?u.setDirection("sendonly"):u.direction="sendonly":u.direction==="recvonly"&&(u.setDirection?u.setDirection("inactive"):u.direction="inactive"):s.offerToReceiveAudio===!0&&!u&&this.addTransceiver("audio",{direction:"recvonly"}),typeof s.offerToReceiveVideo<"u"&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const g=this.getTransceivers().find(A=>A.receiver.track.kind==="video");s.offerToReceiveVideo===!1&&g?g.direction==="sendrecv"?g.setDirection?g.setDirection("sendonly"):g.direction="sendonly":g.direction==="recvonly"&&(g.setDirection?g.setDirection("inactive"):g.direction="inactive"):s.offerToReceiveVideo===!0&&!g&&this.addTransceiver("video",{direction:"recvonly"})}return r.apply(this,arguments)}}function Ag(o){typeof o!="object"||o.AudioContext||(o.AudioContext=o.webkitAudioContext)}const Tp=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Ag,shimCallbacksAPI:vg,shimConstraints:bg,shimCreateOfferLegacy:Sg,shimGetUserMedia:xg,shimLocalStreamsAPI:mg,shimRTCIceServerUrls:Cg,shimRemoteStreamsAPI:yg,shimTrackEventTransceiver:wg},Symbol.toStringTag,{value:"Module"}));var kf={exports:{}},Mp;function fv(){return Mp||(Mp=1,(function(o){const r={};r.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},r.localCName=r.generateIdentifier(),r.splitLines=function(i){return i.trim().split(`
`).map(s=>s.trim())},r.splitSections=function(i){return i.split(`
m=`).map((u,g)=>(g>0?"m="+u:u).trim()+`\r
`)},r.getDescription=function(i){const s=r.splitSections(i);return s&&s[0]},r.getMediaSections=function(i){const s=r.splitSections(i);return s.shift(),s},r.matchPrefix=function(i,s){return r.splitLines(i).filter(u=>u.indexOf(s)===0)},r.parseCandidate=function(i){let s;i.indexOf("a=candidate:")===0?s=i.substring(12).split(" "):s=i.substring(10).split(" ");const u={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let g=8;g<s.length;g+=2)switch(s[g]){case"raddr":u.relatedAddress=s[g+1];break;case"rport":u.relatedPort=parseInt(s[g+1],10);break;case"tcptype":u.tcpType=s[g+1];break;case"ufrag":u.ufrag=s[g+1],u.usernameFragment=s[g+1];break;default:u[s[g]]===void 0&&(u[s[g]]=s[g+1]);break}return u},r.writeCandidate=function(i){const s=[];s.push(i.foundation);const u=i.component;u==="rtp"?s.push(1):u==="rtcp"?s.push(2):s.push(u),s.push(i.protocol.toUpperCase()),s.push(i.priority),s.push(i.address||i.ip),s.push(i.port);const g=i.type;return s.push("typ"),s.push(g),g!=="host"&&i.relatedAddress&&i.relatedPort&&(s.push("raddr"),s.push(i.relatedAddress),s.push("rport"),s.push(i.relatedPort)),i.tcpType&&i.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(s.push("ufrag"),s.push(i.usernameFragment||i.ufrag)),"candidate:"+s.join(" ")},r.parseIceOptions=function(i){return i.substring(14).split(" ")},r.parseRtpMap=function(i){let s=i.substring(9).split(" ");const u={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),u.name=s[0],u.clockRate=parseInt(s[1],10),u.channels=s.length===3?parseInt(s[2],10):1,u.numChannels=u.channels,u},r.writeRtpMap=function(i){let s=i.payloadType;i.preferredPayloadType!==void 0&&(s=i.preferredPayloadType);const u=i.channels||i.numChannels||1;return"a=rtpmap:"+s+" "+i.name+"/"+i.clockRate+(u!==1?"/"+u:"")+`\r
`},r.parseExtmap=function(i){const s=i.substring(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1],attributes:s.slice(2).join(" ")}},r.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&i.direction!=="sendrecv"?"/"+i.direction:"")+" "+i.uri+(i.attributes?" "+i.attributes:"")+`\r
`},r.parseFmtp=function(i){const s={};let u;const g=i.substring(i.indexOf(" ")+1).split(";");for(let A=0;A<g.length;A++)u=g[A].trim().split("="),s[u[0].trim()]=u[1];return s},r.writeFmtp=function(i){let s="",u=i.payloadType;if(i.preferredPayloadType!==void 0&&(u=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){const g=[];Object.keys(i.parameters).forEach(A=>{i.parameters[A]!==void 0?g.push(A+"="+i.parameters[A]):g.push(A)}),s+="a=fmtp:"+u+" "+g.join(";")+`\r
`}return s},r.parseRtcpFb=function(i){const s=i.substring(i.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},r.writeRtcpFb=function(i){let s="",u=i.payloadType;return i.preferredPayloadType!==void 0&&(u=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(g=>{s+="a=rtcp-fb:"+u+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+`\r
`}),s},r.parseSsrcMedia=function(i){const s=i.indexOf(" "),u={ssrc:parseInt(i.substring(7,s),10)},g=i.indexOf(":",s);return g>-1?(u.attribute=i.substring(s+1,g),u.value=i.substring(g+1)):u.attribute=i.substring(s+1),u},r.parseSsrcGroup=function(i){const s=i.substring(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(u=>parseInt(u,10))}},r.getMid=function(i){const s=r.matchPrefix(i,"a=mid:")[0];if(s)return s.substring(6)},r.parseFingerprint=function(i){const s=i.substring(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},r.getDtlsParameters=function(i,s){return{role:"auto",fingerprints:r.matchPrefix(i+s,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(i,s){let u="a=setup:"+s+`\r
`;return i.fingerprints.forEach(g=>{u+="a=fingerprint:"+g.algorithm+" "+g.value+`\r
`}),u},r.parseCryptoLine=function(i){const s=i.substring(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},r.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+(typeof i.keyParams=="object"?r.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+`\r
`},r.parseCryptoKeyParams=function(i){if(i.indexOf("inline:")!==0)return null;const s=i.substring(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},r.getCryptoParameters=function(i,s){return r.matchPrefix(i+s,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(i,s){const u=r.matchPrefix(i+s,"a=ice-ufrag:")[0],g=r.matchPrefix(i+s,"a=ice-pwd:")[0];return u&&g?{usernameFragment:u.substring(12),password:g.substring(10)}:null},r.writeIceParameters=function(i){let s="a=ice-ufrag:"+i.usernameFragment+`\r
a=ice-pwd:`+i.password+`\r
`;return i.iceLite&&(s+=`a=ice-lite\r
`),s},r.parseRtpParameters=function(i){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},g=r.splitLines(i)[0].split(" ");s.profile=g[2];for(let M=3;M<g.length;M++){const b=g[M],S=r.matchPrefix(i,"a=rtpmap:"+b+" ")[0];if(S){const _=r.parseRtpMap(S),j=r.matchPrefix(i,"a=fmtp:"+b+" ");switch(_.parameters=j.length?r.parseFmtp(j[0]):{},_.rtcpFeedback=r.matchPrefix(i,"a=rtcp-fb:"+b+" ").map(r.parseRtcpFb),s.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(_.name.toUpperCase());break}}}r.matchPrefix(i,"a=extmap:").forEach(M=>{s.headerExtensions.push(r.parseExtmap(M))});const A=r.matchPrefix(i,"a=rtcp-fb:* ").map(r.parseRtcpFb);return s.codecs.forEach(M=>{A.forEach(b=>{M.rtcpFeedback.find(_=>_.type===b.type&&_.parameter===b.parameter)||M.rtcpFeedback.push(b)})}),s},r.writeRtpDescription=function(i,s){let u="";u+="m="+i+" ",u+=s.codecs.length>0?"9":"0",u+=" "+(s.profile||"UDP/TLS/RTP/SAVPF")+" ",u+=s.codecs.map(A=>A.preferredPayloadType!==void 0?A.preferredPayloadType:A.payloadType).join(" ")+`\r
`,u+=`c=IN IP4 0.0.0.0\r
`,u+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(A=>{u+=r.writeRtpMap(A),u+=r.writeFmtp(A),u+=r.writeRtcpFb(A)});let g=0;return s.codecs.forEach(A=>{A.maxptime>g&&(g=A.maxptime)}),g>0&&(u+="a=maxptime:"+g+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(A=>{u+=r.writeExtmap(A)}),u},r.parseRtpEncodingParameters=function(i){const s=[],u=r.parseRtpParameters(i),g=u.fecMechanisms.indexOf("RED")!==-1,A=u.fecMechanisms.indexOf("ULPFEC")!==-1,M=r.matchPrefix(i,"a=ssrc:").map(L=>r.parseSsrcMedia(L)).filter(L=>L.attribute==="cname"),b=M.length>0&&M[0].ssrc;let S;const _=r.matchPrefix(i,"a=ssrc-group:FID").map(L=>L.substring(17).split(" ").map(ge=>parseInt(ge,10)));_.length>0&&_[0].length>1&&_[0][0]===b&&(S=_[0][1]),u.codecs.forEach(L=>{if(L.name.toUpperCase()==="RTX"&&L.parameters.apt){let X={ssrc:b,codecPayloadType:parseInt(L.parameters.apt,10)};b&&S&&(X.rtx={ssrc:S}),s.push(X),g&&(X=JSON.parse(JSON.stringify(X)),X.fec={ssrc:b,mechanism:A?"red+ulpfec":"red"},s.push(X))}}),s.length===0&&b&&s.push({ssrc:b});let j=r.matchPrefix(i,"b=");return j.length&&(j[0].indexOf("b=TIAS:")===0?j=parseInt(j[0].substring(7),10):j[0].indexOf("b=AS:")===0?j=parseInt(j[0].substring(5),10)*1e3*.95-2e3*8:j=void 0,s.forEach(L=>{L.maxBitrate=j})),s},r.parseRtcpParameters=function(i){const s={},u=r.matchPrefix(i,"a=ssrc:").map(M=>r.parseSsrcMedia(M)).filter(M=>M.attribute==="cname")[0];u&&(s.cname=u.value,s.ssrc=u.ssrc);const g=r.matchPrefix(i,"a=rtcp-rsize");s.reducedSize=g.length>0,s.compound=g.length===0;const A=r.matchPrefix(i,"a=rtcp-mux");return s.mux=A.length>0,s},r.writeRtcpParameters=function(i){let s="";return i.reducedSize&&(s+=`a=rtcp-rsize\r
`),i.mux&&(s+=`a=rtcp-mux\r
`),i.ssrc!==void 0&&i.cname&&(s+="a=ssrc:"+i.ssrc+" cname:"+i.cname+`\r
`),s},r.parseMsid=function(i){let s;const u=r.matchPrefix(i,"a=msid:");if(u.length===1)return s=u[0].substring(7).split(" "),{stream:s[0],track:s[1]};const g=r.matchPrefix(i,"a=ssrc:").map(A=>r.parseSsrcMedia(A)).filter(A=>A.attribute==="msid");if(g.length>0)return s=g[0].value.split(" "),{stream:s[0],track:s[1]}},r.parseSctpDescription=function(i){const s=r.parseMLine(i),u=r.matchPrefix(i,"a=max-message-size:");let g;u.length>0&&(g=parseInt(u[0].substring(19),10)),isNaN(g)&&(g=65536);const A=r.matchPrefix(i,"a=sctp-port:");if(A.length>0)return{port:parseInt(A[0].substring(12),10),protocol:s.fmt,maxMessageSize:g};const M=r.matchPrefix(i,"a=sctpmap:");if(M.length>0){const b=M[0].substring(10).split(" ");return{port:parseInt(b[0],10),protocol:b[1],maxMessageSize:g}}},r.writeSctpDescription=function(i,s){let u=[];return i.protocol!=="DTLS/SCTP"?u=["m="+i.kind+" 9 "+i.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:u=["m="+i.kind+" 9 "+i.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&u.push("a=max-message-size:"+s.maxMessageSize+`\r
`),u.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,22)},r.writeSessionBoilerplate=function(i,s,u){let g;const A=s!==void 0?s:2;return i?g=i:g=r.generateSessionId(),`v=0\r
o=`+(u||"thisisadapterortc")+" "+g+" "+A+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},r.getDirection=function(i,s){const u=r.splitLines(i);for(let g=0;g<u.length;g++)switch(u[g]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return u[g].substring(2)}return s?r.getDirection(s):"sendrecv"},r.getKind=function(i){return r.splitLines(i)[0].split(" ")[0].substring(2)},r.isRejected=function(i){return i.split(" ",2)[1]==="0"},r.parseMLine=function(i){const u=r.splitLines(i)[0].substring(2).split(" ");return{kind:u[0],port:parseInt(u[1],10),protocol:u[2],fmt:u.slice(3).join(" ")}},r.parseOLine=function(i){const u=r.matchPrefix(i,"o=")[0].substring(2).split(" ");return{username:u[0],sessionId:u[1],sessionVersion:parseInt(u[2],10),netType:u[3],addressType:u[4],address:u[5]}},r.isValidSDP=function(i){if(typeof i!="string"||i.length===0)return!1;const s=r.splitLines(i);for(let u=0;u<s.length;u++)if(s[u].length<2||s[u].charAt(1)!=="=")return!1;return!0},o.exports=r})(kf)),kf.exports}var Eg=fv();const So=vl(Eg),dv=Oy({__proto__:null,default:So},[Eg]);function xc(o){if(!o.RTCIceCandidate||o.RTCIceCandidate&&"foundation"in o.RTCIceCandidate.prototype)return;const r=o.RTCIceCandidate;o.RTCIceCandidate=function(s){if(typeof s=="object"&&s.candidate&&s.candidate.indexOf("a=")===0&&(s=JSON.parse(JSON.stringify(s)),s.candidate=s.candidate.substring(2)),s.candidate&&s.candidate.length){const u=new r(s),g=So.parseCandidate(s.candidate);for(const A in g)A in u||Object.defineProperty(u,A,{value:g[A]});return u.toJSON=function(){return{candidate:u.candidate,sdpMid:u.sdpMid,sdpMLineIndex:u.sdpMLineIndex,usernameFragment:u.usernameFragment}},u}return new r(s)},o.RTCIceCandidate.prototype=r.prototype,Is(o,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new o.RTCIceCandidate(i.candidate),writable:"false"}),i))}function Kf(o){!o.RTCIceCandidate||o.RTCIceCandidate&&"relayProtocol"in o.RTCIceCandidate.prototype||Is(o,"icecandidate",r=>{if(r.candidate){const i=So.parseCandidate(r.candidate.candidate);i.type==="relay"&&(r.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[i.priority>>24])}return r})}function bc(o,r){if(!o.RTCPeerConnection)return;"sctp"in o.RTCPeerConnection.prototype||Object.defineProperty(o.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const i=function(M){if(!M||!M.sdp)return!1;const b=So.splitSections(M.sdp);return b.shift(),b.some(S=>{const _=So.parseMLine(S);return _&&_.kind==="application"&&_.protocol.indexOf("SCTP")!==-1})},s=function(M){const b=M.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(b===null||b.length<2)return-1;const S=parseInt(b[1],10);return S!==S?-1:S},u=function(M){let b=65536;return r.browser==="firefox"&&(r.version<57?M===-1?b=16384:b=2147483637:r.version<60?b=r.version===57?65535:65536:b=2147483637),b},g=function(M,b){let S=65536;r.browser==="firefox"&&r.version===57&&(S=65535);const _=So.matchPrefix(M.sdp,"a=max-message-size:");return _.length>0?S=parseInt(_[0].substring(19),10):r.browser==="firefox"&&b!==-1&&(S=2147483637),S},A=o.RTCPeerConnection.prototype.setRemoteDescription;o.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r.browser==="chrome"&&r.version>=76){const{sdpSemantics:b}=this.getConfiguration();b==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const b=s(arguments[0]),S=u(b),_=g(arguments[0],b);let j;S===0&&_===0?j=Number.POSITIVE_INFINITY:S===0||_===0?j=Math.max(S,_):j=Math.min(S,_);const L={};Object.defineProperty(L,"maxMessageSize",{get(){return j}}),this._sctp=L}return A.apply(this,arguments)}}function Cc(o){if(!(o.RTCPeerConnection&&"createDataChannel"in o.RTCPeerConnection.prototype))return;function r(s,u){const g=s.send;s.send=function(){const M=arguments[0],b=M.length||M.size||M.byteLength;if(s.readyState==="open"&&u.sctp&&b>u.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+u.sctp.maxMessageSize+" bytes)");return g.apply(s,arguments)}}const i=o.RTCPeerConnection.prototype.createDataChannel;o.RTCPeerConnection.prototype.createDataChannel=function(){const u=i.apply(this,arguments);return r(u,this),u},Is(o,"datachannel",s=>(r(s.channel,s.target),s))}function Gf(o){if(!o.RTCPeerConnection||"connectionState"in o.RTCPeerConnection.prototype)return;const r=o.RTCPeerConnection.prototype;Object.defineProperty(r,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(r,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{const s=r[i];r[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=u=>{const g=u.target;if(g._lastConnectionState!==g.connectionState){g._lastConnectionState=g.connectionState;const A=new Event("connectionstatechange",u);g.dispatchEvent(A)}return u},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function Vf(o,r){if(!o.RTCPeerConnection||r.browser==="chrome"&&r.version>=71||r.browser==="safari"&&r._safariVersion>=13.1)return;const i=o.RTCPeerConnection.prototype.setRemoteDescription;o.RTCPeerConnection.prototype.setRemoteDescription=function(u){if(u&&u.sdp&&u.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const g=u.sdp.split(`
`).filter(A=>A.trim()!=="a=extmap-allow-mixed").join(`
`);o.RTCSessionDescription&&u instanceof o.RTCSessionDescription?arguments[0]=new o.RTCSessionDescription({type:u.type,sdp:g}):u.sdp=g}return i.apply(this,arguments)}}function wc(o,r){if(!(o.RTCPeerConnection&&o.RTCPeerConnection.prototype))return;const i=o.RTCPeerConnection.prototype.addIceCandidate;!i||i.length===0||(o.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(r.browser==="chrome"&&r.version<78||r.browser==="firefox"&&r.version<68||r.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Sc(o,r){if(!(o.RTCPeerConnection&&o.RTCPeerConnection.prototype))return;const i=o.RTCPeerConnection.prototype.setLocalDescription;!i||i.length===0||(o.RTCPeerConnection.prototype.setLocalDescription=function(){let u=arguments[0]||{};if(typeof u!="object"||u.type&&u.sdp)return i.apply(this,arguments);if(u={type:u.type,sdp:u.sdp},!u.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":u.type="offer";break;default:u.type="answer";break}return u.sdp||u.type!=="offer"&&u.type!=="answer"?i.apply(this,[u]):(u.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(A=>i.apply(this,[A]))})}const hv=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Vf,shimAddIceCandidateNullOrEmpty:wc,shimConnectionState:Gf,shimMaxMessageSize:bc,shimParameterlessSetLocalDescription:Sc,shimRTCIceCandidate:xc,shimRTCIceCandidateRelayProtocol:Kf,shimSendThrowTypeError:Cc},Symbol.toStringTag,{value:"Module"}));function pv({window:o}={},r={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const i=Zp,s=cv(o),u={browserDetails:s,commonShim:hv,extractVersion:hl,disableLog:ov,disableWarnings:lv,sdp:dv};switch(s.browser){case"chrome":if(!Ap||!zf||!r.shimChrome)return i("Chrome shim is not included in this adapter release."),u;if(s.version===null)return i("Chrome shim can not determine version, not shimming."),u;i("adapter.js shimming chrome."),u.browserShim=Ap,wc(o,s),Sc(o),Wp(o,s),$p(o),zf(o,s),eg(o),ag(o,s),tg(o),ng(o),ig(o,s),xc(o),Kf(o),Gf(o),bc(o,s),Cc(o),Vf(o,s);break;case"firefox":if(!Ep||!Yf||!r.shimFirefox)return i("Firefox shim is not included in this adapter release."),u;i("adapter.js shimming firefox."),u.browserShim=Ep,wc(o,s),Sc(o),sg(o,s),Yf(o,s),og(o),ug(o),lg(o),cg(o),fg(o),dg(o),hg(o),pg(o),gg(o),xc(o),Gf(o),bc(o,s),Cc(o);break;case"safari":if(!Tp||!r.shimSafari)return i("Safari shim is not included in this adapter release."),u;i("adapter.js shimming safari."),u.browserShim=Tp,wc(o,s),Sc(o),Cg(o),Sg(o),vg(o),mg(o),yg(o),wg(o),xg(o),Ag(o),xc(o),Kf(o),bc(o,s),Cc(o),Vf(o,s);break;default:i("Unsupported browser!");break}return u}const _p=pv({window:typeof window>"u"?void 0:window});function qs(o,r,i,s){Object.defineProperty(o,r,{get:i,set:s,enumerable:!0,configurable:!0})}class Tg{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=r=>{const i=[],s=r.byteLength,u=Math.ceil(s/this.chunkedMTU);let g=0,A=0;for(;A<s;){const M=Math.min(s,A+this.chunkedMTU),b=r.slice(A,M),S={__peerData:this._dataCount,n:g,data:b,total:u};i.push(S),A=M,g++}return this._dataCount++,i}}}function gv(o){let r=0;for(const u of o)r+=u.byteLength;const i=new Uint8Array(r);let s=0;for(const u of o)i.set(u,s),s+=u.byteLength;return i}const Bf=_p.default||_p,dl=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const o=this.getBrowser(),r=this.getVersion();return this.supportedBrowsers.includes(o)?o==="chrome"?r>=this.minChromeVersion:o==="firefox"?r>=this.minFirefoxVersion:o==="safari"?!this.isIOS&&r>=this.minSafariVersion:!1:!1}getBrowser(){return Bf.browserDetails.browser}getVersion(){return Bf.browserDetails.version||0}isUnifiedPlanSupported(){const o=this.getBrowser(),r=Bf.browserDetails.version||0;if(o==="chrome"&&r<this.minChromeVersion)return!1;if(o==="firefox"&&r>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let i,s=!1;try{i=new RTCPeerConnection,i.addTransceiver("audio"),s=!0}catch{}finally{i&&i.close()}return s}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},mv=o=>!o||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(o),Mg=()=>Math.random().toString(36).slice(2),kp={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class yv extends Tg{noop(){}blobToArrayBuffer(r,i){const s=new FileReader;return s.onload=function(u){u.target&&i(u.target.result)},s.readAsArrayBuffer(r),s}binaryStringToArrayBuffer(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s)&255;return i.buffer}isSecure(){return location.protocol==="https:"}constructor(...r){super(...r),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=kp,this.browser=dl.getBrowser(),this.browserVersion=dl.getVersion(),this.pack=Pp,this.unpack=Hp,this.supports=(function(){const i={browser:dl.isBrowserSupported(),webRTC:dl.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!i.webRTC)return i;let s;try{s=new RTCPeerConnection(kp),i.audioVideo=!0;let u;try{u=s.createDataChannel("_PEERJSTEST",{ordered:!0}),i.data=!0,i.reliable=!!u.ordered;try{u.binaryType="blob",i.binaryBlob=!dl.isIOS}catch{}}catch{}finally{u&&u.close()}}catch{}finally{s&&s.close()}return i})(),this.validateId=mv,this.randomToken=Mg}}const sa=new yv,vv="PeerJS: ";class xv{get logLevel(){return this._logLevel}set logLevel(r){this._logLevel=r}log(...r){this._logLevel>=3&&this._print(3,...r)}warn(...r){this._logLevel>=2&&this._print(2,...r)}error(...r){this._logLevel>=1&&this._print(1,...r)}setLogFunction(r){this._print=r}_print(r,...i){const s=[vv,...i];for(const u in s)s[u]instanceof Error&&(s[u]="("+s[u].name+") "+s[u].message);r>=3?console.log(...s):r>=2?console.warn("WARNING",...s):r>=1&&console.error("ERROR",...s)}constructor(){this._logLevel=0}}var Tt=new xv,sd={},bv=Object.prototype.hasOwnProperty,Pr="~";function yl(){}Object.create&&(yl.prototype=Object.create(null),new yl().__proto__||(Pr=!1));function Cv(o,r,i){this.fn=o,this.context=r,this.once=i||!1}function _g(o,r,i,s,u){if(typeof i!="function")throw new TypeError("The listener must be a function");var g=new Cv(i,s||o,u),A=Pr?Pr+r:r;return o._events[A]?o._events[A].fn?o._events[A]=[o._events[A],g]:o._events[A].push(g):(o._events[A]=g,o._eventsCount++),o}function Ac(o,r){--o._eventsCount===0?o._events=new yl:delete o._events[r]}function Ur(){this._events=new yl,this._eventsCount=0}Ur.prototype.eventNames=function(){var r=[],i,s;if(this._eventsCount===0)return r;for(s in i=this._events)bv.call(i,s)&&r.push(Pr?s.slice(1):s);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(i)):r};Ur.prototype.listeners=function(r){var i=Pr?Pr+r:r,s=this._events[i];if(!s)return[];if(s.fn)return[s.fn];for(var u=0,g=s.length,A=new Array(g);u<g;u++)A[u]=s[u].fn;return A};Ur.prototype.listenerCount=function(r){var i=Pr?Pr+r:r,s=this._events[i];return s?s.fn?1:s.length:0};Ur.prototype.emit=function(r,i,s,u,g,A){var M=Pr?Pr+r:r;if(!this._events[M])return!1;var b=this._events[M],S=arguments.length,_,j;if(b.fn){switch(b.once&&this.removeListener(r,b.fn,void 0,!0),S){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,i),!0;case 3:return b.fn.call(b.context,i,s),!0;case 4:return b.fn.call(b.context,i,s,u),!0;case 5:return b.fn.call(b.context,i,s,u,g),!0;case 6:return b.fn.call(b.context,i,s,u,g,A),!0}for(j=1,_=new Array(S-1);j<S;j++)_[j-1]=arguments[j];b.fn.apply(b.context,_)}else{var L=b.length,X;for(j=0;j<L;j++)switch(b[j].once&&this.removeListener(r,b[j].fn,void 0,!0),S){case 1:b[j].fn.call(b[j].context);break;case 2:b[j].fn.call(b[j].context,i);break;case 3:b[j].fn.call(b[j].context,i,s);break;case 4:b[j].fn.call(b[j].context,i,s,u);break;default:if(!_)for(X=1,_=new Array(S-1);X<S;X++)_[X-1]=arguments[X];b[j].fn.apply(b[j].context,_)}}return!0};Ur.prototype.on=function(r,i,s){return _g(this,r,i,s,!1)};Ur.prototype.once=function(r,i,s){return _g(this,r,i,s,!0)};Ur.prototype.removeListener=function(r,i,s,u){var g=Pr?Pr+r:r;if(!this._events[g])return this;if(!i)return Ac(this,g),this;var A=this._events[g];if(A.fn)A.fn===i&&(!u||A.once)&&(!s||A.context===s)&&Ac(this,g);else{for(var M=0,b=[],S=A.length;M<S;M++)(A[M].fn!==i||u&&!A[M].once||s&&A[M].context!==s)&&b.push(A[M]);b.length?this._events[g]=b.length===1?b[0]:b:Ac(this,g)}return this};Ur.prototype.removeAllListeners=function(r){var i;return r?(i=Pr?Pr+r:r,this._events[i]&&Ac(this,i)):(this._events=new yl,this._eventsCount=0),this};Ur.prototype.off=Ur.prototype.removeListener;Ur.prototype.addListener=Ur.prototype.on;Ur.prefixed=Pr;Ur.EventEmitter=Ur;sd=Ur;var Us={};qs(Us,"ConnectionType",()=>ss);qs(Us,"PeerErrorType",()=>hr);qs(Us,"BaseConnectionErrorType",()=>Ff);qs(Us,"DataConnectionErrorType",()=>od);qs(Us,"SerializationType",()=>qc);qs(Us,"SocketEventType",()=>is);qs(Us,"ServerMessageType",()=>qr);var ss=(function(o){return o.Data="data",o.Media="media",o})({}),hr=(function(o){return o.BrowserIncompatible="browser-incompatible",o.Disconnected="disconnected",o.InvalidID="invalid-id",o.InvalidKey="invalid-key",o.Network="network",o.PeerUnavailable="peer-unavailable",o.SslUnavailable="ssl-unavailable",o.ServerError="server-error",o.SocketError="socket-error",o.SocketClosed="socket-closed",o.UnavailableID="unavailable-id",o.WebRTC="webrtc",o})({}),Ff=(function(o){return o.NegotiationFailed="negotiation-failed",o.ConnectionClosed="connection-closed",o})({}),od=(function(o){return o.NotOpenYet="not-open-yet",o.MessageToBig="message-too-big",o})({}),qc=(function(o){return o.Binary="binary",o.BinaryUTF8="binary-utf8",o.JSON="json",o.None="raw",o})({}),is=(function(o){return o.Message="message",o.Disconnected="disconnected",o.Error="error",o.Close="close",o})({}),qr=(function(o){return o.Heartbeat="HEARTBEAT",o.Candidate="CANDIDATE",o.Offer="OFFER",o.Answer="ANSWER",o.Open="OPEN",o.Error="ERROR",o.IdTaken="ID-TAKEN",o.InvalidKey="INVALID-KEY",o.Leave="LEAVE",o.Expire="EXPIRE",o})({});const kg="1.5.5";class wv extends sd.EventEmitter{constructor(r,i,s,u,g,A=5e3){super(),this.pingInterval=A,this._disconnected=!0,this._messagesQueue=[];const M=r?"wss://":"ws://";this._baseUrl=M+i+":"+s+u+"peerjs?key="+g}start(r,i){this._id=r;const s=`${this._baseUrl}&id=${r}&token=${i}`;this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+kg),this._disconnected=!1,this._socket.onmessage=u=>{let g;try{g=JSON.parse(u.data),Tt.log("Server message received:",g)}catch{Tt.log("Invalid server message",u.data);return}this.emit(is.Message,g)},this._socket.onclose=u=>{this._disconnected||(Tt.log("Socket closed.",u),this._cleanup(),this._disconnected=!0,this.emit(is.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Tt.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Tt.log("Cannot send heartbeat, because socket closed");return}const r=JSON.stringify({type:qr.Heartbeat});this._socket.send(r),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const r=[...this._messagesQueue];this._messagesQueue=[];for(const i of r)this.send(i)}send(r){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(r);return}if(!r.type){this.emit(is.Error,"Invalid message");return}if(!this._wsOpen())return;const i=JSON.stringify(r);this._socket.send(i)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Bg{constructor(r){this.connection=r}startConnection(r){const i=this._startPeerConnection();if(this.connection.peerConnection=i,this.connection.type===ss.Media&&r._stream&&this._addTracksToConnection(r._stream,i),r.originator){const s=this.connection,u={ordered:!!r.reliable},g=i.createDataChannel(s.label,u);s._initializeDataChannel(g),this._makeOffer()}else this.handleSDP("OFFER",r.sdp)}_startPeerConnection(){Tt.log("Creating RTCPeerConnection.");const r=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(r),r}_setupListeners(r){const i=this.connection.peer,s=this.connection.connectionId,u=this.connection.type,g=this.connection.provider;Tt.log("Listening for ICE candidates."),r.onicecandidate=A=>{!A.candidate||!A.candidate.candidate||(Tt.log(`Received ICE candidates for ${i}:`,A.candidate),g.socket.send({type:qr.Candidate,payload:{candidate:A.candidate,type:u,connectionId:s},dst:i}))},r.oniceconnectionstatechange=()=>{switch(r.iceConnectionState){case"failed":Tt.log("iceConnectionState is failed, closing connections to "+i),this.connection.emitError(Ff.NegotiationFailed,"Negotiation of connection to "+i+" failed."),this.connection.close();break;case"closed":Tt.log("iceConnectionState is closed, closing connections to "+i),this.connection.emitError(Ff.ConnectionClosed,"Connection to "+i+" closed."),this.connection.close();break;case"disconnected":Tt.log("iceConnectionState changed to disconnected on the connection with "+i);break;case"completed":r.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",r.iceConnectionState)},Tt.log("Listening for data channel"),r.ondatachannel=A=>{Tt.log("Received data channel");const M=A.channel;g.getConnection(i,s)._initializeDataChannel(M)},Tt.log("Listening for remote stream"),r.ontrack=A=>{Tt.log("Received remote stream");const M=A.streams[0],b=g.getConnection(i,s);if(b.type===ss.Media){const S=b;this._addStreamToMediaConnection(M,S)}}}cleanup(){Tt.log("Cleaning up PeerConnection to "+this.connection.peer);const r=this.connection.peerConnection;if(!r)return;this.connection.peerConnection=null,r.onicecandidate=r.oniceconnectionstatechange=r.ondatachannel=r.ontrack=()=>{};const i=r.signalingState!=="closed";let s=!1;const u=this.connection.dataChannel;u&&(s=!!u.readyState&&u.readyState!=="closed"),(i||s)&&r.close()}async _makeOffer(){const r=this.connection.peerConnection,i=this.connection.provider;try{const s=await r.createOffer(this.connection.options.constraints);Tt.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await r.setLocalDescription(s),Tt.log("Set localDescription:",s,`for:${this.connection.peer}`);let u={sdp:s,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===ss.Data){const g=this.connection;u={...u,label:g.label,reliable:g.reliable,serialization:g.serialization}}i.socket.send({type:qr.Offer,payload:u,dst:this.connection.peer})}catch(u){u!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(i.emitError(hr.WebRTC,u),Tt.log("Failed to setLocalDescription, ",u))}}catch(s){i.emitError(hr.WebRTC,s),Tt.log("Failed to createOffer, ",s)}}async _makeAnswer(){const r=this.connection.peerConnection,i=this.connection.provider;try{const s=await r.createAnswer();Tt.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await r.setLocalDescription(s),Tt.log("Set localDescription:",s,`for:${this.connection.peer}`),i.socket.send({type:qr.Answer,payload:{sdp:s,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(u){i.emitError(hr.WebRTC,u),Tt.log("Failed to setLocalDescription, ",u)}}catch(s){i.emitError(hr.WebRTC,s),Tt.log("Failed to create answer, ",s)}}async handleSDP(r,i){i=new RTCSessionDescription(i);const s=this.connection.peerConnection,u=this.connection.provider;Tt.log("Setting remote description",i);const g=this;try{await s.setRemoteDescription(i),Tt.log(`Set remoteDescription:${r} for:${this.connection.peer}`),r==="OFFER"&&await g._makeAnswer()}catch(A){u.emitError(hr.WebRTC,A),Tt.log("Failed to setRemoteDescription, ",A)}}async handleCandidate(r){Tt.log("handleCandidate:",r);try{await this.connection.peerConnection.addIceCandidate(r),Tt.log(`Added ICE candidate for:${this.connection.peer}`)}catch(i){this.connection.provider.emitError(hr.WebRTC,i),Tt.log("Failed to handleCandidate, ",i)}}_addTracksToConnection(r,i){if(Tt.log(`add tracks from stream ${r.id} to peer connection`),!i.addTrack)return Tt.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");r.getTracks().forEach(s=>{i.addTrack(s,r)})}_addStreamToMediaConnection(r,i){Tt.log(`add stream ${r.id} to media connection ${i.connectionId}`),i.addStream(r)}}class Rg extends sd.EventEmitter{emitError(r,i){Tt.error("Error:",i),this.emit("error",new Sv(`${r}`,i))}}class Sv extends Error{constructor(r,i){typeof i=="string"?super(i):(super(),Object.assign(this,i)),this.type=r}}class Dg extends Rg{get open(){return this._open}constructor(r,i,s){super(),this.peer=r,this.provider=i,this.options=s,this._open=!1,this.metadata=s.metadata}}class Rc extends Dg{static#e=this.ID_PREFIX="mc_";get type(){return ss.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(r,i,s){super(r,i,s),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Rc.ID_PREFIX+sa.randomToken(),this._negotiator=new Bg(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(r){this.dataChannel=r,this.dataChannel.onopen=()=>{Tt.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Tt.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(r){Tt.log("Receiving stream",r),this._remoteStream=r,super.emit("stream",r)}handleMessage(r){const i=r.type,s=r.payload;switch(r.type){case qr.Answer:this._negotiator.handleSDP(i,s.sdp),this._open=!0;break;case qr.Candidate:this._negotiator.handleCandidate(s.candidate);break;default:Tt.warn(`Unrecognized message type:${i} from peer:${this.peer}`);break}}answer(r,i={}){if(this._localStream){Tt.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=r,i&&i.sdpTransform&&(this.options.sdpTransform=i.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:r});const s=this.provider._getMessages(this.connectionId);for(const u of s)this.handleMessage(u);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class Av{constructor(r){this._options=r}_buildRequest(r){const i=this._options.secure?"https":"http",{host:s,port:u,path:g,key:A}=this._options,M=new URL(`${i}://${s}:${u}${g}${A}/${r}`);return M.searchParams.set("ts",`${Date.now()}${Math.random()}`),M.searchParams.set("version",kg),fetch(M.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const r=await this._buildRequest("id");if(r.status!==200)throw new Error(`Error. Status:${r.status}`);return r.text()}catch(r){Tt.error("Error retrieving ID",r);let i="";throw this._options.path==="/"&&this._options.host!==sa.CLOUD_HOST&&(i=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+i)}}async listAllPeers(){try{const r=await this._buildRequest("peers");if(r.status!==200){if(r.status===401){let i="";throw this._options.host===sa.CLOUD_HOST?i="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":i="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+i)}throw new Error(`Error. Status:${r.status}`)}return r.json()}catch(r){throw Tt.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r)}}}class Dc extends Dg{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return ss.Data}constructor(r,i,s){super(r,i,s),this.connectionId=this.options.connectionId||Dc.ID_PREFIX+Mg(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Bg(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(r){this.dataChannel=r,this.dataChannel.onopen=()=>{Tt.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=i=>{Tt.log(`DC#${this.connectionId} dc onmessage:`,i.data)},this.dataChannel.onclose=()=>{Tt.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(r){if(r?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(r,i=!1){if(!this.open){this.emitError(od.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(r,i)}async handleMessage(r){const i=r.payload;switch(r.type){case qr.Answer:await this._negotiator.handleSDP(r.type,i.sdp);break;case qr.Candidate:await this._negotiator.handleCandidate(i.candidate);break;default:Tt.warn("Unrecognized message type:",r.type,"from peer:",this.peer);break}}}class ld extends Dc{get bufferSize(){return this._bufferSize}_initializeDataChannel(r){super._initializeDataChannel(r),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",i=>this._handleDataMessage(i))}_bufferedSend(r){(this._buffering||!this._trySend(r))&&(this._buffer.push(r),this._bufferSize=this._buffer.length)}_trySend(r){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Dc.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(r)}catch(i){return Tt.error(`DC#:${this.connectionId} Error when sending:`,i),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const r=this._buffer[0];this._trySend(r)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(r){if(r?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...r){super(...r),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Rf extends ld{close(r){super.close(r),this._chunkedData={}}constructor(r,i,s){super(r,i,s),this.chunker=new Tg,this.serialization=qc.Binary,this._chunkedData={}}_handleDataMessage({data:r}){const i=Hp(r),s=i.__peerData;if(s){if(s.type==="close"){this.close();return}this._handleChunk(i);return}this.emit("data",i)}_handleChunk(r){const i=r.__peerData,s=this._chunkedData[i]||{data:[],count:0,total:r.total};if(s.data[r.n]=new Uint8Array(r.data),s.count++,this._chunkedData[i]=s,s.total===s.count){delete this._chunkedData[i];const u=gv(s.data);this._handleDataMessage({data:u})}}_send(r,i){const s=Pp(r);if(s instanceof Promise)return this._send_blob(s);if(!i&&s.byteLength>this.chunker.chunkedMTU){this._sendChunks(s);return}this._bufferedSend(s)}async _send_blob(r){const i=await r;if(i.byteLength>this.chunker.chunkedMTU){this._sendChunks(i);return}this._bufferedSend(i)}_sendChunks(r){const i=this.chunker.chunk(r);Tt.log(`DC#${this.connectionId} Try to send ${i.length} chunks...`);for(const s of i)this.send(s,!0)}}class Ev extends ld{_handleDataMessage({data:r}){super.emit("data",r)}_send(r,i){this._bufferedSend(r)}constructor(...r){super(...r),this.serialization=qc.None}}class Tv extends ld{_handleDataMessage({data:r}){const i=this.parse(this.decoder.decode(r)),s=i.__peerData;if(s&&s.type==="close"){this.close();return}this.emit("data",i)}_send(r,i){const s=this.encoder.encode(this.stringify(r));if(s.byteLength>=sa.chunkedMTU){this.emitError(od.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(s)}constructor(...r){super(...r),this.serialization=qc.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class cd extends Rg{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const r=Object.create(null);for(const[i,s]of this._connections)r[i]=s;return r}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(r,i){super(),this._serializers={raw:Ev,json:Tv,binary:Rf,"binary-utf8":Rf,default:Rf},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let s;if(r&&r.constructor==Object?i=r:r&&(s=r.toString()),i={debug:0,host:sa.CLOUD_HOST,port:sa.CLOUD_PORT,path:"/",key:cd.DEFAULT_KEY,token:sa.randomToken(),config:sa.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...i},this._options=i,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==sa.CLOUD_HOST?this._options.secure=sa.isSecure():this._options.host==sa.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Tt.setLogFunction(this._options.logFunction),Tt.logLevel=this._options.debug||0,this._api=new Av(i),this._socket=this._createServerConnection(),!sa.supports.audioVideo&&!sa.supports.data){this._delayedAbort(hr.BrowserIncompatible,"The current browser does not support WebRTC");return}if(s&&!sa.validateId(s)){this._delayedAbort(hr.InvalidID,`ID "${s}" is invalid`);return}s?this._initialize(s):this._api.retrieveId().then(u=>this._initialize(u)).catch(u=>this._abort(hr.ServerError,u))}_createServerConnection(){const r=new wv(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return r.on(is.Message,i=>{this._handleMessage(i)}),r.on(is.Error,i=>{this._abort(hr.SocketError,i)}),r.on(is.Disconnected,()=>{this.disconnected||(this.emitError(hr.Network,"Lost connection to server."),this.disconnect())}),r.on(is.Close,()=>{this.disconnected||this._abort(hr.SocketClosed,"Underlying socket is already closed.")}),r}_initialize(r){this._id=r,this.socket.start(r,this._options.token)}_handleMessage(r){const i=r.type,s=r.payload,u=r.src;switch(i){case qr.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case qr.Error:this._abort(hr.ServerError,s.msg);break;case qr.IdTaken:this._abort(hr.UnavailableID,`ID "${this.id}" is taken`);break;case qr.InvalidKey:this._abort(hr.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case qr.Leave:Tt.log(`Received leave message from ${u}`),this._cleanupPeer(u),this._connections.delete(u);break;case qr.Expire:this.emitError(hr.PeerUnavailable,`Could not connect to peer ${u}`);break;case qr.Offer:{const g=s.connectionId;let A=this.getConnection(u,g);if(A&&(A.close(),Tt.warn(`Offer received for existing Connection ID:${g}`)),s.type===ss.Media){const b=new Rc(u,this,{connectionId:g,_payload:s,metadata:s.metadata});A=b,this._addConnection(u,A),this.emit("call",b)}else if(s.type===ss.Data){const b=new this._serializers[s.serialization](u,this,{connectionId:g,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});A=b,this._addConnection(u,A),this.emit("connection",b)}else{Tt.warn(`Received malformed connection type:${s.type}`);return}const M=this._getMessages(g);for(const b of M)A.handleMessage(b);break}default:{if(!s){Tt.warn(`You received a malformed message from ${u} of type ${i}`);return}const g=s.connectionId,A=this.getConnection(u,g);A&&A.peerConnection?A.handleMessage(r):g?this._storeMessage(g,r):Tt.warn("You received an unrecognized message:",r);break}}}_storeMessage(r,i){this._lostMessages.has(r)||this._lostMessages.set(r,[]),this._lostMessages.get(r).push(i)}_getMessages(r){const i=this._lostMessages.get(r);return i?(this._lostMessages.delete(r),i):[]}connect(r,i={}){if(i={serialization:"default",...i},this.disconnected){Tt.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(hr.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const s=new this._serializers[i.serialization](r,this,i);return this._addConnection(r,s),s}call(r,i,s={}){if(this.disconnected){Tt.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(hr.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!i){Tt.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const u=new Rc(r,this,{...s,_stream:i});return this._addConnection(r,u),u}_addConnection(r,i){Tt.log(`add connection ${i.type}:${i.connectionId} to peerId:${r}`),this._connections.has(r)||this._connections.set(r,[]),this._connections.get(r).push(i)}_removeConnection(r){const i=this._connections.get(r.peer);if(i){const s=i.indexOf(r);s!==-1&&i.splice(s,1)}this._lostMessages.delete(r.connectionId)}getConnection(r,i){const s=this._connections.get(r);if(!s)return null;for(const u of s)if(u.connectionId===i)return u;return null}_delayedAbort(r,i){setTimeout(()=>{this._abort(r,i)},0)}_abort(r,i){Tt.error("Aborting!"),this.emitError(r,i),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Tt.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const r of this._connections.keys())this._cleanupPeer(r),this._connections.delete(r);this.socket.removeAllListeners()}_cleanupPeer(r){const i=this._connections.get(r);if(i)for(const s of i)s.close()}disconnect(){if(this.disconnected)return;const r=this.id;Tt.log(`Disconnect peer with ID:${r}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=r,this._id=null,this.emit("disconnected",r)}reconnect(){if(this.disconnected&&!this.destroyed)Tt.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Tt.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(r=i=>{}){this._api.listAllPeers().then(i=>r(i)).catch(i=>this._abort(hr.ServerError,i))}}var Mv=cd;class _v{name="PeerJS";peer=null;userIdHash=null;handshakeCallbacks=new Set;customSignalCallbacks=new Set;connections=new Map;connected=!1;async initialize(r){this.userIdHash=r;for(let i=1;i<=3;i++)try{await this.attemptConnection(r);return}catch(s){if(s.type==="unavailable-id"&&i<3){console.warn(`[${this.name}] ID taken (stale connection), retrying in 1s... (${i}/3)`),await new Promise(u=>setTimeout(u,1e3));continue}throw s}}attemptConnection(r){return new Promise((i,s)=>{this.peer&&(this.peer.destroy(),this.peer=null),this.peer=new Mv(r,{host:"0.peerjs.com",port:443,path:"/",secure:!0,debug:0});let u=!1;const g=A=>{console.error(`[${this.name}] Initialization error:`,A),(A.type==="network"||A.type==="server-error"||A.type==="socket-error"||A.type==="socket-closed")&&(this.connected=!1),u||(u=!0,this.peer?.off("error",g),s(A))};this.peer.on("error",g),this.peer.on("open",A=>{this.connected=!0,console.log(`[${this.name}]  Connected with ID:`,A.substring(0,8)+"..."),u||(u=!0,this.peer?.off("error",g),this.setupRuntimeErrorHandler(),i())}),this.peer.on("connection",A=>{this.setupConnection(A)}),this.peer.on("disconnected",()=>{console.warn(`[${this.name}]  Disconnected from server`),this.connected=!1,setTimeout(()=>{this.peer&&!this.peer.destroyed&&(console.log(`[${this.name}] Reconnecting...`),this.peer.reconnect())},1e3)}),setTimeout(()=>{!this.connected&&!u&&(u=!0,s(new Error("PeerJS connection timeout")))},1e4)})}setupRuntimeErrorHandler(){this.peer&&this.peer.on("error",r=>{console.error(`[${this.name}] Runtime error:`,r),(r.type==="network"||r.type==="server-error"||r.type==="socket-error"||r.type==="socket-closed")&&(console.warn(`[${this.name}] Server connection error, marking disconnected`),this.connected=!1)})}async sendHandshakeMessage(r,i){await this.sendMessage(r,{type:"handshake",message:i})}async sendCustomSignal(r,i){await this.sendMessage(r,{type:"custom",signal:i})}async sendMessage(r,i){if(!this.peer||!this.userIdHash)throw new Error("Not initialized");if(!this.connected)throw new Error("Not connected to PeerJS server");try{let s=this.connections.get(r);(!s||s.open===!1)&&(s=this.peer.connect(r,{reliable:!0,serialization:"json"}),this.setupConnection(s),await new Promise((u,g)=>{const A=setTimeout(()=>{g(new Error("Connection timeout"))},5e3);s.on("open",()=>{clearTimeout(A),u()}),s.on("error",M=>{clearTimeout(A),g(M)})})),s.send(i),console.log(`[${this.name}] Sent ${i.type} to:`,r.substring(0,8))}catch(s){throw console.error(`[${this.name}] Failed to send message:`,s),s}}onHandshakeMessage(r){return this.handshakeCallbacks.add(r),()=>{this.handshakeCallbacks.delete(r)}}onCustomSignal(r){return this.customSignalCallbacks.add(r),()=>{this.customSignalCallbacks.delete(r)}}isConnected(){return this.connected&&this.peer!==null}setupConnection(r){const i=r.peer;r.on("open",()=>{this.connections.set(i,r),console.log(`[${this.name}] Connection opened with:`,i.substring(0,8))}),r.on("data",s=>{s&&s.type==="handshake"&&s.message?(console.log(`[${this.name}] Received handshake from:`,i.substring(0,8)),this.handshakeCallbacks.forEach(u=>{u(i,s.message)})):s&&s.type==="custom"&&s.signal&&(console.log(`[${this.name}] Received custom signal from:`,i.substring(0,8)),this.customSignalCallbacks.forEach(u=>{u(i,s.signal)}))}),r.on("close",()=>{this.connections.delete(i),console.log(`[${this.name}] Connection closed with:`,i.substring(0,8))}),r.on("error",s=>{console.error(`[${this.name}] Connection error with ${i}:`,s),this.connections.delete(i)})}destroy(){this.connections.forEach(r=>{r.close()}),this.connections.clear(),this.peer&&(this.peer.destroy(),this.peer=null),this.handshakeCallbacks.clear(),this.customSignalCallbacks.clear(),this.connected=!1,this.userIdHash=null,console.log(`[${this.name}] Destroyed`)}}class kv{services=[];handshakeMessageCallbacks=new Set;customSignalCallbacks=new Set;initializedUserId=null;initializationPromise=null;async initialize(r,i=nv){if(this.initializedUserId===r&&this.services.length>0){console.log("[SignalingManager] Already initialized for this user, skipping");return}if(this.initializationPromise)return console.log("[SignalingManager] Initialization already in progress, waiting..."),this.initializationPromise;this.initializedUserId&&this.initializedUserId!==r&&(console.log("[SignalingManager] Switching users, cleaning up old signaling"),this.destroyInternal()),this.initializedUserId=r;const s=[];if(i.peerjs?.enabled!==!1){const u=new _v;s.push(u.initialize(r).then(()=>{this.services.push(u),this.setupServiceListeners(u),console.log("[SignalingManager]  PeerJS enabled")}).catch(g=>{console.warn("[SignalingManager] PeerJS failed:",g)}))}this.initializationPromise=Promise.allSettled(s).then(()=>{if(this.services.length===0)throw this.initializedUserId=null,this.initializationPromise=null,new Error("No signaling services available");console.log(`[SignalingManager]  Initialized with ${this.services.length} service(s) for user:`,r.substring(0,8)),this.initializationPromise=null}),await this.initializationPromise}async sendHandshakeMessage(r,i){if(this.services.length===0)throw new Error("No signaling services available");const s=this.services.map(A=>A.sendHandshakeMessage(r,i).then(()=>{console.log(`[SignalingManager]  Sent handshake via ${A.name}`)}).catch(M=>{console.warn(`[SignalingManager] Failed to send handshake via ${A.name}:`,M)})),g=(await Promise.allSettled(s)).filter(A=>A.status==="fulfilled").length;if(g===0)throw new Error("Failed to send handshake through any service");console.log(`[SignalingManager] Handshake sent via ${g}/${this.services.length} service(s)`)}async sendCustomSignal(r,i){if(this.services.length===0)throw new Error("No signaling services available");const s=this.services.map(A=>A.sendCustomSignal(r,i).then(()=>{console.log(`[SignalingManager]  Sent custom signal via ${A.name}`)}).catch(M=>{console.warn(`[SignalingManager] Failed to send custom signal via ${A.name}:`,M)})),g=(await Promise.allSettled(s)).filter(A=>A.status==="fulfilled").length;if(g===0)throw new Error("Failed to send custom signal through any service");console.log(`[SignalingManager] Custom signal sent via ${g}/${this.services.length} service(s)`)}onCustomSignal(r){return this.customSignalCallbacks.add(r),()=>{this.customSignalCallbacks.delete(r)}}onHandshakeMessage(r){return this.handshakeMessageCallbacks.add(r),()=>{this.handshakeMessageCallbacks.delete(r)}}getActiveServices(){return this.services.filter(r=>r.isConnected()).map(r=>r.name)}isConnected(){return this.services.some(r=>r.isConnected())}isInitializedForUser(r){return this.initializedUserId===r&&this.services.length>0}destroy(){console.log("[SignalingManager] Destroy called - cleaning up signaling"),this.destroyInternal()}setupServiceListeners(r){r.onHandshakeMessage((i,s)=>{console.log(`[SignalingManager] Handshake received from ${i.substring(0,8)} via ${r.name}`),this.handshakeMessageCallbacks.forEach(u=>{u(i,s)})}),r.onCustomSignal((i,s)=>{console.log(`[SignalingManager] Custom signal received from ${i.substring(0,8)} via ${r.name}`),this.customSignalCallbacks.forEach(u=>{u(i,s)})})}destroyInternal(){this.services.forEach(r=>{r.destroy()}),this.services=[],this.handshakeMessageCallbacks.clear(),this.customSignalCallbacks.clear(),this.initializedUserId=null,this.initializationPromise=null}}function Bv(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Df={exports:{}};const Rv={},Dv=Object.freeze(Object.defineProperty({__proto__:null,default:Rv},Symbol.toStringTag,{value:"Module"})),Nv=qy(Dv);var Bp;function Ng(){return Bp||(Bp=1,(function(o){(function(r){var i=function(w){var R,B=new Float64Array(16);if(w)for(R=0;R<w.length;R++)B[R]=w[R];return B},s=function(){throw new Error("no PRNG")},u=new Uint8Array(16),g=new Uint8Array(32);g[0]=9;var A=i(),M=i([1]),b=i([56129,1]),S=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),_=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),j=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),L=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),X=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ge(w,R,B,h){w[R]=B>>24&255,w[R+1]=B>>16&255,w[R+2]=B>>8&255,w[R+3]=B&255,w[R+4]=h>>24&255,w[R+5]=h>>16&255,w[R+6]=h>>8&255,w[R+7]=h&255}function de(w,R,B,h,O){var te,W=0;for(te=0;te<O;te++)W|=w[R+te]^B[h+te];return(1&W-1>>>8)-1}function Pe(w,R,B,h){return de(w,R,B,h,16)}function pt(w,R,B,h){return de(w,R,B,h,32)}function Ke(w,R,B,h){for(var O=h[0]&255|(h[1]&255)<<8|(h[2]&255)<<16|(h[3]&255)<<24,te=B[0]&255|(B[1]&255)<<8|(B[2]&255)<<16|(B[3]&255)<<24,W=B[4]&255|(B[5]&255)<<8|(B[6]&255)<<16|(B[7]&255)<<24,Ce=B[8]&255|(B[9]&255)<<8|(B[10]&255)<<16|(B[11]&255)<<24,qe=B[12]&255|(B[13]&255)<<8|(B[14]&255)<<16|(B[15]&255)<<24,ft=h[4]&255|(h[5]&255)<<8|(h[6]&255)<<16|(h[7]&255)<<24,st=R[0]&255|(R[1]&255)<<8|(R[2]&255)<<16|(R[3]&255)<<24,Ht=R[4]&255|(R[5]&255)<<8|(R[6]&255)<<16|(R[7]&255)<<24,ct=R[8]&255|(R[9]&255)<<8|(R[10]&255)<<16|(R[11]&255)<<24,Et=R[12]&255|(R[13]&255)<<8|(R[14]&255)<<16|(R[15]&255)<<24,jt=h[8]&255|(h[9]&255)<<8|(h[10]&255)<<16|(h[11]&255)<<24,Ot=B[16]&255|(B[17]&255)<<8|(B[18]&255)<<16|(B[19]&255)<<24,dt=B[20]&255|(B[21]&255)<<8|(B[22]&255)<<16|(B[23]&255)<<24,wt=B[24]&255|(B[25]&255)<<8|(B[26]&255)<<16|(B[27]&255)<<24,xt=B[28]&255|(B[29]&255)<<8|(B[30]&255)<<16|(B[31]&255)<<24,yt=h[12]&255|(h[13]&255)<<8|(h[14]&255)<<16|(h[15]&255)<<24,ot=O,vt=te,tt=W,lt=Ce,ht=qe,at=ft,he=st,ye=Ht,ve=ct,Ee=Et,Ae=jt,je=Ot,St=dt,nt=wt,zt=xt,Yt=yt,z,Kt=0;Kt<20;Kt+=2)z=ot+St|0,ht^=z<<7|z>>>25,z=ht+ot|0,ve^=z<<9|z>>>23,z=ve+ht|0,St^=z<<13|z>>>19,z=St+ve|0,ot^=z<<18|z>>>14,z=at+vt|0,Ee^=z<<7|z>>>25,z=Ee+at|0,nt^=z<<9|z>>>23,z=nt+Ee|0,vt^=z<<13|z>>>19,z=vt+nt|0,at^=z<<18|z>>>14,z=Ae+he|0,zt^=z<<7|z>>>25,z=zt+Ae|0,tt^=z<<9|z>>>23,z=tt+zt|0,he^=z<<13|z>>>19,z=he+tt|0,Ae^=z<<18|z>>>14,z=Yt+je|0,lt^=z<<7|z>>>25,z=lt+Yt|0,ye^=z<<9|z>>>23,z=ye+lt|0,je^=z<<13|z>>>19,z=je+ye|0,Yt^=z<<18|z>>>14,z=ot+lt|0,vt^=z<<7|z>>>25,z=vt+ot|0,tt^=z<<9|z>>>23,z=tt+vt|0,lt^=z<<13|z>>>19,z=lt+tt|0,ot^=z<<18|z>>>14,z=at+ht|0,he^=z<<7|z>>>25,z=he+at|0,ye^=z<<9|z>>>23,z=ye+he|0,ht^=z<<13|z>>>19,z=ht+ye|0,at^=z<<18|z>>>14,z=Ae+Ee|0,je^=z<<7|z>>>25,z=je+Ae|0,ve^=z<<9|z>>>23,z=ve+je|0,Ee^=z<<13|z>>>19,z=Ee+ve|0,Ae^=z<<18|z>>>14,z=Yt+zt|0,St^=z<<7|z>>>25,z=St+Yt|0,nt^=z<<9|z>>>23,z=nt+St|0,zt^=z<<13|z>>>19,z=zt+nt|0,Yt^=z<<18|z>>>14;ot=ot+O|0,vt=vt+te|0,tt=tt+W|0,lt=lt+Ce|0,ht=ht+qe|0,at=at+ft|0,he=he+st|0,ye=ye+Ht|0,ve=ve+ct|0,Ee=Ee+Et|0,Ae=Ae+jt|0,je=je+Ot|0,St=St+dt|0,nt=nt+wt|0,zt=zt+xt|0,Yt=Yt+yt|0,w[0]=ot>>>0&255,w[1]=ot>>>8&255,w[2]=ot>>>16&255,w[3]=ot>>>24&255,w[4]=vt>>>0&255,w[5]=vt>>>8&255,w[6]=vt>>>16&255,w[7]=vt>>>24&255,w[8]=tt>>>0&255,w[9]=tt>>>8&255,w[10]=tt>>>16&255,w[11]=tt>>>24&255,w[12]=lt>>>0&255,w[13]=lt>>>8&255,w[14]=lt>>>16&255,w[15]=lt>>>24&255,w[16]=ht>>>0&255,w[17]=ht>>>8&255,w[18]=ht>>>16&255,w[19]=ht>>>24&255,w[20]=at>>>0&255,w[21]=at>>>8&255,w[22]=at>>>16&255,w[23]=at>>>24&255,w[24]=he>>>0&255,w[25]=he>>>8&255,w[26]=he>>>16&255,w[27]=he>>>24&255,w[28]=ye>>>0&255,w[29]=ye>>>8&255,w[30]=ye>>>16&255,w[31]=ye>>>24&255,w[32]=ve>>>0&255,w[33]=ve>>>8&255,w[34]=ve>>>16&255,w[35]=ve>>>24&255,w[36]=Ee>>>0&255,w[37]=Ee>>>8&255,w[38]=Ee>>>16&255,w[39]=Ee>>>24&255,w[40]=Ae>>>0&255,w[41]=Ae>>>8&255,w[42]=Ae>>>16&255,w[43]=Ae>>>24&255,w[44]=je>>>0&255,w[45]=je>>>8&255,w[46]=je>>>16&255,w[47]=je>>>24&255,w[48]=St>>>0&255,w[49]=St>>>8&255,w[50]=St>>>16&255,w[51]=St>>>24&255,w[52]=nt>>>0&255,w[53]=nt>>>8&255,w[54]=nt>>>16&255,w[55]=nt>>>24&255,w[56]=zt>>>0&255,w[57]=zt>>>8&255,w[58]=zt>>>16&255,w[59]=zt>>>24&255,w[60]=Yt>>>0&255,w[61]=Yt>>>8&255,w[62]=Yt>>>16&255,w[63]=Yt>>>24&255}function He(w,R,B,h){for(var O=h[0]&255|(h[1]&255)<<8|(h[2]&255)<<16|(h[3]&255)<<24,te=B[0]&255|(B[1]&255)<<8|(B[2]&255)<<16|(B[3]&255)<<24,W=B[4]&255|(B[5]&255)<<8|(B[6]&255)<<16|(B[7]&255)<<24,Ce=B[8]&255|(B[9]&255)<<8|(B[10]&255)<<16|(B[11]&255)<<24,qe=B[12]&255|(B[13]&255)<<8|(B[14]&255)<<16|(B[15]&255)<<24,ft=h[4]&255|(h[5]&255)<<8|(h[6]&255)<<16|(h[7]&255)<<24,st=R[0]&255|(R[1]&255)<<8|(R[2]&255)<<16|(R[3]&255)<<24,Ht=R[4]&255|(R[5]&255)<<8|(R[6]&255)<<16|(R[7]&255)<<24,ct=R[8]&255|(R[9]&255)<<8|(R[10]&255)<<16|(R[11]&255)<<24,Et=R[12]&255|(R[13]&255)<<8|(R[14]&255)<<16|(R[15]&255)<<24,jt=h[8]&255|(h[9]&255)<<8|(h[10]&255)<<16|(h[11]&255)<<24,Ot=B[16]&255|(B[17]&255)<<8|(B[18]&255)<<16|(B[19]&255)<<24,dt=B[20]&255|(B[21]&255)<<8|(B[22]&255)<<16|(B[23]&255)<<24,wt=B[24]&255|(B[25]&255)<<8|(B[26]&255)<<16|(B[27]&255)<<24,xt=B[28]&255|(B[29]&255)<<8|(B[30]&255)<<16|(B[31]&255)<<24,yt=h[12]&255|(h[13]&255)<<8|(h[14]&255)<<16|(h[15]&255)<<24,ot=O,vt=te,tt=W,lt=Ce,ht=qe,at=ft,he=st,ye=Ht,ve=ct,Ee=Et,Ae=jt,je=Ot,St=dt,nt=wt,zt=xt,Yt=yt,z,Kt=0;Kt<20;Kt+=2)z=ot+St|0,ht^=z<<7|z>>>25,z=ht+ot|0,ve^=z<<9|z>>>23,z=ve+ht|0,St^=z<<13|z>>>19,z=St+ve|0,ot^=z<<18|z>>>14,z=at+vt|0,Ee^=z<<7|z>>>25,z=Ee+at|0,nt^=z<<9|z>>>23,z=nt+Ee|0,vt^=z<<13|z>>>19,z=vt+nt|0,at^=z<<18|z>>>14,z=Ae+he|0,zt^=z<<7|z>>>25,z=zt+Ae|0,tt^=z<<9|z>>>23,z=tt+zt|0,he^=z<<13|z>>>19,z=he+tt|0,Ae^=z<<18|z>>>14,z=Yt+je|0,lt^=z<<7|z>>>25,z=lt+Yt|0,ye^=z<<9|z>>>23,z=ye+lt|0,je^=z<<13|z>>>19,z=je+ye|0,Yt^=z<<18|z>>>14,z=ot+lt|0,vt^=z<<7|z>>>25,z=vt+ot|0,tt^=z<<9|z>>>23,z=tt+vt|0,lt^=z<<13|z>>>19,z=lt+tt|0,ot^=z<<18|z>>>14,z=at+ht|0,he^=z<<7|z>>>25,z=he+at|0,ye^=z<<9|z>>>23,z=ye+he|0,ht^=z<<13|z>>>19,z=ht+ye|0,at^=z<<18|z>>>14,z=Ae+Ee|0,je^=z<<7|z>>>25,z=je+Ae|0,ve^=z<<9|z>>>23,z=ve+je|0,Ee^=z<<13|z>>>19,z=Ee+ve|0,Ae^=z<<18|z>>>14,z=Yt+zt|0,St^=z<<7|z>>>25,z=St+Yt|0,nt^=z<<9|z>>>23,z=nt+St|0,zt^=z<<13|z>>>19,z=zt+nt|0,Yt^=z<<18|z>>>14;w[0]=ot>>>0&255,w[1]=ot>>>8&255,w[2]=ot>>>16&255,w[3]=ot>>>24&255,w[4]=at>>>0&255,w[5]=at>>>8&255,w[6]=at>>>16&255,w[7]=at>>>24&255,w[8]=Ae>>>0&255,w[9]=Ae>>>8&255,w[10]=Ae>>>16&255,w[11]=Ae>>>24&255,w[12]=Yt>>>0&255,w[13]=Yt>>>8&255,w[14]=Yt>>>16&255,w[15]=Yt>>>24&255,w[16]=he>>>0&255,w[17]=he>>>8&255,w[18]=he>>>16&255,w[19]=he>>>24&255,w[20]=ye>>>0&255,w[21]=ye>>>8&255,w[22]=ye>>>16&255,w[23]=ye>>>24&255,w[24]=ve>>>0&255,w[25]=ve>>>8&255,w[26]=ve>>>16&255,w[27]=ve>>>24&255,w[28]=Ee>>>0&255,w[29]=Ee>>>8&255,w[30]=Ee>>>16&255,w[31]=Ee>>>24&255}function ut(w,R,B,h){Ke(w,R,B,h)}function $e(w,R,B,h){He(w,R,B,h)}var rt=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function it(w,R,B,h,O,te,W){var Ce=new Uint8Array(16),qe=new Uint8Array(64),ft,st;for(st=0;st<16;st++)Ce[st]=0;for(st=0;st<8;st++)Ce[st]=te[st];for(;O>=64;){for(ut(qe,Ce,W,rt),st=0;st<64;st++)w[R+st]=B[h+st]^qe[st];for(ft=1,st=8;st<16;st++)ft=ft+(Ce[st]&255)|0,Ce[st]=ft&255,ft>>>=8;O-=64,R+=64,h+=64}if(O>0)for(ut(qe,Ce,W,rt),st=0;st<O;st++)w[R+st]=B[h+st]^qe[st];return 0}function Bt(w,R,B,h,O){var te=new Uint8Array(16),W=new Uint8Array(64),Ce,qe;for(qe=0;qe<16;qe++)te[qe]=0;for(qe=0;qe<8;qe++)te[qe]=h[qe];for(;B>=64;){for(ut(W,te,O,rt),qe=0;qe<64;qe++)w[R+qe]=W[qe];for(Ce=1,qe=8;qe<16;qe++)Ce=Ce+(te[qe]&255)|0,te[qe]=Ce&255,Ce>>>=8;B-=64,R+=64}if(B>0)for(ut(W,te,O,rt),qe=0;qe<B;qe++)w[R+qe]=W[qe];return 0}function Pt(w,R,B,h,O){var te=new Uint8Array(32);$e(te,h,O,rt);for(var W=new Uint8Array(8),Ce=0;Ce<8;Ce++)W[Ce]=h[Ce+16];return Bt(w,R,B,W,te)}function ke(w,R,B,h,O,te,W){var Ce=new Uint8Array(32);$e(Ce,te,W,rt);for(var qe=new Uint8Array(8),ft=0;ft<8;ft++)qe[ft]=te[ft+16];return it(w,R,B,h,O,qe,Ce)}var Le=function(w){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var R,B,h,O,te,W,Ce,qe;R=w[0]&255|(w[1]&255)<<8,this.r[0]=R&8191,B=w[2]&255|(w[3]&255)<<8,this.r[1]=(R>>>13|B<<3)&8191,h=w[4]&255|(w[5]&255)<<8,this.r[2]=(B>>>10|h<<6)&7939,O=w[6]&255|(w[7]&255)<<8,this.r[3]=(h>>>7|O<<9)&8191,te=w[8]&255|(w[9]&255)<<8,this.r[4]=(O>>>4|te<<12)&255,this.r[5]=te>>>1&8190,W=w[10]&255|(w[11]&255)<<8,this.r[6]=(te>>>14|W<<2)&8191,Ce=w[12]&255|(w[13]&255)<<8,this.r[7]=(W>>>11|Ce<<5)&8065,qe=w[14]&255|(w[15]&255)<<8,this.r[8]=(Ce>>>8|qe<<8)&8191,this.r[9]=qe>>>5&127,this.pad[0]=w[16]&255|(w[17]&255)<<8,this.pad[1]=w[18]&255|(w[19]&255)<<8,this.pad[2]=w[20]&255|(w[21]&255)<<8,this.pad[3]=w[22]&255|(w[23]&255)<<8,this.pad[4]=w[24]&255|(w[25]&255)<<8,this.pad[5]=w[26]&255|(w[27]&255)<<8,this.pad[6]=w[28]&255|(w[29]&255)<<8,this.pad[7]=w[30]&255|(w[31]&255)<<8};Le.prototype.blocks=function(w,R,B){for(var h=this.fin?0:2048,O,te,W,Ce,qe,ft,st,Ht,ct,Et,jt,Ot,dt,wt,xt,yt,ot,vt,tt,lt=this.h[0],ht=this.h[1],at=this.h[2],he=this.h[3],ye=this.h[4],ve=this.h[5],Ee=this.h[6],Ae=this.h[7],je=this.h[8],St=this.h[9],nt=this.r[0],zt=this.r[1],Yt=this.r[2],z=this.r[3],Kt=this.r[4],It=this.r[5],Gt=this.r[6],Vt=this.r[7],Qt=this.r[8],Ft=this.r[9];B>=16;)O=w[R+0]&255|(w[R+1]&255)<<8,lt+=O&8191,te=w[R+2]&255|(w[R+3]&255)<<8,ht+=(O>>>13|te<<3)&8191,W=w[R+4]&255|(w[R+5]&255)<<8,at+=(te>>>10|W<<6)&8191,Ce=w[R+6]&255|(w[R+7]&255)<<8,he+=(W>>>7|Ce<<9)&8191,qe=w[R+8]&255|(w[R+9]&255)<<8,ye+=(Ce>>>4|qe<<12)&8191,ve+=qe>>>1&8191,ft=w[R+10]&255|(w[R+11]&255)<<8,Ee+=(qe>>>14|ft<<2)&8191,st=w[R+12]&255|(w[R+13]&255)<<8,Ae+=(ft>>>11|st<<5)&8191,Ht=w[R+14]&255|(w[R+15]&255)<<8,je+=(st>>>8|Ht<<8)&8191,St+=Ht>>>5|h,ct=0,Et=ct,Et+=lt*nt,Et+=ht*(5*Ft),Et+=at*(5*Qt),Et+=he*(5*Vt),Et+=ye*(5*Gt),ct=Et>>>13,Et&=8191,Et+=ve*(5*It),Et+=Ee*(5*Kt),Et+=Ae*(5*z),Et+=je*(5*Yt),Et+=St*(5*zt),ct+=Et>>>13,Et&=8191,jt=ct,jt+=lt*zt,jt+=ht*nt,jt+=at*(5*Ft),jt+=he*(5*Qt),jt+=ye*(5*Vt),ct=jt>>>13,jt&=8191,jt+=ve*(5*Gt),jt+=Ee*(5*It),jt+=Ae*(5*Kt),jt+=je*(5*z),jt+=St*(5*Yt),ct+=jt>>>13,jt&=8191,Ot=ct,Ot+=lt*Yt,Ot+=ht*zt,Ot+=at*nt,Ot+=he*(5*Ft),Ot+=ye*(5*Qt),ct=Ot>>>13,Ot&=8191,Ot+=ve*(5*Vt),Ot+=Ee*(5*Gt),Ot+=Ae*(5*It),Ot+=je*(5*Kt),Ot+=St*(5*z),ct+=Ot>>>13,Ot&=8191,dt=ct,dt+=lt*z,dt+=ht*Yt,dt+=at*zt,dt+=he*nt,dt+=ye*(5*Ft),ct=dt>>>13,dt&=8191,dt+=ve*(5*Qt),dt+=Ee*(5*Vt),dt+=Ae*(5*Gt),dt+=je*(5*It),dt+=St*(5*Kt),ct+=dt>>>13,dt&=8191,wt=ct,wt+=lt*Kt,wt+=ht*z,wt+=at*Yt,wt+=he*zt,wt+=ye*nt,ct=wt>>>13,wt&=8191,wt+=ve*(5*Ft),wt+=Ee*(5*Qt),wt+=Ae*(5*Vt),wt+=je*(5*Gt),wt+=St*(5*It),ct+=wt>>>13,wt&=8191,xt=ct,xt+=lt*It,xt+=ht*Kt,xt+=at*z,xt+=he*Yt,xt+=ye*zt,ct=xt>>>13,xt&=8191,xt+=ve*nt,xt+=Ee*(5*Ft),xt+=Ae*(5*Qt),xt+=je*(5*Vt),xt+=St*(5*Gt),ct+=xt>>>13,xt&=8191,yt=ct,yt+=lt*Gt,yt+=ht*It,yt+=at*Kt,yt+=he*z,yt+=ye*Yt,ct=yt>>>13,yt&=8191,yt+=ve*zt,yt+=Ee*nt,yt+=Ae*(5*Ft),yt+=je*(5*Qt),yt+=St*(5*Vt),ct+=yt>>>13,yt&=8191,ot=ct,ot+=lt*Vt,ot+=ht*Gt,ot+=at*It,ot+=he*Kt,ot+=ye*z,ct=ot>>>13,ot&=8191,ot+=ve*Yt,ot+=Ee*zt,ot+=Ae*nt,ot+=je*(5*Ft),ot+=St*(5*Qt),ct+=ot>>>13,ot&=8191,vt=ct,vt+=lt*Qt,vt+=ht*Vt,vt+=at*Gt,vt+=he*It,vt+=ye*Kt,ct=vt>>>13,vt&=8191,vt+=ve*z,vt+=Ee*Yt,vt+=Ae*zt,vt+=je*nt,vt+=St*(5*Ft),ct+=vt>>>13,vt&=8191,tt=ct,tt+=lt*Ft,tt+=ht*Qt,tt+=at*Vt,tt+=he*Gt,tt+=ye*It,ct=tt>>>13,tt&=8191,tt+=ve*Kt,tt+=Ee*z,tt+=Ae*Yt,tt+=je*zt,tt+=St*nt,ct+=tt>>>13,tt&=8191,ct=(ct<<2)+ct|0,ct=ct+Et|0,Et=ct&8191,ct=ct>>>13,jt+=ct,lt=Et,ht=jt,at=Ot,he=dt,ye=wt,ve=xt,Ee=yt,Ae=ot,je=vt,St=tt,R+=16,B-=16;this.h[0]=lt,this.h[1]=ht,this.h[2]=at,this.h[3]=he,this.h[4]=ye,this.h[5]=ve,this.h[6]=Ee,this.h[7]=Ae,this.h[8]=je,this.h[9]=St},Le.prototype.finish=function(w,R){var B=new Uint16Array(10),h,O,te,W;if(this.leftover){for(W=this.leftover,this.buffer[W++]=1;W<16;W++)this.buffer[W]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(h=this.h[1]>>>13,this.h[1]&=8191,W=2;W<10;W++)this.h[W]+=h,h=this.h[W]>>>13,this.h[W]&=8191;for(this.h[0]+=h*5,h=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=h,h=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=h,B[0]=this.h[0]+5,h=B[0]>>>13,B[0]&=8191,W=1;W<10;W++)B[W]=this.h[W]+h,h=B[W]>>>13,B[W]&=8191;for(B[9]-=8192,O=(h^1)-1,W=0;W<10;W++)B[W]&=O;for(O=~O,W=0;W<10;W++)this.h[W]=this.h[W]&O|B[W];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,te=this.h[0]+this.pad[0],this.h[0]=te&65535,W=1;W<8;W++)te=(this.h[W]+this.pad[W]|0)+(te>>>16)|0,this.h[W]=te&65535;w[R+0]=this.h[0]>>>0&255,w[R+1]=this.h[0]>>>8&255,w[R+2]=this.h[1]>>>0&255,w[R+3]=this.h[1]>>>8&255,w[R+4]=this.h[2]>>>0&255,w[R+5]=this.h[2]>>>8&255,w[R+6]=this.h[3]>>>0&255,w[R+7]=this.h[3]>>>8&255,w[R+8]=this.h[4]>>>0&255,w[R+9]=this.h[4]>>>8&255,w[R+10]=this.h[5]>>>0&255,w[R+11]=this.h[5]>>>8&255,w[R+12]=this.h[6]>>>0&255,w[R+13]=this.h[6]>>>8&255,w[R+14]=this.h[7]>>>0&255,w[R+15]=this.h[7]>>>8&255},Le.prototype.update=function(w,R,B){var h,O;if(this.leftover){for(O=16-this.leftover,O>B&&(O=B),h=0;h<O;h++)this.buffer[this.leftover+h]=w[R+h];if(B-=O,R+=O,this.leftover+=O,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(B>=16&&(O=B-B%16,this.blocks(w,R,O),R+=O,B-=O),B){for(h=0;h<B;h++)this.buffer[this.leftover+h]=w[R+h];this.leftover+=B}};function Se(w,R,B,h,O,te){var W=new Le(te);return W.update(B,h,O),W.finish(w,R),0}function xe(w,R,B,h,O,te){var W=new Uint8Array(16);return Se(W,0,B,h,O,te),Pe(w,R,W,0)}function At(w,R,B,h,O){var te;if(B<32)return-1;for(ke(w,0,R,0,B,h,O),Se(w,16,w,32,B-32,w),te=0;te<16;te++)w[te]=0;return 0}function Ze(w,R,B,h,O){var te,W=new Uint8Array(32);if(B<32||(Pt(W,0,32,h,O),xe(R,16,R,32,B-32,W)!==0))return-1;for(ke(w,0,R,0,B,h,O),te=0;te<32;te++)w[te]=0;return 0}function se(w,R){var B;for(B=0;B<16;B++)w[B]=R[B]|0}function Ue(w){var R,B,h=1;for(R=0;R<16;R++)B=w[R]+h+65535,h=Math.floor(B/65536),w[R]=B-h*65536;w[0]+=h-1+37*(h-1)}function Ie(w,R,B){for(var h,O=~(B-1),te=0;te<16;te++)h=O&(w[te]^R[te]),w[te]^=h,R[te]^=h}function Re(w,R){var B,h,O,te=i(),W=i();for(B=0;B<16;B++)W[B]=R[B];for(Ue(W),Ue(W),Ue(W),h=0;h<2;h++){for(te[0]=W[0]-65517,B=1;B<15;B++)te[B]=W[B]-65535-(te[B-1]>>16&1),te[B-1]&=65535;te[15]=W[15]-32767-(te[14]>>16&1),O=te[15]>>16&1,te[14]&=65535,Ie(W,te,1-O)}for(B=0;B<16;B++)w[2*B]=W[B]&255,w[2*B+1]=W[B]>>8}function Qe(w,R){var B=new Uint8Array(32),h=new Uint8Array(32);return Re(B,w),Re(h,R),pt(B,0,h,0)}function K(w){var R=new Uint8Array(32);return Re(R,w),R[0]&1}function me(w,R){var B;for(B=0;B<16;B++)w[B]=R[2*B]+(R[2*B+1]<<8);w[15]&=32767}function De(w,R,B){for(var h=0;h<16;h++)w[h]=R[h]+B[h]}function Ge(w,R,B){for(var h=0;h<16;h++)w[h]=R[h]-B[h]}function Ve(w,R,B){var h,O,te=0,W=0,Ce=0,qe=0,ft=0,st=0,Ht=0,ct=0,Et=0,jt=0,Ot=0,dt=0,wt=0,xt=0,yt=0,ot=0,vt=0,tt=0,lt=0,ht=0,at=0,he=0,ye=0,ve=0,Ee=0,Ae=0,je=0,St=0,nt=0,zt=0,Yt=0,z=B[0],Kt=B[1],It=B[2],Gt=B[3],Vt=B[4],Qt=B[5],Ft=B[6],An=B[7],tn=B[8],un=B[9],Rn=B[10],Mt=B[11],yn=B[12],Yn=B[13],Mn=B[14],fn=B[15];h=R[0],te+=h*z,W+=h*Kt,Ce+=h*It,qe+=h*Gt,ft+=h*Vt,st+=h*Qt,Ht+=h*Ft,ct+=h*An,Et+=h*tn,jt+=h*un,Ot+=h*Rn,dt+=h*Mt,wt+=h*yn,xt+=h*Yn,yt+=h*Mn,ot+=h*fn,h=R[1],W+=h*z,Ce+=h*Kt,qe+=h*It,ft+=h*Gt,st+=h*Vt,Ht+=h*Qt,ct+=h*Ft,Et+=h*An,jt+=h*tn,Ot+=h*un,dt+=h*Rn,wt+=h*Mt,xt+=h*yn,yt+=h*Yn,ot+=h*Mn,vt+=h*fn,h=R[2],Ce+=h*z,qe+=h*Kt,ft+=h*It,st+=h*Gt,Ht+=h*Vt,ct+=h*Qt,Et+=h*Ft,jt+=h*An,Ot+=h*tn,dt+=h*un,wt+=h*Rn,xt+=h*Mt,yt+=h*yn,ot+=h*Yn,vt+=h*Mn,tt+=h*fn,h=R[3],qe+=h*z,ft+=h*Kt,st+=h*It,Ht+=h*Gt,ct+=h*Vt,Et+=h*Qt,jt+=h*Ft,Ot+=h*An,dt+=h*tn,wt+=h*un,xt+=h*Rn,yt+=h*Mt,ot+=h*yn,vt+=h*Yn,tt+=h*Mn,lt+=h*fn,h=R[4],ft+=h*z,st+=h*Kt,Ht+=h*It,ct+=h*Gt,Et+=h*Vt,jt+=h*Qt,Ot+=h*Ft,dt+=h*An,wt+=h*tn,xt+=h*un,yt+=h*Rn,ot+=h*Mt,vt+=h*yn,tt+=h*Yn,lt+=h*Mn,ht+=h*fn,h=R[5],st+=h*z,Ht+=h*Kt,ct+=h*It,Et+=h*Gt,jt+=h*Vt,Ot+=h*Qt,dt+=h*Ft,wt+=h*An,xt+=h*tn,yt+=h*un,ot+=h*Rn,vt+=h*Mt,tt+=h*yn,lt+=h*Yn,ht+=h*Mn,at+=h*fn,h=R[6],Ht+=h*z,ct+=h*Kt,Et+=h*It,jt+=h*Gt,Ot+=h*Vt,dt+=h*Qt,wt+=h*Ft,xt+=h*An,yt+=h*tn,ot+=h*un,vt+=h*Rn,tt+=h*Mt,lt+=h*yn,ht+=h*Yn,at+=h*Mn,he+=h*fn,h=R[7],ct+=h*z,Et+=h*Kt,jt+=h*It,Ot+=h*Gt,dt+=h*Vt,wt+=h*Qt,xt+=h*Ft,yt+=h*An,ot+=h*tn,vt+=h*un,tt+=h*Rn,lt+=h*Mt,ht+=h*yn,at+=h*Yn,he+=h*Mn,ye+=h*fn,h=R[8],Et+=h*z,jt+=h*Kt,Ot+=h*It,dt+=h*Gt,wt+=h*Vt,xt+=h*Qt,yt+=h*Ft,ot+=h*An,vt+=h*tn,tt+=h*un,lt+=h*Rn,ht+=h*Mt,at+=h*yn,he+=h*Yn,ye+=h*Mn,ve+=h*fn,h=R[9],jt+=h*z,Ot+=h*Kt,dt+=h*It,wt+=h*Gt,xt+=h*Vt,yt+=h*Qt,ot+=h*Ft,vt+=h*An,tt+=h*tn,lt+=h*un,ht+=h*Rn,at+=h*Mt,he+=h*yn,ye+=h*Yn,ve+=h*Mn,Ee+=h*fn,h=R[10],Ot+=h*z,dt+=h*Kt,wt+=h*It,xt+=h*Gt,yt+=h*Vt,ot+=h*Qt,vt+=h*Ft,tt+=h*An,lt+=h*tn,ht+=h*un,at+=h*Rn,he+=h*Mt,ye+=h*yn,ve+=h*Yn,Ee+=h*Mn,Ae+=h*fn,h=R[11],dt+=h*z,wt+=h*Kt,xt+=h*It,yt+=h*Gt,ot+=h*Vt,vt+=h*Qt,tt+=h*Ft,lt+=h*An,ht+=h*tn,at+=h*un,he+=h*Rn,ye+=h*Mt,ve+=h*yn,Ee+=h*Yn,Ae+=h*Mn,je+=h*fn,h=R[12],wt+=h*z,xt+=h*Kt,yt+=h*It,ot+=h*Gt,vt+=h*Vt,tt+=h*Qt,lt+=h*Ft,ht+=h*An,at+=h*tn,he+=h*un,ye+=h*Rn,ve+=h*Mt,Ee+=h*yn,Ae+=h*Yn,je+=h*Mn,St+=h*fn,h=R[13],xt+=h*z,yt+=h*Kt,ot+=h*It,vt+=h*Gt,tt+=h*Vt,lt+=h*Qt,ht+=h*Ft,at+=h*An,he+=h*tn,ye+=h*un,ve+=h*Rn,Ee+=h*Mt,Ae+=h*yn,je+=h*Yn,St+=h*Mn,nt+=h*fn,h=R[14],yt+=h*z,ot+=h*Kt,vt+=h*It,tt+=h*Gt,lt+=h*Vt,ht+=h*Qt,at+=h*Ft,he+=h*An,ye+=h*tn,ve+=h*un,Ee+=h*Rn,Ae+=h*Mt,je+=h*yn,St+=h*Yn,nt+=h*Mn,zt+=h*fn,h=R[15],ot+=h*z,vt+=h*Kt,tt+=h*It,lt+=h*Gt,ht+=h*Vt,at+=h*Qt,he+=h*Ft,ye+=h*An,ve+=h*tn,Ee+=h*un,Ae+=h*Rn,je+=h*Mt,St+=h*yn,nt+=h*Yn,zt+=h*Mn,Yt+=h*fn,te+=38*vt,W+=38*tt,Ce+=38*lt,qe+=38*ht,ft+=38*at,st+=38*he,Ht+=38*ye,ct+=38*ve,Et+=38*Ee,jt+=38*Ae,Ot+=38*je,dt+=38*St,wt+=38*nt,xt+=38*zt,yt+=38*Yt,O=1,h=te+O+65535,O=Math.floor(h/65536),te=h-O*65536,h=W+O+65535,O=Math.floor(h/65536),W=h-O*65536,h=Ce+O+65535,O=Math.floor(h/65536),Ce=h-O*65536,h=qe+O+65535,O=Math.floor(h/65536),qe=h-O*65536,h=ft+O+65535,O=Math.floor(h/65536),ft=h-O*65536,h=st+O+65535,O=Math.floor(h/65536),st=h-O*65536,h=Ht+O+65535,O=Math.floor(h/65536),Ht=h-O*65536,h=ct+O+65535,O=Math.floor(h/65536),ct=h-O*65536,h=Et+O+65535,O=Math.floor(h/65536),Et=h-O*65536,h=jt+O+65535,O=Math.floor(h/65536),jt=h-O*65536,h=Ot+O+65535,O=Math.floor(h/65536),Ot=h-O*65536,h=dt+O+65535,O=Math.floor(h/65536),dt=h-O*65536,h=wt+O+65535,O=Math.floor(h/65536),wt=h-O*65536,h=xt+O+65535,O=Math.floor(h/65536),xt=h-O*65536,h=yt+O+65535,O=Math.floor(h/65536),yt=h-O*65536,h=ot+O+65535,O=Math.floor(h/65536),ot=h-O*65536,te+=O-1+37*(O-1),O=1,h=te+O+65535,O=Math.floor(h/65536),te=h-O*65536,h=W+O+65535,O=Math.floor(h/65536),W=h-O*65536,h=Ce+O+65535,O=Math.floor(h/65536),Ce=h-O*65536,h=qe+O+65535,O=Math.floor(h/65536),qe=h-O*65536,h=ft+O+65535,O=Math.floor(h/65536),ft=h-O*65536,h=st+O+65535,O=Math.floor(h/65536),st=h-O*65536,h=Ht+O+65535,O=Math.floor(h/65536),Ht=h-O*65536,h=ct+O+65535,O=Math.floor(h/65536),ct=h-O*65536,h=Et+O+65535,O=Math.floor(h/65536),Et=h-O*65536,h=jt+O+65535,O=Math.floor(h/65536),jt=h-O*65536,h=Ot+O+65535,O=Math.floor(h/65536),Ot=h-O*65536,h=dt+O+65535,O=Math.floor(h/65536),dt=h-O*65536,h=wt+O+65535,O=Math.floor(h/65536),wt=h-O*65536,h=xt+O+65535,O=Math.floor(h/65536),xt=h-O*65536,h=yt+O+65535,O=Math.floor(h/65536),yt=h-O*65536,h=ot+O+65535,O=Math.floor(h/65536),ot=h-O*65536,te+=O-1+37*(O-1),w[0]=te,w[1]=W,w[2]=Ce,w[3]=qe,w[4]=ft,w[5]=st,w[6]=Ht,w[7]=ct,w[8]=Et,w[9]=jt,w[10]=Ot,w[11]=dt,w[12]=wt,w[13]=xt,w[14]=yt,w[15]=ot}function Me(w,R){Ve(w,R,R)}function gt(w,R){var B=i(),h;for(h=0;h<16;h++)B[h]=R[h];for(h=253;h>=0;h--)Me(B,B),h!==2&&h!==4&&Ve(B,B,R);for(h=0;h<16;h++)w[h]=B[h]}function Ct(w,R){var B=i(),h;for(h=0;h<16;h++)B[h]=R[h];for(h=250;h>=0;h--)Me(B,B),h!==1&&Ve(B,B,R);for(h=0;h<16;h++)w[h]=B[h]}function ze(w,R,B){var h=new Uint8Array(32),O=new Float64Array(80),te,W,Ce=i(),qe=i(),ft=i(),st=i(),Ht=i(),ct=i();for(W=0;W<31;W++)h[W]=R[W];for(h[31]=R[31]&127|64,h[0]&=248,me(O,B),W=0;W<16;W++)qe[W]=O[W],st[W]=Ce[W]=ft[W]=0;for(Ce[0]=st[0]=1,W=254;W>=0;--W)te=h[W>>>3]>>>(W&7)&1,Ie(Ce,qe,te),Ie(ft,st,te),De(Ht,Ce,ft),Ge(Ce,Ce,ft),De(ft,qe,st),Ge(qe,qe,st),Me(st,Ht),Me(ct,Ce),Ve(Ce,ft,Ce),Ve(ft,qe,Ht),De(Ht,Ce,ft),Ge(Ce,Ce,ft),Me(qe,Ce),Ge(ft,st,ct),Ve(Ce,ft,b),De(Ce,Ce,st),Ve(ft,ft,Ce),Ve(Ce,st,ct),Ve(st,qe,O),Me(qe,Ht),Ie(Ce,qe,te),Ie(ft,st,te);for(W=0;W<16;W++)O[W+16]=Ce[W],O[W+32]=ft[W],O[W+48]=qe[W],O[W+64]=st[W];var Et=O.subarray(32),jt=O.subarray(16);return gt(Et,Et),Ve(jt,jt,Et),Re(w,jt),0}function Fe(w,R){return ze(w,R,g)}function Rt(w,R){return s(R,32),Fe(w,R)}function mt(w,R,B){var h=new Uint8Array(32);return ze(h,B,R),$e(w,u,h,rt)}var gn=At,rn=Ze;function kt(w,R,B,h,O,te){var W=new Uint8Array(32);return mt(W,O,te),gn(w,R,B,h,W)}function Dt(w,R,B,h,O,te){var W=new Uint8Array(32);return mt(W,O,te),rn(w,R,B,h,W)}var Mr=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function pr(w,R,B,h){for(var O=new Int32Array(16),te=new Int32Array(16),W,Ce,qe,ft,st,Ht,ct,Et,jt,Ot,dt,wt,xt,yt,ot,vt,tt,lt,ht,at,he,ye,ve,Ee,Ae,je,St=w[0],nt=w[1],zt=w[2],Yt=w[3],z=w[4],Kt=w[5],It=w[6],Gt=w[7],Vt=R[0],Qt=R[1],Ft=R[2],An=R[3],tn=R[4],un=R[5],Rn=R[6],Mt=R[7],yn=0;h>=128;){for(ht=0;ht<16;ht++)at=8*ht+yn,O[ht]=B[at+0]<<24|B[at+1]<<16|B[at+2]<<8|B[at+3],te[ht]=B[at+4]<<24|B[at+5]<<16|B[at+6]<<8|B[at+7];for(ht=0;ht<80;ht++)if(W=St,Ce=nt,qe=zt,ft=Yt,st=z,Ht=Kt,ct=It,Et=Gt,jt=Vt,Ot=Qt,dt=Ft,wt=An,xt=tn,yt=un,ot=Rn,vt=Mt,he=Gt,ye=Mt,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,je=he>>>16,he=(z>>>14|tn<<18)^(z>>>18|tn<<14)^(tn>>>9|z<<23),ye=(tn>>>14|z<<18)^(tn>>>18|z<<14)^(z>>>9|tn<<23),ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,he=z&Kt^~z&It,ye=tn&un^~tn&Rn,ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,he=Mr[ht*2],ye=Mr[ht*2+1],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,he=O[ht%16],ye=te[ht%16],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,je+=Ae>>>16,tt=Ae&65535|je<<16,lt=ve&65535|Ee<<16,he=tt,ye=lt,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,je=he>>>16,he=(St>>>28|Vt<<4)^(Vt>>>2|St<<30)^(Vt>>>7|St<<25),ye=(Vt>>>28|St<<4)^(St>>>2|Vt<<30)^(St>>>7|Vt<<25),ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,he=St&nt^St&zt^nt&zt,ye=Vt&Qt^Vt&Ft^Qt&Ft,ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,je+=Ae>>>16,Et=Ae&65535|je<<16,vt=ve&65535|Ee<<16,he=ft,ye=wt,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,je=he>>>16,he=tt,ye=lt,ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,je+=Ae>>>16,ft=Ae&65535|je<<16,wt=ve&65535|Ee<<16,nt=W,zt=Ce,Yt=qe,z=ft,Kt=st,It=Ht,Gt=ct,St=Et,Qt=jt,Ft=Ot,An=dt,tn=wt,un=xt,Rn=yt,Mt=ot,Vt=vt,ht%16===15)for(at=0;at<16;at++)he=O[at],ye=te[at],ve=ye&65535,Ee=ye>>>16,Ae=he&65535,je=he>>>16,he=O[(at+9)%16],ye=te[(at+9)%16],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,tt=O[(at+1)%16],lt=te[(at+1)%16],he=(tt>>>1|lt<<31)^(tt>>>8|lt<<24)^tt>>>7,ye=(lt>>>1|tt<<31)^(lt>>>8|tt<<24)^(lt>>>7|tt<<25),ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,tt=O[(at+14)%16],lt=te[(at+14)%16],he=(tt>>>19|lt<<13)^(lt>>>29|tt<<3)^tt>>>6,ye=(lt>>>19|tt<<13)^(tt>>>29|lt<<3)^(lt>>>6|tt<<26),ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,je+=Ae>>>16,O[at]=Ae&65535|je<<16,te[at]=ve&65535|Ee<<16;he=St,ye=Vt,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,je=he>>>16,he=w[0],ye=R[0],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,je+=Ae>>>16,w[0]=St=Ae&65535|je<<16,R[0]=Vt=ve&65535|Ee<<16,he=nt,ye=Qt,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,je=he>>>16,he=w[1],ye=R[1],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,je+=Ae>>>16,w[1]=nt=Ae&65535|je<<16,R[1]=Qt=ve&65535|Ee<<16,he=zt,ye=Ft,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,je=he>>>16,he=w[2],ye=R[2],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,je+=Ae>>>16,w[2]=zt=Ae&65535|je<<16,R[2]=Ft=ve&65535|Ee<<16,he=Yt,ye=An,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,je=he>>>16,he=w[3],ye=R[3],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,je+=Ae>>>16,w[3]=Yt=Ae&65535|je<<16,R[3]=An=ve&65535|Ee<<16,he=z,ye=tn,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,je=he>>>16,he=w[4],ye=R[4],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,je+=Ae>>>16,w[4]=z=Ae&65535|je<<16,R[4]=tn=ve&65535|Ee<<16,he=Kt,ye=un,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,je=he>>>16,he=w[5],ye=R[5],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,je+=Ae>>>16,w[5]=Kt=Ae&65535|je<<16,R[5]=un=ve&65535|Ee<<16,he=It,ye=Rn,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,je=he>>>16,he=w[6],ye=R[6],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,je+=Ae>>>16,w[6]=It=Ae&65535|je<<16,R[6]=Rn=ve&65535|Ee<<16,he=Gt,ye=Mt,ve=ye&65535,Ee=ye>>>16,Ae=he&65535,je=he>>>16,he=w[7],ye=R[7],ve+=ye&65535,Ee+=ye>>>16,Ae+=he&65535,je+=he>>>16,Ee+=ve>>>16,Ae+=Ee>>>16,je+=Ae>>>16,w[7]=Gt=Ae&65535|je<<16,R[7]=Mt=ve&65535|Ee<<16,yn+=128,h-=128}return h}function Zn(w,R,B){var h=new Int32Array(8),O=new Int32Array(8),te=new Uint8Array(256),W,Ce=B;for(h[0]=1779033703,h[1]=3144134277,h[2]=1013904242,h[3]=2773480762,h[4]=1359893119,h[5]=2600822924,h[6]=528734635,h[7]=1541459225,O[0]=4089235720,O[1]=2227873595,O[2]=4271175723,O[3]=1595750129,O[4]=2917565137,O[5]=725511199,O[6]=4215389547,O[7]=327033209,pr(h,O,R,B),B%=128,W=0;W<B;W++)te[W]=R[Ce-B+W];for(te[B]=128,B=256-128*(B<112?1:0),te[B-9]=0,ge(te,B-8,Ce/536870912|0,Ce<<3),pr(h,O,te,B),W=0;W<8;W++)ge(w,8*W,h[W],O[W]);return 0}function wn(w,R){var B=i(),h=i(),O=i(),te=i(),W=i(),Ce=i(),qe=i(),ft=i(),st=i();Ge(B,w[1],w[0]),Ge(st,R[1],R[0]),Ve(B,B,st),De(h,w[0],w[1]),De(st,R[0],R[1]),Ve(h,h,st),Ve(O,w[3],R[3]),Ve(O,O,_),Ve(te,w[2],R[2]),De(te,te,te),Ge(W,h,B),Ge(Ce,te,O),De(qe,te,O),De(ft,h,B),Ve(w[0],W,Ce),Ve(w[1],ft,qe),Ve(w[2],qe,Ce),Ve(w[3],W,ft)}function mn(w,R,B){var h;for(h=0;h<4;h++)Ie(w[h],R[h],B)}function Qr(w,R){var B=i(),h=i(),O=i();gt(O,R[2]),Ve(B,R[0],O),Ve(h,R[1],O),Re(w,h),w[31]^=K(B)<<7}function Cr(w,R,B){var h,O;for(se(w[0],A),se(w[1],M),se(w[2],M),se(w[3],A),O=255;O>=0;--O)h=B[O/8|0]>>(O&7)&1,mn(w,R,h),wn(R,w),wn(w,w),mn(w,R,h)}function On(w,R){var B=[i(),i(),i(),i()];se(B[0],j),se(B[1],L),se(B[2],M),Ve(B[3],j,L),Cr(w,B,R)}function Lr(w,R,B){var h=new Uint8Array(64),O=[i(),i(),i(),i()],te;for(B||s(R,32),Zn(h,R,32),h[0]&=248,h[31]&=127,h[31]|=64,On(O,h),Qr(w,O),te=0;te<32;te++)R[te+32]=w[te];return 0}var gr=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function wr(w,R){var B,h,O,te;for(h=63;h>=32;--h){for(B=0,O=h-32,te=h-12;O<te;++O)R[O]+=B-16*R[h]*gr[O-(h-32)],B=Math.floor((R[O]+128)/256),R[O]-=B*256;R[O]+=B,R[h]=0}for(B=0,O=0;O<32;O++)R[O]+=B-(R[31]>>4)*gr[O],B=R[O]>>8,R[O]&=255;for(O=0;O<32;O++)R[O]-=B*gr[O];for(h=0;h<32;h++)R[h+1]+=R[h]>>8,w[h]=R[h]&255}function Jr(w){var R=new Float64Array(64),B;for(B=0;B<64;B++)R[B]=w[B];for(B=0;B<64;B++)w[B]=0;wr(w,R)}function ha(w,R,B,h){var O=new Uint8Array(64),te=new Uint8Array(64),W=new Uint8Array(64),Ce,qe,ft=new Float64Array(64),st=[i(),i(),i(),i()];Zn(O,h,32),O[0]&=248,O[31]&=127,O[31]|=64;var Ht=B+64;for(Ce=0;Ce<B;Ce++)w[64+Ce]=R[Ce];for(Ce=0;Ce<32;Ce++)w[32+Ce]=O[32+Ce];for(Zn(W,w.subarray(32),B+32),Jr(W),On(st,W),Qr(w,st),Ce=32;Ce<64;Ce++)w[Ce]=h[Ce];for(Zn(te,w,B+64),Jr(te),Ce=0;Ce<64;Ce++)ft[Ce]=0;for(Ce=0;Ce<32;Ce++)ft[Ce]=W[Ce];for(Ce=0;Ce<32;Ce++)for(qe=0;qe<32;qe++)ft[Ce+qe]+=te[Ce]*O[qe];return wr(w.subarray(32),ft),Ht}function Ua(w,R){var B=i(),h=i(),O=i(),te=i(),W=i(),Ce=i(),qe=i();return se(w[2],M),me(w[1],R),Me(O,w[1]),Ve(te,O,S),Ge(O,O,w[2]),De(te,w[2],te),Me(W,te),Me(Ce,W),Ve(qe,Ce,W),Ve(B,qe,O),Ve(B,B,te),Ct(B,B),Ve(B,B,O),Ve(B,B,te),Ve(B,B,te),Ve(w[0],B,te),Me(h,w[0]),Ve(h,h,te),Qe(h,O)&&Ve(w[0],w[0],X),Me(h,w[0]),Ve(h,h,te),Qe(h,O)?-1:(K(w[0])===R[31]>>7&&Ge(w[0],A,w[0]),Ve(w[3],w[0],w[1]),0)}function pa(w,R,B,h){var O,te=new Uint8Array(32),W=new Uint8Array(64),Ce=[i(),i(),i(),i()],qe=[i(),i(),i(),i()];if(B<64||Ua(qe,h))return-1;for(O=0;O<B;O++)w[O]=R[O];for(O=0;O<32;O++)w[O+32]=h[O];if(Zn(W,w,B),Jr(W),Cr(Ce,qe,W),On(qe,R.subarray(32)),wn(Ce,qe),Qr(te,Ce),B-=64,pt(R,0,te,0)){for(O=0;O<B;O++)w[O]=0;return-1}for(O=0;O<B;O++)w[O]=R[O+64];return B}var zr=32,ar=24,In=32,Tn=16,et=32,ir=32,sr=32,Zr=32,Xe=32,mr=ar,Aa=In,Yr=Tn,yr=64,or=32,zn=64,Xr=32,Jt=64;r.lowlevel={crypto_core_hsalsa20:$e,crypto_stream_xor:ke,crypto_stream:Pt,crypto_stream_salsa20_xor:it,crypto_stream_salsa20:Bt,crypto_onetimeauth:Se,crypto_onetimeauth_verify:xe,crypto_verify_16:Pe,crypto_verify_32:pt,crypto_secretbox:At,crypto_secretbox_open:Ze,crypto_scalarmult:ze,crypto_scalarmult_base:Fe,crypto_box_beforenm:mt,crypto_box_afternm:gn,crypto_box:kt,crypto_box_open:Dt,crypto_box_keypair:Rt,crypto_hash:Zn,crypto_sign:ha,crypto_sign_keypair:Lr,crypto_sign_open:pa,crypto_secretbox_KEYBYTES:zr,crypto_secretbox_NONCEBYTES:ar,crypto_secretbox_ZEROBYTES:In,crypto_secretbox_BOXZEROBYTES:Tn,crypto_scalarmult_BYTES:et,crypto_scalarmult_SCALARBYTES:ir,crypto_box_PUBLICKEYBYTES:sr,crypto_box_SECRETKEYBYTES:Zr,crypto_box_BEFORENMBYTES:Xe,crypto_box_NONCEBYTES:mr,crypto_box_ZEROBYTES:Aa,crypto_box_BOXZEROBYTES:Yr,crypto_sign_BYTES:yr,crypto_sign_PUBLICKEYBYTES:or,crypto_sign_SECRETKEYBYTES:zn,crypto_sign_SEEDBYTES:Xr,crypto_hash_BYTES:Jt,gf:i,D:S,L:gr,pack25519:Re,unpack25519:me,M:Ve,A:De,S:Me,Z:Ge,pow2523:Ct,add:wn,set25519:se,modL:wr,scalarmult:Cr,scalarbase:On};function _r(w,R){if(w.length!==zr)throw new Error("bad key size");if(R.length!==ar)throw new Error("bad nonce size")}function Sr(w,R){if(w.length!==sr)throw new Error("bad public key size");if(R.length!==Zr)throw new Error("bad secret key size")}function Sn(){for(var w=0;w<arguments.length;w++)if(!(arguments[w]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function vn(w){for(var R=0;R<w.length;R++)w[R]=0}r.randomBytes=function(w){var R=new Uint8Array(w);return s(R,w),R},r.secretbox=function(w,R,B){Sn(w,R,B),_r(B,R);for(var h=new Uint8Array(In+w.length),O=new Uint8Array(h.length),te=0;te<w.length;te++)h[te+In]=w[te];return At(O,h,h.length,R,B),O.subarray(Tn)},r.secretbox.open=function(w,R,B){Sn(w,R,B),_r(B,R);for(var h=new Uint8Array(Tn+w.length),O=new Uint8Array(h.length),te=0;te<w.length;te++)h[te+Tn]=w[te];return h.length<32||Ze(O,h,h.length,R,B)!==0?null:O.subarray(In)},r.secretbox.keyLength=zr,r.secretbox.nonceLength=ar,r.secretbox.overheadLength=Tn,r.scalarMult=function(w,R){if(Sn(w,R),w.length!==ir)throw new Error("bad n size");if(R.length!==et)throw new Error("bad p size");var B=new Uint8Array(et);return ze(B,w,R),B},r.scalarMult.base=function(w){if(Sn(w),w.length!==ir)throw new Error("bad n size");var R=new Uint8Array(et);return Fe(R,w),R},r.scalarMult.scalarLength=ir,r.scalarMult.groupElementLength=et,r.box=function(w,R,B,h){var O=r.box.before(B,h);return r.secretbox(w,R,O)},r.box.before=function(w,R){Sn(w,R),Sr(w,R);var B=new Uint8Array(Xe);return mt(B,w,R),B},r.box.after=r.secretbox,r.box.open=function(w,R,B,h){var O=r.box.before(B,h);return r.secretbox.open(w,R,O)},r.box.open.after=r.secretbox.open,r.box.keyPair=function(){var w=new Uint8Array(sr),R=new Uint8Array(Zr);return Rt(w,R),{publicKey:w,secretKey:R}},r.box.keyPair.fromSecretKey=function(w){if(Sn(w),w.length!==Zr)throw new Error("bad secret key size");var R=new Uint8Array(sr);return Fe(R,w),{publicKey:R,secretKey:new Uint8Array(w)}},r.box.publicKeyLength=sr,r.box.secretKeyLength=Zr,r.box.sharedKeyLength=Xe,r.box.nonceLength=mr,r.box.overheadLength=r.secretbox.overheadLength,r.sign=function(w,R){if(Sn(w,R),R.length!==zn)throw new Error("bad secret key size");var B=new Uint8Array(yr+w.length);return ha(B,w,w.length,R),B},r.sign.open=function(w,R){if(Sn(w,R),R.length!==or)throw new Error("bad public key size");var B=new Uint8Array(w.length),h=pa(B,w,w.length,R);if(h<0)return null;for(var O=new Uint8Array(h),te=0;te<O.length;te++)O[te]=B[te];return O},r.sign.detached=function(w,R){for(var B=r.sign(w,R),h=new Uint8Array(yr),O=0;O<h.length;O++)h[O]=B[O];return h},r.sign.detached.verify=function(w,R,B){if(Sn(w,R,B),R.length!==yr)throw new Error("bad signature size");if(B.length!==or)throw new Error("bad public key size");var h=new Uint8Array(yr+w.length),O=new Uint8Array(yr+w.length),te;for(te=0;te<yr;te++)h[te]=R[te];for(te=0;te<w.length;te++)h[te+yr]=w[te];return pa(O,h,h.length,B)>=0},r.sign.keyPair=function(){var w=new Uint8Array(or),R=new Uint8Array(zn);return Lr(w,R),{publicKey:w,secretKey:R}},r.sign.keyPair.fromSecretKey=function(w){if(Sn(w),w.length!==zn)throw new Error("bad secret key size");for(var R=new Uint8Array(or),B=0;B<R.length;B++)R[B]=w[32+B];return{publicKey:R,secretKey:new Uint8Array(w)}},r.sign.keyPair.fromSeed=function(w){if(Sn(w),w.length!==Xr)throw new Error("bad seed size");for(var R=new Uint8Array(or),B=new Uint8Array(zn),h=0;h<32;h++)B[h]=w[h];return Lr(R,B,!0),{publicKey:R,secretKey:B}},r.sign.publicKeyLength=or,r.sign.secretKeyLength=zn,r.sign.seedLength=Xr,r.sign.signatureLength=yr,r.hash=function(w){Sn(w);var R=new Uint8Array(Jt);return Zn(R,w,w.length),R},r.hash.hashLength=Jt,r.verify=function(w,R){return Sn(w,R),w.length===0||R.length===0||w.length!==R.length?!1:de(w,0,R,0,w.length)===0},r.setPRNG=function(w){s=w},(function(){var w=typeof self<"u"?self.crypto||self.msCrypto:null;if(w&&w.getRandomValues){var R=65536;r.setPRNG(function(B,h){var O,te=new Uint8Array(h);for(O=0;O<h;O+=R)w.getRandomValues(te.subarray(O,O+Math.min(h-O,R)));for(O=0;O<h;O++)B[O]=te[O];vn(te)})}else typeof Bv<"u"&&(w=Nv,w&&w.randomBytes&&r.setPRNG(function(B,h){var O,te=w.randomBytes(h);for(O=0;O<h;O++)B[O]=te[O];vn(te)}))})()})(o.exports?o.exports:self.nacl=self.nacl||{})})(Df)),Df.exports}var jv=Ng();const _n=vl(jv);var Ec={exports:{}},Ov=Ec.exports,Rp;function Iv(){return Rp||(Rp=1,(function(o){(function(r,i){o.exports?o.exports=i():(r.nacl||(r.nacl={}),r.nacl.util=i())})(Ov,function(){var r={};function i(s){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(s))throw new TypeError("invalid encoding")}return r.decodeUTF8=function(s){if(typeof s!="string")throw new TypeError("expected string");var u,g=unescape(encodeURIComponent(s)),A=new Uint8Array(g.length);for(u=0;u<g.length;u++)A[u]=g.charCodeAt(u);return A},r.encodeUTF8=function(s){var u,g=[];for(u=0;u<s.length;u++)g.push(String.fromCharCode(s[u]));return decodeURIComponent(escape(g.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(r.encodeBase64=function(s){return Buffer.from(s).toString("base64")},r.decodeBase64=function(s){return i(s),new Uint8Array(Array.prototype.slice.call(Buffer.from(s,"base64"),0))}):(r.encodeBase64=function(s){return new Buffer(s).toString("base64")},r.decodeBase64=function(s){return i(s),new Uint8Array(Array.prototype.slice.call(new Buffer(s,"base64"),0))}):(r.encodeBase64=function(s){var u,g=[],A=s.length;for(u=0;u<A;u++)g.push(String.fromCharCode(s[u]));return btoa(g.join(""))},r.decodeBase64=function(s){i(s);var u,g=atob(s),A=new Uint8Array(g.length);for(u=0;u<g.length;u++)A[u]=g.charCodeAt(u);return A}),r})})(Ec)),Ec.exports}var nn=Iv();function Hf(){return _n.randomBytes(24)}function Dp(o,r,i,s,u){const g=new Uint8Array(s.length+o.length);g.set(s,0),g.set(o,s.length);const A=_n.box(g,s,i,r),M={type:"handshake-intro",nonce:nn.encodeBase64(s),payload:nn.encodeBase64(A)};return u&&(M.pk=nn.encodeBase64(u)),M}function Np(o,r,i){try{const s=nn.decodeBase64(o.nonce),u=nn.decodeBase64(o.payload),g=_n.box.open(u,s,i,r);if(!g)return console.error("[Handshake] Failed to decrypt intro payload"),null;const A=g.slice(0,24),M=g.slice(24);return Lv(A,s)?M.length!==32?(console.error("[Handshake] Invalid ephemeral public key length"),null):{nonce:A,ephemeralPublicKey:M}:(console.error("[Handshake] Nonce mismatch in intro"),null)}catch(s){return console.error("[Handshake] Error validating intro:",s),null}}function qv(o,r){const i=Hf(),s={type:"connected",timestamp:Date.now()},u=new TextEncoder().encode(JSON.stringify(s)),g=_n.secretbox(u,i,o),A=new Uint8Array(i.length+g.length);return A.set(i,0),A.set(g,i.length),{type:"handshake-connected",nonce:r,payload:nn.encodeBase64(A)}}function Uv(o,r){try{const i=nn.decodeBase64(o.payload),s=i.slice(0,24),u=i.slice(24),g=_n.secretbox.open(u,s,r);if(!g)return console.error("[Handshake] Failed to decrypt connected payload"),null;const A=new TextDecoder().decode(g),M=JSON.parse(A);if(M.type!=="connected"||typeof M.timestamp!="number")return console.error("[Handshake] Invalid connected message structure"),null;const b=Date.now();return Math.abs(b-M.timestamp)>60*1e3?(console.error("[Handshake] Connected message timestamp too old or in future"),null):M}catch(i){return console.error("[Handshake] Error validating connected:",i),null}}function Lv(o,r){if(o.length!==r.length)return!1;for(let i=0;i<o.length;i++)if(o[i]!==r[i])return!1;return!0}function zv(o,r,i,s){const u=_n.randomBytes(24),g=_n.randomBytes(24),A={invite_id:r},M=new TextEncoder().encode(JSON.stringify(A)),b=_n.box(M,g,i,s),S=new Uint8Array(24+b.length);return S.set(g,0),S.set(b,24),{invitingId:o,nonce:nn.encodeBase64(u),payload:nn.encodeBase64(S)}}function Yv(o,r,i){try{const s=nn.decodeBase64(o);if(s.length<=36)return console.error("[Handshake] PSI payload too short"),null;const u=s.slice(0,24),g=s.slice(24),A=_n.box.open(g,u,r,i);if(!A)return console.error("[Handshake] Failed to decrypt PSI payload"),null;const M=new TextDecoder().decode(A),b=JSON.parse(M);return typeof b.invite_id!="string"?(console.error("[Handshake] Invalid PSI payload structure"),null):{inviteId:b.invite_id}}catch(s){return console.error("[Handshake] Error decrypting PSI payload:",s),null}}function jg(o){return _n.hash(o).slice(0,32)}const Og=_n.hash(new TextEncoder().encode("chat-invite-pk-encryption")).slice(0,24);function Ig(o,r){return _n.secretbox(o,Og,r)}function jp(o,r){try{const i=_n.secretbox.open(o,Og,r);return i?i.length!==32?(console.error("[Handshake] Invalid decrypted identity PK length:",i.length),null):i:(console.error("[Handshake] Failed to decrypt identity PK"),null)}catch(i){return console.error("[Handshake] Error decrypting identity PK:",i),null}}function Kv(o,r){const i=new Uint8Array(o.length+r.length);return i.set(o,0),i.set(r,o.length),_n.hash(i).slice(0,24)}function Gv(o,r,i,s){const u=Ig(i,s);return{type:"handshake-invite",nonce:nn.encodeBase64(o),payload:r,pk:nn.encodeBase64(u)}}function Vv(o){return{type:"handshake-invite",nonce:"",payload:o}}var Tc={exports:{}},Fv=Tc.exports,Op;function Hv(){return Op||(Op=1,(function(o){(function(r,i){o.exports?o.exports=i(Ng()):r.ed2curve=i(r.nacl)})(Fv,function(r){if(!r)throw new Error("tweetnacl not loaded");var i=function(ke){var Le,Se=new Float64Array(16);if(ke)for(Le=0;Le<ke.length;Le++)Se[Le]=ke[Le];return Se},s=i(),u=i([1]),g=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),A=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function M(ke){var Le,Se;for(Se=0;Se<16;Se++)ke[Se]+=65536,Le=Math.floor(ke[Se]/65536),ke[(Se+1)*(Se<15?1:0)]+=Le-1+37*(Le-1)*(Se===15?1:0),ke[Se]-=Le*65536}function b(ke,Le,Se){for(var xe,At=~(Se-1),Ze=0;Ze<16;Ze++)xe=At&(ke[Ze]^Le[Ze]),ke[Ze]^=xe,Le[Ze]^=xe}function S(ke,Le){var Se;for(Se=0;Se<16;Se++)ke[Se]=Le[2*Se]+(Le[2*Se+1]<<8);ke[15]&=32767}function _(ke,Le,Se){var xe;for(xe=0;xe<16;xe++)ke[xe]=Le[xe]+Se[xe]|0}function j(ke,Le,Se){var xe;for(xe=0;xe<16;xe++)ke[xe]=Le[xe]-Se[xe]|0}function L(ke,Le,Se){var xe,At,Ze=new Float64Array(31);for(xe=0;xe<31;xe++)Ze[xe]=0;for(xe=0;xe<16;xe++)for(At=0;At<16;At++)Ze[xe+At]+=Le[xe]*Se[At];for(xe=0;xe<15;xe++)Ze[xe]+=38*Ze[xe+16];for(xe=0;xe<16;xe++)ke[xe]=Ze[xe];M(ke),M(ke)}function X(ke,Le){L(ke,Le,Le)}function ge(ke,Le){var Se=i(),xe;for(xe=0;xe<16;xe++)Se[xe]=Le[xe];for(xe=253;xe>=0;xe--)X(Se,Se),xe!==2&&xe!==4&&L(Se,Se,Le);for(xe=0;xe<16;xe++)ke[xe]=Se[xe]}function de(ke,Le){var Se,xe,At,Ze=i(),se=i();for(Se=0;Se<16;Se++)se[Se]=Le[Se];for(M(se),M(se),M(se),xe=0;xe<2;xe++){for(Ze[0]=se[0]-65517,Se=1;Se<15;Se++)Ze[Se]=se[Se]-65535-(Ze[Se-1]>>16&1),Ze[Se-1]&=65535;Ze[15]=se[15]-32767-(Ze[14]>>16&1),At=Ze[15]>>16&1,Ze[14]&=65535,b(se,Ze,1-At)}for(Se=0;Se<16;Se++)ke[2*Se]=se[Se]&255,ke[2*Se+1]=se[Se]>>8}function Pe(ke){var Le=new Uint8Array(32);return de(Le,ke),Le[0]&1}function pt(ke,Le,Se,xe,At){var Ze,se=0;for(Ze=0;Ze<At;Ze++)se|=ke[Le+Ze]^Se[xe+Ze];return(1&se-1>>>8)-1}function Ke(ke,Le,Se,xe){return pt(ke,Le,Se,xe,32)}function He(ke,Le){var Se=new Uint8Array(32),xe=new Uint8Array(32);return de(Se,ke),de(xe,Le),Ke(Se,0,xe,0)}function ut(ke,Le){var Se=i(),xe;for(xe=0;xe<16;xe++)Se[xe]=Le[xe];for(xe=250;xe>=0;xe--)X(Se,Se),xe!==1&&L(Se,Se,Le);for(xe=0;xe<16;xe++)ke[xe]=Se[xe]}function $e(ke,Le){var Se;for(Se=0;Se<16;Se++)ke[Se]=Le[Se]|0}function rt(ke,Le){var Se=i(),xe=i(),At=i(),Ze=i(),se=i(),Ue=i(),Ie=i();return $e(ke[2],u),S(ke[1],Le),X(At,ke[1]),L(Ze,At,g),j(At,At,ke[2]),_(Ze,ke[2],Ze),X(se,Ze),X(Ue,se),L(Ie,Ue,se),L(Se,Ie,At),L(Se,Se,Ze),ut(Se,Se),L(Se,Se,At),L(Se,Se,Ze),L(Se,Se,Ze),L(ke[0],Se,Ze),X(xe,ke[0]),L(xe,xe,Ze),He(xe,At)&&L(ke[0],ke[0],A),X(xe,ke[0]),L(xe,xe,Ze),He(xe,At)?-1:(Pe(ke[0])===Le[31]>>7&&j(ke[0],s,ke[0]),L(ke[3],ke[0],ke[1]),0)}function it(ke){var Le=new Uint8Array(32),Se=[i(),i(),i(),i()],xe=i(),At=i();if(rt(Se,ke))return null;var Ze=Se[1];return _(xe,u,Ze),j(At,u,Ze),ge(At,At),L(xe,xe,At),de(Le,xe),Le}function Bt(ke){var Le=new Uint8Array(64),Se=new Uint8Array(32),xe;for(r.lowlevel.crypto_hash(Le,ke,32),Le[0]&=248,Le[31]&=127,Le[31]|=64,xe=0;xe<32;xe++)Se[xe]=Le[xe];for(xe=0;xe<64;xe++)Le[xe]=0;return Se}function Pt(ke){var Le=it(ke.publicKey);return Le?{publicKey:Le,secretKey:Bt(ke.secretKey)}:null}return{convertPublicKey:it,convertSecretKey:Bt,convertKeyPair:Pt}})})(Tc)),Tc.exports}var Pv=Hv();const qg=vl(Pv);class Nc{identityKeypair;constructor(r){this.identityKeypair=r}static generate(){const r=_n.sign.keyPair();return new Nc(r)}static fromPrivateKey(r){const i=nn.decodeBase64(r);if(i.length!==64)throw new Error("Invalid identity private key length");const s=_n.sign.keyPair.fromSecretKey(i);return new Nc(s)}get publicKey(){return nn.encodeBase64(this.identityKeypair.publicKey)}get secretKey(){return nn.encodeBase64(this.identityKeypair.secretKey)}get userId(){const r=_n.hash(this.identityKeypair.publicKey);return Array.from(r.slice(0,8)).map(i=>i.toString(16).padStart(2,"0")).join("")}export(){return{userId:this.userId,publicKey:this.publicKey,secretKey:this.secretKey,profile:{}}}sign(r){return _n.sign.detached(r,this.identityKeypair.secretKey)}static verify(r,i,s){return _n.sign.detached.verify(r,i,s)}exportForSharing(){return JSON.stringify({version:1,publicKey:this.publicKey})}}function Ug(o){const r=nn.decodeBase64(o),i=_n.hash(r);return Array.from(i.slice(0,8)).map(s=>s.toString(16).padStart(2,"0")).join("")}function Pf(o,r){return Ug(r)===o}function pl(o){const r=qg.convertPublicKey(o);if(!r)throw new Error("Failed to derive encryption public key");return r}function Lg(o){const r=qg.convertSecretKey(o);if(!r)throw new Error("Failed to derive encryption secret key");return r}class Nf{inviteId;introNonce;inviteeNonceStr;symmetricKey;isInvitedParty;isExistingContact;peerIdentityPK;constructor(r,i,s,u,g=!1){this.inviteId=r,this.symmetricKey=jg(i),this.introNonce=Kv(s,i),this.inviteeNonceStr=nn.encodeBase64(s),this.isInvitedParty=u,this.isExistingContact=g}deriveIntroNonce(){return this.introNonce}deriveSymmetricKey(){return this.symmetricKey}destroy(){this.symmetricKey.fill(0),this.introNonce.fill(0),this.peerIdentityPK&&this.peerIdentityPK.fill(0)}}class Qv{handshakeStates=new Map;completedSessionNonce=new Map;myIdentity=null;thisEncryptionSK=null;signalSender=null;onHandshakeComplete=null;onHandshakeStatus=null;getPeerPublicKey=null;getInviteCallback=null;markInviteUsedCallback=null;createContactFromInviteCallback=null;onInviteRejectedCallback=null;thisIdentityPK=null;thisEncryptionPK=null;timeoutMs;sessionExpiryMs;constructor(r,i){this.timeoutMs=r,this.sessionExpiryMs=i}createState(r,i,s){const u=nn.decodeBase64(i),g=pl(u);return{peerId:r,peerIdentityPK:i,sentIntro:!1,receivedIntro:!1,sentConnected:!1,receivedConnected:!1,nonce:s,startedAt:Date.now(),session:{thisEphemeral:_n.box.keyPair(),peerEphemeral:null,sessionKey:new Uint8Array(32),expiresAt:0,thisEncryptionSK:this.thisEncryptionSK,peerEncryptionPK:g}}}checkAndHandleTimeout(r){const i=this.handshakeStates.get(r);return i&&Date.now()>i.startedAt+this.timeoutMs?(this.handleHandshakeTimeout(r),!0):!1}initialize(r){this.myIdentity=r;const i=nn.decodeBase64(r.secretKey),s=nn.decodeBase64(r.publicKey);this.thisEncryptionSK=Lg(i),this.thisEncryptionPK=pl(s),this.thisIdentityPK=s,console.log("[HandshakeCoordinator] Initialized for user:",r.userId.substring(0,8))}setSignalSender(r){this.signalSender=r}setOnHandshakeComplete(r){this.onHandshakeComplete=r}setOnHandshakeStatus(r){this.onHandshakeStatus=r}setGetPeerPublicKey(r){this.getPeerPublicKey=r}setGetInviteCallback(r){this.getInviteCallback=r}setMarkInviteUsedCallback(r){this.markInviteUsedCallback=r}setCreateContactFromInviteCallback(r){this.createContactFromInviteCallback=r}setOnInviteRejectedCallback(r){this.onInviteRejectedCallback=r}isHandshakeInProgress(r){return this.handshakeStates.has(r)}async initiateHandshakeIfNotRunning(r,i){this.isHandshakeInProgress(r)&&!this.checkAndHandleTimeout(r)||await this.initiateHandshake(r,i)}async initiateHandshake(r,i){if(!this.myIdentity){console.error("[HandshakeCoordinator] Not initialized");return}if(!this.signalSender){console.error("[HandshakeCoordinator] No signal sender configured");return}console.log("[HandshakeCoordinator] Initiating handshake with:",r.substring(0,8)),this.clearHandshakeState(r),this.completedSessionNonce.delete(r),this.onHandshakeStatus?.(r,"started");const s=this.createState(r,i);this.handshakeStates.set(r,s),await this.sendIntroMessage(r)}async sendIntroMessage(r){if(!this.myIdentity||!this.signalSender)return;const i=this.handshakeStates.get(r);if(i)try{i.nonce||(i.nonce=nn.encodeBase64(Hf()));const s=Dp(i.session.thisEphemeral.publicKey,i.session.thisEncryptionSK,i.session.peerEncryptionPK,nn.decodeBase64(i.nonce));await this.signalSender(r,s),i.sentIntro=!0,console.log("[HandshakeCoordinator] Sent handshake-intro to:",r.substring(0,8),"with nonce:",i.nonce.substring(0,8))}catch(s){console.error("[HandshakeCoordinator] Failed to send intro:",s)}}async sendConnectedMessage(r){if(!this.myIdentity||!this.signalSender)return;const i=this.handshakeStates.get(r);if(i)try{const s=qv(i.session.sessionKey,i.nonce);await this.signalSender(r,s),i.sentConnected=!0,console.log("[HandshakeCoordinator] Sent handshake-connected to:",r.substring(0,8),"with nonce:",i.nonce?.substring(0,8))}catch(s){console.error("[HandshakeCoordinator] Failed to send connected:",s)}}async handleHandshakeMessage(r,i){if(!this.myIdentity){console.error("[HandshakeCoordinator] Not initialized");return}i.type==="handshake-invite"?i.nonce===""?this.handleInviteRejection(r,i.payload):await this.handleInviteMessage(r,i):i.type==="handshake-intro"?await this.handleIntroMessage(r,i):i.type==="handshake-connected"&&await this.handleConnectedMessage(r,i)}async initiateFromPSI(r){if(!this.myIdentity||!this.signalSender||!this.thisIdentityPK){console.error("[HandshakeCoordinator] Not initialized for invite");return}const i=r.invitingId;console.log("[HandshakeCoordinator] Initiating handshake from PSI to:",i.substring(0,8)),this.clearHandshakeState(i),this.completedSessionNonce.delete(i);const s=nn.decodeBase64(r.nonce),u=Hf(),g=new Nf("",s,u,!0),A={peerId:i,peerIdentityPK:"",sentIntro:!1,receivedIntro:!1,sentConnected:!1,receivedConnected:!1,startedAt:Date.now(),session:{thisEphemeral:_n.box.keyPair(),peerEphemeral:null,sessionKey:new Uint8Array(32),expiresAt:0,thisEncryptionSK:this.thisEncryptionSK,peerEncryptionPK:new Uint8Array(32)},invite:g};this.handshakeStates.set(i,A),this.onHandshakeStatus?.(i,"started");const M=g.deriveSymmetricKey(),b=Gv(u,r.payload,this.thisIdentityPK,M);try{await this.signalSender(i,b),console.log("[HandshakeCoordinator] Sent handshake-invite to:",i.substring(0,8))}catch(S){console.error("[HandshakeCoordinator] Failed to send handshake-invite:",S),this.handleHandshakeFailed(i)}}async handleInviteMessage(r,i){if(!this.myIdentity||!this.signalSender||!this.thisEncryptionSK||!this.thisEncryptionPK||!this.thisIdentityPK){console.error("[HandshakeCoordinator] Not initialized for invite handling");return}console.log("[HandshakeCoordinator] Received handshake-invite from:",r.substring(0,8));const s=this.handshakeStates.get(r);if(s?.invite){if(s.invite.inviteeNonceStr===i.nonce){s.invite.isInvitedParty?console.log("[HandshakeCoordinator] Invitee nonce collision, invited flow takes over (already processing)"):(console.log("[HandshakeCoordinator] Resending intro for existing invite session"),await this.sendInviteIntroMessage(r));return}console.log("[HandshakeCoordinator] New invite nonce, resetting session"),this.clearHandshakeState(r)}const u=nn.decodeBase64(i.nonce),g=i.payload,A=i.pk?nn.decodeBase64(i.pk):null;if(!A){console.error("[HandshakeCoordinator] Invite message missing pk field"),await this.sendInviteRejection(r,"Missing identity key");return}const M=Yv(g,this.thisEncryptionPK,this.thisEncryptionSK);if(!M){console.error("[HandshakeCoordinator] Failed to decrypt invite payload"),await this.sendInviteRejection(r,"Invalid invite");return}const b=M.inviteId;if(console.log("[HandshakeCoordinator] Decrypted invite ID:",b),!this.getInviteCallback){console.error("[HandshakeCoordinator] No getInviteCallback configured"),await this.sendInviteRejection(r,"Server error");return}const S=await this.getInviteCallback(b,r);if(typeof S=="string"){console.log("[HandshakeCoordinator] Peer is existing contact, skipping invite validation");const Ke=S,He=new Nf("",new Uint8Array(24),u,!1,!0),ut=this.createState(r,Ke,nn.encodeBase64(u));ut.invite=He,this.handshakeStates.set(r,ut),this.onHandshakeStatus?.(r,"started"),await this.sendIntroMessage(r);return}if(!S){console.error("[HandshakeCoordinator] Invite not found:",b),await this.sendInviteRejection(r,"Invalid invite");return}const _=S,j=nn.decodeBase64(_.nonce);if(!_.valid){console.log("[HandshakeCoordinator] Invite is invalidated"),await this.sendInviteRejection(r,"Invite no longer valid");return}if(_.expiry&&Date.now()>_.expiry){console.log("[HandshakeCoordinator] Invite has expired"),await this.sendInviteRejection(r,"Invite expired");return}if(_.useLimit!==void 0&&_.useCount>=_.useLimit){console.log("[HandshakeCoordinator] Invite use limit exceeded"),await this.sendInviteRejection(r,"Invite use limit reached");return}const L=jg(j),X=jp(A,L);if(!X){console.error("[HandshakeCoordinator] Failed to decrypt peer identity PK"),await this.sendInviteRejection(r,"Decryption error");return}const ge=nn.encodeBase64(X);if(!Pf(r,ge)){console.error("[HandshakeCoordinator] Peer identity mismatch: userId does not match publicKey"),await this.sendInviteRejection(r,"Identity verification failed");return}const de=pl(X);console.log("[HandshakeCoordinator] Invite validated, peer identity:",ge.substring(0,16));const Pe=new Nf(_.inviteId,j,u,!1);Pe.peerIdentityPK=X;const pt={peerId:r,peerIdentityPK:ge,sentIntro:!1,receivedIntro:!1,sentConnected:!1,receivedConnected:!1,startedAt:Date.now(),session:{thisEphemeral:_n.box.keyPair(),peerEphemeral:null,sessionKey:new Uint8Array(32),expiresAt:0,thisEncryptionSK:this.thisEncryptionSK,peerEncryptionPK:de},invite:Pe};pt.nonce=nn.encodeBase64(Pe.deriveIntroNonce()),this.handshakeStates.set(r,pt),this.onHandshakeStatus?.(r,"started"),await this.sendInviteIntroMessage(r)}async sendInviteIntroMessage(r){if(!this.myIdentity||!this.signalSender||!this.thisIdentityPK)return;const i=this.handshakeStates.get(r);if(!(!i||!i.invite))try{const s=i.invite.deriveIntroNonce(),u=i.invite.deriveSymmetricKey(),g=Ig(this.thisIdentityPK,u),A=Dp(i.session.thisEphemeral.publicKey,i.session.thisEncryptionSK,i.session.peerEncryptionPK,s,g);await this.signalSender(r,A),i.sentIntro=!0,i.nonce=nn.encodeBase64(s),console.log("[HandshakeCoordinator] Sent invite handshake-intro to:",r.substring(0,8),"with derived nonce")}catch(s){console.error("[HandshakeCoordinator] Failed to send invite intro:",s)}}async sendInviteRejection(r,i){if(this.signalSender)try{const s=Vv(i);await this.signalSender(r,s),console.log("[HandshakeCoordinator] Sent invite rejection to:",r.substring(0,8),"reason:",i)}catch(s){console.error("[HandshakeCoordinator] Failed to send rejection:",s)}}handleInviteRejection(r,i){console.log("[HandshakeCoordinator] Invite rejected by:",r.substring(0,8),"reason:",i),this.handshakeStates.get(r)?.invite?.isInvitedParty&&this.onInviteRejectedCallback?.(r,i),this.completedSessionNonce.delete(r),this.clearHandshakeState(r),this.onHandshakeStatus?.(r,"failed",i)}async handleIntroMessage(r,i){if(!this.myIdentity||!this.signalSender)return;console.log("[HandshakeCoordinator] Received handshake-intro from:",r.substring(0,8),"nonce:",i.nonce?.substring(0,8)),this.checkAndHandleTimeout(r);const s=this.handshakeStates.get(r),u=i.nonce,g=s?.nonce,A=this.completedSessionNonce.get(r);if(s?.invite?.isInvitedParty&&!s.peerIdentityPK){await this.handleInviteIntroAsInvitedParty(r,i,s);return}let b=this.getPeerPublicKey?.(r);if(!b&&s?.invite&&!s.invite.isInvitedParty&&(b=s.peerIdentityPK),!b){console.error("[HandshakeCoordinator] Peer public key not found for:",r.substring(0,8));return}if(!g&&A&&u===A){console.log("[HandshakeCoordinator] Ignoring stale intro from completed session. Nonce:",u.substring(0,8));return}const S=s?.invite!==void 0;if(!(!g||u===g||u>g||S)){console.log("[HandshakeCoordinator] Ignoring intro with lower nonce. My nonce:",g?.substring(0,8),"Peer nonce:",u.substring(0,8));return}g&&u!==g&&!S&&s&&(console.log("[HandshakeCoordinator] Adopting higher nonce. My nonce:",g?.substring(0,8),"-> Peer nonce:",u.substring(0,8)),s.nonce=u,s.sentIntro=!1,s.sentConnected=!1,s.receivedConnected=!1);let L=this.handshakeStates.get(r);L||(L=this.createState(r,b,u),this.handshakeStates.set(r,L),this.onHandshakeStatus?.(r,"started"));const X=Np(i,L.session.thisEncryptionSK,L.session.peerEncryptionPK);if(!X){console.error("[HandshakeCoordinator] Failed to validate intro"),this.handleHandshakeFailed(r);return}if(L.receivedIntro=!0,!L.session.peerEphemeral)try{const ge=_n.box.before(X.ephemeralPublicKey,L.session.thisEphemeral.secretKey);L.session.sessionKey=ge,L.session.peerEphemeral=X.ephemeralPublicKey,L.session.expiresAt=Date.now()+this.sessionExpiryMs,console.log("[HandshakeCoordinator] Session key derived for:",r.substring(0,8))}catch(ge){console.error("[HandshakeCoordinator] Failed to derive session key:",ge),this.handleHandshakeFailed(r);return}L.sentIntro||(L.invite&&!L.invite.isInvitedParty&&!L.invite.isExistingContact?await this.sendInviteIntroMessage(r):await this.sendIntroMessage(r)),await this.sendConnectedMessage(r),this.checkHandshakeComplete(r)}async handleInviteIntroAsInvitedParty(r,i,s){if(!this.myIdentity||!this.signalSender||!s.invite)return;console.log("[HandshakeCoordinator] Processing invite intro as invited party from:",r.substring(0,8));const u=s.invite.deriveIntroNonce(),g=nn.decodeBase64(i.nonce);let A=u.length===g.length;if(A){for(let X=0;X<u.length;X++)if(u[X]!==g[X]){A=!1;break}}if(!A){console.error("[HandshakeCoordinator] Derived nonce mismatch in invite flow"),this.handleHandshakeFailed(r);return}if(!i.pk){console.error("[HandshakeCoordinator] Invite intro missing pk field"),this.handleHandshakeFailed(r);return}const M=nn.decodeBase64(i.pk),b=s.invite.deriveSymmetricKey(),S=jp(M,b);if(!S){console.error("[HandshakeCoordinator] Failed to decrypt inviting party identity PK"),this.handleHandshakeFailed(r);return}const _=nn.encodeBase64(S);if(!Pf(r,_)){console.error("[HandshakeCoordinator] Peer identity mismatch: userId does not match publicKey"),this.handleHandshakeFailed(r);return}const j=pl(S);s.peerIdentityPK=_,s.session.peerEncryptionPK=j,s.invite.peerIdentityPK=S,s.nonce=i.nonce,console.log("[HandshakeCoordinator] Learned inviting party identity:",_.substring(0,16));const L=Np(i,s.session.thisEncryptionSK,j);if(!L){console.error("[HandshakeCoordinator] Failed to validate invite intro payload"),this.handleHandshakeFailed(r);return}if(s.receivedIntro=!0,!s.session.peerEphemeral)try{const X=_n.box.before(L.ephemeralPublicKey,s.session.thisEphemeral.secretKey);s.session.sessionKey=X,s.session.peerEphemeral=L.ephemeralPublicKey,s.session.expiresAt=Date.now()+this.sessionExpiryMs,console.log("[HandshakeCoordinator] Session key derived (invite) for:",r.substring(0,8))}catch(X){console.error("[HandshakeCoordinator] Failed to derive session key:",X),this.handleHandshakeFailed(r);return}s.sentIntro||await this.sendInviteIntroMessage(r),await this.sendConnectedMessage(r),this.checkHandshakeComplete(r)}async handleConnectedMessage(r,i){if(!this.myIdentity||!this.signalSender)return;console.log("[HandshakeCoordinator] Received handshake-connected from:",r.substring(0,8),"with nonce:",i.nonce?.substring(0,8));const s=i.nonce,u=this.completedSessionNonce.get(r),g=this.handshakeStates.get(r);if(!g){u&&s===u?console.log("[HandshakeCoordinator] Ignoring stale connected from completed session. Nonce:",s?.substring(0,8)):console.log("[HandshakeCoordinator] No handshake state found - likely from old handshake, ignoring");return}if(!s||s!==g.nonce){console.log("[HandshakeCoordinator] Nonce mismatch - message from old handshake. Expected:",g.nonce?.substring(0,8),"Got:",s?.substring(0,8));return}if(!Uv(i,g.session.sessionKey)){console.error("[HandshakeCoordinator] Failed to validate connected message"),this.handleHandshakeFailed(r);return}g.receivedConnected=!0,g.sentConnected||await this.sendConnectedMessage(r),this.checkHandshakeComplete(r)}async checkHandshakeComplete(r){const i=this.handshakeStates.get(r);!i?.receivedIntro||!i.receivedConnected||(i.nonce&&this.completedSessionNonce.set(r,i.nonce),console.log("[HandshakeCoordinator]  Handshake complete with:",r.substring(0,8)),i.invite&&!i.invite.isExistingContact&&await this.handleInviteCompletion(r,i),this.onHandshakeComplete?.(r,i.session.sessionKey,i.session.expiresAt),this.onHandshakeStatus?.(r,"complete"),this.clearHandshakeState(r))}async handleInviteCompletion(r,i){if(!i.invite)return;const s=i.invite,u=i.peerIdentityPK;if(console.log("[HandshakeCoordinator] Completing invite handshake, isInvitedParty:",s.isInvitedParty),this.createContactFromInviteCallback&&u)try{await this.createContactFromInviteCallback(r,u,s.inviteId,s.isInvitedParty),console.log("[HandshakeCoordinator] Contact created from invite for:",r.substring(0,8))}catch(g){console.error("[HandshakeCoordinator] Failed to create contact from invite:",g)}if(!s.isInvitedParty&&s.inviteId&&this.markInviteUsedCallback)try{await this.markInviteUsedCallback(s.inviteId),console.log("[HandshakeCoordinator] Invite use count incremented:",s.inviteId)}catch(g){console.error("[HandshakeCoordinator] Failed to increment invite use count:",g)}}clearHandshakeState(r){const i=this.handshakeStates.get(r);i&&(i.session.sessionKey.fill(0),i.session.thisEphemeral.secretKey.fill(0),i.invite&&i.invite.destroy()),this.handshakeStates.delete(r)}handleHandshakeTimeout(r){console.error("[HandshakeCoordinator] Handshake timeout for:",r.substring(0,8)),this.completedSessionNonce.delete(r),this.clearHandshakeState(r),this.onHandshakeStatus?.(r,"timeout")}handleHandshakeFailed(r){console.error("[HandshakeCoordinator] Handshake failed for:",r.substring(0,8)),this.completedSessionNonce.delete(r),this.clearHandshakeState(r),this.onHandshakeStatus?.(r,"failed")}cancelHandshake(r){this.handshakeStates.has(r)&&(console.log("[HandshakeCoordinator] Cancelling handshake for:",r.substring(0,8)),this.completedSessionNonce.delete(r),this.clearHandshakeState(r))}destroy(){this.handshakeStates.forEach((r,i)=>{this.clearHandshakeState(i)}),this.completedSessionNonce.clear(),this.thisEncryptionSK&&(this.thisEncryptionSK.fill(0),this.thisEncryptionSK=null),this.thisEncryptionPK&&(this.thisEncryptionPK.fill(0),this.thisEncryptionPK=null),this.thisIdentityPK&&(this.thisIdentityPK.fill(0),this.thisIdentityPK=null),this.onHandshakeComplete=null,this.onHandshakeStatus=null,this.getPeerPublicKey=null,this.getInviteCallback=null,this.markInviteUsedCallback=null,this.createContactFromInviteCallback=null,this.onInviteRejectedCallback=null}}class Jv{sessionKey;sendCounter;receiveCounter;constructor(r){this.sessionKey=r,this.sendCounter=0,this.receiveCounter=0}encrypt(r){const i=new TextEncoder().encode(r),s=this.generateNonce(),u=_n.secretbox(i,s,this.sessionKey);return this.sendCounter++,{ciphertext:nn.encodeBase64(u),nonce:nn.encodeBase64(s),timestamp:Date.now()}}decrypt(r){const i=nn.decodeBase64(r.ciphertext),s=nn.decodeBase64(r.nonce),u=_n.secretbox.open(i,s,this.sessionKey);if(!u)throw new Error("Decryption failed - message may be tampered or session key invalid");return this.receiveCounter++,new TextDecoder().decode(u)}encryptBytes(r){const i=this.generateNonce(),s=_n.secretbox(r,i,this.sessionKey);this.sendCounter++;const u=new Uint8Array(i.length+s.length);return u.set(i,0),u.set(s,i.length),u}decryptBytes(r){if(r.length<24)throw new Error("Data too short - missing nonce");const i=r.slice(0,24),s=r.slice(24),u=_n.secretbox.open(s,i,this.sessionKey);if(!u)throw new Error("Decryption failed - message may be tampered or session key invalid");return this.receiveCounter++,u}generateNonce(){return _n.randomBytes(24)}getSendCounter(){return this.sendCounter}getReceiveCounter(){return this.receiveCounter}destroy(){this.sessionKey.fill(0)}}class Mc extends Error{code="SESSION_EXPIRED";peerId;constructor(r){super(`Session expired for peer: ${r}`),this.name="SessionExpiredError",this.peerId=r}}class _c extends Error{code="NO_SESSION";peerId;constructor(r){super(`No session for peer: ${r}`),this.name="NoSessionError",this.peerId=r}}class Qf extends Error{code="CORRUPTED_PAYLOAD";peerId;cause;constructor(r,i){super(`Corrupted signal payload from peer: ${r}`),this.name="CorruptedPayloadError",this.peerId=r,this.cause=i}}class Jf extends Error{code="INCORRECT_SESSION_KEY";peerId;cause;constructor(r,i){super(`Cannot parse signal from peer ${r} - possible session key mismatch`),this.name="IncorrectSessionKeyError",this.peerId=r,this.cause=i}}const Zv=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478"},{urls:"stun:stun.cloudflare.com:3478"}];class Xv{connection;msgChannel;pendingIceCandidates=[];callbacks;destroyed=!1;constructor(r){this.callbacks=r,this.connection=new RTCPeerConnection({iceServers:Zv}),this.setupConnectionHandlers(),this.msgChannel=this.connection.createDataChannel("messages",{ordered:!0,negotiated:!0,id:1}),this.setupMessageChannel()}setState(r){this.callbacks.onStateChange(r)}setupConnectionHandlers(){this.connection.onconnectionstatechange=()=>{if(this.destroyed)return;const r=this.connection.connectionState;console.log("[WebRtcConnection] connectionState:",r)},this.connection.onsignalingstatechange=()=>{this.destroyed||console.log("[WebRtcConnection] signalingState:",this.connection.signalingState)},this.connection.oniceconnectionstatechange=()=>{this.destroyed||console.log("[WebRtcConnection] iceConnectionState:",this.connection.iceConnectionState)},this.connection.onicegatheringstatechange=()=>{this.destroyed||console.log("[WebRtcConnection] iceGatheringState:",this.connection.iceGatheringState)},this.connection.onicecandidate=r=>{this.destroyed||(r.candidate?(console.log("[WebRtcConnection]  ICE candidate:",r.candidate.candidate?.substring(0,50)),this.callbacks.onSignal({ice:r.candidate.toJSON()})):console.log("[WebRtcConnection] ICE gathering complete"))},this.connection.ondatachannel=r=>{this.destroyed||console.log("[WebRtcConnection] Received data channel:",r.channel.label)}}setupMessageChannel(){const r=this.msgChannel;r.binaryType="arraybuffer",r.onopen=()=>{this.destroyed||(console.log("[WebRtcConnection] Message channel opened"),this.setState("connected"))},r.onclose=()=>{this.destroyed||(console.log("[WebRtcConnection] Message channel closed"),this.setState("disconnected"))},r.onerror=i=>{this.destroyed||(console.error("[WebRtcConnection] Message channel error:",i),this.setState("failed"))},r.onmessage=i=>{if(this.destroyed)return;const s=new Uint8Array(i.data);this.callbacks.onData(s)}}async initiateConnection(){if(this.destroyed)throw new Error("Connection destroyed");console.log("[WebRtcConnection] Initiating connection (creating offer)");const r=await this.connection.createOffer();await this.connection.setLocalDescription(r),this.callbacks.onSignal({offer:r})}async handleSignal(r){if(this.destroyed){console.warn("[WebRtcConnection] Ignoring signal - connection destroyed");return}const i=this.connection.signalingState;try{if(r.offer){console.log("[WebRtcConnection]  Received offer, signalingState:",i),await this.connection.setRemoteDescription(r.offer),await this.processQueuedIceCandidates();const s=await this.connection.createAnswer();await this.connection.setLocalDescription(s),this.callbacks.onSignal({answer:s}),console.log("[WebRtcConnection]  Sent answer")}else if(r.answer){if(console.log("[WebRtcConnection]  Received answer, signalingState:",i),i!=="have-local-offer"){console.log("[WebRtcConnection] Ignoring answer - not in have-local-offer state");return}await this.connection.setRemoteDescription(r.answer),await this.processQueuedIceCandidates(),console.log("[WebRtcConnection]  Answer processed, signalingState:",this.connection.signalingState)}else if(r.ice){if(!this.connection.remoteDescription){console.log("[WebRtcConnection] Queuing ICE candidate (no remote description yet), pending:",this.pendingIceCandidates.length+1),this.pendingIceCandidates.push(r.ice);return}await this.connection.addIceCandidate(r.ice),console.log("[WebRtcConnection]  Added ICE candidate")}}catch(s){throw console.error("[WebRtcConnection] Failed to handle signal, signalingState was:",i,"error:",s),s}}async processQueuedIceCandidates(){this.pendingIceCandidates.length>0&&console.log("[WebRtcConnection] Processing",this.pendingIceCandidates.length,"queued ICE candidates");for(const r of this.pendingIceCandidates)try{await this.connection.addIceCandidate(r)}catch(i){console.warn("[WebRtcConnection] Failed to add queued ICE candidate:",i)}this.pendingIceCandidates=[]}sendMessage(r){if(this.destroyed)throw new Error("Connection destroyed");if(!this.msgChannel||this.msgChannel.readyState!=="open")throw new Error("Message channel not open");this.msgChannel.send(r)}destroy(){this.destroyed||(console.log("[WebRtcConnection] Destroying"),this.destroyed=!0,this.msgChannel.close(),this.connection.close(),this.pendingIceCandidates=[])}}class Wv{peerId;identityPK;sessionExpiry=0;encryption=null;webrtc=null;_state="offline";manager;constructor(r,i,s){this.peerId=r,this.identityPK=i,this.manager=s,console.log("[DataTransport] Created for peer:",r.substring(0,8))}get state(){return this._state}get isConnected(){return this.state=="online"}get hasSession(){return this.encryption!==null}get isSessionValid(){return this.hasSession&&Date.now()<this.sessionExpiry}get sessionExpiresAt(){return this.sessionExpiry}updateState(r){const i=this._state;if(this.webrtc)switch(r){case"offline":this.webrtc.destroy(),this.webrtc=null;break}else switch(r){case"offline":break;case"connecting":this.webrtc=new Xv({onSignal:s=>this.handleOutgoingSignal("webrtc",s),onData:s=>this.handleIncomingMessage(s),onStateChange:s=>this.handleWebRtcStateChange(s)});break;case"online":throw new Error("Invalid state transition: no-WebRTC -> online")}this._state=r,i!=r&&(console.log(`[DataTransport] State: ${i} -> ${r} for:`,this.peerId.substring(0,8)),this.manager.updatePeerStatus(this.peerId,r))}setSession(r,i){this.encryption?.destroy(),this.encryption=new Jv(r),this.sessionExpiry=i,console.log("[DataTransport]  Session set for:",this.peerId.substring(0,8),"expires:",new Date(i).toISOString())}async initiateConnection(){if(!this.isSessionValid){console.log("[DataTransport] Skipping connection initiation - session is invalid or no session exists");return}if(this.state!=="offline"){console.log("[DataTransport] Skipping connection initiation - already connected or connecting");return}this.updateState("connecting"),await this.webrtc.initiateConnection()}handleOutgoingSignal(r,i){if(!this.encryption){console.error("[DataTransport] Cannot encrypt signal - no session");return}const u=JSON.stringify({type:r,payload:i}),g=this.encryption.encrypt(u),A=JSON.stringify(g);console.log("[DataTransport]  Sending encrypted signal:",r),this.manager.sendCustomSignal(this.peerId,A)}handleEncryptedSignal(r){if(!this.hasSession)throw new _c(this.peerId);if(!this.isSessionValid)throw new Mc(this.peerId);let i;try{const g=JSON.parse(r);i=this.encryption.decrypt(g)}catch(g){throw new Qf(this.peerId,g instanceof Error?g:void 0)}let s;try{s=JSON.parse(i)}catch(g){throw new Jf(this.peerId,g instanceof Error?g:void 0)}const u=s;if(!u||typeof u.type!="string"){console.warn("[DataTransport] Invalid signal envelope structure:",s);return}switch(console.log("[DataTransport]  Received encrypted signal:",u.type),u.type){case"webrtc":this.handleWebRtcSignal(u.payload);break;default:console.warn("[DataTransport] Unknown signal type:",u.type)}}handleWebRtcSignal(r){var i="unknown";if(r.answer?i="answer":r.offer?i="offer":r.ice&&(i="ice"),!this.webrtc){if(!r.offer){console.warn("[DataTransport] No WebRTC connection to handle signal:",i);return}console.log("[DataTransport] Creating WebRTC connection for incoming offer"),this.updateState("connecting")}console.log("[DataTransport]  Handling WebRTC signal:",i),this.webrtc.handleSignal(r).catch(s=>{console.error("[DataTransport] Failed to handle WebRTC signal:",i,", error:",s)})}handleWebRtcStateChange(r){switch(console.log("[DataTransport] WebRTC state:",r,"for:",this.peerId.substring(0,8)),r){case"connecting":this.updateState("connecting");break;case"connected":this.updateState("online");break;default:this.updateState("offline");break}}handleIncomingMessage(r){console.log("[DataTransport]  Encrypted message received from:",this.peerId.substring(0,8));let i;try{if(!this.hasSession)throw new _c(this.peerId);if(!this.isSessionValid)throw new Mc(this.peerId);let s;try{s=this.encryption.decryptBytes(r)}catch(u){throw new Qf(this.peerId,u)}try{const u=new TextDecoder().decode(s);i=JSON.parse(u)}catch(u){throw new Jf(this.peerId,u)}}catch(s){console.error("[DataTransport] Failed to process message:",s),s instanceof Error&&this.manager.reportPeerError(this.peerId,s);return}this.manager.onWireMessage(this.peerId,i)}async sendMessage(r){if(!this.hasSession)throw new _c(this.peerId);if(!this.isSessionValid)throw new Mc(this.peerId);if(!this.isConnected)throw new Error(`WebRTC not ready for ${this.peerId.substring(0,8)}`);const i=new TextEncoder().encode(JSON.stringify(r)),s=this.encryption.encryptBytes(i);this.webrtc.sendMessage(s),console.log("[DataTransport]  Message sent to:",this.peerId.substring(0,8))}clearSessionAndConnection(){this.updateState("offline"),this.clearSession()}clearSession(){console.log("[DataTransport] Clearing session for:",this.peerId.substring(0,8)),this.sessionExpiry=0,this.encryption?.destroy(),this.encryption=null}destroy(){this.updateState("offline"),this.clearSession(),console.log("[DataTransport] Destroyed for:",this.peerId.substring(0,8))}}var kc={exports:{}},$v=kc.exports,Ip;function e1(){return Ip||(Ip=1,(function(o,r){(function(i,s){o.exports=s()})($v,function(){var i=function(l,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,x){p.__proto__=x}||function(p,x){for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&(p[E]=x[E])})(l,f)},s=function(){return(s=Object.assign||function(l){for(var f,p=1,x=arguments.length;p<x;p++)for(var E in f=arguments[p])Object.prototype.hasOwnProperty.call(f,E)&&(l[E]=f[E]);return l}).apply(this,arguments)};function u(l,f,p){for(var x,E=0,k=f.length;E<k;E++)!x&&E in f||((x=x||Array.prototype.slice.call(f,0,E))[E]=f[E]);return l.concat(x||Array.prototype.slice.call(f))}var g=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Iy,A=Object.keys,M=Array.isArray;function b(l,f){return typeof f!="object"||A(f).forEach(function(p){l[p]=f[p]}),l}typeof Promise>"u"||g.Promise||(g.Promise=Promise);var S=Object.getPrototypeOf,_={}.hasOwnProperty;function j(l,f){return _.call(l,f)}function L(l,f){typeof f=="function"&&(f=f(S(l))),(typeof Reflect>"u"?A:Reflect.ownKeys)(f).forEach(function(p){ge(l,p,f[p])})}var X=Object.defineProperty;function ge(l,f,p,x){X(l,f,b(p&&j(p,"get")&&typeof p.get=="function"?{get:p.get,set:p.set,configurable:!0}:{value:p,configurable:!0,writable:!0},x))}function de(l){return{from:function(f){return l.prototype=Object.create(f.prototype),ge(l.prototype,"constructor",l),{extend:L.bind(null,l.prototype)}}}}var Pe=Object.getOwnPropertyDescriptor,pt=[].slice;function Ke(l,f,p){return pt.call(l,f,p)}function He(l,f){return f(l)}function ut(l){if(!l)throw new Error("Assertion Failed")}function $e(l){g.setImmediate?setImmediate(l):setTimeout(l,0)}function rt(l,f){if(typeof f=="string"&&j(l,f))return l[f];if(!f)return l;if(typeof f!="string"){for(var p=[],x=0,E=f.length;x<E;++x){var k=rt(l,f[x]);p.push(k)}return p}var q=f.indexOf(".");if(q!==-1){var Y=l[f.substr(0,q)];return Y==null?void 0:rt(Y,f.substr(q+1))}}function it(l,f,p){if(l&&f!==void 0&&!("isFrozen"in Object&&Object.isFrozen(l)))if(typeof f!="string"&&"length"in f){ut(typeof p!="string"&&"length"in p);for(var x=0,E=f.length;x<E;++x)it(l,f[x],p[x])}else{var k,q,Y=f.indexOf(".");Y!==-1?(k=f.substr(0,Y),(q=f.substr(Y+1))===""?p===void 0?M(l)&&!isNaN(parseInt(k))?l.splice(k,1):delete l[k]:l[k]=p:it(Y=!(Y=l[k])||!j(l,k)?l[k]={}:Y,q,p)):p===void 0?M(l)&&!isNaN(parseInt(f))?l.splice(f,1):delete l[f]:l[f]=p}}function Bt(l){var f,p={};for(f in l)j(l,f)&&(p[f]=l[f]);return p}var Pt=[].concat;function ke(l){return Pt.apply([],l)}var gr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ke([8,16,32,64].map(function(l){return["Int","Uint","Float"].map(function(f){return f+l+"Array"})}))).filter(function(l){return g[l]}),Le=new Set(gr.map(function(l){return g[l]})),Se=null;function xe(l){return Se=new WeakMap,l=(function f(p){if(!p||typeof p!="object")return p;var x=Se.get(p);if(x)return x;if(M(p)){x=[],Se.set(p,x);for(var E=0,k=p.length;E<k;++E)x.push(f(p[E]))}else if(Le.has(p.constructor))x=p;else{var q,Y=S(p);for(q in x=Y===Object.prototype?{}:Object.create(Y),Se.set(p,x),p)j(p,q)&&(x[q]=f(p[q]))}return x})(l),Se=null,l}var At={}.toString;function Ze(l){return At.call(l).slice(8,-1)}var se=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ue=typeof se=="symbol"?function(l){var f;return l!=null&&(f=l[se])&&f.apply(l)}:function(){return null};function Ie(l,f){return f=l.indexOf(f),0<=f&&l.splice(f,1),0<=f}var Re={};function Qe(l){var f,p,x,E;if(arguments.length===1){if(M(l))return l.slice();if(this===Re&&typeof l=="string")return[l];if(E=Ue(l)){for(p=[];!(x=E.next()).done;)p.push(x.value);return p}if(l==null)return[l];if(typeof(f=l.length)!="number")return[l];for(p=new Array(f);f--;)p[f]=l[f];return p}for(f=arguments.length,p=new Array(f);f--;)p[f]=arguments[f];return p}var K=typeof Symbol<"u"?function(l){return l[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Lr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],kr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Lr),me={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function De(l,f){this.name=l,this.message=f}function Ge(l,f){return l+". Errors: "+Object.keys(f).map(function(p){return f[p].toString()}).filter(function(p,x,E){return E.indexOf(p)===x}).join(`
`)}function Ve(l,f,p,x){this.failures=f,this.failedKeys=x,this.successCount=p,this.message=Ge(l,f)}function Me(l,f){this.name="BulkError",this.failures=Object.keys(f).map(function(p){return f[p]}),this.failuresByPos=f,this.message=Ge(l,this.failures)}de(De).from(Error).extend({toString:function(){return this.name+": "+this.message}}),de(Ve).from(De),de(Me).from(De);var gt=kr.reduce(function(l,f){return l[f]=f+"Error",l},{}),Ct=De,ze=kr.reduce(function(l,f){var p=f+"Error";function x(E,k){this.name=p,E?typeof E=="string"?(this.message="".concat(E).concat(k?`
 `+k:""),this.inner=k||null):typeof E=="object"&&(this.message="".concat(E.name," ").concat(E.message),this.inner=E):(this.message=me[f]||p,this.inner=null)}return de(x).from(Ct),l[f]=x,l},{});ze.Syntax=SyntaxError,ze.Type=TypeError,ze.Range=RangeError;var Fe=Lr.reduce(function(l,f){return l[f+"Error"]=ze[f],l},{}),Rt=kr.reduce(function(l,f){return["Syntax","Type","Range"].indexOf(f)===-1&&(l[f+"Error"]=ze[f]),l},{});function mt(){}function gn(l){return l}function rn(l,f){return l==null||l===gn?f:function(p){return f(l(p))}}function kt(l,f){return function(){l.apply(this,arguments),f.apply(this,arguments)}}function Dt(l,f){return l===mt?f:function(){var p=l.apply(this,arguments);p!==void 0&&(arguments[0]=p);var x=this.onsuccess,E=this.onerror;this.onsuccess=null,this.onerror=null;var k=f.apply(this,arguments);return x&&(this.onsuccess=this.onsuccess?kt(x,this.onsuccess):x),E&&(this.onerror=this.onerror?kt(E,this.onerror):E),k!==void 0?k:p}}function Mr(l,f){return l===mt?f:function(){l.apply(this,arguments);var p=this.onsuccess,x=this.onerror;this.onsuccess=this.onerror=null,f.apply(this,arguments),p&&(this.onsuccess=this.onsuccess?kt(p,this.onsuccess):p),x&&(this.onerror=this.onerror?kt(x,this.onerror):x)}}function pr(l,f){return l===mt?f:function(p){var x=l.apply(this,arguments);b(p,x);var E=this.onsuccess,k=this.onerror;return this.onsuccess=null,this.onerror=null,p=f.apply(this,arguments),E&&(this.onsuccess=this.onsuccess?kt(E,this.onsuccess):E),k&&(this.onerror=this.onerror?kt(k,this.onerror):k),x===void 0?p===void 0?void 0:p:b(x,p)}}function Zn(l,f){return l===mt?f:function(){return f.apply(this,arguments)!==!1&&l.apply(this,arguments)}}function wn(l,f){return l===mt?f:function(){var p=l.apply(this,arguments);if(p&&typeof p.then=="function"){for(var x=this,E=arguments.length,k=new Array(E);E--;)k[E]=arguments[E];return p.then(function(){return f.apply(x,k)})}return f.apply(this,arguments)}}Rt.ModifyError=Ve,Rt.DexieError=De,Rt.BulkError=Me;var mn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Qr(l){mn=l}var Cr={},On=100,gr=typeof Promise>"u"?[]:(function(){var l=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[l,S(l),l];var f=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[f,S(f),l]})(),Lr=gr[0],kr=gr[1],gr=gr[2],kr=kr&&kr.then,wr=Lr&&Lr.constructor,Jr=!!gr,ha=function(l,f){ir.push([l,f]),pa&&(queueMicrotask(Xr),pa=!1)},Ua=!0,pa=!0,zr=[],ar=[],In=gn,Tn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:mt,pgp:!1,env:{},finalize:mt},et=Tn,ir=[],sr=0,Zr=[];function Xe(l){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var f=this._PSD=et;if(typeof l!="function"){if(l!==Cr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Yr(this,this._value))}this._state=null,this._value=null,++f.ref,(function p(x,E){try{E(function(k){if(x._state===null){if(k===x)throw new TypeError("A promise cannot be resolved with itself.");var q=x._lib&&Jt();k&&typeof k.then=="function"?p(x,function(Y,P){k instanceof Xe?k._then(Y,P):k.then(Y,P)}):(x._state=!0,x._value=k,yr(x)),q&&_r()}},Yr.bind(null,x))}catch(k){Yr(x,k)}})(this,l)}var mr={get:function(){var l=et,f=O;function p(x,E){var k=this,q=!l.global&&(l!==et||f!==O),Y=q&&!qe(),P=new Xe(function(Q,ne){or(k,new Aa(jt(x,l,q,Y),jt(E,l,q,Y),Q,ne,l))});return this._consoleTask&&(P._consoleTask=this._consoleTask),P}return p.prototype=Cr,p},set:function(l){ge(this,"then",l&&l.prototype===Cr?mr:{get:function(){return l},set:mr.set})}};function Aa(l,f,p,x,E){this.onFulfilled=typeof l=="function"?l:null,this.onRejected=typeof f=="function"?f:null,this.resolve=p,this.reject=x,this.psd=E}function Yr(l,f){var p,x;ar.push(f),l._state===null&&(p=l._lib&&Jt(),f=In(f),l._state=!1,l._value=f,x=l,zr.some(function(E){return E._value===x._value})||zr.push(x),yr(l),p&&_r())}function yr(l){var f=l._listeners;l._listeners=[];for(var p=0,x=f.length;p<x;++p)or(l,f[p]);var E=l._PSD;--E.ref||E.finalize(),sr===0&&(++sr,ha(function(){--sr==0&&Sr()},[]))}function or(l,f){if(l._state!==null){var p=l._state?f.onFulfilled:f.onRejected;if(p===null)return(l._state?f.resolve:f.reject)(l._value);++f.psd.ref,++sr,ha(zn,[p,l,f])}else l._listeners.push(f)}function zn(l,f,p){try{var x,E=f._value;!f._state&&ar.length&&(ar=[]),x=mn&&f._consoleTask?f._consoleTask.run(function(){return l(E)}):l(E),f._state||ar.indexOf(E)!==-1||(function(k){for(var q=zr.length;q;)if(zr[--q]._value===k._value)return zr.splice(q,1)})(f),p.resolve(x)}catch(k){p.reject(k)}finally{--sr==0&&Sr(),--p.psd.ref||p.psd.finalize()}}function Xr(){Et(Tn,function(){Jt()&&_r()})}function Jt(){var l=Ua;return pa=Ua=!1,l}function _r(){var l,f,p;do for(;0<ir.length;)for(l=ir,ir=[],p=l.length,f=0;f<p;++f){var x=l[f];x[0].apply(null,x[1])}while(0<ir.length);pa=Ua=!0}function Sr(){var l=zr;zr=[],l.forEach(function(x){x._PSD.onunhandled.call(null,x._value,x)});for(var f=Zr.slice(0),p=f.length;p;)f[--p]()}function Sn(l){return new Xe(Cr,!1,l)}function vn(l,f){var p=et;return function(){var x=Jt(),E=et;try{return Ht(p,!0),l.apply(this,arguments)}catch(k){f&&f(k)}finally{Ht(E,!1),x&&_r()}}}L(Xe.prototype,{then:mr,_then:function(l,f){or(this,new Aa(null,null,l,f,et))},catch:function(l){if(arguments.length===1)return this.then(null,l);var f=l,p=arguments[1];return typeof f=="function"?this.then(null,function(x){return(x instanceof f?p:Sn)(x)}):this.then(null,function(x){return(x&&x.name===f?p:Sn)(x)})},finally:function(l){return this.then(function(f){return Xe.resolve(l()).then(function(){return f})},function(f){return Xe.resolve(l()).then(function(){return Sn(f)})})},timeout:function(l,f){var p=this;return l<1/0?new Xe(function(x,E){var k=setTimeout(function(){return E(new ze.Timeout(f))},l);p.then(x,E).finally(clearTimeout.bind(null,k))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&ge(Xe.prototype,Symbol.toStringTag,"Dexie.Promise"),Tn.env=ct(),L(Xe,{all:function(){var l=Qe.apply(null,arguments).map(ft);return new Xe(function(f,p){l.length===0&&f([]);var x=l.length;l.forEach(function(E,k){return Xe.resolve(E).then(function(q){l[k]=q,--x||f(l)},p)})})},resolve:function(l){return l instanceof Xe?l:l&&typeof l.then=="function"?new Xe(function(f,p){l.then(f,p)}):new Xe(Cr,!0,l)},reject:Sn,race:function(){var l=Qe.apply(null,arguments).map(ft);return new Xe(function(f,p){l.map(function(x){return Xe.resolve(x).then(f,p)})})},PSD:{get:function(){return et},set:function(l){return et=l}},totalEchoes:{get:function(){return O}},newPSD:W,usePSD:Et,scheduler:{get:function(){return ha},set:function(l){ha=l}},rejectionMapper:{get:function(){return In},set:function(l){In=l}},follow:function(l,f){return new Xe(function(p,x){return W(function(E,k){var q=et;q.unhandleds=[],q.onunhandled=k,q.finalize=kt(function(){var Y,P=this;Y=function(){P.unhandleds.length===0?E():k(P.unhandleds[0])},Zr.push(function Q(){Y(),Zr.splice(Zr.indexOf(Q),1)}),++sr,ha(function(){--sr==0&&Sr()},[])},q.finalize),l()},f,p,x)})}}),wr&&(wr.allSettled&&ge(Xe,"allSettled",function(){var l=Qe.apply(null,arguments).map(ft);return new Xe(function(f){l.length===0&&f([]);var p=l.length,x=new Array(p);l.forEach(function(E,k){return Xe.resolve(E).then(function(q){return x[k]={status:"fulfilled",value:q}},function(q){return x[k]={status:"rejected",reason:q}}).then(function(){return--p||f(x)})})})}),wr.any&&typeof AggregateError<"u"&&ge(Xe,"any",function(){var l=Qe.apply(null,arguments).map(ft);return new Xe(function(f,p){l.length===0&&p(new AggregateError([]));var x=l.length,E=new Array(x);l.forEach(function(k,q){return Xe.resolve(k).then(function(Y){return f(Y)},function(Y){E[q]=Y,--x||p(new AggregateError(E))})})})}),wr.withResolvers&&(Xe.withResolvers=wr.withResolvers));var w={awaits:0,echoes:0,id:0},R=0,B=[],h=0,O=0,te=0;function W(l,f,p,x){var E=et,k=Object.create(E);return k.parent=E,k.ref=0,k.global=!1,k.id=++te,Tn.env,k.env=Jr?{Promise:Xe,PromiseProp:{value:Xe,configurable:!0,writable:!0},all:Xe.all,race:Xe.race,allSettled:Xe.allSettled,any:Xe.any,resolve:Xe.resolve,reject:Xe.reject}:{},f&&b(k,f),++E.ref,k.finalize=function(){--this.parent.ref||this.parent.finalize()},x=Et(k,l,p,x),k.ref===0&&k.finalize(),x}function Ce(){return w.id||(w.id=++R),++w.awaits,w.echoes+=On,w.id}function qe(){return!!w.awaits&&(--w.awaits==0&&(w.id=0),w.echoes=w.awaits*On,!0)}function ft(l){return w.echoes&&l&&l.constructor===wr?(Ce(),l.then(function(f){return qe(),f},function(f){return qe(),dt(f)})):l}function st(){var l=B[B.length-1];B.pop(),Ht(l,!1)}function Ht(l,f){var p,x=et;(f?!w.echoes||h++&&l===et:!h||--h&&l===et)||queueMicrotask(f?(function(E){++O,w.echoes&&--w.echoes!=0||(w.echoes=w.awaits=w.id=0),B.push(et),Ht(E,!0)}).bind(null,l):st),l!==et&&(et=l,x===Tn&&(Tn.env=ct()),Jr&&(p=Tn.env.Promise,f=l.env,(x.global||l.global)&&(Object.defineProperty(g,"Promise",f.PromiseProp),p.all=f.all,p.race=f.race,p.resolve=f.resolve,p.reject=f.reject,f.allSettled&&(p.allSettled=f.allSettled),f.any&&(p.any=f.any))))}function ct(){var l=g.Promise;return Jr?{Promise:l,PromiseProp:Object.getOwnPropertyDescriptor(g,"Promise"),all:l.all,race:l.race,allSettled:l.allSettled,any:l.any,resolve:l.resolve,reject:l.reject}:{}}function Et(l,f,p,x,E){var k=et;try{return Ht(l,!0),f(p,x,E)}finally{Ht(k,!1)}}function jt(l,f,p,x){return typeof l!="function"?l:function(){var E=et;p&&Ce(),Ht(f,!0);try{return l.apply(this,arguments)}finally{Ht(E,!1),x&&queueMicrotask(qe)}}}function Ot(l){Promise===wr&&w.echoes===0?h===0?l():enqueueNativeMicroTask(l):setTimeout(l,0)}(""+kr).indexOf("[native code]")===-1&&(Ce=qe=mt);var dt=Xe.reject,wt="",xt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",yt="String expected.",ot=[],vt="__dbnames",tt="readonly",lt="readwrite";function ht(l,f){return l?f?function(){return l.apply(this,arguments)&&f.apply(this,arguments)}:l:f}var at={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function he(l){return typeof l!="string"||/\./.test(l)?function(f){return f}:function(f){return f[l]===void 0&&l in f&&delete(f=xe(f))[l],f}}function ye(){throw ze.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ve(l,f){try{var p=Ee(l),x=Ee(f);if(p!==x)return p==="Array"?1:x==="Array"?-1:p==="binary"?1:x==="binary"?-1:p==="string"?1:x==="string"?-1:p==="Date"?1:x!=="Date"?NaN:-1;switch(p){case"number":case"Date":case"string":return f<l?1:l<f?-1:0;case"binary":return(function(E,k){for(var q=E.length,Y=k.length,P=q<Y?q:Y,Q=0;Q<P;++Q)if(E[Q]!==k[Q])return E[Q]<k[Q]?-1:1;return q===Y?0:q<Y?-1:1})(Ae(l),Ae(f));case"Array":return(function(E,k){for(var q=E.length,Y=k.length,P=q<Y?q:Y,Q=0;Q<P;++Q){var ne=ve(E[Q],k[Q]);if(ne!==0)return ne}return q===Y?0:q<Y?-1:1})(l,f)}}catch{}return NaN}function Ee(l){var f=typeof l;return f!="object"?f:ArrayBuffer.isView(l)?"binary":(l=Ze(l),l==="ArrayBuffer"?"binary":l)}function Ae(l){return l instanceof Uint8Array?l:ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):new Uint8Array(l)}function je(l,f,p){var x=l.schema.yProps;return x?(f&&0<p.numFailures&&(f=f.filter(function(E,k){return!p.failures[k]})),Promise.all(x.map(function(E){return E=E.updatesTable,f?l.db.table(E).where("k").anyOf(f).delete():l.db.table(E).clear()})).then(function(){return p})):p}var St=(nt.prototype.execute=function(l){var f=this["@@propmod"];if(f.add!==void 0){var p=f.add;if(M(p))return u(u([],M(l)?l:[],!0),p).sort();if(typeof p=="number")return(Number(l)||0)+p;if(typeof p=="bigint")try{return BigInt(l)+p}catch{return BigInt(0)+p}throw new TypeError("Invalid term ".concat(p))}if(f.remove!==void 0){var x=f.remove;if(M(x))return M(l)?l.filter(function(E){return!x.includes(E)}).sort():[];if(typeof x=="number")return Number(l)-x;if(typeof x=="bigint")try{return BigInt(l)-x}catch{return BigInt(0)-x}throw new TypeError("Invalid subtrahend ".concat(x))}return p=(p=f.replacePrefix)===null||p===void 0?void 0:p[0],p&&typeof l=="string"&&l.startsWith(p)?f.replacePrefix[1]+l.substring(p.length):l},nt);function nt(l){this["@@propmod"]=l}function zt(l,f){for(var p=A(f),x=p.length,E=!1,k=0;k<x;++k){var q=p[k],Y=f[q],P=rt(l,q);Y instanceof St?(it(l,q,Y.execute(P)),E=!0):P!==Y&&(it(l,q,Y),E=!0)}return E}var Yt=(z.prototype._trans=function(l,f,p){var x=this._tx||et.trans,E=this.name,k=mn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(l==="readonly"?"read":"write"," ").concat(this.name));function q(Q,ne,V){if(!V.schema[E])throw new ze.NotFound("Table "+E+" not part of transaction");return f(V.idbtrans,V)}var Y=Jt();try{var P=x&&x.db._novip===this.db._novip?x===et.trans?x._promise(l,q,p):W(function(){return x._promise(l,q,p)},{trans:x,transless:et.transless||et}):(function Q(ne,V,ae,J){if(ne.idbdb&&(ne._state.openComplete||et.letThrough||ne._vip)){var $=ne._createTransaction(V,ae,ne._dbSchema);try{$.create(),ne._state.PR1398_maxLoop=3}catch(ee){return ee.name===gt.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return Q(ne,V,ae,J)})):dt(ee)}return $._promise(V,function(ee,re){return W(function(){return et.trans=$,J(ee,re,$)})}).then(function(ee){if(V==="readwrite")try{$.idbtrans.commit()}catch{}return V==="readonly"?ee:$._completion.then(function(){return ee})})}if(ne._state.openComplete)return dt(new ze.DatabaseClosed(ne._state.dbOpenError));if(!ne._state.isBeingOpened){if(!ne._state.autoOpen)return dt(new ze.DatabaseClosed);ne.open().catch(mt)}return ne._state.dbReadyPromise.then(function(){return Q(ne,V,ae,J)})})(this.db,l,[this.name],q);return k&&(P._consoleTask=k,P=P.catch(function(Q){return console.trace(Q),dt(Q)})),P}finally{Y&&_r()}},z.prototype.get=function(l,f){var p=this;return l&&l.constructor===Object?this.where(l).first(f):l==null?dt(new ze.Type("Invalid argument to Table.get()")):this._trans("readonly",function(x){return p.core.get({trans:x,key:l}).then(function(E){return p.hook.reading.fire(E)})}).then(f)},z.prototype.where=function(l){if(typeof l=="string")return new this.db.WhereClause(this,l);if(M(l))return new this.db.WhereClause(this,"[".concat(l.join("+"),"]"));var f=A(l);if(f.length===1)return this.where(f[0]).equals(l[f[0]]);var p=this.schema.indexes.concat(this.schema.primKey).filter(function(Y){if(Y.compound&&f.every(function(Q){return 0<=Y.keyPath.indexOf(Q)})){for(var P=0;P<f.length;++P)if(f.indexOf(Y.keyPath[P])===-1)return!1;return!0}return!1}).sort(function(Y,P){return Y.keyPath.length-P.keyPath.length})[0];if(p&&this.db._maxKey!==wt){var k=p.keyPath.slice(0,f.length);return this.where(k).equals(k.map(function(P){return l[P]}))}!p&&mn&&console.warn("The query ".concat(JSON.stringify(l)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(f.join("+"),"]"));var x=this.schema.idxByName;function E(Y,P){return ve(Y,P)===0}var q=f.reduce(function(V,P){var Q=V[0],ne=V[1],V=x[P],ae=l[P];return[Q||V,Q||!V?ht(ne,V&&V.multi?function(J){return J=rt(J,P),M(J)&&J.some(function($){return E(ae,$)})}:function(J){return E(ae,rt(J,P))}):ne]},[null,null]),k=q[0],q=q[1];return k?this.where(k.name).equals(l[k.keyPath]).filter(q):p?this.filter(q):this.where(f).equals("")},z.prototype.filter=function(l){return this.toCollection().and(l)},z.prototype.count=function(l){return this.toCollection().count(l)},z.prototype.offset=function(l){return this.toCollection().offset(l)},z.prototype.limit=function(l){return this.toCollection().limit(l)},z.prototype.each=function(l){return this.toCollection().each(l)},z.prototype.toArray=function(l){return this.toCollection().toArray(l)},z.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},z.prototype.orderBy=function(l){return new this.db.Collection(new this.db.WhereClause(this,M(l)?"[".concat(l.join("+"),"]"):l))},z.prototype.reverse=function(){return this.toCollection().reverse()},z.prototype.mapToClass=function(l){var f,p=this.db,x=this.name;function E(){return f!==null&&f.apply(this,arguments)||this}(this.schema.mappedClass=l).prototype instanceof ye&&((function(P,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function ne(){this.constructor=P}i(P,Q),P.prototype=Q===null?Object.create(Q):(ne.prototype=Q.prototype,new ne)})(E,f=l),Object.defineProperty(E.prototype,"db",{get:function(){return p},enumerable:!1,configurable:!0}),E.prototype.table=function(){return x},l=E);for(var k=new Set,q=l.prototype;q;q=S(q))Object.getOwnPropertyNames(q).forEach(function(P){return k.add(P)});function Y(P){if(!P)return P;var Q,ne=Object.create(l.prototype);for(Q in P)if(!k.has(Q))try{ne[Q]=P[Q]}catch{}return ne}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Y,this.hook("reading",Y),l},z.prototype.defineClass=function(){return this.mapToClass(function(l){b(this,l)})},z.prototype.add=function(l,f){var p=this,x=this.schema.primKey,E=x.auto,k=x.keyPath,q=l;return k&&E&&(q=he(k)(l)),this._trans("readwrite",function(Y){return p.core.mutate({trans:Y,type:"add",keys:f!=null?[f]:null,values:[q]})}).then(function(Y){return Y.numFailures?Xe.reject(Y.failures[0]):Y.lastResult}).then(function(Y){if(k)try{it(l,k,Y)}catch{}return Y})},z.prototype.upsert=function(l,f){var p=this,x=this.schema.primKey.keyPath;return this._trans("readwrite",function(E){return p.core.get({trans:E,key:l}).then(function(k){var q=k??{};return zt(q,f),x&&it(q,x,l),p.core.mutate({trans:E,type:"put",values:[q],keys:[l],upsert:!0,updates:{keys:[l],changeSpecs:[f]}}).then(function(Y){return Y.numFailures?Xe.reject(Y.failures[0]):!!k})})})},z.prototype.update=function(l,f){return typeof l!="object"||M(l)?this.where(":id").equals(l).modify(f):(l=rt(l,this.schema.primKey.keyPath),l===void 0?dt(new ze.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(l).modify(f))},z.prototype.put=function(l,f){var p=this,x=this.schema.primKey,E=x.auto,k=x.keyPath,q=l;return k&&E&&(q=he(k)(l)),this._trans("readwrite",function(Y){return p.core.mutate({trans:Y,type:"put",values:[q],keys:f!=null?[f]:null})}).then(function(Y){return Y.numFailures?Xe.reject(Y.failures[0]):Y.lastResult}).then(function(Y){if(k)try{it(l,k,Y)}catch{}return Y})},z.prototype.delete=function(l){var f=this;return this._trans("readwrite",function(p){return f.core.mutate({trans:p,type:"delete",keys:[l]}).then(function(x){return je(f,[l],x)}).then(function(x){return x.numFailures?Xe.reject(x.failures[0]):void 0})})},z.prototype.clear=function(){var l=this;return this._trans("readwrite",function(f){return l.core.mutate({trans:f,type:"deleteRange",range:at}).then(function(p){return je(l,null,p)})}).then(function(f){return f.numFailures?Xe.reject(f.failures[0]):void 0})},z.prototype.bulkGet=function(l){var f=this;return this._trans("readonly",function(p){return f.core.getMany({keys:l,trans:p}).then(function(x){return x.map(function(E){return f.hook.reading.fire(E)})})})},z.prototype.bulkAdd=function(l,f,p){var x=this,E=Array.isArray(f)?f:void 0,k=(p=p||(E?void 0:f))?p.allKeys:void 0;return this._trans("readwrite",function(q){var Q=x.schema.primKey,Y=Q.auto,Q=Q.keyPath;if(Q&&E)throw new ze.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(E&&E.length!==l.length)throw new ze.InvalidArgument("Arguments objects and keys must have the same length");var P=l.length,Q=Q&&Y?l.map(he(Q)):l;return x.core.mutate({trans:q,type:"add",keys:E,values:Q,wantResults:k}).then(function($){var V=$.numFailures,ae=$.results,J=$.lastResult,$=$.failures;if(V===0)return k?ae:J;throw new Me("".concat(x.name,".bulkAdd(): ").concat(V," of ").concat(P," operations failed"),$)})})},z.prototype.bulkPut=function(l,f,p){var x=this,E=Array.isArray(f)?f:void 0,k=(p=p||(E?void 0:f))?p.allKeys:void 0;return this._trans("readwrite",function(q){var Q=x.schema.primKey,Y=Q.auto,Q=Q.keyPath;if(Q&&E)throw new ze.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(E&&E.length!==l.length)throw new ze.InvalidArgument("Arguments objects and keys must have the same length");var P=l.length,Q=Q&&Y?l.map(he(Q)):l;return x.core.mutate({trans:q,type:"put",keys:E,values:Q,wantResults:k}).then(function($){var V=$.numFailures,ae=$.results,J=$.lastResult,$=$.failures;if(V===0)return k?ae:J;throw new Me("".concat(x.name,".bulkPut(): ").concat(V," of ").concat(P," operations failed"),$)})})},z.prototype.bulkUpdate=function(l){var f=this,p=this.core,x=l.map(function(q){return q.key}),E=l.map(function(q){return q.changes}),k=[];return this._trans("readwrite",function(q){return p.getMany({trans:q,keys:x,cache:"clone"}).then(function(Y){var P=[],Q=[];l.forEach(function(V,ae){var J=V.key,$=V.changes,ee=Y[ae];if(ee){for(var re=0,oe=Object.keys($);re<oe.length;re++){var fe=oe[re],we=$[fe];if(fe===f.schema.primKey.keyPath){if(ve(we,J)!==0)throw new ze.Constraint("Cannot update primary key in bulkUpdate()")}else it(ee,fe,we)}k.push(ae),P.push(J),Q.push(ee)}});var ne=P.length;return p.mutate({trans:q,type:"put",keys:P,values:Q,updates:{keys:x,changeSpecs:E}}).then(function(V){var ae=V.numFailures,J=V.failures;if(ae===0)return ne;for(var $=0,ee=Object.keys(J);$<ee.length;$++){var re,oe=ee[$],fe=k[Number(oe)];fe!=null&&(re=J[oe],delete J[oe],J[fe]=re)}throw new Me("".concat(f.name,".bulkUpdate(): ").concat(ae," of ").concat(ne," operations failed"),J)})})})},z.prototype.bulkDelete=function(l){var f=this,p=l.length;return this._trans("readwrite",function(x){return f.core.mutate({trans:x,type:"delete",keys:l}).then(function(E){return je(f,l,E)})}).then(function(q){var E=q.numFailures,k=q.lastResult,q=q.failures;if(E===0)return k;throw new Me("".concat(f.name,".bulkDelete(): ").concat(E," of ").concat(p," operations failed"),q)})},z);function z(){}function Kt(l){function f(q,Y){if(Y){for(var P=arguments.length,Q=new Array(P-1);--P;)Q[P-1]=arguments[P];return p[q].subscribe.apply(null,Q),l}if(typeof q=="string")return p[q]}var p={};f.addEventType=k;for(var x=1,E=arguments.length;x<E;++x)k(arguments[x]);return f;function k(q,Y,P){if(typeof q!="object"){var Q;Y=Y||Zn;var ne={subscribers:[],fire:P=P||mt,subscribe:function(V){ne.subscribers.indexOf(V)===-1&&(ne.subscribers.push(V),ne.fire=Y(ne.fire,V))},unsubscribe:function(V){ne.subscribers=ne.subscribers.filter(function(ae){return ae!==V}),ne.fire=ne.subscribers.reduce(Y,P)}};return p[q]=f[q]=ne}A(Q=q).forEach(function(V){var ae=Q[V];if(M(ae))k(V,Q[V][0],Q[V][1]);else{if(ae!=="asap")throw new ze.InvalidArgument("Invalid event config");var J=k(V,gn,function(){for(var $=arguments.length,ee=new Array($);$--;)ee[$]=arguments[$];J.subscribers.forEach(function(re){$e(function(){re.apply(null,ee)})})})}})}}function It(l,f){return de(f).from({prototype:l}),f}function Gt(l,f){return!(l.filter||l.algorithm||l.or)&&(f?l.justLimit:!l.replayFilter)}function Vt(l,f){l.filter=ht(l.filter,f)}function Qt(l,f,p){var x=l.replayFilter;l.replayFilter=x?function(){return ht(x(),f())}:f,l.justLimit=p&&!x}function Ft(l,f){if(l.isPrimKey)return f.primaryKey;var p=f.getIndexByKeyPath(l.index);if(!p)throw new ze.Schema("KeyPath "+l.index+" on object store "+f.name+" is not indexed");return p}function An(l,f,p){var x=Ft(l,f.schema);return f.openCursor({trans:p,values:!l.keysOnly,reverse:l.dir==="prev",unique:!!l.unique,query:{index:x,range:l.range}})}function tn(l,f,p,x){var E=l.replayFilter?ht(l.filter,l.replayFilter()):l.filter;if(l.or){var k={},q=function(Y,P,Q){var ne,V;E&&!E(P,Q,function(ae){return P.stop(ae)},function(ae){return P.fail(ae)})||((V=""+(ne=P.primaryKey))=="[object ArrayBuffer]"&&(V=""+new Uint8Array(ne)),j(k,V)||(k[V]=!0,f(Y,P,Q)))};return Promise.all([l.or._iterate(q,p),un(An(l,x,p),l.algorithm,q,!l.keysOnly&&l.valueMapper)])}return un(An(l,x,p),ht(l.algorithm,E),f,!l.keysOnly&&l.valueMapper)}function un(l,f,p,x){var E=vn(x?function(k,q,Y){return p(x(k),q,Y)}:p);return l.then(function(k){if(k)return k.start(function(){var q=function(){return k.continue()};f&&!f(k,function(Y){return q=Y},function(Y){k.stop(Y),q=mt},function(Y){k.fail(Y),q=mt})||E(k.value,k,function(Y){return q=Y}),q()})})}var Rn=(Mt.prototype._read=function(l,f){var p=this._ctx;return p.error?p.table._trans(null,dt.bind(null,p.error)):p.table._trans("readonly",l).then(f)},Mt.prototype._write=function(l){var f=this._ctx;return f.error?f.table._trans(null,dt.bind(null,f.error)):f.table._trans("readwrite",l,"locked")},Mt.prototype._addAlgorithm=function(l){var f=this._ctx;f.algorithm=ht(f.algorithm,l)},Mt.prototype._iterate=function(l,f){return tn(this._ctx,l,f,this._ctx.table.core)},Mt.prototype.clone=function(l){var f=Object.create(this.constructor.prototype),p=Object.create(this._ctx);return l&&b(p,l),f._ctx=p,f},Mt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Mt.prototype.each=function(l){var f=this._ctx;return this._read(function(p){return tn(f,l,p,f.table.core)})},Mt.prototype.count=function(l){var f=this;return this._read(function(p){var x=f._ctx,E=x.table.core;if(Gt(x,!0))return E.count({trans:p,query:{index:Ft(x,E.schema),range:x.range}}).then(function(q){return Math.min(q,x.limit)});var k=0;return tn(x,function(){return++k,!1},p,E).then(function(){return k})}).then(l)},Mt.prototype.sortBy=function(l,f){var p=l.split(".").reverse(),x=p[0],E=p.length-1;function k(P,Q){return Q?k(P[p[Q]],Q-1):P[x]}var q=this._ctx.dir==="next"?1:-1;function Y(P,Q){return ve(k(P,E),k(Q,E))*q}return this.toArray(function(P){return P.sort(Y)}).then(f)},Mt.prototype.toArray=function(l){var f=this;return this._read(function(p){var x=f._ctx;if(x.dir==="next"&&Gt(x,!0)&&0<x.limit){var E=x.valueMapper,k=Ft(x,x.table.core.schema);return x.table.core.query({trans:p,limit:x.limit,values:!0,query:{index:k,range:x.range}}).then(function(Y){return Y=Y.result,E?Y.map(E):Y})}var q=[];return tn(x,function(Y){return q.push(Y)},p,x.table.core).then(function(){return q})},l)},Mt.prototype.offset=function(l){var f=this._ctx;return l<=0||(f.offset+=l,Gt(f)?Qt(f,function(){var p=l;return function(x,E){return p===0||(p===1?--p:E(function(){x.advance(p),p=0}),!1)}}):Qt(f,function(){var p=l;return function(){return--p<0}})),this},Mt.prototype.limit=function(l){return this._ctx.limit=Math.min(this._ctx.limit,l),Qt(this._ctx,function(){var f=l;return function(p,x,E){return--f<=0&&x(E),0<=f}},!0),this},Mt.prototype.until=function(l,f){return Vt(this._ctx,function(p,x,E){return!l(p.value)||(x(E),f)}),this},Mt.prototype.first=function(l){return this.limit(1).toArray(function(f){return f[0]}).then(l)},Mt.prototype.last=function(l){return this.reverse().first(l)},Mt.prototype.filter=function(l){var f;return Vt(this._ctx,function(p){return l(p.value)}),(f=this._ctx).isMatch=ht(f.isMatch,l),this},Mt.prototype.and=function(l){return this.filter(l)},Mt.prototype.or=function(l){return new this.db.WhereClause(this._ctx.table,l,this)},Mt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Mt.prototype.desc=function(){return this.reverse()},Mt.prototype.eachKey=function(l){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(p,x){l(x.key,x)})},Mt.prototype.eachUniqueKey=function(l){return this._ctx.unique="unique",this.eachKey(l)},Mt.prototype.eachPrimaryKey=function(l){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(p,x){l(x.primaryKey,x)})},Mt.prototype.keys=function(l){var f=this._ctx;f.keysOnly=!f.isMatch;var p=[];return this.each(function(x,E){p.push(E.key)}).then(function(){return p}).then(l)},Mt.prototype.primaryKeys=function(l){var f=this._ctx;if(f.dir==="next"&&Gt(f,!0)&&0<f.limit)return this._read(function(x){var E=Ft(f,f.table.core.schema);return f.table.core.query({trans:x,values:!1,limit:f.limit,query:{index:E,range:f.range}})}).then(function(x){return x.result}).then(l);f.keysOnly=!f.isMatch;var p=[];return this.each(function(x,E){p.push(E.primaryKey)}).then(function(){return p}).then(l)},Mt.prototype.uniqueKeys=function(l){return this._ctx.unique="unique",this.keys(l)},Mt.prototype.firstKey=function(l){return this.limit(1).keys(function(f){return f[0]}).then(l)},Mt.prototype.lastKey=function(l){return this.reverse().firstKey(l)},Mt.prototype.distinct=function(){var l=this._ctx,l=l.index&&l.table.schema.idxByName[l.index];if(!l||!l.multi)return this;var f={};return Vt(this._ctx,function(E){var x=E.primaryKey.toString(),E=j(f,x);return f[x]=!0,!E}),this},Mt.prototype.modify=function(l){var f=this,p=this._ctx;return this._write(function(x){var E=typeof l=="function"?l:function(ee){return zt(ee,l)},k=p.table.core,Q=k.schema.primaryKey,q=Q.outbound,Y=Q.extractKey,P=200,Q=f.db._options.modifyChunkSize;Q&&(P=typeof Q=="object"?Q[k.name]||Q["*"]||200:Q);function ne(ee,fe){var oe=fe.failures,fe=fe.numFailures;ae+=ee-fe;for(var we=0,Ne=A(oe);we<Ne.length;we++){var y=Ne[we];V.push(oe[y])}}var V=[],ae=0,J=[],$=l===yn;return f.clone().primaryKeys().then(function(ee){function re(fe){var we=Math.min(P,ee.length-fe),Ne=ee.slice(fe,fe+we);return($?Promise.resolve([]):k.getMany({trans:x,keys:Ne,cache:"immutable"})).then(function(y){var m=[],T=[],N=q?[]:null,I=$?Ne:[];if(!$)for(var U=0;U<we;++U){var G=y[U],H={value:xe(G),primKey:ee[fe+U]};E.call(H,H.value,H)!==!1&&(H.value==null?I.push(ee[fe+U]):q||ve(Y(G),Y(H.value))===0?(T.push(H.value),q&&N.push(ee[fe+U])):(I.push(ee[fe+U]),m.push(H.value)))}return Promise.resolve(0<m.length&&k.mutate({trans:x,type:"add",values:m}).then(function(le){for(var _e in le.failures)I.splice(parseInt(_e),1);ne(m.length,le)})).then(function(){return(0<T.length||oe&&typeof l=="object")&&k.mutate({trans:x,type:"put",keys:N,values:T,criteria:oe,changeSpec:typeof l!="function"&&l,isAdditionalChunk:0<fe}).then(function(le){return ne(T.length,le)})}).then(function(){return(0<I.length||oe&&$)&&k.mutate({trans:x,type:"delete",keys:I,criteria:oe,isAdditionalChunk:0<fe}).then(function(le){return je(p.table,I,le)}).then(function(le){return ne(I.length,le)})}).then(function(){return ee.length>fe+we&&re(fe+P)})})}var oe=Gt(p)&&p.limit===1/0&&(typeof l!="function"||$)&&{index:p.index,range:p.range};return re(0).then(function(){if(0<V.length)throw new Ve("Error modifying one or more objects",V,ae,J);return ee.length})})})},Mt.prototype.delete=function(){var l=this._ctx,f=l.range;return!Gt(l)||l.table.schema.yProps||!l.isPrimKey&&f.type!==3?this.modify(yn):this._write(function(p){var x=l.table.core.schema.primaryKey,E=f;return l.table.core.count({trans:p,query:{index:x,range:E}}).then(function(k){return l.table.core.mutate({trans:p,type:"deleteRange",range:E}).then(function(P){var Y=P.failures,P=P.numFailures;if(P)throw new Ve("Could not delete some values",Object.keys(Y).map(function(Q){return Y[Q]}),k-P);return k-P})})})},Mt);function Mt(){}var yn=function(l,f){return f.value=null};function Yn(l,f){return l<f?-1:l===f?0:1}function Mn(l,f){return f<l?-1:l===f?0:1}function fn(l,f,p){return l=l instanceof Ea?new l.Collection(l):l,l._ctx.error=new(p||TypeError)(f),l}function oa(l){return new l.Collection(l,function(){return bi("")}).limit(0)}function Or(l,f,p,x){var E,k,q,Y,P,Q,ne,V=p.length;if(!p.every(function($){return typeof $=="string"}))return fn(l,yt);function ae($){E=$==="next"?function(re){return re.toUpperCase()}:function(re){return re.toLowerCase()},k=$==="next"?function(re){return re.toLowerCase()}:function(re){return re.toUpperCase()},q=$==="next"?Yn:Mn;var ee=p.map(function(re){return{lower:k(re),upper:E(re)}}).sort(function(re,oe){return q(re.lower,oe.lower)});Y=ee.map(function(re){return re.upper}),P=ee.map(function(re){return re.lower}),ne=(Q=$)==="next"?"":x}ae("next"),l=new l.Collection(l,function(){return Wr(Y[0],P[V-1]+x)}),l._ondirectionchange=function($){ae($)};var J=0;return l._addAlgorithm(function($,ee,re){var oe=$.key;if(typeof oe!="string")return!1;var fe=k(oe);if(f(fe,P,J))return!0;for(var we=null,Ne=J;Ne<V;++Ne){var y=(function(m,T,N,I,U,G){for(var H=Math.min(m.length,I.length),le=-1,_e=0;_e<H;++_e){var We=T[_e];if(We!==I[_e])return U(m[_e],N[_e])<0?m.substr(0,_e)+N[_e]+N.substr(_e+1):U(m[_e],I[_e])<0?m.substr(0,_e)+I[_e]+N.substr(_e+1):0<=le?m.substr(0,le)+T[le]+N.substr(le+1):null;U(m[_e],We)<0&&(le=_e)}return H<I.length&&G==="next"?m+N.substr(m.length):H<m.length&&G==="prev"?m.substr(0,N.length):le<0?null:m.substr(0,le)+I[le]+N.substr(le+1)})(oe,fe,Y[Ne],P[Ne],q,Q);y===null&&we===null?J=Ne+1:(we===null||0<q(we,y))&&(we=y)}return ee(we!==null?function(){$.continue(we+ne)}:re),!1}),l}function Wr(l,f,p,x){return{type:2,lower:l,upper:f,lowerOpen:p,upperOpen:x}}function bi(l){return{type:1,lower:l,upper:l}}var Ea=(Object.defineProperty(qn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),qn.prototype.between=function(l,f,p,x){p=p!==!1,x=x===!0;try{return 0<this._cmp(l,f)||this._cmp(l,f)===0&&(p||x)&&(!p||!x)?oa(this):new this.Collection(this,function(){return Wr(l,f,!p,!x)})}catch{return fn(this,xt)}},qn.prototype.equals=function(l){return l==null?fn(this,xt):new this.Collection(this,function(){return bi(l)})},qn.prototype.above=function(l){return l==null?fn(this,xt):new this.Collection(this,function(){return Wr(l,void 0,!0)})},qn.prototype.aboveOrEqual=function(l){return l==null?fn(this,xt):new this.Collection(this,function(){return Wr(l,void 0,!1)})},qn.prototype.below=function(l){return l==null?fn(this,xt):new this.Collection(this,function(){return Wr(void 0,l,!1,!0)})},qn.prototype.belowOrEqual=function(l){return l==null?fn(this,xt):new this.Collection(this,function(){return Wr(void 0,l)})},qn.prototype.startsWith=function(l){return typeof l!="string"?fn(this,yt):this.between(l,l+wt,!0,!0)},qn.prototype.startsWithIgnoreCase=function(l){return l===""?this.startsWith(l):Or(this,function(f,p){return f.indexOf(p[0])===0},[l],wt)},qn.prototype.equalsIgnoreCase=function(l){return Or(this,function(f,p){return f===p[0]},[l],"")},qn.prototype.anyOfIgnoreCase=function(){var l=Qe.apply(Re,arguments);return l.length===0?oa(this):Or(this,function(f,p){return p.indexOf(f)!==-1},l,"")},qn.prototype.startsWithAnyOfIgnoreCase=function(){var l=Qe.apply(Re,arguments);return l.length===0?oa(this):Or(this,function(f,p){return p.some(function(x){return f.indexOf(x)===0})},l,wt)},qn.prototype.anyOf=function(){var l=this,f=Qe.apply(Re,arguments),p=this._cmp;try{f.sort(p)}catch{return fn(this,xt)}if(f.length===0)return oa(this);var x=new this.Collection(this,function(){return Wr(f[0],f[f.length-1])});x._ondirectionchange=function(k){p=k==="next"?l._ascending:l._descending,f.sort(p)};var E=0;return x._addAlgorithm(function(k,q,Y){for(var P=k.key;0<p(P,f[E]);)if(++E===f.length)return q(Y),!1;return p(P,f[E])===0||(q(function(){k.continue(f[E])}),!1)}),x},qn.prototype.notEqual=function(l){return this.inAnyRange([[-1/0,l],[l,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},qn.prototype.noneOf=function(){var l=Qe.apply(Re,arguments);if(l.length===0)return new this.Collection(this);try{l.sort(this._ascending)}catch{return fn(this,xt)}var f=l.reduce(function(p,x){return p?p.concat([[p[p.length-1][1],x]]):[[-1/0,x]]},null);return f.push([l[l.length-1],this.db._maxKey]),this.inAnyRange(f,{includeLowers:!1,includeUppers:!1})},qn.prototype.inAnyRange=function(oe,f){var p=this,x=this._cmp,E=this._ascending,k=this._descending,q=this._min,Y=this._max;if(oe.length===0)return oa(this);if(!oe.every(function(fe){return fe[0]!==void 0&&fe[1]!==void 0&&E(fe[0],fe[1])<=0}))return fn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ze.InvalidArgument);var P=!f||f.includeLowers!==!1,Q=f&&f.includeUppers===!0,ne,V=E;function ae(fe,we){return V(fe[0],we[0])}try{(ne=oe.reduce(function(fe,we){for(var Ne=0,y=fe.length;Ne<y;++Ne){var m=fe[Ne];if(x(we[0],m[1])<0&&0<x(we[1],m[0])){m[0]=q(m[0],we[0]),m[1]=Y(m[1],we[1]);break}}return Ne===y&&fe.push(we),fe},[])).sort(ae)}catch{return fn(this,xt)}var J=0,$=Q?function(fe){return 0<E(fe,ne[J][1])}:function(fe){return 0<=E(fe,ne[J][1])},ee=P?function(fe){return 0<k(fe,ne[J][0])}:function(fe){return 0<=k(fe,ne[J][0])},re=$,oe=new this.Collection(this,function(){return Wr(ne[0][0],ne[ne.length-1][1],!P,!Q)});return oe._ondirectionchange=function(fe){V=fe==="next"?(re=$,E):(re=ee,k),ne.sort(ae)},oe._addAlgorithm(function(fe,we,Ne){for(var y,m=fe.key;re(m);)if(++J===ne.length)return we(Ne),!1;return!$(y=m)&&!ee(y)||(p._cmp(m,ne[J][1])===0||p._cmp(m,ne[J][0])===0||we(function(){V===E?fe.continue(ne[J][0]):fe.continue(ne[J][1])}),!1)}),oe},qn.prototype.startsWithAnyOf=function(){var l=Qe.apply(Re,arguments);return l.every(function(f){return typeof f=="string"})?l.length===0?oa(this):this.inAnyRange(l.map(function(f){return[f,f+wt]})):fn(this,"startsWithAnyOf() only works with strings")},qn);function qn(){}function Kr(l){return vn(function(f){return Ta(f),l(f.target.error),!1})}function Ta(l){l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault()}var La="storagemutated",Ma="x-storagemutated-1",Kn=Kt(null,La),Ci=(vr.prototype._lock=function(){return ut(!et.global),++this._reculock,this._reculock!==1||et.global||(et.lockOwnerFor=this),this},vr.prototype._unlock=function(){if(ut(!et.global),--this._reculock==0)for(et.global||(et.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var l=this._blockedFuncs.shift();try{Et(l[1],l[0])}catch{}}return this},vr.prototype._locked=function(){return this._reculock&&et.lockOwnerFor!==this},vr.prototype.create=function(l){var f=this;if(!this.mode)return this;var p=this.db.idbdb,x=this.db._state.dbOpenError;if(ut(!this.idbtrans),!l&&!p)switch(x&&x.name){case"DatabaseClosedError":throw new ze.DatabaseClosed(x);case"MissingAPIError":throw new ze.MissingAPI(x.message,x);default:throw new ze.OpenFailed(x)}if(!this.active)throw new ze.TransactionInactive;return ut(this._completion._state===null),(l=this.idbtrans=l||(this.db.core||p).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=vn(function(E){Ta(E),f._reject(l.error)}),l.onabort=vn(function(E){Ta(E),f.active&&f._reject(new ze.Abort(l.error)),f.active=!1,f.on("abort").fire(E)}),l.oncomplete=vn(function(){f.active=!1,f._resolve(),"mutatedParts"in l&&Kn.storagemutated.fire(l.mutatedParts)}),this},vr.prototype._promise=function(l,f,p){var x=this;if(l==="readwrite"&&this.mode!=="readwrite")return dt(new ze.ReadOnly("Transaction is readonly"));if(!this.active)return dt(new ze.TransactionInactive);if(this._locked())return new Xe(function(k,q){x._blockedFuncs.push([function(){x._promise(l,f,p).then(k,q)},et])});if(p)return W(function(){var k=new Xe(function(q,Y){x._lock();var P=f(q,Y,x);P&&P.then&&P.then(q,Y)});return k.finally(function(){return x._unlock()}),k._lib=!0,k});var E=new Xe(function(k,q){var Y=f(k,q,x);Y&&Y.then&&Y.then(k,q)});return E._lib=!0,E},vr.prototype._root=function(){return this.parent?this.parent._root():this},vr.prototype.waitFor=function(l){var f,p=this._root(),x=Xe.resolve(l);p._waitingFor?p._waitingFor=p._waitingFor.then(function(){return x}):(p._waitingFor=x,p._waitingQueue=[],f=p.idbtrans.objectStore(p.storeNames[0]),(function k(){for(++p._spinCount;p._waitingQueue.length;)p._waitingQueue.shift()();p._waitingFor&&(f.get(-1/0).onsuccess=k)})());var E=p._waitingFor;return new Xe(function(k,q){x.then(function(Y){return p._waitingQueue.push(vn(k.bind(null,Y)))},function(Y){return p._waitingQueue.push(vn(q.bind(null,Y)))}).finally(function(){p._waitingFor===E&&(p._waitingFor=null)})})},vr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ze.Abort))},vr.prototype.table=function(l){var f=this._memoizedTables||(this._memoizedTables={});if(j(f,l))return f[l];var p=this.schema[l];if(!p)throw new ze.NotFound("Table "+l+" not part of transaction");return p=new this.db.Table(l,p,this),p.core=this.db.core.table(l),f[l]=p},vr);function vr(){}function Gr(l,f,p,x,E,k,q,Y){return{name:l,keyPath:f,unique:p,multi:x,auto:E,compound:k,src:(p&&!q?"&":"")+(x?"*":"")+(E?"++":"")+wi(f),type:Y}}function wi(l){return typeof l=="string"?l:l?"["+[].join.call(l,"+")+"]":""}function za(l,f,p){return{name:l,primKey:f,indexes:p,mappedClass:null,idxByName:(x=function(E){return[E.name,E]},p.reduce(function(E,k,q){return q=x(k,q),q&&(E[q[0]]=q[1]),E},{}))};var x}var _a=function(l){try{return l.only([[]]),_a=function(){return[[]]},[[]]}catch{return _a=function(){return wt},wt}};function Ya(l){return l==null?function(){}:typeof l=="string"?(f=l).split(".").length===1?function(p){return p[f]}:function(p){return rt(p,f)}:function(p){return rt(p,l)};var f}function Wa(l){return[].slice.call(l)}var Ls=0;function Xn(l){return l==null?":id":typeof l=="string"?l:"[".concat(l.join("+"),"]")}function ka(l,f,P){function x(re){if(re.type===3)return null;if(re.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var J=re.lower,$=re.upper,ee=re.lowerOpen,re=re.upperOpen;return J===void 0?$===void 0?null:f.upperBound($,!!re):$===void 0?f.lowerBound(J,!!ee):f.bound(J,$,!!ee,!!re)}function E(ae){var J,$=ae.name;return{name:$,schema:ae,mutate:function(ee){var re=ee.trans,oe=ee.type,fe=ee.keys,we=ee.values,Ne=ee.range;return new Promise(function(y,m){y=vn(y);var T=re.objectStore($),N=T.keyPath==null,I=oe==="put"||oe==="add";if(!I&&oe!=="delete"&&oe!=="deleteRange")throw new Error("Invalid operation type: "+oe);var U,G=(fe||we||{length:1}).length;if(fe&&we&&fe.length!==we.length)throw new Error("Given keys array must have same length as given values array.");if(G===0)return y({numFailures:0,failures:{},results:[],lastResult:void 0});function H(en){++We,Ta(en)}var le=[],_e=[],We=0;if(oe==="deleteRange"){if(Ne.type===4)return y({numFailures:We,failures:_e,results:[],lastResult:void 0});Ne.type===3?le.push(U=T.clear()):le.push(U=T.delete(x(Ne)))}else{var N=I?N?[we,fe]:[we,null]:[fe,null],Je=N[0],Ut=N[1];if(I)for(var Nt=0;Nt<G;++Nt)le.push(U=Ut&&Ut[Nt]!==void 0?T[oe](Je[Nt],Ut[Nt]):T[oe](Je[Nt])),U.onerror=H;else for(Nt=0;Nt<G;++Nt)le.push(U=T[oe](Je[Nt])),U.onerror=H}function xn(en){en=en.target.result,le.forEach(function(hn,Fn){return hn.error!=null&&(_e[Fn]=hn.error)}),y({numFailures:We,failures:_e,results:oe==="delete"?fe:le.map(function(hn){return hn.result}),lastResult:en})}U.onerror=function(en){H(en),xn(en)},U.onsuccess=xn})},getMany:function(ee){var re=ee.trans,oe=ee.keys;return new Promise(function(fe,we){fe=vn(fe);for(var Ne,y=re.objectStore($),m=oe.length,T=new Array(m),N=0,I=0,U=function(le){le=le.target,T[le._pos]=le.result,++I===N&&fe(T)},G=Kr(we),H=0;H<m;++H)oe[H]!=null&&((Ne=y.get(oe[H]))._pos=H,Ne.onsuccess=U,Ne.onerror=G,++N);N===0&&fe(T)})},get:function(ee){var re=ee.trans,oe=ee.key;return new Promise(function(fe,we){fe=vn(fe);var Ne=re.objectStore($).get(oe);Ne.onsuccess=function(y){return fe(y.target.result)},Ne.onerror=Kr(we)})},query:(J=Q,function(ee){return new Promise(function(re,oe){re=vn(re);var fe,we,Ne,N=ee.trans,y=ee.values,m=ee.limit,U=ee.query,T=m===1/0?void 0:m,I=U.index,U=U.range,N=N.objectStore($),I=I.isPrimaryKey?N:N.index(I.name),U=x(U);if(m===0)return re({result:[]});J?((T=y?I.getAll(U,T):I.getAllKeys(U,T)).onsuccess=function(G){return re({result:G.target.result})},T.onerror=Kr(oe)):(fe=0,we=!y&&"openKeyCursor"in I?I.openKeyCursor(U):I.openCursor(U),Ne=[],we.onsuccess=function(G){var H=we.result;return H?(Ne.push(y?H.value:H.primaryKey),++fe===m?re({result:Ne}):void H.continue()):re({result:Ne})},we.onerror=Kr(oe))})}),openCursor:function(ee){var re=ee.trans,oe=ee.values,fe=ee.query,we=ee.reverse,Ne=ee.unique;return new Promise(function(y,m){y=vn(y);var I=fe.index,T=fe.range,N=re.objectStore($),N=I.isPrimaryKey?N:N.index(I.name),I=we?Ne?"prevunique":"prev":Ne?"nextunique":"next",U=!oe&&"openKeyCursor"in N?N.openKeyCursor(x(T),I):N.openCursor(x(T),I);U.onerror=Kr(m),U.onsuccess=vn(function(G){var H,le,_e,We,Je=U.result;Je?(Je.___id=++Ls,Je.done=!1,H=Je.continue.bind(Je),le=(le=Je.continuePrimaryKey)&&le.bind(Je),_e=Je.advance.bind(Je),We=function(){throw new Error("Cursor not stopped")},Je.trans=re,Je.stop=Je.continue=Je.continuePrimaryKey=Je.advance=function(){throw new Error("Cursor not started")},Je.fail=vn(m),Je.next=function(){var Ut=this,Nt=1;return this.start(function(){return Nt--?Ut.continue():Ut.stop()}).then(function(){return Ut})},Je.start=function(Ut){function Nt(){if(U.result)try{Ut()}catch(en){Je.fail(en)}else Je.done=!0,Je.start=function(){throw new Error("Cursor behind last entry")},Je.stop()}var xn=new Promise(function(en,hn){en=vn(en),U.onerror=Kr(hn),Je.fail=hn,Je.stop=function(Fn){Je.stop=Je.continue=Je.continuePrimaryKey=Je.advance=We,en(Fn)}});return U.onsuccess=vn(function(en){U.onsuccess=Nt,Nt()}),Je.continue=H,Je.continuePrimaryKey=le,Je.advance=_e,Nt(),xn},y(Je)):y(null)},m)})},count:function(ee){var re=ee.query,oe=ee.trans,fe=re.index,we=re.range;return new Promise(function(Ne,y){var m=oe.objectStore($),T=fe.isPrimaryKey?m:m.index(fe.name),m=x(we),T=m?T.count(m):T.count();T.onsuccess=vn(function(N){return Ne(N.target.result)}),T.onerror=Kr(y)})}}}var k,q,Y,ne=(q=P,Y=Wa((k=l).objectStoreNames),{schema:{name:k.name,tables:Y.map(function(ae){return q.objectStore(ae)}).map(function(ae){var J=ae.keyPath,re=ae.autoIncrement,$=M(J),ee={},re={name:ae.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:J==null,compound:$,keyPath:J,autoIncrement:re,unique:!0,extractKey:Ya(J)},indexes:Wa(ae.indexNames).map(function(oe){return ae.index(oe)}).map(function(Ne){var fe=Ne.name,we=Ne.unique,y=Ne.multiEntry,Ne=Ne.keyPath,y={name:fe,compound:M(Ne),keyPath:Ne,unique:we,multiEntry:y,extractKey:Ya(Ne)};return ee[Xn(Ne)]=y}),getIndexByKeyPath:function(oe){return ee[Xn(oe)]}};return ee[":id"]=re.primaryKey,J!=null&&(ee[Xn(J)]=re.primaryKey),re})},hasGetAll:0<Y.length&&"getAll"in q.objectStore(Y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),P=ne.schema,Q=ne.hasGetAll,ne=P.tables.map(E),V={};return ne.forEach(function(ae){return V[ae.name]=ae}),{stack:"dbcore",transaction:l.transaction.bind(l),table:function(ae){if(!V[ae])throw new Error("Table '".concat(ae,"' not found"));return V[ae]},MIN_KEY:-1/0,MAX_KEY:_a(f),schema:P}}function Si(l,f,p,x){var E=p.IDBKeyRange;return p.indexedDB,{dbcore:(x=ka(f,E,x),l.dbcore.reduce(function(k,q){return q=q.create,s(s({},k),q(k))},x))}}function ga(l,x){var p=x.db,x=Si(l._middlewares,p,l._deps,x);l.core=x.dbcore,l.tables.forEach(function(E){var k=E.name;l.core.schema.tables.some(function(q){return q.name===k})&&(E.core=l.core.table(k),l[k]instanceof l.Table&&(l[k].core=E.core))})}function Ai(l,f,p,x){p.forEach(function(E){var k=x[E];f.forEach(function(q){var Y=(function P(Q,ne){return Pe(Q,ne)||(Q=S(Q))&&P(Q,ne)})(q,E);(!Y||"value"in Y&&Y.value===void 0)&&(q===l.Transaction.prototype||q instanceof l.Transaction?ge(q,E,{get:function(){return this.table(E)},set:function(P){X(this,E,{value:P,writable:!0,configurable:!0,enumerable:!0})}}):q[E]=new l.Table(E,k))})})}function $a(l,f){f.forEach(function(p){for(var x in p)p[x]instanceof l.Table&&delete p[x]})}function ls(l,f){return l._cfg.version-f._cfg.version}function Ba(l,f,p,x){var E=l._dbSchema;p.objectStoreNames.contains("$meta")&&!E.$meta&&(E.$meta=za("$meta",zs("")[0],[]),l._storeNames.push("$meta"));var k=l._createTransaction("readwrite",l._storeNames,E);k.create(p),k._completion.catch(x);var q=k._reject.bind(k),Y=et.transless||et;W(function(){return et.trans=k,et.transless=Y,f!==0?(ga(l,p),Q=f,((P=k).storeNames.includes("$meta")?P.table("$meta").get("version").then(function(ne){return ne??Q}):Xe.resolve(Q)).then(function(ne){return ae=ne,J=k,$=p,ee=[],ne=(V=l)._versions,re=V._dbSchema=Ka(0,V.idbdb,$),(ne=ne.filter(function(oe){return oe._cfg.version>=ae})).length!==0?(ne.forEach(function(oe){ee.push(function(){var fe=re,we=oe._cfg.dbschema;ei(V,fe,$),ei(V,we,$),re=V._dbSchema=we;var Ne=Ti(fe,we);Ne.add.forEach(function(I){cs($,I[0],I[1].primKey,I[1].indexes)}),Ne.change.forEach(function(I){if(I.recreate)throw new ze.Upgrade("Not yet support for changing primary key");var U=$.objectStore(I.name);I.add.forEach(function(G){return Mi(U,G)}),I.change.forEach(function(G){U.deleteIndex(G.name),Mi(U,G)}),I.del.forEach(function(G){return U.deleteIndex(G)})});var y=oe._cfg.contentUpgrade;if(y&&oe._cfg.version>ae){ga(V,$),J._memoizedTables={};var m=Bt(we);Ne.del.forEach(function(I){m[I]=fe[I]}),$a(V,[V.Transaction.prototype]),Ai(V,[V.Transaction.prototype],A(m),m),J.schema=m;var T,N=K(y);return N&&Ce(),Ne=Xe.follow(function(){var I;(T=y(J))&&N&&(I=qe.bind(null,null),T.then(I,I))}),T&&typeof T.then=="function"?Xe.resolve(T):Ne.then(function(){return T})}}),ee.push(function(fe){var we,Ne,y=oe._cfg.dbschema;we=y,Ne=fe,[].slice.call(Ne.db.objectStoreNames).forEach(function(m){return we[m]==null&&Ne.db.deleteObjectStore(m)}),$a(V,[V.Transaction.prototype]),Ai(V,[V.Transaction.prototype],V._storeNames,V._dbSchema),J.schema=V._dbSchema}),ee.push(function(fe){V.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(V.idbdb.version/10)===oe._cfg.version?(V.idbdb.deleteObjectStore("$meta"),delete V._dbSchema.$meta,V._storeNames=V._storeNames.filter(function(we){return we!=="$meta"})):fe.objectStore("$meta").put(oe._cfg.version,"version"))})}),(function oe(){return ee.length?Xe.resolve(ee.shift()(J.idbtrans)).then(oe):Xe.resolve()})().then(function(){us(re,$)})):Xe.resolve();var V,ae,J,$,ee,re}).catch(q)):(A(E).forEach(function(ne){cs(p,ne,E[ne].primKey,E[ne].indexes)}),ga(l,p),void Xe.follow(function(){return l.on.populate.fire(k)}).catch(q));var P,Q})}function Ei(l,f){us(l._dbSchema,f),f.db.version%10!=0||f.objectStoreNames.contains("$meta")||f.db.createObjectStore("$meta").add(Math.ceil(f.db.version/10-1),"version");var p=Ka(0,l.idbdb,f);ei(l,l._dbSchema,f);for(var x=0,E=Ti(p,l._dbSchema).change;x<E.length;x++){var k=(function(q){if(q.change.length||q.recreate)return console.warn("Unable to patch indexes of table ".concat(q.name," because it has changes on the type of index or primary key.")),{value:void 0};var Y=f.objectStore(q.name);q.add.forEach(function(P){mn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(q.name,".").concat(P.src)),Mi(Y,P)})})(E[x]);if(typeof k=="object")return k.value}}function Ti(l,f){var p,x={del:[],add:[],change:[]};for(p in l)f[p]||x.del.push(p);for(p in f){var E=l[p],k=f[p];if(E){var q={name:p,def:k,recreate:!1,del:[],add:[],change:[]};if(""+(E.primKey.keyPath||"")!=""+(k.primKey.keyPath||"")||E.primKey.auto!==k.primKey.auto)q.recreate=!0,x.change.push(q);else{var Y=E.idxByName,P=k.idxByName,Q=void 0;for(Q in Y)P[Q]||q.del.push(Q);for(Q in P){var ne=Y[Q],V=P[Q];ne?ne.src!==V.src&&q.change.push(V):q.add.push(V)}(0<q.del.length||0<q.add.length||0<q.change.length)&&x.change.push(q)}}else x.add.push([p,k])}return x}function cs(l,f,p,x){var E=l.db.createObjectStore(f,p.keyPath?{keyPath:p.keyPath,autoIncrement:p.auto}:{autoIncrement:p.auto});return x.forEach(function(k){return Mi(E,k)}),E}function us(l,f){A(l).forEach(function(p){f.db.objectStoreNames.contains(p)||(mn&&console.debug("Dexie: Creating missing table",p),cs(f,p,l[p].primKey,l[p].indexes))})}function Mi(l,f){l.createIndex(f.name,f.keyPath,{unique:f.unique,multiEntry:f.multi})}function Ka(l,f,p){var x={};return Ke(f.objectStoreNames,0).forEach(function(E){for(var k=p.objectStore(E),q=Gr(wi(Q=k.keyPath),Q||"",!0,!1,!!k.autoIncrement,Q&&typeof Q!="string",!0),Y=[],P=0;P<k.indexNames.length;++P){var ne=k.index(k.indexNames[P]),Q=ne.keyPath,ne=Gr(ne.name,Q,!!ne.unique,!!ne.multiEntry,!1,Q&&typeof Q!="string",!1);Y.push(ne)}x[E]=za(E,q,Y)}),x}function ei(l,f,p){for(var x=p.db.objectStoreNames,E=0;E<x.length;++E){var k=x[E],q=p.objectStore(k);l._hasGetAll="getAll"in q;for(var Y=0;Y<q.indexNames.length;++Y){var P=q.indexNames[Y],Q=q.index(P).keyPath,ne=typeof Q=="string"?Q:"["+Ke(Q).join("+")+"]";!f[k]||(Q=f[k].idxByName[ne])&&(Q.name=P,delete f[k].idxByName[ne],f[k].idxByName[P]=Q)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&g.WorkerGlobalScope&&g instanceof g.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(l._hasGetAll=!1)}function zs(l){return l.split(",").map(function(f,p){var k=f.split(":"),x=(E=k[1])===null||E===void 0?void 0:E.trim(),E=(f=k[0].trim()).replace(/([&*]|\+\+)/g,""),k=/^\[/.test(E)?E.match(/^\[(.*)\]$/)[1].split("+"):E;return Gr(E,k||null,/\&/.test(f),/\*/.test(f),/\+\+/.test(f),M(k),p===0,x)})}var To=(Ga.prototype._createTableSchema=za,Ga.prototype._parseIndexSyntax=zs,Ga.prototype._parseStoresSpec=function(l,f){var p=this;A(l).forEach(function(x){if(l[x]!==null){var E=p._parseIndexSyntax(l[x]),k=E.shift();if(!k)throw new ze.Schema("Invalid schema for table "+x+": "+l[x]);if(k.unique=!0,k.multi)throw new ze.Schema("Primary key cannot be multiEntry*");E.forEach(function(q){if(q.auto)throw new ze.Schema("Only primary key can be marked as autoIncrement (++)");if(!q.keyPath)throw new ze.Schema("Index must have a name and cannot be an empty string")}),E=p._createTableSchema(x,k,E),f[x]=E}})},Ga.prototype.stores=function(p){var f=this.db;this._cfg.storesSource=this._cfg.storesSource?b(this._cfg.storesSource,p):p;var p=f._versions,x={},E={};return p.forEach(function(k){b(x,k._cfg.storesSource),E=k._cfg.dbschema={},k._parseStoresSpec(x,E)}),f._dbSchema=E,$a(f,[f._allTables,f,f.Transaction.prototype]),Ai(f,[f._allTables,f,f.Transaction.prototype,this._cfg.tables],A(E),E),f._storeNames=A(E),this},Ga.prototype.upgrade=function(l){return this._cfg.contentUpgrade=wn(this._cfg.contentUpgrade||mt,l),this},Ga);function Ga(){}function fs(l,f){var p=l._dbNamesDB;return p||(p=l._dbNamesDB=new ea(vt,{addons:[],indexedDB:l,IDBKeyRange:f})).version(1).stores({dbnames:"name"}),p.table("dbnames")}function _i(l){return l&&typeof l.databases=="function"}function ds(l){return W(function(){return et.letThrough=!0,l()})}function hs(l){return!("from"in l)}var lr=function(l,f){if(!this){var p=new lr;return l&&"d"in l&&b(p,l),p}b(this,arguments.length?{d:1,from:l,to:1<arguments.length?f:l}:{d:0})};function ti(l,f,p){var x=ve(f,p);if(!isNaN(x)){if(0<x)throw RangeError();if(hs(l))return b(l,{from:f,to:p,d:1});var E=l.l,x=l.r;if(ve(p,l.from)<0)return E?ti(E,f,p):l.l={from:f,to:p,d:1,l:null,r:null},Bi(l);if(0<ve(f,l.to))return x?ti(x,f,p):l.r={from:f,to:p,d:1,l:null,r:null},Bi(l);ve(f,l.from)<0&&(l.from=f,l.l=null,l.d=x?x.d+1:1),0<ve(p,l.to)&&(l.to=p,l.r=null,l.d=l.l?l.l.d+1:1),p=!l.r,E&&!l.l&&Ra(l,E),x&&p&&Ra(l,x)}}function Ra(l,f){hs(f)||(function p(x,P){var k=P.from,q=P.to,Y=P.l,P=P.r;ti(x,k,q),Y&&p(x,Y),P&&p(x,P)})(l,f)}function Ys(l,f){var p=ki(f),x=p.next();if(x.done)return!1;for(var E=x.value,k=ki(l),q=k.next(E.from),Y=q.value;!x.done&&!q.done;){if(ve(Y.from,E.to)<=0&&0<=ve(Y.to,E.from))return!0;ve(E.from,Y.from)<0?E=(x=p.next(Y.from)).value:Y=(q=k.next(E.from)).value}return!1}function ki(l){var f=hs(l)?null:{s:0,n:l};return{next:function(p){for(var x=0<arguments.length;f;)switch(f.s){case 0:if(f.s=1,x)for(;f.n.l&&ve(p,f.n.from)<0;)f={up:f,n:f.n.l,s:1};else for(;f.n.l;)f={up:f,n:f.n.l,s:1};case 1:if(f.s=2,!x||ve(p,f.n.to)<=0)return{value:f.n,done:!1};case 2:if(f.n.r){f.s=3,f={up:f,n:f.n.r,s:0};continue}case 3:f=f.up}return{done:!0}}}}function Bi(l){var f,p,x=(((f=l.r)===null||f===void 0?void 0:f.d)||0)-(((p=l.l)===null||p===void 0?void 0:p.d)||0),E=1<x?"r":x<-1?"l":"";E&&(f=E=="r"?"l":"r",p=s({},l),x=l[E],l.from=x.from,l.to=x.to,l[E]=x[E],p[E]=x[f],(l[f]=p).d=ps(p)),l.d=ps(l)}function ps(p){var f=p.r,p=p.l;return(f?p?Math.max(f.d,p.d):f.d:p?p.d:0)+1}function ma(l,f){return A(f).forEach(function(p){l[p]?Ra(l[p],f[p]):l[p]=(function x(E){var k,q,Y={};for(k in E)j(E,k)&&(q=E[k],Y[k]=!q||typeof q!="object"||Le.has(q.constructor)?q:x(q));return Y})(f[p])}),l}function gs(l,f){return l.all||f.all||Object.keys(l).some(function(p){return f[p]&&Ys(f[p],l[p])})}L(lr.prototype,((kr={add:function(l){return Ra(this,l),this},addKey:function(l){return ti(this,l,l),this},addKeys:function(l){var f=this;return l.forEach(function(p){return ti(f,p,p)}),this},hasKey:function(l){var f=ki(this).next(l).value;return f&&ve(f.from,l)<=0&&0<=ve(f.to,l)}})[se]=function(){return ki(this)},kr));var Da={},ms={},ys=!1;function Ri(l){ma(ms,l),ys||(ys=!0,setTimeout(function(){ys=!1,vs(ms,!(ms={}))},0))}function vs(l,f){f===void 0&&(f=!1);var p=new Set;if(l.all)for(var x=0,E=Object.values(Da);x<E.length;x++)Ks(q=E[x],l,p,f);else for(var k in l){var q,Y=/^idb\:\/\/(.*)\/(.*)\//.exec(k);Y&&(k=Y[1],Y=Y[2],(q=Da["idb://".concat(k,"/").concat(Y)])&&Ks(q,l,p,f))}p.forEach(function(P){return P()})}function Ks(l,f,p,x){for(var E=[],k=0,q=Object.entries(l.queries.query);k<q.length;k++){for(var Y=q[k],P=Y[0],Q=[],ne=0,V=Y[1];ne<V.length;ne++){var ae=V[ne];gs(f,ae.obsSet)?ae.subscribers.forEach(function(re){return p.add(re)}):x&&Q.push(ae)}x&&E.push([P,Q])}if(x)for(var J=0,$=E;J<$.length;J++){var ee=$[J],P=ee[0],Q=ee[1];l.queries.query[P]=Q}}function Mo(l){var f=l._state,p=l._deps.indexedDB;if(f.isBeingOpened||l.idbdb)return f.dbReadyPromise.then(function(){return f.dbOpenError?dt(f.dbOpenError):l});f.isBeingOpened=!0,f.dbOpenError=null,f.openComplete=!1;var x=f.openCanceller,E=Math.round(10*l.verno),k=!1;function q(){if(f.openCanceller!==x)throw new ze.DatabaseClosed("db.open() was cancelled")}function Y(){return new Xe(function(ae,J){if(q(),!p)throw new ze.MissingAPI;var $=l.name,ee=f.autoSchema||!E?p.open($):p.open($,E);if(!ee)throw new ze.MissingAPI;ee.onerror=Kr(J),ee.onblocked=vn(l._fireOnBlocked),ee.onupgradeneeded=vn(function(re){var oe;ne=ee.transaction,f.autoSchema&&!l._options.allowEmptyDB?(ee.onerror=Ta,ne.abort(),ee.result.close(),(oe=p.deleteDatabase($)).onsuccess=oe.onerror=vn(function(){J(new ze.NoSuchDatabase("Database ".concat($," doesnt exist")))})):(ne.onerror=Kr(J),re=re.oldVersion>Math.pow(2,62)?0:re.oldVersion,V=re<1,l.idbdb=ee.result,k&&Ei(l,ne),Ba(l,re/10,ne,J))},J),ee.onsuccess=vn(function(){ne=null;var re,oe,fe,we,Ne,y=l.idbdb=ee.result,m=Ke(y.objectStoreNames);if(0<m.length)try{var T=y.transaction((we=m).length===1?we[0]:we,"readonly");if(f.autoSchema)oe=y,fe=T,(re=l).verno=oe.version/10,fe=re._dbSchema=Ka(0,oe,fe),re._storeNames=Ke(oe.objectStoreNames,0),Ai(re,[re._allTables],A(fe),fe);else if(ei(l,l._dbSchema,T),((Ne=Ti(Ka(0,(Ne=l).idbdb,T),Ne._dbSchema)).add.length||Ne.change.some(function(N){return N.add.length||N.change.length}))&&!k)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),y.close(),E=y.version+1,k=!0,ae(Y());ga(l,T)}catch{}ot.push(l),y.onversionchange=vn(function(N){f.vcFired=!0,l.on("versionchange").fire(N)}),y.onclose=vn(function(){l.close({disableAutoOpen:!1})}),V&&(Ne=l._deps,T=$,y=Ne.indexedDB,Ne=Ne.IDBKeyRange,_i(y)||T===vt||fs(y,Ne).put({name:T}).catch(mt)),ae()},J)}).catch(function(ae){switch(ae?.name){case"UnknownError":if(0<f.PR1398_maxLoop)return f.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Y();break;case"VersionError":if(0<E)return E=0,Y()}return Xe.reject(ae)})}var P,Q=f.dbReadyResolve,ne=null,V=!1;return Xe.race([x,(typeof navigator>"u"?Xe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ae){function J(){return indexedDB.databases().finally(ae)}P=setInterval(J,100),J()}).finally(function(){return clearInterval(P)}):Promise.resolve()).then(Y)]).then(function(){return q(),f.onReadyBeingFired=[],Xe.resolve(ds(function(){return l.on.ready.fire(l.vip)})).then(function ae(){if(0<f.onReadyBeingFired.length){var J=f.onReadyBeingFired.reduce(wn,mt);return f.onReadyBeingFired=[],Xe.resolve(ds(function(){return J(l.vip)})).then(ae)}})}).finally(function(){f.openCanceller===x&&(f.onReadyBeingFired=null,f.isBeingOpened=!1)}).catch(function(ae){f.dbOpenError=ae;try{ne&&ne.abort()}catch{}return x===f.openCanceller&&l._close(),dt(ae)}).finally(function(){f.openComplete=!0,Q()}).then(function(){var ae;return V&&(ae={},l.tables.forEach(function(J){J.schema.indexes.forEach(function($){$.name&&(ae["idb://".concat(l.name,"/").concat(J.name,"/").concat($.name)]=new lr(-1/0,[[[]]]))}),ae["idb://".concat(l.name,"/").concat(J.name,"/")]=ae["idb://".concat(l.name,"/").concat(J.name,"/:dels")]=new lr(-1/0,[[[]]])}),Kn(La).fire(ae),vs(ae,!0)),l})}function ni(l){function f(k){return l.next(k)}var p=E(f),x=E(function(k){return l.throw(k)});function E(k){return function(P){var Y=k(P),P=Y.value;return Y.done?P:P&&typeof P.then=="function"?P.then(p,x):M(P)?Promise.all(P).then(p,x):p(P)}}return E(f)()}function dn(l,f,p){for(var x=M(l)?l.slice():[l],E=0;E<p;++E)x.push(f);return x}var _o={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(l){return s(s({},l),{table:function(f){var p=l.table(f),x=p.schema,E={},k=[];function q(V,ae,J){var $=Xn(V),ee=E[$]=E[$]||[],re=V==null?0:typeof V=="string"?1:V.length,oe=0<ae,oe=s(s({},J),{name:oe?"".concat($,"(virtual-from:").concat(J.name,")"):J.name,lowLevelIndex:J,isVirtual:oe,keyTail:ae,keyLength:re,extractKey:Ya(V),unique:!oe&&J.unique});return ee.push(oe),oe.isPrimaryKey||k.push(oe),1<re&&q(re===2?V[0]:V.slice(0,re-1),ae+1,J),ee.sort(function(fe,we){return fe.keyTail-we.keyTail}),oe}f=q(x.primaryKey.keyPath,0,x.primaryKey),E[":id"]=[f];for(var Y=0,P=x.indexes;Y<P.length;Y++){var Q=P[Y];q(Q.keyPath,0,Q)}function ne(V){var ae,J=V.query.index;return J.isVirtual?s(s({},V),{query:{index:J.lowLevelIndex,range:(ae=V.query.range,J=J.keyTail,{type:ae.type===1?2:ae.type,lower:dn(ae.lower,ae.lowerOpen?l.MAX_KEY:l.MIN_KEY,J),lowerOpen:!0,upper:dn(ae.upper,ae.upperOpen?l.MIN_KEY:l.MAX_KEY,J),upperOpen:!0})}}):V}return s(s({},p),{schema:s(s({},x),{primaryKey:f,indexes:k,getIndexByKeyPath:function(V){return(V=E[Xn(V)])&&V[0]}}),count:function(V){return p.count(ne(V))},query:function(V){return p.query(ne(V))},openCursor:function(V){var ae=V.query.index,J=ae.keyTail,$=ae.isVirtual,ee=ae.keyLength;return $?p.openCursor(ne(V)).then(function(oe){return oe&&re(oe)}):p.openCursor(V);function re(oe){return Object.create(oe,{continue:{value:function(fe){fe!=null?oe.continue(dn(fe,V.reverse?l.MAX_KEY:l.MIN_KEY,J)):V.unique?oe.continue(oe.key.slice(0,ee).concat(V.reverse?l.MIN_KEY:l.MAX_KEY,J)):oe.continue()}},continuePrimaryKey:{value:function(fe,we){oe.continuePrimaryKey(dn(fe,l.MAX_KEY,J),we)}},primaryKey:{get:function(){return oe.primaryKey}},key:{get:function(){var fe=oe.key;return ee===1?fe[0]:fe.slice(0,ee)}},value:{get:function(){return oe.value}}})}}})}})}};function $r(l,f,p,x){return p=p||{},x=x||"",A(l).forEach(function(E){var k,q,Y;j(f,E)?(k=l[E],q=f[E],typeof k=="object"&&typeof q=="object"&&k&&q?(Y=Ze(k))!==Ze(q)?p[x+E]=f[E]:Y==="Object"?$r(k,q,p,x+E+"."):k!==q&&(p[x+E]=f[E]):k!==q&&(p[x+E]=f[E])):p[x+E]=void 0}),A(f).forEach(function(E){j(l,E)||(p[x+E]=f[E])}),p}function ri(l,f){return f.type==="delete"?f.keys:f.keys||f.values.map(l.extractKey)}var Gs={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(l){return s(s({},l),{table:function(f){var p=l.table(f),x=p.schema.primaryKey;return s(s({},p),{mutate:function(E){var k=et.trans,q=k.table(f).hook,Y=q.deleting,P=q.creating,Q=q.updating;switch(E.type){case"add":if(P.fire===mt)break;return k._promise("readwrite",function(){return ne(E)},!0);case"put":if(P.fire===mt&&Q.fire===mt)break;return k._promise("readwrite",function(){return ne(E)},!0);case"delete":if(Y.fire===mt)break;return k._promise("readwrite",function(){return ne(E)},!0);case"deleteRange":if(Y.fire===mt)break;return k._promise("readwrite",function(){return(function V(ae,J,$){return p.query({trans:ae,values:!1,query:{index:x,range:J},limit:$}).then(function(ee){var re=ee.result;return ne({type:"delete",keys:re,trans:ae}).then(function(oe){return 0<oe.numFailures?Promise.reject(oe.failures[0]):re.length<$?{failures:[],numFailures:0,lastResult:void 0}:V(ae,s(s({},J),{lower:re[re.length-1],lowerOpen:!0}),$)})})})(E.trans,E.range,1e4)},!0)}return p.mutate(E);function ne(V){var ae,J,$,ee=et.trans,re=V.keys||ri(x,V);if(!re)throw new Error("Keys missing");return(V=V.type==="add"||V.type==="put"?s(s({},V),{keys:re}):s({},V)).type!=="delete"&&(V.values=u([],V.values)),V.keys&&(V.keys=u([],V.keys)),ae=p,$=re,((J=V).type==="add"?Promise.resolve([]):ae.getMany({trans:J.trans,keys:$,cache:"immutable"})).then(function(oe){var fe=re.map(function(we,Ne){var y,m,T,N=oe[Ne],I={onerror:null,onsuccess:null};return V.type==="delete"?Y.fire.call(I,we,N,ee):V.type==="add"||N===void 0?(y=P.fire.call(I,we,V.values[Ne],ee),we==null&&y!=null&&(V.keys[Ne]=we=y,x.outbound||it(V.values[Ne],x.keyPath,we))):(y=$r(N,V.values[Ne]),(m=Q.fire.call(I,y,we,N,ee))&&(T=V.values[Ne],Object.keys(m).forEach(function(U){j(T,U)?T[U]=m[U]:it(T,U,m[U])}))),I});return p.mutate(V).then(function(we){for(var Ne=we.failures,y=we.results,m=we.numFailures,we=we.lastResult,T=0;T<re.length;++T){var N=(y||re)[T],I=fe[T];N==null?I.onerror&&I.onerror(Ne[T]):I.onsuccess&&I.onsuccess(V.type==="put"&&oe[T]?V.values[T]:N)}return{failures:Ne,results:y,numFailures:m,lastResult:we}}).catch(function(we){return fe.forEach(function(Ne){return Ne.onerror&&Ne.onerror(we)}),Promise.reject(we)})})}}})}})}};function Xt(l,f,p){try{if(!f||f.keys.length<l.length)return null;for(var x=[],E=0,k=0;E<f.keys.length&&k<l.length;++E)ve(f.keys[E],l[k])===0&&(x.push(p?xe(f.values[E]):f.values[E]),++k);return x.length===l.length?x:null}catch{return null}}var Vs={stack:"dbcore",level:-1,create:function(l){return{table:function(f){var p=l.table(f);return s(s({},p),{getMany:function(x){if(!x.cache)return p.getMany(x);var E=Xt(x.keys,x.trans._cache,x.cache==="clone");return E?Xe.resolve(E):p.getMany(x).then(function(k){return x.trans._cache={keys:x.keys,values:x.cache==="clone"?xe(k):k},k})},mutate:function(x){return x.type!=="add"&&(x.trans._cache=null),p.mutate(x)}})}}}};function Na(l,f){return l.trans.mode==="readonly"&&!!l.subscr&&!l.trans.explicit&&l.trans.db._options.cache!=="disabled"&&!f.schema.primaryKey.outbound}function Fs(l,f){switch(l){case"query":return f.values&&!f.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ko={stack:"dbcore",level:0,name:"Observability",create:function(l){var f=l.schema.name,p=new lr(l.MIN_KEY,l.MAX_KEY);return s(s({},l),{transaction:function(x,E,k){if(et.subscr&&E!=="readonly")throw new ze.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(et.querier));return l.transaction(x,E,k)},table:function(x){var E=l.table(x),k=E.schema,q=k.primaryKey,V=k.indexes,Y=q.extractKey,P=q.outbound,Q=q.autoIncrement&&V.filter(function(J){return J.compound&&J.keyPath.includes(q.keyPath)}),ne=s(s({},E),{mutate:function(J){function $(U){return U="idb://".concat(f,"/").concat(x,"/").concat(U),we[U]||(we[U]=new lr)}var ee,re,oe,fe=J.trans,we=J.mutatedParts||(J.mutatedParts={}),Ne=$(""),y=$(":dels"),m=J.type,I=J.type==="deleteRange"?[J.range]:J.type==="delete"?[J.keys]:J.values.length<50?[ri(q,J).filter(function(U){return U}),J.values]:[],T=I[0],N=I[1],I=J.trans._cache;return M(T)?(Ne.addKeys(T),(I=m==="delete"||T.length===N.length?Xt(T,I):null)||y.addKeys(T),(I||N)&&(ee=$,re=I,oe=N,k.indexes.forEach(function(U){var G=ee(U.name||"");function H(_e){return _e!=null?U.extractKey(_e):null}function le(_e){return U.multiEntry&&M(_e)?_e.forEach(function(We){return G.addKey(We)}):G.addKey(_e)}(re||oe).forEach(function(_e,Ut){var Je=re&&H(re[Ut]),Ut=oe&&H(oe[Ut]);ve(Je,Ut)!==0&&(Je!=null&&le(Je),Ut!=null&&le(Ut))})}))):T?(N={from:(N=T.lower)!==null&&N!==void 0?N:l.MIN_KEY,to:(N=T.upper)!==null&&N!==void 0?N:l.MAX_KEY},y.add(N),Ne.add(N)):(Ne.add(p),y.add(p),k.indexes.forEach(function(U){return $(U.name).add(p)})),E.mutate(J).then(function(U){return!T||J.type!=="add"&&J.type!=="put"||(Ne.addKeys(U.results),Q&&Q.forEach(function(G){for(var H=J.values.map(function(Je){return G.extractKey(Je)}),le=G.keyPath.findIndex(function(Je){return Je===q.keyPath}),_e=0,We=U.results.length;_e<We;++_e)H[_e][le]=U.results[_e];$(G.name).addKeys(H)})),fe.mutatedParts=ma(fe.mutatedParts||{},we),U})}}),V=function($){var ee=$.query,$=ee.index,ee=ee.range;return[$,new lr(($=ee.lower)!==null&&$!==void 0?$:l.MIN_KEY,(ee=ee.upper)!==null&&ee!==void 0?ee:l.MAX_KEY)]},ae={get:function(J){return[q,new lr(J.key)]},getMany:function(J){return[q,new lr().addKeys(J.keys)]},count:V,query:V,openCursor:V};return A(ae).forEach(function(J){ne[J]=function($){var ee=et.subscr,re=!!ee,oe=Na(et,E)&&Fs(J,$)?$.obsSet={}:ee;if(re){var fe=function(N){return N="idb://".concat(f,"/").concat(x,"/").concat(N),oe[N]||(oe[N]=new lr)},we=fe(""),Ne=fe(":dels"),ee=ae[J]($),re=ee[0],ee=ee[1];if((J==="query"&&re.isPrimaryKey&&!$.values?Ne:fe(re.name||"")).add(ee),!re.isPrimaryKey){if(J!=="count"){var y=J==="query"&&P&&$.values&&E.query(s(s({},$),{values:!1}));return E[J].apply(this,arguments).then(function(N){if(J==="query"){if(P&&$.values)return y.then(function(H){return H=H.result,we.addKeys(H),N});var I=$.values?N.result.map(Y):N.result;($.values?we:Ne).addKeys(I)}else if(J==="openCursor"){var U=N,G=$.values;return U&&Object.create(U,{key:{get:function(){return Ne.addKey(U.primaryKey),U.key}},primaryKey:{get:function(){var H=U.primaryKey;return Ne.addKey(H),H}},value:{get:function(){return G&&we.addKey(U.primaryKey),U.value}}})}return N})}Ne.add(p)}}return E[J].apply(this,arguments)}}),ne}})}};function Hs(l,f,p){if(p.numFailures===0)return f;if(f.type==="deleteRange")return null;var x=f.keys?f.keys.length:"values"in f&&f.values?f.values.length:1;return p.numFailures===x?null:(f=s({},f),M(f.keys)&&(f.keys=f.keys.filter(function(E,k){return!(k in p.failures)})),"values"in f&&M(f.values)&&(f.values=f.values.filter(function(E,k){return!(k in p.failures)})),f)}function Di(l,f){return p=l,((x=f).lower===void 0||(x.lowerOpen?0<ve(p,x.lower):0<=ve(p,x.lower)))&&(l=l,(f=f).upper===void 0||(f.upperOpen?ve(l,f.upper)<0:ve(l,f.upper)<=0));var p,x}function xs(l,f,ae,x,E,k){if(!ae||ae.length===0)return l;var q=f.query.index,Y=q.multiEntry,P=f.query.range,Q=x.schema.primaryKey.extractKey,ne=q.extractKey,V=(q.lowLevelIndex||q).extractKey,ae=ae.reduce(function(J,$){var ee=J,re=[];if($.type==="add"||$.type==="put")for(var oe=new lr,fe=$.values.length-1;0<=fe;--fe){var we,Ne=$.values[fe],y=Q(Ne);oe.hasKey(y)||(we=ne(Ne),(Y&&M(we)?we.some(function(U){return Di(U,P)}):Di(we,P))&&(oe.addKey(y),re.push(Ne)))}switch($.type){case"add":var m=new lr().addKeys(f.values?J.map(function(G){return Q(G)}):J),ee=J.concat(f.values?re.filter(function(G){return G=Q(G),!m.hasKey(G)&&(m.addKey(G),!0)}):re.map(function(G){return Q(G)}).filter(function(G){return!m.hasKey(G)&&(m.addKey(G),!0)}));break;case"put":var T=new lr().addKeys($.values.map(function(G){return Q(G)}));ee=J.filter(function(G){return!T.hasKey(f.values?Q(G):G)}).concat(f.values?re:re.map(function(G){return Q(G)}));break;case"delete":var N=new lr().addKeys($.keys);ee=J.filter(function(G){return!N.hasKey(f.values?Q(G):G)});break;case"deleteRange":var I=$.range;ee=J.filter(function(G){return!Di(Q(G),I)})}return ee},l);return ae===l?l:(ae.sort(function(J,$){return ve(V(J),V($))||ve(Q(J),Q($))}),f.limit&&f.limit<1/0&&(ae.length>f.limit?ae.length=f.limit:l.length===f.limit&&ae.length<f.limit&&(E.dirty=!0)),k?Object.freeze(ae):ae)}function Va(l,f){return ve(l.lower,f.lower)===0&&ve(l.upper,f.upper)===0&&!!l.lowerOpen==!!f.lowerOpen&&!!l.upperOpen==!!f.upperOpen}function ai(l,f){return(function(p,x,E,k){if(p===void 0)return x!==void 0?-1:0;if(x===void 0)return 1;if((x=ve(p,x))===0){if(E&&k)return 0;if(E)return 1;if(k)return-1}return x})(l.lower,f.lower,l.lowerOpen,f.lowerOpen)<=0&&0<=(function(p,x,E,k){if(p===void 0)return x!==void 0?1:0;if(x===void 0)return-1;if((x=ve(p,x))===0){if(E&&k)return 0;if(E)return-1;if(k)return 1}return x})(l.upper,f.upper,l.upperOpen,f.upperOpen)}function Bo(l,f,p,x){l.subscribers.add(p),x.addEventListener("abort",function(){var E,k;l.subscribers.delete(p),l.subscribers.size===0&&(E=l,k=f,setTimeout(function(){E.subscribers.size===0&&Ie(k,E)},3e3))})}var Ni={stack:"dbcore",level:0,name:"Cache",create:function(l){var f=l.schema.name;return s(s({},l),{transaction:function(p,x,E){var k,q,Y=l.transaction(p,x,E);return x==="readwrite"&&(q=(k=new AbortController).signal,E=function(P){return function(){if(k.abort(),x==="readwrite"){for(var Q=new Set,ne=0,V=p;ne<V.length;ne++){var ae=V[ne],J=Da["idb://".concat(f,"/").concat(ae)];if(J){var $=l.table(ae),ee=J.optimisticOps.filter(function(G){return G.trans===Y});if(Y._explicit&&P&&Y.mutatedParts)for(var re=0,oe=Object.values(J.queries.query);re<oe.length;re++)for(var fe=0,we=(m=oe[re]).slice();fe<we.length;fe++)gs((T=we[fe]).obsSet,Y.mutatedParts)&&(Ie(m,T),T.subscribers.forEach(function(G){return Q.add(G)}));else if(0<ee.length){J.optimisticOps=J.optimisticOps.filter(function(G){return G.trans!==Y});for(var Ne=0,y=Object.values(J.queries.query);Ne<y.length;Ne++)for(var m,T,N,I=0,U=(m=y[Ne]).slice();I<U.length;I++)(T=U[I]).res!=null&&Y.mutatedParts&&(P&&!T.dirty?(N=Object.isFrozen(T.res),N=xs(T.res,T.req,ee,$,T,N),T.dirty?(Ie(m,T),T.subscribers.forEach(function(G){return Q.add(G)})):N!==T.res&&(T.res=N,T.promise=Xe.resolve({result:N}))):(T.dirty&&Ie(m,T),T.subscribers.forEach(function(G){return Q.add(G)})))}}}Q.forEach(function(G){return G()})}}},Y.addEventListener("abort",E(!1),{signal:q}),Y.addEventListener("error",E(!1),{signal:q}),Y.addEventListener("complete",E(!0),{signal:q})),Y},table:function(p){var x=l.table(p),E=x.schema.primaryKey;return s(s({},x),{mutate:function(k){var q=et.trans;if(E.outbound||q.db._options.cache==="disabled"||q.explicit||q.idbtrans.mode!=="readwrite")return x.mutate(k);var Y=Da["idb://".concat(f,"/").concat(p)];return Y?(q=x.mutate(k),k.type!=="add"&&k.type!=="put"||!(50<=k.values.length||ri(E,k).some(function(P){return P==null}))?(Y.optimisticOps.push(k),k.mutatedParts&&Ri(k.mutatedParts),q.then(function(P){0<P.numFailures&&(Ie(Y.optimisticOps,k),(P=Hs(0,k,P))&&Y.optimisticOps.push(P),k.mutatedParts&&Ri(k.mutatedParts))}),q.catch(function(){Ie(Y.optimisticOps,k),k.mutatedParts&&Ri(k.mutatedParts)})):q.then(function(P){var Q=Hs(0,s(s({},k),{values:k.values.map(function(ne,V){var ae;return P.failures[V]?ne:(ne=(ae=E.keyPath)!==null&&ae!==void 0&&ae.includes(".")?xe(ne):s({},ne),it(ne,E.keyPath,P.results[V]),ne)})}),P);Y.optimisticOps.push(Q),queueMicrotask(function(){return k.mutatedParts&&Ri(k.mutatedParts)})}),q):x.mutate(k)},query:function(k){if(!Na(et,x)||!Fs("query",k))return x.query(k);var q=((Q=et.trans)===null||Q===void 0?void 0:Q.db._options.cache)==="immutable",V=et,Y=V.requery,P=V.signal,Q=(function($,ee,re,oe){var fe=Da["idb://".concat($,"/").concat(ee)];if(!fe)return[];if(!(ee=fe.queries[re]))return[null,!1,fe,null];var we=ee[(oe.query?oe.query.index.name:null)||""];if(!we)return[null,!1,fe,null];switch(re){case"query":var Ne=we.find(function(y){return y.req.limit===oe.limit&&y.req.values===oe.values&&Va(y.req.query.range,oe.query.range)});return Ne?[Ne,!0,fe,we]:[we.find(function(y){return("limit"in y.req?y.req.limit:1/0)>=oe.limit&&(!oe.values||y.req.values)&&ai(y.req.query.range,oe.query.range)}),!1,fe,we];case"count":return Ne=we.find(function(y){return Va(y.req.query.range,oe.query.range)}),[Ne,!!Ne,fe,we]}})(f,p,"query",k),ne=Q[0],V=Q[1],ae=Q[2],J=Q[3];return ne&&V?ne.obsSet=k.obsSet:(V=x.query(k).then(function($){var ee=$.result;if(ne&&(ne.res=ee),q){for(var re=0,oe=ee.length;re<oe;++re)Object.freeze(ee[re]);Object.freeze(ee)}else $.result=xe(ee);return $}).catch(function($){return J&&ne&&Ie(J,ne),Promise.reject($)}),ne={obsSet:k.obsSet,promise:V,subscribers:new Set,type:"query",req:k,dirty:!1},J?J.push(ne):(J=[ne],(ae=ae||(Da["idb://".concat(f,"/").concat(p)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[k.query.index.name||""]=J)),Bo(ne,J,Y,P),ne.promise.then(function($){return{result:xs($.result,k,ae?.optimisticOps,x,ne,q)}})}})}})}};function ii(l,f){return new Proxy(l,{get:function(p,x,E){return x==="db"?f:Reflect.get(p,x,E)}})}var ea=(Un.prototype.version=function(l){if(isNaN(l)||l<.1)throw new ze.Type("Given version is not a positive number");if(l=Math.round(10*l)/10,this.idbdb||this._state.isBeingOpened)throw new ze.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,l);var f=this._versions,p=f.filter(function(x){return x._cfg.version===l})[0];return p||(p=new this.Version(l),f.push(p),f.sort(ls),p.stores({}),this._state.autoSchema=!1,p)},Un.prototype._whenReady=function(l){var f=this;return this.idbdb&&(this._state.openComplete||et.letThrough||this._vip)?l():new Xe(function(p,x){if(f._state.openComplete)return x(new ze.DatabaseClosed(f._state.dbOpenError));if(!f._state.isBeingOpened){if(!f._state.autoOpen)return void x(new ze.DatabaseClosed);f.open().catch(mt)}f._state.dbReadyPromise.then(p,x)}).then(l)},Un.prototype.use=function(l){var f=l.stack,p=l.create,x=l.level,E=l.name;return E&&this.unuse({stack:f,name:E}),l=this._middlewares[f]||(this._middlewares[f]=[]),l.push({stack:f,create:p,level:x??10,name:E}),l.sort(function(k,q){return k.level-q.level}),this},Un.prototype.unuse=function(l){var f=l.stack,p=l.name,x=l.create;return f&&this._middlewares[f]&&(this._middlewares[f]=this._middlewares[f].filter(function(E){return x?E.create!==x:!!p&&E.name!==p})),this},Un.prototype.open=function(){var l=this;return Et(Tn,function(){return Mo(l)})},Un.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var l=this._state,f=ot.indexOf(this);if(0<=f&&ot.splice(f,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}l.isBeingOpened||(l.dbReadyPromise=new Xe(function(p){l.dbReadyResolve=p}),l.openCanceller=new Xe(function(p,x){l.cancelOpen=x}))},Un.prototype.close=function(p){var f=(p===void 0?{disableAutoOpen:!0}:p).disableAutoOpen,p=this._state;f?(p.isBeingOpened&&p.cancelOpen(new ze.DatabaseClosed),this._close(),p.autoOpen=!1,p.dbOpenError=new ze.DatabaseClosed):(this._close(),p.autoOpen=this._options.autoOpen||p.isBeingOpened,p.openComplete=!1,p.dbOpenError=null)},Un.prototype.delete=function(l){var f=this;l===void 0&&(l={disableAutoOpen:!0});var p=0<arguments.length&&typeof arguments[0]!="object",x=this._state;return new Xe(function(E,k){function q(){f.close(l);var Y=f._deps.indexedDB.deleteDatabase(f.name);Y.onsuccess=vn(function(){var P,Q,ne;P=f._deps,Q=f.name,ne=P.indexedDB,P=P.IDBKeyRange,_i(ne)||Q===vt||fs(ne,P).delete(Q).catch(mt),E()}),Y.onerror=Kr(k),Y.onblocked=f._fireOnBlocked}if(p)throw new ze.InvalidArgument("Invalid closeOptions argument to db.delete()");x.isBeingOpened?x.dbReadyPromise.then(q):q()})},Un.prototype.backendDB=function(){return this.idbdb},Un.prototype.isOpen=function(){return this.idbdb!==null},Un.prototype.hasBeenClosed=function(){var l=this._state.dbOpenError;return l&&l.name==="DatabaseClosed"},Un.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Un.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Un.prototype,"tables",{get:function(){var l=this;return A(this._allTables).map(function(f){return l._allTables[f]})},enumerable:!1,configurable:!0}),Un.prototype.transaction=function(){var l=(function(f,p,x){var E=arguments.length;if(E<2)throw new ze.InvalidArgument("Too few arguments");for(var k=new Array(E-1);--E;)k[E-1]=arguments[E];return x=k.pop(),[f,ke(k),x]}).apply(this,arguments);return this._transaction.apply(this,l)},Un.prototype._transaction=function(l,f,p){var x=this,E=et.trans;E&&E.db===this&&l.indexOf("!")===-1||(E=null);var k,q,Y=l.indexOf("?")!==-1;l=l.replace("!","").replace("?","");try{if(q=f.map(function(Q){if(Q=Q instanceof x.Table?Q.name:Q,typeof Q!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Q}),l=="r"||l===tt)k=tt;else{if(l!="rw"&&l!=lt)throw new ze.InvalidArgument("Invalid transaction mode: "+l);k=lt}if(E){if(E.mode===tt&&k===lt){if(!Y)throw new ze.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");E=null}E&&q.forEach(function(Q){if(E&&E.storeNames.indexOf(Q)===-1){if(!Y)throw new ze.SubTransaction("Table "+Q+" not included in parent transaction.");E=null}}),Y&&E&&!E.active&&(E=null)}}catch(Q){return E?E._promise(null,function(ne,V){V(Q)}):dt(Q)}var P=(function Q(ne,V,ae,J,$){return Xe.resolve().then(function(){var ee=et.transless||et,re=ne._createTransaction(V,ae,ne._dbSchema,J);if(re.explicit=!0,ee={trans:re,transless:ee},J)re.idbtrans=J.idbtrans;else try{re.create(),re.idbtrans._explicit=!0,ne._state.PR1398_maxLoop=3}catch(we){return we.name===gt.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return Q(ne,V,ae,null,$)})):dt(we)}var oe,fe=K($);return fe&&Ce(),ee=Xe.follow(function(){var we;(oe=$.call(re,re))&&(fe?(we=qe.bind(null,null),oe.then(we,we)):typeof oe.next=="function"&&typeof oe.throw=="function"&&(oe=ni(oe)))},ee),(oe&&typeof oe.then=="function"?Xe.resolve(oe).then(function(we){return re.active?we:dt(new ze.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ee.then(function(){return oe})).then(function(we){return J&&re._resolve(),re._completion.then(function(){return we})}).catch(function(we){return re._reject(we),dt(we)})})}).bind(null,this,k,q,E,p);return E?E._promise(k,P,"lock"):et.trans?Et(et.transless,function(){return x._whenReady(P)}):this._whenReady(P)},Un.prototype.table=function(l){if(!j(this._allTables,l))throw new ze.InvalidTable("Table ".concat(l," does not exist"));return this._allTables[l]},Un);function Un(l,f){var p=this;this._middlewares={},this.verno=0;var x=Un.dependencies;this._options=f=s({addons:Un.addons,autoOpen:!0,indexedDB:x.indexedDB,IDBKeyRange:x.IDBKeyRange,cache:"cloned"},f),this._deps={indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},x=f.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var E,k,q,Y,P,Q={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:mt,dbReadyPromise:null,cancelOpen:mt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:f.autoOpen};Q.dbReadyPromise=new Xe(function(V){Q.dbReadyResolve=V}),Q.openCanceller=new Xe(function(V,ae){Q.cancelOpen=ae}),this._state=Q,this.name=l,this.on=Kt(this,"populate","blocked","versionchange","close",{ready:[wn,mt]}),this.once=function(V,ae){var J=function(){for(var $=[],ee=0;ee<arguments.length;ee++)$[ee]=arguments[ee];p.on(V).unsubscribe(J),ae.apply(p,$)};return p.on(V,J)},this.on.ready.subscribe=He(this.on.ready.subscribe,function(V){return function(ae,J){Un.vip(function(){var $,ee=p._state;ee.openComplete?(ee.dbOpenError||Xe.resolve().then(ae),J&&V(ae)):ee.onReadyBeingFired?(ee.onReadyBeingFired.push(ae),J&&V(ae)):(V(ae),$=p,J||V(function re(){$.on.ready.unsubscribe(ae),$.on.ready.unsubscribe(re)}))})}}),this.Collection=(E=this,It(Rn.prototype,function(oe,re){this.db=E;var J=at,$=null;if(re)try{J=re()}catch(fe){$=fe}var ee=oe._ctx,re=ee.table,oe=re.hook.reading.fire;this._ctx={table:re,index:ee.index,isPrimKey:!ee.index||re.schema.primKey.keyPath&&ee.index===re.schema.primKey.name,range:J,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:$,or:ee.or,valueMapper:oe!==gn?oe:null}})),this.Table=(k=this,It(Yt.prototype,function(V,ae,J){this.db=k,this._tx=J,this.name=V,this.schema=ae,this.hook=k._allTables[V]?k._allTables[V].hook:Kt(null,{creating:[Dt,mt],reading:[rn,gn],updating:[pr,mt],deleting:[Mr,mt]})})),this.Transaction=(q=this,It(Ci.prototype,function(V,ae,J,$,ee){var re=this;V!=="readonly"&&ae.forEach(function(oe){oe=(oe=J[oe])===null||oe===void 0?void 0:oe.yProps,oe&&(ae=ae.concat(oe.map(function(fe){return fe.updatesTable})))}),this.db=q,this.mode=V,this.storeNames=ae,this.schema=J,this.chromeTransactionDurability=$,this.idbtrans=null,this.on=Kt(this,"complete","error","abort"),this.parent=ee||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Xe(function(oe,fe){re._resolve=oe,re._reject=fe}),this._completion.then(function(){re.active=!1,re.on.complete.fire()},function(oe){var fe=re.active;return re.active=!1,re.on.error.fire(oe),re.parent?re.parent._reject(oe):fe&&re.idbtrans&&re.idbtrans.abort(),dt(oe)})})),this.Version=(Y=this,It(To.prototype,function(V){this.db=Y,this._cfg={version:V,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(P=this,It(Ea.prototype,function(V,ae,J){if(this.db=P,this._ctx={table:V,index:ae===":id"?null:ae,or:J},this._cmp=this._ascending=ve,this._descending=function($,ee){return ve(ee,$)},this._max=function($,ee){return 0<ve($,ee)?$:ee},this._min=function($,ee){return ve($,ee)<0?$:ee},this._IDBKeyRange=P._deps.IDBKeyRange,!this._IDBKeyRange)throw new ze.MissingAPI})),this.on("versionchange",function(V){0<V.newVersion?console.warn("Another connection wants to upgrade database '".concat(p.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(p.name,"'. Closing db now to resume the delete request.")),p.close({disableAutoOpen:!1})}),this.on("blocked",function(V){!V.newVersion||V.newVersion<V.oldVersion?console.warn("Dexie.delete('".concat(p.name,"') was blocked")):console.warn("Upgrade '".concat(p.name,"' blocked by other connection holding version ").concat(V.oldVersion/10))}),this._maxKey=_a(f.IDBKeyRange),this._createTransaction=function(V,ae,J,$){return new p.Transaction(V,ae,J,p._options.chromeTransactionDurability,$)},this._fireOnBlocked=function(V){p.on("blocked").fire(V),ot.filter(function(ae){return ae.name===p.name&&ae!==p&&!ae._state.vcFired}).map(function(ae){return ae.on("versionchange").fire(V)})},this.use(Vs),this.use(Ni),this.use(ko),this.use(_o),this.use(Gs);var ne=new Proxy(this,{get:function(V,ae,J){if(ae==="_vip")return!0;if(ae==="table")return function(ee){return ii(p.table(ee),ne)};var $=Reflect.get(V,ae,J);return $ instanceof Yt?ii($,ne):ae==="tables"?$.map(function(ee){return ii(ee,ne)}):ae==="_createTransaction"?function(){return ii($.apply(this,arguments),ne)}:$}});this.vip=ne,x.forEach(function(V){return V(p)})}var Fa,kr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ps=(ji.prototype.subscribe=function(l,f,p){return this._subscribe(l&&typeof l!="function"?l:{next:l,error:f,complete:p})},ji.prototype[kr]=function(){return this},ji);function ji(l){this._subscribe=l}try{Fa={indexedDB:g.indexedDB||g.mozIndexedDB||g.webkitIndexedDB||g.msIndexedDB,IDBKeyRange:g.IDBKeyRange||g.webkitIDBKeyRange}}catch{Fa={indexedDB:null,IDBKeyRange:null}}function Qs(l){var f,p=!1,x=new Ps(function(E){var k=K(l),q,Y=!1,P={},Q={},ne={get closed(){return Y},unsubscribe:function(){Y||(Y=!0,q&&q.abort(),V&&Kn.storagemutated.unsubscribe(J))}};E.start&&E.start(ne);var V=!1,ae=function(){return Ot($)},J=function(ee){ma(P,ee),gs(Q,P)&&ae()},$=function(){var ee,re,oe;!Y&&Fa.indexedDB&&(P={},ee={},q&&q.abort(),q=new AbortController,oe=(function(fe){var we=Jt();try{k&&Ce();var Ne=W(l,fe);return Ne=k?Ne.finally(qe):Ne}finally{we&&_r()}})(re={subscr:ee,signal:q.signal,requery:ae,querier:l,trans:null}),Promise.resolve(oe).then(function(fe){p=!0,f=fe,Y||re.signal.aborted||(P={},(function(we){for(var Ne in we)if(j(we,Ne))return;return 1})(Q=ee)||V||(Kn(La,J),V=!0),Ot(function(){return!Y&&E.next&&E.next(fe)}))},function(fe){p=!1,["DatabaseClosedError","AbortError"].includes(fe?.name)||Y||Ot(function(){Y||E.error&&E.error(fe)})}))};return setTimeout(ae,0),ne});return x.hasValue=function(){return p},x.getValue=function(){return f},x}var ja=ea;function bs(l){var f=ya;try{ya=!0,Kn.storagemutated.fire(l),vs(l,!0)}finally{ya=f}}L(ja,s(s({},Rt),{delete:function(l){return new ja(l,{addons:[]}).delete()},exists:function(l){return new ja(l,{addons:[]}).open().then(function(f){return f.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(l){try{return f=ja.dependencies,p=f.indexedDB,f=f.IDBKeyRange,(_i(p)?Promise.resolve(p.databases()).then(function(x){return x.map(function(E){return E.name}).filter(function(E){return E!==vt})}):fs(p,f).toCollection().primaryKeys()).then(l)}catch{return dt(new ze.MissingAPI)}var f,p},defineClass:function(){return function(l){b(this,l)}},ignoreTransaction:function(l){return et.trans?Et(et.transless,l):l()},vip:ds,async:function(l){return function(){try{var f=ni(l.apply(this,arguments));return f&&typeof f.then=="function"?f:Xe.resolve(f)}catch(p){return dt(p)}}},spawn:function(l,f,p){try{var x=ni(l.apply(p,f||[]));return x&&typeof x.then=="function"?x:Xe.resolve(x)}catch(E){return dt(E)}},currentTransaction:{get:function(){return et.trans||null}},waitFor:function(l,f){return f=Xe.resolve(typeof l=="function"?ja.ignoreTransaction(l):l).timeout(f||6e4),et.trans?et.trans.waitFor(f):f},Promise:Xe,debug:{get:function(){return mn},set:function(l){Qr(l)}},derive:de,extend:b,props:L,override:He,Events:Kt,on:Kn,liveQuery:Qs,extendObservabilitySet:ma,getByKeyPath:rt,setByKeyPath:it,delByKeyPath:function(l,f){typeof f=="string"?it(l,f,void 0):"length"in f&&[].map.call(f,function(p){it(l,p,void 0)})},shallowClone:Bt,deepClone:xe,getObjectDiff:$r,cmp:ve,asap:$e,minKey:-1/0,addons:[],connections:ot,errnames:gt,dependencies:Fa,cache:Da,semVer:"4.2.1",version:"4.2.1".split(".").map(function(l){return parseInt(l)}).reduce(function(l,f,p){return l+f/Math.pow(10,2*p)})})),ja.maxKey=_a(ja.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Kn(La,function(l){ya||(l=new CustomEvent(Ma,{detail:l}),ya=!0,dispatchEvent(l),ya=!1)}),addEventListener(Ma,function(l){l=l.detail,ya||bs(l)}));var Ha,ya=!1,Ar=function(){};return typeof BroadcastChannel<"u"&&((Ar=function(){(Ha=new BroadcastChannel(Ma)).onmessage=function(l){return l.data&&bs(l.data)}})(),typeof Ha.unref=="function"&&Ha.unref(),Kn(La,function(l){ya||Ha.postMessage(l)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(l){if(!ea.disableBfCache&&l.persisted){mn&&console.debug("Dexie: handling persisted pagehide"),Ha?.close();for(var f=0,p=ot;f<p.length;f++)p[f].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(l){!ea.disableBfCache&&l.persisted&&(mn&&console.debug("Dexie: handling persisted pageshow"),Ar(),bs({all:new lr(-1/0,[[]])}))})),Xe.rejectionMapper=function(l,f){return!l||l instanceof De||l instanceof TypeError||l instanceof SyntaxError||!l.name||!Fe[l.name]?l:(f=new Fe[l.name](f||l.message,l),"stack"in l&&ge(f,"stack",{get:function(){return this.inner.stack}}),f)},Qr(mn),s(ea,Object.freeze({__proto__:null,Dexie:ea,liveQuery:Qs,Entity:ye,cmp:ve,PropModification:St,replacePrefix:function(l,f){return new St({replacePrefix:[l,f]})},add:function(l){return new St({add:l})},remove:function(l){return new St({remove:l})},default:ea,RangeSet:lr,mergeRanges:Ra,rangesOverlap:Ys}),{default:ea}),ea})})(kc)),kc.exports}var t1=e1();const Zf=vl(t1),qp=Symbol.for("Dexie"),Ao=globalThis[qp]||(globalThis[qp]=Zf);if(Zf.semVer!==Ao.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Zf.semVer} and ${Ao.semVer}`);const{liveQuery:Kx,mergeRanges:Gx,rangesOverlap:Vx,RangeSet:Fx,cmp:Hx,Entity:Px,PropModification:Qx,replacePrefix:Jx,add:Zx,remove:Xx,DexieYProvider:Wx}=Ao;class n1 extends Ao{messages;contacts;invites;constructor(){super("AdunChatDB_v2"),this.version(1).stores({messages:"++msg_id, &msg_uuid, conversationId, from, timestamp, delivered, [conversationId+msg_id]",contacts:"userId, addedAt"}),this.version(2).stores({messages:"++msg_id, &msg_uuid, conversationId, from, [conversationId+msg_id]",invites:"inviteId"})}async addMessage(r){return await this.messages.put(r)}async getMessageByUuid(r){return await this.messages.where("msg_uuid").equals(r).first()}async getMessages(r){return await this.messages.where("conversationId").equals(r).sortBy("msg_id")}async getRecentMessages(r,i){return await this.messages.where("[conversationId+msg_id]").between([r,Ao.minKey],[r,Ao.maxKey]).reverse().limit(i).toArray().then(s=>s.reverse())}async getMessagesBefore(r,i,s){return await this.messages.where("[conversationId+msg_id]").between([r,0],[r,i],!0,!1).reverse().limit(s).toArray().then(u=>u.reverse())}async updateMessageDelivery(r,i,s=!1,u){const g={delivered:i,showAsFailedInUI:s};return u!==void 0&&(g.firstAttemptTimestamp=u),await this.messages.update(r,g)}async deleteConversation(r){return await this.messages.where("conversationId").equals(r).delete()}async deleteMessage(r){await this.messages.delete(r)}async clearAllMessages(){await this.messages.clear()}async getMessageCount(r){return await this.messages.where("conversationId").equals(r).count()}async searchMessages(r,i){const s=await this.getMessages(r),u=i.toLowerCase();return s.filter(g=>g.content.toLowerCase().includes(u))}async addContact(r){const i={userId:r.userId,publicKey:r.publicKey,addedAt:r.addedAt,status:"offline",byInviteId:r.byInviteId,peerProfile:r.peerProfile,localProfile:r.localProfile??{}};return await this.contacts.put(i)}async updateLocalProfile(r,i){return await this.contacts.update(r,{localProfile:i})}async updatePeerProfile(r,i){return await this.contacts.update(r,{peerProfile:i})}async getContacts(){return await this.contacts.toArray()}async getContact(r){return await this.contacts.get(r)}async removeContact(r){await this.contacts.delete(r)}async clearAllContacts(){await this.contacts.clear()}async addInvite(r){return await this.invites.put(r)}async getInvite(r){return await this.invites.get(r)}async getInvites(){return await this.invites.toArray()}async getValidInvites(){return await this.invites.where("valid").equals(1).toArray()}async updateInvite(r,i){return await this.invites.update(r,i)}async incrementInviteUseCount(r){await this.invites.where("inviteId").equals(r).modify(i=>{i.useCount=(i.useCount||0)+1})}async invalidateInvite(r){return await this.invites.update(r,{valid:!1})}async deleteInvite(r){await this.invites.delete(r)}async clearAllInvites(){await this.invites.clear()}}const Pn=new n1,r1=new Set;function a1(o,r){r1.forEach(i=>{try{i(o,r)}catch(s){console.error("[ContactStore] Error in status change callback:",s)}})}let jf=!1;const Hr=ad()((o,r)=>({contacts:[],loaded:!1,loadContacts:async()=>{if(jf){console.log("[ContactStore] Load already in progress, skipping");return}if(r().loaded){console.log("[ContactStore] Contacts already loaded, skipping");return}jf=!0,console.log("[ContactStore] ========== LOADING CONTACTS FROM INDEXEDDB ==========");try{const i=await Pn.getContacts();console.log("[ContactStore]  Loaded",i.length,"contacts from IndexedDB"),i.length>0&&i.forEach(g=>{console.log("[ContactStore]   - Contact:",g.userId.substring(0,8),"key:",g.publicKey.substring(0,16))}),o({contacts:i,loaded:!0}),console.log("[ContactStore]  Contacts loaded into store");let s=0;for(;!br.isReady()&&s<50;)await new Promise(g=>setTimeout(g,100)),s++;if(!br.isReady()){console.error("[ContactStore]  Transport not ready after 5 seconds");return}console.log("[ContactStore] Registering",i.length,"contacts with transport...");const u=os.getState().identity?.userId;for(const g of i)try{console.log("[ContactStore]  Adding peer to transport:",g.userId.substring(0,8));let A=!1;if(u){const M=[u,g.userId].sort().join("-"),b=await Pn.getMessages(M),S=b.filter(_=>!_.delivered&&_.from===u);A=S.length>0,console.log("[ContactStore] Checking undelivered for:",g.userId.substring(0,8),"conversationId:",M.substring(0,16),"total:",b.length,"undelivered:",S.length)}else console.log("[ContactStore] No myUserId available for undelivered check");br.addPeer(g.userId,g.publicKey,A),console.log("[ContactStore]  Contact registered:",g.userId.substring(0,8),"hasUndelivered:",A)}catch(A){console.error("[ContactStore]  Failed to register contact:",g.userId.substring(0,8),A)}console.log("[ContactStore] ========== ALL CONTACTS REGISTERED ==========")}catch(i){console.error("[ContactStore]  Failed to load contacts from IndexedDB:",i),o({loaded:!0})}finally{jf=!1}},addContact:(i,s=!1)=>{const u=r();if(u.contacts.some(A=>A.userId===i.userId)){console.warn("Contact already exists:",i.userId);return}o({contacts:[...u.contacts,i]}),(async()=>{try{await Pn.addContact(i),console.log("[ContactStore]  Contact saved to IndexedDB:",i.userId.substring(0,8));let A=0;for(;!br.isReady()&&A<50;)await new Promise(M=>setTimeout(M,100)),A++;if(!br.isReady()){console.error("[ContactStore] Transport not ready after 5 seconds for:",i.userId);return}console.log("[ContactStore] Registering contact with transport:",i.userId.substring(0,8)),br.addPeer(i.userId,i.publicKey,s),console.log("[ContactStore]  Contact registered:",i.userId.substring(0,8))}catch(A){console.error("[ContactStore] Failed to save/register contact:",A)}})()},updateContact:(i,s)=>o(u=>({contacts:u.contacts.map(g=>g.userId===i?{...g,...s}:g)})),updateLocalProfile:async(i,s)=>{o(u=>({contacts:u.contacts.map(g=>g.userId===i?{...g,localProfile:s}:g)}));try{await Pn.updateLocalProfile(i,s),console.log("[ContactStore]  Local profile updated:",i.substring(0,8),s)}catch(u){throw console.error("[ContactStore] Failed to update local profile:",u),u}},updatePeerProfile:async(i,s)=>{o(u=>({contacts:u.contacts.map(g=>g.userId===i?{...g,peerProfile:s}:g)}));try{await Pn.updatePeerProfile(i,s),console.log("[ContactStore]  Peer profile updated:",i.substring(0,8),s)}catch(u){throw console.error("[ContactStore] Failed to update peer profile:",u),u}},removeContact:i=>{o(s=>({contacts:s.contacts.filter(u=>u.userId!==i)})),Pn.removeContact(i).catch(s=>{console.error("[ContactStore] Failed to remove contact from IndexedDB:",s)})},getContact:i=>r().contacts.find(s=>s.userId===i),getAllContacts:()=>r().contacts,setPeerStatus:(i,s,u)=>{r().contacts.some(A=>A.userId===i)?console.log(`[ContactStore] Setting peer status: ${i.substring(0,16)} -> ${s}`):(console.error("[ContactStore] setPeerStatus: Contact not found:",i),console.error("[ContactStore] Available contacts:",r().contacts.map(A=>A.userId.substring(0,16)))),a1(i,s),o(A=>({contacts:A.contacts.map(M=>M.userId===i?{...M,status:s,sessionExpiry:u,handshakeStartedAt:s==="handshake"?M.handshakeStartedAt:void 0,lastSeen:s==="online"?Date.now():M.lastSeen,online:s==="online"}:M)}))},setHandshakeStarted:i=>o(s=>({contacts:s.contacts.map(u=>u.userId===i?{...u,status:"handshake",handshakeStartedAt:Date.now()}:u)})),clearHandshakeTimeout:i=>o(s=>({contacts:s.contacts.map(u=>u.userId===i?{...u,handshakeStartedAt:void 0}:u)})),retryHandshake:i=>{if(!r().getContact(i)){console.warn("[ContactStore] Cannot retry handshake: contact not found");return}o(u=>({contacts:u.contacts.map(g=>g.userId===i?{...g,status:"offline",handshakeStartedAt:void 0,sessionExpiry:void 0}:g)})),console.log("[ContactStore] Retry handshake requested for:",i),br.retryHandshake(i)}})),Up=Object.freeze(Object.defineProperty({__proto__:null,useContactStore:Hr},Symbol.toStringTag,{value:"Module"})),zg=()=>typeof window<"u"&&window.__TEST_MODE__===!0,i1=()=>zg()?3e3:15e3,s1=()=>zg()?5e3:3e4,o1=1440*60*1e3;class l1{messageHandlers=new Set;peerOnlineHandlers=new Set;initializedUserId=null;currentIdentity=null;transports=new Map;pendingOutboundPeers=new Map;handshakeRetryTimer=null;signalingManager=new kv;handshakeCoordinator=new Qv(s1(),o1);updatePeerStatus(r,i){console.log(`[TransportManager] DataTransport status update: ${r.substring(0,8)} -> ${i}`);const s=i==="online"?"online":i==="connecting"?"connecting":"offline";Hr.getState().setPeerStatus(r,s),i==="online"?(this.pendingOutboundPeers.delete(r)&&console.log("[TransportManager] Removed from pendingOutboundPeers (now online):",r.substring(0,8)),console.log("[TransportManager] Notifying",this.peerOnlineHandlers.size,"onPeerOnline handlers (online)"),this.peerOnlineHandlers.forEach(u=>u(r,!0))):i==="offline"&&(console.log("[TransportManager] Notifying",this.peerOnlineHandlers.size,"onPeerOnline handlers (offline)"),this.peerOnlineHandlers.forEach(u=>u(r,!1)))}reportPeerError(r,i){const s=this.transports.get(r);if(i instanceof Mc||i instanceof _c){const u=s.isConnected;console.log("[TransportManager] Initiating handshake due to error:",i.name,"handshakeOnly:",u),this.addPendingConnection(s,u)}else i instanceof Qf||(i instanceof Jf?(s.clearSessionAndConnection(),console.log("[TransportManager] Initiating handshake due to error:",i.name),this.addPendingConnection(s,!1)):console.log(`[TransportManager] Other error from ${r}:`,i))}onWireMessage(r,i){console.log("[TransportManager]  Message via P2P from:",r.substring(0,8)),this.messageHandlers.forEach(s=>s(r,i))}sendCustomSignal(r,i){this.signalingManager.sendCustomSignal(r,{type:"encrypted-signal",data:i}).catch(s=>{console.error("[TransportManager] Failed to send custom signal:",s)})}async initialize(r){const i=r.userId;if(this.initializedUserId===i&&this.signalingManager.isInitializedForUser(i)){console.log("[TransportManager] Already initialized for this user, skipping");return}this.initializedUserId&&this.initializedUserId!==i&&(console.log("[TransportManager] Switching users, cleaning up old transports"),this.cleanupTransports());try{await this.signalingManager.initialize(i),this.signalingManager.onCustomSignal((s,u)=>{this.handleIncomingSignal(s,u)}),this.signalingManager.onHandshakeMessage((s,u)=>{this.handshakeCoordinator.handleHandshakeMessage(s,u)}),this.handshakeCoordinator.initialize({userId:r.userId,publicKey:r.publicKey,secretKey:r.secretKey}),this.handshakeCoordinator.setSignalSender((s,u)=>this.signalingManager.sendHandshakeMessage(s,u)),this.handshakeCoordinator.setOnHandshakeComplete((s,u,g)=>{this.handleHandshakeComplete(s,u,g)}),this.handshakeCoordinator.setOnHandshakeStatus((s,u)=>{this.handleHandshakeStatus(s,u)}),this.handshakeCoordinator.setGetPeerPublicKey(s=>this.transports.get(s)?.identityPK||null),this.handshakeCoordinator.setGetInviteCallback((s,u)=>this.getInviteForHandshake(s,u)),this.handshakeCoordinator.setMarkInviteUsedCallback(s=>this.markInviteUsed(s)),this.handshakeCoordinator.setCreateContactFromInviteCallback((s,u,g,A)=>this.createContactFromInvite(s,u,g,A)),this.handshakeCoordinator.setOnInviteRejectedCallback((s,u)=>{console.log("[TransportManager] Invite rejected by:",s.substring(0,8),"reason:",u)}),this.initializedUserId=i,this.currentIdentity=r,console.log("[TransportManager]  Initialized for user:",i.substring(0,8))}catch(s){throw console.error("[TransportManager] Initialization failed:",s),this.initializedUserId=null,this.currentIdentity=null,new Error("Failed to initialize transport.")}}addPeer(r,i,s=!1){let u=this.transports.get(r);u||(u=this.createTransport(r,i)),console.log("[TransportManager]  Peer added:",r.substring(0,8),"hasUndelivered:",s),s&&this.addPendingConnection(u)}addPendingConnection(r,i=!1){const s=r.peerId;this.startHandshakeRetryTimer(),i&&this.pendingOutboundPeers.get(s)!=="connection"?this.pendingOutboundPeers.set(s,"handshake"):(this.pendingOutboundPeers.set(s,"connection"),i=!1),this.retryPendingConnection(r,i)}retryPendingConnection(r,i){if(!i&&r.isSessionValid){this.initiatePoliteConnection(r);return}this._startPendingHandshake(r)}_startPendingHandshake(r){const i=r.peerId;console.log("[TransportManager] Retry handshake for pending peer:",i.substring(0,8)),this.handshakeCoordinator.initiateHandshakeIfNotRunning(i,r.identityPK)}async sendMessage(r,i){console.log("[TransportManager] ========== SEND MESSAGE =========="),console.log("[TransportManager] To:",r.substring(0,8)),console.log("[TransportManager] Message ID:",i.id);const s=this.transports.get(r);if(!s)throw console.error("[TransportManager]  No DataTransport for peer"),new Error("No transport available");try{console.log("[TransportManager]  Sending via P2P..."),await s.sendMessage(i),console.log("[TransportManager]  Sent via P2P");return}catch(u){throw console.warn("[TransportManager]  P2P send failed:",u),this.reportPeerError(r,u),u}}getTransport(r){return this.transports.get(r)}onMessage(r){return this.messageHandlers.add(r),()=>this.messageHandlers.delete(r)}onPeerOnline(r){return this.peerOnlineHandlers.add(r),()=>this.peerOnlineHandlers.delete(r)}isReady(){return this.initializedUserId!==null}getConnectionStatus(r){return this.transports.get(r)?.isConnected?"connected":"disconnected"}getActiveSignalingServices(){return this.signalingManager.getActiveServices()}retryHandshake(r){const i=this.transports.get(r);if(!i){console.error("[TransportManager] Cannot retry handshake - no transport for:",r.substring(0,8));return}this.addPendingConnection(i)}destroy(){console.log("[TransportManager] Component unmount - nothing destroyed (persistence)")}destroyAll(){console.log("[TransportManager] Destroying all (identity deleted)"),this.cleanupTransports(),this.signalingManager.destroy(),this.initializedUserId=null}createTransport(r,i){const s=new Wv(r,i,this);return this.transports.set(r,s),console.log("[TransportManager] Created DataTransport for:",r.substring(0,8)),s}handleIncomingSignal(r,i){const s=this.transports.get(r);if(s)console.log("[TransportManager] Received signal:",i.type,"from:",r.substring(0,8));else{console.warn("[TransportManager] Received signal:",i.type,"from unknown peer:",r.substring(0,8));return}if(i.type==="pull-connection"){console.log("[TransportManager] Initiating connection after pull-connection:",r.substring(0,8)),this.addPendingConnection(s);return}if(i.type==="encrypted-signal"){try{s.handleEncryptedSignal(i.data)}catch(u){console.error("[TransportManager] Failed to handle signal:",u),this.reportPeerError(r,u)}return}console.log("[TransportManager] Unknown signal type:",i.type)}handleHandshakeComplete(r,i,s){const u=this.transports.get(r);if(!u){console.error("[TransportManager] Peer not found for handshake:",r);return}u.setSession(i,s)}initiatePoliteConnection(r){if(this.initializedUserId>r.peerId){if(console.log("[TransportManager] We are impolite, initiating connection"),r.isSessionValid)return r.initiateConnection().catch(s=>{console.error("[TransportManager] Failed to initiate connection:",s)}),!0;console.log("[TransportManager] No valid session available, skipping connection initiation")}else console.log("[TransportManager] We are polite, sending pull-connection"),this.signalingManager.sendCustomSignal(r.peerId,{type:"pull-connection",data:""}).catch(s=>{console.error("[TransportManager] Failed to send pull-connection:",s)});return!1}handleHandshakeStatus(r,i){const s=this.pendingOutboundPeers.has(r);switch(console.log("[TransportManager] ========== HANDSHAKE STATUS =========="),console.log("[TransportManager] Peer:",r.substring(0,8),"initiatedByUs:",s),i){case"started":const u=Hr.getState().getContact(r);(!u||u.status==="offline")&&Hr.getState().setPeerStatus(r,"handshake");break;case"complete":if(this.pendingOutboundPeers.get(r)==="connection"){const A=this.transports.get(r);if(A){this.initiatePoliteConnection(A);return}}this.pendingOutboundPeers.delete(r),Hr.getState().setPeerStatus(r,"offline");break;case"failed":case"timeout":Hr.getState().getContact(r)?.status==="handshake"&&Hr.getState().setPeerStatus(r,"offline");break}}startHandshakeRetryTimer(){if(this.handshakeRetryTimer)return;const r=i1();console.log("[TransportManager] Starting handshake retry timer, interval:",r,"ms"),this.handshakeRetryTimer=setInterval(()=>{this.retryPendingHandshakes()},r)}retryPendingHandshakes(){for(const[r,i]of this.pendingOutboundPeers){const s=this.transports.get(r);s?this.retryPendingConnection(s,i==="handshake"):this.pendingOutboundPeers.delete(r)}this.pendingOutboundPeers.size===0&&this.handshakeRetryTimer&&(console.log("[TransportManager] No pending peers, stopping retry timer"),clearInterval(this.handshakeRetryTimer),this.handshakeRetryTimer=null)}async initiateInviteHandshake(r){if(!this.currentIdentity)throw new Error("Transport not initialized");console.log("[TransportManager] Initiating invite handshake to:",r.invitingId.substring(0,8)),await this.handshakeCoordinator.initiateFromPSI(r)}async getInviteForHandshake(r,i){const s=Hr.getState().getContact(i);return s?(console.log("[TransportManager] Peer is existing contact:",i.substring(0,8)),s.publicKey):await Pn.getInvite(r)}async markInviteUsed(r){console.log("[TransportManager] Incrementing invite use count:",r),await Pn.incrementInviteUseCount(r)}async createContactFromInvite(r,i,s,u){if(!Pf(r,i)){console.error("[TransportManager] Invalid peer: userId does not match publicKey:",r.substring(0,8));return}if(Hr.getState().getContact(r)){console.log("[TransportManager] Contact already exists:",r.substring(0,8));return}let A;if(s){const b=await Pn.getInvite(s);b?.name&&(A=b.name)}const M={userId:r,publicKey:i,addedAt:Date.now(),status:"offline",byInviteId:s||void 0,displayName:A,localProfile:{}};if(s){const b=await Pn.getInvite(s);b?.name&&(b.useLimit===1?M.localProfile.name=b.name:M.localProfile.group=b.name)}console.log("[TransportManager] Creating contact from invite:",r.substring(0,8),"isInvitedParty:",u),Hr.getState().addContact(M)}cleanupTransports(){this.handshakeRetryTimer&&(clearInterval(this.handshakeRetryTimer),this.handshakeRetryTimer=null),this.pendingOutboundPeers.clear(),this.transports.forEach(r=>r.destroy()),this.transports.clear(),this.handshakeCoordinator.destroy(),this.messageHandlers.clear(),this.peerOnlineHandlers.clear(),this.initializedUserId=null,this.currentIdentity=null}}const br=new l1;function c1(){const{setIdentity:o,setActiveView:r}=os(),[i,s]=Ye.useState(!1),[u,g]=Ye.useState(null),A=()=>{try{const b=Nc.generate().export();js.save(b),o(b),r("contacts")}catch(b){g("Failed to generate identity. Please try again."),console.error(b)}},M=async b=>{const S=b.target.files?.[0];if(S)try{const _=await S.text(),j=js.importFromJSON(_);js.save(j),o(j),r("contacts")}catch(_){g("Invalid identity file. Please check and try again."),console.error(_)}};return v.jsxs("div",{className:"min-h-screen bg-[var(--color-bg-dark)] flex items-center justify-center p-4 animate-fade-in relative overflow-hidden",children:[v.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 pointer-events-none",children:[v.jsx("div",{className:"absolute -top-[20%] -left-[10%] w-[50%] h-[50%] bg-indigo-500/10 rounded-full blur-[100px]"}),v.jsx("div",{className:"absolute top-[20%] -right-[10%] w-[40%] h-[40%] bg-purple-500/10 rounded-full blur-[100px]"}),v.jsx("div",{className:"absolute -bottom-[10%] left-[20%] w-[60%] h-[60%] bg-blue-500/10 rounded-full blur-[100px]"})]}),v.jsxs("div",{className:"max-w-md w-full relative z-10",children:[v.jsxs("div",{className:"bg-[var(--color-bg-card)] backdrop-blur-xl border border-slate-700/50 rounded-3xl shadow-2xl p-8 md:p-10",children:[v.jsxs("div",{className:"text-center mb-10",children:[v.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-indigo-500/30 transform rotate-3 hover:rotate-0 transition-transform duration-300",children:v.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),v.jsx("h1",{className:"text-4xl font-bold text-white mb-3 tracking-tight",children:"Private Chat"}),v.jsx("p",{className:"text-slate-400 text-lg",children:"Secure, encrypted peer-to-peer messaging"})]}),u&&v.jsxs("div",{className:"mb-8 p-4 bg-red-500/10 border border-red-500/20 rounded-xl flex items-start space-x-3",children:[v.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),v.jsx("p",{className:"text-sm text-red-200",children:u})]}),v.jsx("div",{className:"space-y-5",children:i?v.jsxs("div",{className:"animate-fade-in",children:[v.jsxs("div",{className:"border-2 border-dashed border-slate-700 hover:border-indigo-500/50 rounded-2xl p-8 text-center transition-colors group cursor-pointer bg-slate-900/30",children:[v.jsx("input",{type:"file",accept:".json",onChange:M,className:"hidden",id:"identity-import"}),v.jsxs("label",{htmlFor:"identity-import",className:"cursor-pointer flex flex-col items-center w-full h-full",children:[v.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300",children:v.jsx("svg",{className:"w-8 h-8 text-slate-400 group-hover:text-indigo-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),v.jsx("span",{className:"text-base font-medium text-slate-200 group-hover:text-white transition-colors",children:"Click to select identity file"}),v.jsx("span",{className:"text-sm text-slate-500 mt-2",children:"JSON file only"})]})]}),v.jsx("button",{onClick:()=>{s(!1),g(null)},className:"w-full mt-4 bg-transparent text-slate-400 font-medium py-3 px-4 rounded-xl hover:text-white hover:bg-slate-800/50 transition-all duration-200",children:"Cancel"})]}):v.jsxs(v.Fragment,{children:[v.jsxs("button",{onClick:A,className:"w-full group relative overflow-hidden bg-indigo-600 hover:bg-indigo-500 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 shadow-lg shadow-indigo-500/25 hover:shadow-indigo-500/40 hover:-translate-y-0.5",children:[v.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:animate-shimmer"}),v.jsxs("span",{className:"relative flex items-center justify-center gap-2",children:[v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Generate New Identity"]})]}),v.jsx("button",{onClick:()=>s(!0),className:"w-full bg-slate-800/50 hover:bg-slate-800 text-slate-300 font-semibold py-4 px-6 rounded-xl border border-slate-700 hover:border-slate-600 transition-all duration-300 hover:-translate-y-0.5",children:"Import Existing Identity"})]})}),v.jsx("div",{className:"mt-10 pt-8 border-t border-slate-700/50",children:v.jsxs("div",{className:"space-y-4",children:[v.jsx(Of,{icon:v.jsx("svg",{className:"w-5 h-5 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),text:"End-to-end encrypted messages"}),v.jsx(Of,{icon:v.jsx("svg",{className:"w-5 h-5 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11.536 19.464a3 3 0 01-.879.879l-4.243 1.061a1 1 0 01-1.213-1.213l1.061-4.243a3 3 0 01.879-.879l7.536-7.536A6 6 0 0120 8zm-4 7a2 2 0 00-2-2"})}),text:"Your keys never leave your device"}),v.jsx(Of,{icon:v.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),text:"Works without central servers"})]})})]}),v.jsx("p",{className:"text-center text-xs text-slate-500 mt-8 font-medium tracking-wide uppercase opacity-60",children:"No account required  Fully open source"})]})]})}function Of({icon:o,text:r}){return v.jsxs("div",{className:"flex items-center space-x-4 p-3 rounded-xl hover:bg-slate-800/30 transition-colors",children:[v.jsx("div",{className:"flex-shrink-0 bg-slate-800/50 p-2 rounded-lg",children:o}),v.jsx("span",{className:"text-sm text-slate-300 font-medium",children:r})]})}const Eo=ad((o,r)=>({messages:{},addMessage:(i,s)=>o(u=>{const g=u.messages[i]||[];return g.some(A=>A.msg_uuid===s.msg_uuid)?u:{messages:{...u.messages,[i]:[...g,s]}}}),prependMessages:(i,s)=>o(u=>{const g=u.messages[i]||[],A=new Set(g.map(b=>b.msg_uuid)),M=s.filter(b=>!A.has(b.msg_uuid));return M.length===0?u:{messages:{...u.messages,[i]:[...M,...g]}}}),updateMessageDelivery:(i,s,u=!1,g)=>o(A=>{const M={...A.messages};for(const b in M){const S=M[b],_=S.findIndex(j=>j.msg_id===i);if(_!==-1){const j={...S[_],delivered:s,showAsFailedInUI:u};g!==void 0&&(j.firstAttemptTimestamp=g),M[b]=[...S.slice(0,_),j,...S.slice(_+1)];break}}return{messages:M}}),getMessage:i=>{const s=r();for(const u in s.messages){const g=s.messages[u].find(A=>A.msg_uuid===i);if(g)return g}},getMessages:i=>r().messages[i]||[],getUndeliveredMessages:i=>{const s=r(),u=[];for(const g in s.messages)if(g.includes(i)){const M=s.messages[g].filter(b=>!b.delivered&&b.from!==i);u.push(...M)}return u.sort((g,A)=>(g.msg_id??0)-(A.msg_id??0))},setMessages:(i,s)=>o(u=>({messages:{...u.messages,[i]:s}})),deleteMessage:i=>o(s=>{const u={...s.messages};for(const g in u)u[g]=u[g].filter(A=>A.msg_id!==i);return{messages:u}}),clearMessages:i=>o(s=>{const{[i]:u,...g}=s.messages;return{messages:g}}),clearAllMessages:()=>o({messages:{}})}));var u1=Object.defineProperty,jc=Object.getOwnPropertySymbols,Yg=Object.prototype.hasOwnProperty,Kg=Object.prototype.propertyIsEnumerable,Lp=(o,r,i)=>r in o?u1(o,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[r]=i,Xf=(o,r)=>{for(var i in r||(r={}))Yg.call(r,i)&&Lp(o,i,r[i]);if(jc)for(var i of jc(r))Kg.call(r,i)&&Lp(o,i,r[i]);return o},Wf=(o,r)=>{var i={};for(var s in o)Yg.call(o,s)&&r.indexOf(s)<0&&(i[s]=o[s]);if(o!=null&&jc)for(var s of jc(o))r.indexOf(s)<0&&Kg.call(o,s)&&(i[s]=o[s]);return i};var Os;(o=>{const r=class on{constructor(b,S,_,j){if(this.version=b,this.errorCorrectionLevel=S,this.modules=[],this.isFunction=[],b<on.MIN_VERSION||b>on.MAX_VERSION)throw new RangeError("Version value out of range");if(j<-1||j>7)throw new RangeError("Mask value out of range");this.size=b*4+17;let L=[];for(let ge=0;ge<this.size;ge++)L.push(!1);for(let ge=0;ge<this.size;ge++)this.modules.push(L.slice()),this.isFunction.push(L.slice());this.drawFunctionPatterns();const X=this.addEccAndInterleave(_);if(this.drawCodewords(X),j==-1){let ge=1e9;for(let de=0;de<8;de++){this.applyMask(de),this.drawFormatBits(de);const Pe=this.getPenaltyScore();Pe<ge&&(j=de,ge=Pe),this.applyMask(de)}}u(0<=j&&j<=7),this.mask=j,this.applyMask(j),this.drawFormatBits(j),this.isFunction=[]}static encodeText(b,S){const _=o.QrSegment.makeSegments(b);return on.encodeSegments(_,S)}static encodeBinary(b,S){const _=o.QrSegment.makeBytes(b);return on.encodeSegments([_],S)}static encodeSegments(b,S,_=1,j=40,L=-1,X=!0){if(!(on.MIN_VERSION<=_&&_<=j&&j<=on.MAX_VERSION)||L<-1||L>7)throw new RangeError("Invalid value");let ge,de;for(ge=_;;ge++){const He=on.getNumDataCodewords(ge,S)*8,ut=A.getTotalBits(b,ge);if(ut<=He){de=ut;break}if(ge>=j)throw new RangeError("Data too long")}for(const He of[on.Ecc.MEDIUM,on.Ecc.QUARTILE,on.Ecc.HIGH])X&&de<=on.getNumDataCodewords(ge,He)*8&&(S=He);let Pe=[];for(const He of b){i(He.mode.modeBits,4,Pe),i(He.numChars,He.mode.numCharCountBits(ge),Pe);for(const ut of He.getData())Pe.push(ut)}u(Pe.length==de);const pt=on.getNumDataCodewords(ge,S)*8;u(Pe.length<=pt),i(0,Math.min(4,pt-Pe.length),Pe),i(0,(8-Pe.length%8)%8,Pe),u(Pe.length%8==0);for(let He=236;Pe.length<pt;He^=253)i(He,8,Pe);let Ke=[];for(;Ke.length*8<Pe.length;)Ke.push(0);return Pe.forEach((He,ut)=>Ke[ut>>>3]|=He<<7-(ut&7)),new on(ge,S,Ke,L)}getModule(b,S){return 0<=b&&b<this.size&&0<=S&&S<this.size&&this.modules[S][b]}getModules(){return this.modules}drawFunctionPatterns(){for(let _=0;_<this.size;_++)this.setFunctionModule(6,_,_%2==0),this.setFunctionModule(_,6,_%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const b=this.getAlignmentPatternPositions(),S=b.length;for(let _=0;_<S;_++)for(let j=0;j<S;j++)_==0&&j==0||_==0&&j==S-1||_==S-1&&j==0||this.drawAlignmentPattern(b[_],b[j]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(b){const S=this.errorCorrectionLevel.formatBits<<3|b;let _=S;for(let L=0;L<10;L++)_=_<<1^(_>>>9)*1335;const j=(S<<10|_)^21522;u(j>>>15==0);for(let L=0;L<=5;L++)this.setFunctionModule(8,L,s(j,L));this.setFunctionModule(8,7,s(j,6)),this.setFunctionModule(8,8,s(j,7)),this.setFunctionModule(7,8,s(j,8));for(let L=9;L<15;L++)this.setFunctionModule(14-L,8,s(j,L));for(let L=0;L<8;L++)this.setFunctionModule(this.size-1-L,8,s(j,L));for(let L=8;L<15;L++)this.setFunctionModule(8,this.size-15+L,s(j,L));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let b=this.version;for(let _=0;_<12;_++)b=b<<1^(b>>>11)*7973;const S=this.version<<12|b;u(S>>>18==0);for(let _=0;_<18;_++){const j=s(S,_),L=this.size-11+_%3,X=Math.floor(_/3);this.setFunctionModule(L,X,j),this.setFunctionModule(X,L,j)}}drawFinderPattern(b,S){for(let _=-4;_<=4;_++)for(let j=-4;j<=4;j++){const L=Math.max(Math.abs(j),Math.abs(_)),X=b+j,ge=S+_;0<=X&&X<this.size&&0<=ge&&ge<this.size&&this.setFunctionModule(X,ge,L!=2&&L!=4)}}drawAlignmentPattern(b,S){for(let _=-2;_<=2;_++)for(let j=-2;j<=2;j++)this.setFunctionModule(b+j,S+_,Math.max(Math.abs(j),Math.abs(_))!=1)}setFunctionModule(b,S,_){this.modules[S][b]=_,this.isFunction[S][b]=!0}addEccAndInterleave(b){const S=this.version,_=this.errorCorrectionLevel;if(b.length!=on.getNumDataCodewords(S,_))throw new RangeError("Invalid argument");const j=on.NUM_ERROR_CORRECTION_BLOCKS[_.ordinal][S],L=on.ECC_CODEWORDS_PER_BLOCK[_.ordinal][S],X=Math.floor(on.getNumRawDataModules(S)/8),ge=j-X%j,de=Math.floor(X/j);let Pe=[];const pt=on.reedSolomonComputeDivisor(L);for(let He=0,ut=0;He<j;He++){let $e=b.slice(ut,ut+de-L+(He<ge?0:1));ut+=$e.length;const rt=on.reedSolomonComputeRemainder($e,pt);He<ge&&$e.push(0),Pe.push($e.concat(rt))}let Ke=[];for(let He=0;He<Pe[0].length;He++)Pe.forEach((ut,$e)=>{(He!=de-L||$e>=ge)&&Ke.push(ut[He])});return u(Ke.length==X),Ke}drawCodewords(b){if(b.length!=Math.floor(on.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let S=0;for(let _=this.size-1;_>=1;_-=2){_==6&&(_=5);for(let j=0;j<this.size;j++)for(let L=0;L<2;L++){const X=_-L,de=(_+1&2)==0?this.size-1-j:j;!this.isFunction[de][X]&&S<b.length*8&&(this.modules[de][X]=s(b[S>>>3],7-(S&7)),S++)}}u(S==b.length*8)}applyMask(b){if(b<0||b>7)throw new RangeError("Mask value out of range");for(let S=0;S<this.size;S++)for(let _=0;_<this.size;_++){let j;switch(b){case 0:j=(_+S)%2==0;break;case 1:j=S%2==0;break;case 2:j=_%3==0;break;case 3:j=(_+S)%3==0;break;case 4:j=(Math.floor(_/3)+Math.floor(S/2))%2==0;break;case 5:j=_*S%2+_*S%3==0;break;case 6:j=(_*S%2+_*S%3)%2==0;break;case 7:j=((_+S)%2+_*S%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[S][_]&&j&&(this.modules[S][_]=!this.modules[S][_])}}getPenaltyScore(){let b=0;for(let L=0;L<this.size;L++){let X=!1,ge=0,de=[0,0,0,0,0,0,0];for(let Pe=0;Pe<this.size;Pe++)this.modules[L][Pe]==X?(ge++,ge==5?b+=on.PENALTY_N1:ge>5&&b++):(this.finderPenaltyAddHistory(ge,de),X||(b+=this.finderPenaltyCountPatterns(de)*on.PENALTY_N3),X=this.modules[L][Pe],ge=1);b+=this.finderPenaltyTerminateAndCount(X,ge,de)*on.PENALTY_N3}for(let L=0;L<this.size;L++){let X=!1,ge=0,de=[0,0,0,0,0,0,0];for(let Pe=0;Pe<this.size;Pe++)this.modules[Pe][L]==X?(ge++,ge==5?b+=on.PENALTY_N1:ge>5&&b++):(this.finderPenaltyAddHistory(ge,de),X||(b+=this.finderPenaltyCountPatterns(de)*on.PENALTY_N3),X=this.modules[Pe][L],ge=1);b+=this.finderPenaltyTerminateAndCount(X,ge,de)*on.PENALTY_N3}for(let L=0;L<this.size-1;L++)for(let X=0;X<this.size-1;X++){const ge=this.modules[L][X];ge==this.modules[L][X+1]&&ge==this.modules[L+1][X]&&ge==this.modules[L+1][X+1]&&(b+=on.PENALTY_N2)}let S=0;for(const L of this.modules)S=L.reduce((X,ge)=>X+(ge?1:0),S);const _=this.size*this.size,j=Math.ceil(Math.abs(S*20-_*10)/_)-1;return u(0<=j&&j<=9),b+=j*on.PENALTY_N4,u(0<=b&&b<=2568888),b}getAlignmentPatternPositions(){if(this.version==1)return[];{const b=Math.floor(this.version/7)+2,S=this.version==32?26:Math.ceil((this.version*4+4)/(b*2-2))*2;let _=[6];for(let j=this.size-7;_.length<b;j-=S)_.splice(1,0,j);return _}}static getNumRawDataModules(b){if(b<on.MIN_VERSION||b>on.MAX_VERSION)throw new RangeError("Version number out of range");let S=(16*b+128)*b+64;if(b>=2){const _=Math.floor(b/7)+2;S-=(25*_-10)*_-55,b>=7&&(S-=36)}return u(208<=S&&S<=29648),S}static getNumDataCodewords(b,S){return Math.floor(on.getNumRawDataModules(b)/8)-on.ECC_CODEWORDS_PER_BLOCK[S.ordinal][b]*on.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][b]}static reedSolomonComputeDivisor(b){if(b<1||b>255)throw new RangeError("Degree out of range");let S=[];for(let j=0;j<b-1;j++)S.push(0);S.push(1);let _=1;for(let j=0;j<b;j++){for(let L=0;L<S.length;L++)S[L]=on.reedSolomonMultiply(S[L],_),L+1<S.length&&(S[L]^=S[L+1]);_=on.reedSolomonMultiply(_,2)}return S}static reedSolomonComputeRemainder(b,S){let _=S.map(j=>0);for(const j of b){const L=j^_.shift();_.push(0),S.forEach((X,ge)=>_[ge]^=on.reedSolomonMultiply(X,L))}return _}static reedSolomonMultiply(b,S){if(b>>>8||S>>>8)throw new RangeError("Byte out of range");let _=0;for(let j=7;j>=0;j--)_=_<<1^(_>>>7)*285,_^=(S>>>j&1)*b;return u(_>>>8==0),_}finderPenaltyCountPatterns(b){const S=b[1];u(S<=this.size*3);const _=S>0&&b[2]==S&&b[3]==S*3&&b[4]==S&&b[5]==S;return(_&&b[0]>=S*4&&b[6]>=S?1:0)+(_&&b[6]>=S*4&&b[0]>=S?1:0)}finderPenaltyTerminateAndCount(b,S,_){return b&&(this.finderPenaltyAddHistory(S,_),S=0),S+=this.size,this.finderPenaltyAddHistory(S,_),this.finderPenaltyCountPatterns(_)}finderPenaltyAddHistory(b,S){S[0]==0&&(b+=this.size),S.pop(),S.unshift(b)}};r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],o.QrCode=r;function i(M,b,S){if(b<0||b>31||M>>>b)throw new RangeError("Value out of range");for(let _=b-1;_>=0;_--)S.push(M>>>_&1)}function s(M,b){return(M>>>b&1)!=0}function u(M){if(!M)throw new Error("Assertion error")}const g=class tr{constructor(b,S,_){if(this.mode=b,this.numChars=S,this.bitData=_,S<0)throw new RangeError("Invalid argument");this.bitData=_.slice()}static makeBytes(b){let S=[];for(const _ of b)i(_,8,S);return new tr(tr.Mode.BYTE,b.length,S)}static makeNumeric(b){if(!tr.isNumeric(b))throw new RangeError("String contains non-numeric characters");let S=[];for(let _=0;_<b.length;){const j=Math.min(b.length-_,3);i(parseInt(b.substring(_,_+j),10),j*3+1,S),_+=j}return new tr(tr.Mode.NUMERIC,b.length,S)}static makeAlphanumeric(b){if(!tr.isAlphanumeric(b))throw new RangeError("String contains unencodable characters in alphanumeric mode");let S=[],_;for(_=0;_+2<=b.length;_+=2){let j=tr.ALPHANUMERIC_CHARSET.indexOf(b.charAt(_))*45;j+=tr.ALPHANUMERIC_CHARSET.indexOf(b.charAt(_+1)),i(j,11,S)}return _<b.length&&i(tr.ALPHANUMERIC_CHARSET.indexOf(b.charAt(_)),6,S),new tr(tr.Mode.ALPHANUMERIC,b.length,S)}static makeSegments(b){return b==""?[]:tr.isNumeric(b)?[tr.makeNumeric(b)]:tr.isAlphanumeric(b)?[tr.makeAlphanumeric(b)]:[tr.makeBytes(tr.toUtf8ByteArray(b))]}static makeEci(b){let S=[];if(b<0)throw new RangeError("ECI assignment value out of range");if(b<128)i(b,8,S);else if(b<16384)i(2,2,S),i(b,14,S);else if(b<1e6)i(6,3,S),i(b,21,S);else throw new RangeError("ECI assignment value out of range");return new tr(tr.Mode.ECI,0,S)}static isNumeric(b){return tr.NUMERIC_REGEX.test(b)}static isAlphanumeric(b){return tr.ALPHANUMERIC_REGEX.test(b)}getData(){return this.bitData.slice()}static getTotalBits(b,S){let _=0;for(const j of b){const L=j.mode.numCharCountBits(S);if(j.numChars>=1<<L)return 1/0;_+=4+L+j.bitData.length}return _}static toUtf8ByteArray(b){b=encodeURI(b);let S=[];for(let _=0;_<b.length;_++)b.charAt(_)!="%"?S.push(b.charCodeAt(_)):(S.push(parseInt(b.substring(_+1,_+3),16)),_+=2);return S}};g.NUMERIC_REGEX=/^[0-9]*$/,g.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,g.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let A=g;o.QrSegment=g})(Os||(Os={}));(o=>{(r=>{const i=class{constructor(u,g){this.ordinal=u,this.formatBits=g}};i.LOW=new i(0,1),i.MEDIUM=new i(1,0),i.QUARTILE=new i(2,3),i.HIGH=new i(3,2),r.Ecc=i})(o.QrCode||(o.QrCode={}))})(Os||(Os={}));(o=>{(r=>{const i=class{constructor(u,g){this.modeBits=u,this.numBitsCharCount=g}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};i.NUMERIC=new i(1,[10,12,14]),i.ALPHANUMERIC=new i(2,[9,11,13]),i.BYTE=new i(4,[8,16,16]),i.KANJI=new i(8,[8,10,12]),i.ECI=new i(7,[0,0,0]),r.Mode=i})(o.QrSegment||(o.QrSegment={}))})(Os||(Os={}));var wo=Os;var f1={L:wo.QrCode.Ecc.LOW,M:wo.QrCode.Ecc.MEDIUM,Q:wo.QrCode.Ecc.QUARTILE,H:wo.QrCode.Ecc.HIGH},Gg=128,Vg="L",Fg="#FFFFFF",Hg="#000000",Pg=!1,Qg=1,d1=4,h1=0,p1=.1;function Jg(o,r=0){const i=[];return o.forEach(function(s,u){let g=null;s.forEach(function(A,M){if(!A&&g!==null){i.push(`M${g+r} ${u+r}h${M-g}v1H${g+r}z`),g=null;return}if(M===s.length-1){if(!A)return;g===null?i.push(`M${M+r},${u+r} h1v1H${M+r}z`):i.push(`M${g+r},${u+r} h${M+1-g}v1H${g+r}z`);return}A&&g===null&&(g=M)})}),i.join("")}function Zg(o,r){return o.slice().map((i,s)=>s<r.y||s>=r.y+r.h?i:i.map((u,g)=>g<r.x||g>=r.x+r.w?u:!1))}function g1(o,r,i,s){if(s==null)return null;const u=o.length+i*2,g=Math.floor(r*p1),A=u/r,M=(s.width||g)*A,b=(s.height||g)*A,S=s.x==null?o.length/2-M/2:s.x*A,_=s.y==null?o.length/2-b/2:s.y*A,j=s.opacity==null?1:s.opacity;let L=null;if(s.excavate){let ge=Math.floor(S),de=Math.floor(_),Pe=Math.ceil(M+S-ge),pt=Math.ceil(b+_-de);L={x:ge,y:de,w:Pe,h:pt}}const X=s.crossOrigin;return{x:S,y:_,h:b,w:M,excavation:L,opacity:j,crossOrigin:X}}function m1(o,r){return r!=null?Math.max(Math.floor(r),0):o?d1:h1}function Xg({value:o,level:r,minVersion:i,includeMargin:s,marginSize:u,imageSettings:g,size:A,boostLevel:M}){let b=Jn.useMemo(()=>{const ge=(Array.isArray(o)?o:[o]).reduce((de,Pe)=>(de.push(...wo.QrSegment.makeSegments(Pe)),de),[]);return wo.QrCode.encodeSegments(ge,f1[r],i,void 0,void 0,M)},[o,r,i,M]);const{cells:S,margin:_,numCells:j,calculatedImageSettings:L}=Jn.useMemo(()=>{let X=b.getModules();const ge=m1(s,u),de=X.length+ge*2,Pe=g1(X,A,ge,g);return{cells:X,margin:ge,numCells:de,calculatedImageSettings:Pe}},[b,A,g,s,u]);return{qrcode:b,margin:_,cells:S,numCells:j,calculatedImageSettings:L}}var y1=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),v1=Jn.forwardRef(function(r,i){const s=r,{value:u,size:g=Gg,level:A=Vg,bgColor:M=Fg,fgColor:b=Hg,includeMargin:S=Pg,minVersion:_=Qg,boostLevel:j,marginSize:L,imageSettings:X}=s,de=Wf(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:Pe}=de,pt=Wf(de,["style"]),Ke=X?.src,He=Jn.useRef(null),ut=Jn.useRef(null),$e=Jn.useCallback(At=>{He.current=At,typeof i=="function"?i(At):i&&(i.current=At)},[i]),[rt,it]=Jn.useState(!1),{margin:Bt,cells:Pt,numCells:ke,calculatedImageSettings:Le}=Xg({value:u,level:A,minVersion:_,boostLevel:j,includeMargin:S,marginSize:L,imageSettings:X,size:g});Jn.useEffect(()=>{if(He.current!=null){const At=He.current,Ze=At.getContext("2d");if(!Ze)return;let se=Pt;const Ue=ut.current,Ie=Le!=null&&Ue!==null&&Ue.complete&&Ue.naturalHeight!==0&&Ue.naturalWidth!==0;Ie&&Le.excavation!=null&&(se=Zg(Pt,Le.excavation));const Re=window.devicePixelRatio||1;At.height=At.width=g*Re;const Qe=g/ke*Re;Ze.scale(Qe,Qe),Ze.fillStyle=M,Ze.fillRect(0,0,ke,ke),Ze.fillStyle=b,y1?Ze.fill(new Path2D(Jg(se,Bt))):Pt.forEach(function(K,me){K.forEach(function(De,Ge){De&&Ze.fillRect(Ge+Bt,me+Bt,1,1)})}),Le&&(Ze.globalAlpha=Le.opacity),Ie&&Ze.drawImage(Ue,Le.x+Bt,Le.y+Bt,Le.w,Le.h)}}),Jn.useEffect(()=>{it(!1)},[Ke]);const Se=Xf({height:g,width:g},Pe);let xe=null;return Ke!=null&&(xe=Jn.createElement("img",{src:Ke,key:Ke,style:{display:"none"},onLoad:()=>{it(!0)},ref:ut,crossOrigin:Le?.crossOrigin})),Jn.createElement(Jn.Fragment,null,Jn.createElement("canvas",Xf({style:Se,height:g,width:g,ref:$e,role:"img"},pt)),xe)});v1.displayName="QRCodeCanvas";var Wg=Jn.forwardRef(function(r,i){const s=r,{value:u,size:g=Gg,level:A=Vg,bgColor:M=Fg,fgColor:b=Hg,includeMargin:S=Pg,minVersion:_=Qg,boostLevel:j,title:L,marginSize:X,imageSettings:ge}=s,de=Wf(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:Pe,cells:pt,numCells:Ke,calculatedImageSettings:He}=Xg({value:u,level:A,minVersion:_,boostLevel:j,includeMargin:S,marginSize:X,imageSettings:ge,size:g});let ut=pt,$e=null;ge!=null&&He!=null&&(He.excavation!=null&&(ut=Zg(pt,He.excavation)),$e=Jn.createElement("image",{href:ge.src,height:He.h,width:He.w,x:He.x+Pe,y:He.y+Pe,preserveAspectRatio:"none",opacity:He.opacity,crossOrigin:He.crossOrigin}));const rt=Jg(ut,Pe);return Jn.createElement("svg",Xf({height:g,width:g,viewBox:`0 0 ${Ke} ${Ke}`,ref:i,role:"img"},de),!!L&&Jn.createElement("title",null,L),Jn.createElement("path",{fill:M,d:`M0,0 h${Ke}v${Ke}H0z`,shapeRendering:"crispEdges"}),Jn.createElement("path",{fill:b,d:rt,shapeRendering:"crispEdges"}),$e)});Wg.displayName="QRCodeSVG";var $g=o=>{throw TypeError(o)},em=(o,r,i)=>r.has(o)||$g("Cannot "+i),x1=(o,r,i)=>(em(o,r,"read from private field"),i?i.call(o):r.get(o)),b1=(o,r,i)=>r.has(o)?$g("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(o):r.set(o,i),C1=(o,r,i,s)=>(em(o,r,"write to private field"),r.set(o,i),i);const Uc=[["Aztec","M"],["Codabar","L"],["Code39","L"],["Code93","L"],["Code128","L"],["DataBar","L"],["DataBarExpanded","L"],["DataMatrix","M"],["EAN-8","L"],["EAN-13","L"],["ITF","L"],["MaxiCode","M"],["PDF417","M"],["QRCode","M"],["UPC-A","L"],["UPC-E","L"],["MicroQRCode","M"],["rMQRCode","M"],["DXFilmEdge","L"],["DataBarLimited","L"]],Lc=Uc.map(([o])=>o),w1=Lc.filter((o,r)=>Uc[r][1]==="L"),S1=Lc.filter((o,r)=>Uc[r][1]==="M");function $f(o){switch(o){case"Linear-Codes":return w1.reduce((r,i)=>r|$f(i),0);case"Matrix-Codes":return S1.reduce((r,i)=>r|$f(i),0);case"Any":return(1<<Uc.length)-1;case"None":return 0;default:return 1<<Lc.indexOf(o)}}function A1(o){if(o===0)return"None";const r=31-Math.clz32(o);return Lc[r]}function E1(o){return o.reduce((r,i)=>r|$f(i),0)}const T1=["LocalAverage","GlobalHistogram","FixedThreshold","BoolCast"];function M1(o){return T1.indexOf(o)}const zp=["Unknown","ASCII","ISO8859_1","ISO8859_2","ISO8859_3","ISO8859_4","ISO8859_5","ISO8859_6","ISO8859_7","ISO8859_8","ISO8859_9","ISO8859_10","ISO8859_11","ISO8859_13","ISO8859_14","ISO8859_15","ISO8859_16","Cp437","Cp1250","Cp1251","Cp1252","Cp1256","Shift_JIS","Big5","GB2312","GB18030","EUC_JP","EUC_KR","UTF16BE","UTF16BE","UTF8","UTF16LE","UTF32BE","UTF32LE","BINARY"];function _1(o){return o==="UnicodeBig"?zp.indexOf("UTF16BE"):zp.indexOf(o)}const k1=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function B1(o){return k1[o]}const R1=["Ignore","Read","Require"];function D1(o){return R1.indexOf(o)}const N1=["Plain","ECI","HRI","Hex","Escaped"];function j1(o){return N1.indexOf(o)}const Oc={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,tryDenoise:!1,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!0,returnErrors:!1,eanAddOnSymbol:"Ignore",textMode:"HRI",characterSet:"Unknown"};function Yp(o){return{...o,formats:E1(o.formats),binarizer:M1(o.binarizer),eanAddOnSymbol:D1(o.eanAddOnSymbol),textMode:j1(o.textMode),characterSet:_1(o.characterSet)}}function O1(o){return{...o,format:A1(o.format),contentType:B1(o.contentType),eccLevel:o.ecLevel}}const I1={locateFile:(o,r)=>{const i=o.match(/_(.+?)\.wasm$/);return i?`https://fastly.jsdelivr.net/npm/zxing-wasm@2.2.2/dist/${i[1]}/${o}`:r+o}},If=new WeakMap;function q1(o,r){return Object.is(o,r)||Object.keys(o).length===Object.keys(r).length&&Object.keys(o).every(i=>Object.hasOwn(r,i)&&o[i]===r[i])}function tm(o,{overrides:r,equalityFn:i=q1,fireImmediately:s=!1}={}){var u;const[g,A]=(u=If.get(o))!=null?u:[I1],M=r??g;let b;if(s){if(A&&(b=i(g,M)))return A;const S=o({...M});return If.set(o,[M,S]),S}(b??i(g,M))||If.set(o,[M])}async function U1(o,r,i=Oc){const s={...Oc,...i},u=await tm(o,{fireImmediately:!0});let g,A;if("width"in r&&"height"in r&&"data"in r){const{data:b,data:{byteLength:S},width:_,height:j}=r;A=u._malloc(S),u.HEAPU8.set(b,A),g=u.readBarcodesFromPixmap(A,_,j,Yp(s))}else{let b,S;if("buffer"in r)[b,S]=[r.byteLength,r];else if("byteLength"in r)[b,S]=[r.byteLength,new Uint8Array(r)];else if("size"in r)[b,S]=[r.size,new Uint8Array(await r.arrayBuffer())];else throw new TypeError("Invalid input type");A=u._malloc(b),u.HEAPU8.set(S,A),g=u.readBarcodesFromImage(A,b,Yp(s))}u._free(A);const M=[];for(let b=0;b<g.size();++b)M.push(O1(g.get(b)));return M}({...Oc,formats:[...Oc.formats]});var nm=async function(o={}){var r,i,s=o,u,g,A=new Promise((y,m)=>{u=y,g=m}),M=typeof window=="object",b=typeof Bun<"u",S=typeof WorkerGlobalScope<"u";typeof process=="object"&&!((i=process.versions)===null||i===void 0)&&i.node&&process.type!="renderer";var _="./this.program",j,L="";function X(y){return s.locateFile?s.locateFile(y,L):L+y}var ge,de;if(M||S||b){try{L=new URL(".",j).href}catch{}S&&(de=y=>{var m=new XMLHttpRequest;return m.open("GET",y,!1),m.responseType="arraybuffer",m.send(null),new Uint8Array(m.response)}),ge=async y=>{var m=await fetch(y,{credentials:"same-origin"});if(m.ok)return m.arrayBuffer();throw new Error(m.status+" : "+m.url)}}var Pe=console.log.bind(console),pt=console.error.bind(console),Ke,He,ut=!1,$e,rt,it,Bt,Pt,ke,Le,Se;function xe(){var y=He.buffer;$e=new Int8Array(y),it=new Int16Array(y),s.HEAPU8=rt=new Uint8Array(y),Bt=new Uint16Array(y),Pt=new Int32Array(y),ke=new Uint32Array(y),Le=new Float32Array(y),Se=new Float64Array(y)}function At(){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)rn(s.preRun.shift());Fe(gn)}function Ze(){dn.ya()}function se(){if(s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;)mt(s.postRun.shift());Fe(Rt)}var Ue=0,Ie=null;function Re(y){var m;Ue++,(m=s.monitorRunDependencies)===null||m===void 0||m.call(s,Ue)}function Qe(y){var m;if(Ue--,(m=s.monitorRunDependencies)===null||m===void 0||m.call(s,Ue),Ue==0&&Ie){var T=Ie;Ie=null,T()}}function K(y){var m;(m=s.onAbort)===null||m===void 0||m.call(s,y),y="Aborted("+y+")",pt(y),ut=!0,y+=". Build with -sASSERTIONS for more info.";var T=new WebAssembly.RuntimeError(y);throw g(T),T}var me;function De(){return X("zxing_reader.wasm")}function Ge(y){if(y==me&&Ke)return new Uint8Array(Ke);if(de)return de(y);throw"both async and sync fetching of the wasm failed"}async function Ve(y){if(!Ke)try{var m=await ge(y);return new Uint8Array(m)}catch{}return Ge(y)}async function Me(y,m){try{var T=await Ve(y),N=await WebAssembly.instantiate(T,m);return N}catch(I){pt(`failed to asynchronously prepare wasm: ${I}`),K(I)}}async function gt(y,m,T){if(!y&&typeof WebAssembly.instantiateStreaming=="function")try{var N=fetch(m,{credentials:"same-origin"}),I=await WebAssembly.instantiateStreaming(N,T);return I}catch(U){pt(`wasm streaming compile failed: ${U}`),pt("falling back to ArrayBuffer instantiation")}return Me(m,T)}function Ct(){return{a:ni}}async function ze(){function y(U,G){return dn=U.exports,He=dn.xa,xe(),St=dn.Ba,Qe(),dn}Re();function m(U){return y(U.instance)}var T=Ct();if(s.instantiateWasm)return new Promise((U,G)=>{s.instantiateWasm(T,(H,le)=>{U(y(H))})});me!=null||(me=De());try{var N=await gt(Ke,me,T),I=m(N);return I}catch(U){return g(U),Promise.reject(U)}}var Fe=y=>{for(;y.length>0;)y.shift()(s)},Rt=[],mt=y=>Rt.push(y),gn=[],rn=y=>gn.push(y),kt=y=>Na(y),Dt=()=>Fs(),Mr=[],pr=0,Zn=y=>{var m=new Qr(y);return m.get_caught()||(m.set_caught(!0),pr--),m.set_rethrown(!1),Mr.push(m),Hs(y),Gs(y)},wn=0,mn=()=>{Xt(0,0);var y=Mr.pop();ko(y.excPtr),wn=0};class Qr{constructor(m){this.excPtr=m,this.ptr=m-24}set_type(m){ke[this.ptr+4>>2]=m}get_type(){return ke[this.ptr+4>>2]}set_destructor(m){ke[this.ptr+8>>2]=m}get_destructor(){return ke[this.ptr+8>>2]}set_caught(m){m=m?1:0,$e[this.ptr+12]=m}get_caught(){return $e[this.ptr+12]!=0}set_rethrown(m){m=m?1:0,$e[this.ptr+13]=m}get_rethrown(){return $e[this.ptr+13]!=0}init(m,T){this.set_adjusted_ptr(0),this.set_type(m),this.set_destructor(T)}set_adjusted_ptr(m){ke[this.ptr+16>>2]=m}get_adjusted_ptr(){return ke[this.ptr+16>>2]}}var Cr=y=>Vs(y),On=y=>{var m=wn;if(!m)return Cr(0),0;var T=new Qr(m);T.set_adjusted_ptr(m);var N=T.get_type();if(!N)return Cr(0),m;for(var I of y){if(I===0||I===N)break;var U=T.ptr+16;if(Di(I,N,U))return Cr(I),m}return Cr(N),m},Lr=()=>On([]),gr=y=>On([y]),wr=(y,m)=>On([y,m]),Jr=()=>{var y=Mr.pop();y||K("no exception to throw");var m=y.excPtr;throw y.get_rethrown()||(Mr.push(y),y.set_rethrown(!0),y.set_caught(!1),pr++),wn=m,wn},ha=(y,m,T)=>{var N=new Qr(y);throw N.init(m,T),wn=y,pr++,wn},Ua=()=>pr,pa=y=>{throw wn||(wn=y),wn},zr=()=>K(""),ar={},In=y=>{for(;y.length;){var m=y.pop(),T=y.pop();T(m)}};function Tn(y){return this.fromWireType(ke[y>>2])}var et={},ir={},sr={},Zr=class extends Error{constructor(y){super(y),this.name="InternalError"}},Xe=y=>{throw new Zr(y)},mr=(y,m,T)=>{y.forEach(H=>sr[H]=m);function N(H){var le=T(H);le.length!==y.length&&Xe("Mismatched type converter count");for(var _e=0;_e<y.length;++_e)Sr(y[_e],le[_e])}var I=new Array(m.length),U=[],G=0;m.forEach((H,le)=>{ir.hasOwnProperty(H)?I[le]=ir[H]:(U.push(H),et.hasOwnProperty(H)||(et[H]=[]),et[H].push(()=>{I[le]=ir[H],++G,G===U.length&&N(I)}))}),U.length===0&&N(I)},Aa=y=>{var m=ar[y];delete ar[y];var T=m.rawConstructor,N=m.rawDestructor,I=m.fields,U=I.map(G=>G.getterReturnType).concat(I.map(G=>G.setterArgumentType));mr([y],U,G=>{var H={};return I.forEach((le,_e)=>{var We=le.fieldName,Je=G[_e],Ut=G[_e].optional,Nt=le.getter,xn=le.getterContext,en=G[_e+I.length],hn=le.setter,Fn=le.setterContext;H[We]={read:Qn=>Je.fromWireType(Nt(xn,Qn)),write:(Qn,Er)=>{var Wn=[];hn(Fn,Qn,en.toWireType(Wn,Er)),In(Wn)},optional:Ut}}),[{name:m.name,fromWireType:le=>{var _e={};for(var We in H)_e[We]=H[We].read(le);return N(le),_e},toWireType:(le,_e)=>{for(var We in H)if(!(We in _e)&&!H[We].optional)throw new TypeError(`Missing field: "${We}"`);var Je=T();for(We in H)H[We].write(Je,_e[We]);return le!==null&&le.push(N,Je),Je},argPackAdvance:Sn,readValueFromPointer:Tn,destructorFunction:N}]})},Yr=(y,m,T,N,I)=>{},yr=()=>{for(var y=new Array(256),m=0;m<256;++m)y[m]=String.fromCharCode(m);or=y},or,zn=y=>{for(var m="",T=y;rt[T];)m+=or[rt[T++]];return m},Xr=class extends Error{constructor(y){super(y),this.name="BindingError"}},Jt=y=>{throw new Xr(y)};function _r(y,m){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var N=m.name;if(y||Jt(`type "${N}" must have a positive integer typeid pointer`),ir.hasOwnProperty(y)){if(T.ignoreDuplicateRegistrations)return;Jt(`Cannot register type '${N}' twice`)}if(ir[y]=m,delete sr[y],et.hasOwnProperty(y)){var I=et[y];delete et[y],I.forEach(U=>U())}}function Sr(y,m){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return _r(y,m,T)}var Sn=8,vn=(y,m,T,N)=>{m=zn(m),Sr(y,{name:m,fromWireType:function(I){return!!I},toWireType:function(I,U){return U?T:N},argPackAdvance:Sn,readValueFromPointer:function(I){return this.fromWireType(rt[I])},destructorFunction:null})},w=y=>({count:y.count,deleteScheduled:y.deleteScheduled,preservePointerOnDelete:y.preservePointerOnDelete,ptr:y.ptr,ptrType:y.ptrType,smartPtr:y.smartPtr,smartPtrType:y.smartPtrType}),R=y=>{function m(T){return T.$$.ptrType.registeredClass.name}Jt(m(y)+" instance already deleted")},B=!1,h=y=>{},O=y=>{y.smartPtr?y.smartPtrType.rawDestructor(y.smartPtr):y.ptrType.registeredClass.rawDestructor(y.ptr)},te=y=>{y.count.value-=1;var m=y.count.value===0;m&&O(y)},W=y=>typeof FinalizationRegistry>"u"?(W=m=>m,y):(B=new FinalizationRegistry(m=>{te(m.$$)}),W=m=>{var T=m.$$,N=!!T.smartPtr;if(N){var I={$$:T};B.register(m,I,m)}return m},h=m=>B.unregister(m),W(y)),Ce=()=>{let y=qe.prototype;Object.assign(y,{isAliasOf(T){if(!(this instanceof qe)||!(T instanceof qe))return!1;var N=this.$$.ptrType.registeredClass,I=this.$$.ptr;T.$$=T.$$;for(var U=T.$$.ptrType.registeredClass,G=T.$$.ptr;N.baseClass;)I=N.upcast(I),N=N.baseClass;for(;U.baseClass;)G=U.upcast(G),U=U.baseClass;return N===U&&I===G},clone(){if(this.$$.ptr||R(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var T=W(Object.create(Object.getPrototypeOf(this),{$$:{value:w(this.$$)}}));return T.$$.count.value+=1,T.$$.deleteScheduled=!1,T},delete(){this.$$.ptr||R(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Jt("Object already scheduled for deletion"),h(this),te(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||R(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Jt("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const m=Symbol.dispose;m&&(y[m]=y.delete)};function qe(){}var ft=(y,m)=>Object.defineProperty(m,"name",{value:y}),st={},Ht=(y,m,T)=>{if(y[m].overloadTable===void 0){var N=y[m];y[m]=function(){for(var I=arguments.length,U=new Array(I),G=0;G<I;G++)U[G]=arguments[G];return y[m].overloadTable.hasOwnProperty(U.length)||Jt(`Function '${T}' called with an invalid number of arguments (${U.length}) - expects one of (${y[m].overloadTable})!`),y[m].overloadTable[U.length].apply(this,U)},y[m].overloadTable=[],y[m].overloadTable[N.argCount]=N}},ct=(y,m,T)=>{s.hasOwnProperty(y)?((T===void 0||s[y].overloadTable!==void 0&&s[y].overloadTable[T]!==void 0)&&Jt(`Cannot register public name '${y}' twice`),Ht(s,y,y),s[y].overloadTable.hasOwnProperty(T)&&Jt(`Cannot register multiple overloads of a function with the same number of arguments (${T})!`),s[y].overloadTable[T]=m):(s[y]=m,s[y].argCount=T)},Et=48,jt=57,Ot=y=>{y=y.replace(/[^a-zA-Z0-9_]/g,"$");var m=y.charCodeAt(0);return m>=Et&&m<=jt?`_${y}`:y};function dt(y,m,T,N,I,U,G,H){this.name=y,this.constructor=m,this.instancePrototype=T,this.rawDestructor=N,this.baseClass=I,this.getActualType=U,this.upcast=G,this.downcast=H,this.pureVirtualFunctions=[]}var wt=(y,m,T)=>{for(;m!==T;)m.upcast||Jt(`Expected null or instance of ${T.name}, got an instance of ${m.name}`),y=m.upcast(y),m=m.baseClass;return y},xt=y=>{if(y===null)return"null";var m=typeof y;return m==="object"||m==="array"||m==="function"?y.toString():""+y};function yt(y,m){if(m===null)return this.isReference&&Jt(`null is not a valid ${this.name}`),0;m.$$||Jt(`Cannot pass "${xt(m)}" as a ${this.name}`),m.$$.ptr||Jt(`Cannot pass deleted object as a pointer of type ${this.name}`);var T=m.$$.ptrType.registeredClass,N=wt(m.$$.ptr,T,this.registeredClass);return N}function ot(y,m){var T;if(m===null)return this.isReference&&Jt(`null is not a valid ${this.name}`),this.isSmartPointer?(T=this.rawConstructor(),y!==null&&y.push(this.rawDestructor,T),T):0;(!m||!m.$$)&&Jt(`Cannot pass "${xt(m)}" as a ${this.name}`),m.$$.ptr||Jt(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&m.$$.ptrType.isConst&&Jt(`Cannot convert argument of type ${m.$$.smartPtrType?m.$$.smartPtrType.name:m.$$.ptrType.name} to parameter type ${this.name}`);var N=m.$$.ptrType.registeredClass;if(T=wt(m.$$.ptr,N,this.registeredClass),this.isSmartPointer)switch(m.$$.smartPtr===void 0&&Jt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:m.$$.smartPtrType===this?T=m.$$.smartPtr:Jt(`Cannot convert argument of type ${m.$$.smartPtrType?m.$$.smartPtrType.name:m.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:T=m.$$.smartPtr;break;case 2:if(m.$$.smartPtrType===this)T=m.$$.smartPtr;else{var I=m.clone();T=this.rawShare(T,Mn.toHandle(()=>I.delete())),y!==null&&y.push(this.rawDestructor,T)}break;default:Jt("Unsupporting sharing policy")}return T}function vt(y,m){if(m===null)return this.isReference&&Jt(`null is not a valid ${this.name}`),0;m.$$||Jt(`Cannot pass "${xt(m)}" as a ${this.name}`),m.$$.ptr||Jt(`Cannot pass deleted object as a pointer of type ${this.name}`),m.$$.ptrType.isConst&&Jt(`Cannot convert argument of type ${m.$$.ptrType.name} to parameter type ${this.name}`);var T=m.$$.ptrType.registeredClass,N=wt(m.$$.ptr,T,this.registeredClass);return N}var tt=(y,m,T)=>{if(m===T)return y;if(T.baseClass===void 0)return null;var N=tt(y,m,T.baseClass);return N===null?null:T.downcast(N)},lt={},ht=(y,m)=>{for(m===void 0&&Jt("ptr should not be undefined");y.baseClass;)m=y.upcast(m),y=y.baseClass;return m},at=(y,m)=>(m=ht(y,m),lt[m]),he=(y,m)=>{(!m.ptrType||!m.ptr)&&Xe("makeClassHandle requires ptr and ptrType");var T=!!m.smartPtrType,N=!!m.smartPtr;return T!==N&&Xe("Both smartPtrType and smartPtr must be specified"),m.count={value:1},W(Object.create(y,{$$:{value:m,writable:!0}}))};function ye(y){var m=this.getPointee(y);if(!m)return this.destructor(y),null;var T=at(this.registeredClass,m);if(T!==void 0){if(T.$$.count.value===0)return T.$$.ptr=m,T.$$.smartPtr=y,T.clone();var N=T.clone();return this.destructor(y),N}function I(){return this.isSmartPointer?he(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:m,smartPtrType:this,smartPtr:y}):he(this.registeredClass.instancePrototype,{ptrType:this,ptr:y})}var U=this.registeredClass.getActualType(m),G=st[U];if(!G)return I.call(this);var H;this.isConst?H=G.constPointerType:H=G.pointerType;var le=tt(m,this.registeredClass,H.registeredClass);return le===null?I.call(this):this.isSmartPointer?he(H.registeredClass.instancePrototype,{ptrType:H,ptr:le,smartPtrType:this,smartPtr:y}):he(H.registeredClass.instancePrototype,{ptrType:H,ptr:le})}var ve=()=>{Object.assign(Ee.prototype,{getPointee(y){return this.rawGetPointee&&(y=this.rawGetPointee(y)),y},destructor(y){var m;(m=this.rawDestructor)===null||m===void 0||m.call(this,y)},argPackAdvance:Sn,readValueFromPointer:Tn,fromWireType:ye})};function Ee(y,m,T,N,I,U,G,H,le,_e,We){this.name=y,this.registeredClass=m,this.isReference=T,this.isConst=N,this.isSmartPointer=I,this.pointeeType=U,this.sharingPolicy=G,this.rawGetPointee=H,this.rawConstructor=le,this.rawShare=_e,this.rawDestructor=We,!I&&m.baseClass===void 0?N?(this.toWireType=yt,this.destructorFunction=null):(this.toWireType=vt,this.destructorFunction=null):this.toWireType=ot}var Ae=(y,m,T)=>{s.hasOwnProperty(y)||Xe("Replacing nonexistent public symbol"),s[y].overloadTable!==void 0&&T!==void 0?s[y].overloadTable[T]=m:(s[y]=m,s[y].argCount=T)},je=[],St,nt=y=>{var m=je[y];return m||(je[y]=m=St.get(y)),m},zt=function(y,m){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(y.includes("j"))return dynCallLegacy(y,m,T);var N=nt(m),I=N(...T);return I},Yt=function(y,m){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function(){for(var N=arguments.length,I=new Array(N),U=0;U<N;U++)I[U]=arguments[U];return zt(y,m,I,T)}},z=function(y,m){y=zn(y);function T(){if(y.includes("j"))return Yt(y,m);var I=nt(m);return I}var N=T();return typeof N!="function"&&Jt(`unknown function pointer with signature ${y}: ${m}`),N};class Kt extends Error{}var It=y=>{var m=_o(y),T=zn(m);return $r(m),T},Gt=(y,m)=>{var T=[],N={};function I(U){if(!N[U]&&!ir[U]){if(sr[U]){sr[U].forEach(I);return}T.push(U),N[U]=!0}}throw m.forEach(I),new Kt(`${y}: `+T.map(It).join([", "]))},Vt=(y,m,T,N,I,U,G,H,le,_e,We,Je,Ut)=>{We=zn(We),U=z(I,U),H&&(H=z(G,H)),_e&&(_e=z(le,_e)),Ut=z(Je,Ut);var Nt=Ot(We);ct(Nt,function(){Gt(`Cannot construct ${We} due to unbound types`,[N])}),mr([y,m,T],N?[N]:[],xn=>{xn=xn[0];var en,hn;N?(en=xn.registeredClass,hn=en.instancePrototype):hn=qe.prototype;var Fn=ft(We,function(){if(Object.getPrototypeOf(this)!==Qn)throw new Xr(`Use 'new' to construct ${We}`);if(Er.constructor_body===void 0)throw new Xr(`${We} has no accessible constructor`);for(var Ro=arguments.length,Oi=new Array(Ro),ws=0;ws<Ro;ws++)Oi[ws]=arguments[ws];var Vr=Er.constructor_body[Oi.length];if(Vr===void 0)throw new Xr(`Tried to invoke ctor of ${We} with invalid number of parameters (${Oi.length}) - expected (${Object.keys(Er.constructor_body).toString()}) parameters instead!`);return Vr.apply(this,Oi)}),Qn=Object.create(hn,{constructor:{value:Fn}});Fn.prototype=Qn;var Er=new dt(We,Fn,Qn,Ut,en,U,H,_e);if(Er.baseClass){var Wn,Cs;(Cs=(Wn=Er.baseClass).__derivedClasses)!==null&&Cs!==void 0||(Wn.__derivedClasses=[]),Er.baseClass.__derivedClasses.push(Er)}var Js=new Ee(We,Er,!0,!1,!1),Pa=new Ee(We+"*",Er,!1,!1,!1),Zs=new Ee(We+" const*",Er,!1,!0,!1);return st[y]={pointerType:Pa,constPointerType:Zs},Ae(Nt,Fn),[Js,Pa,Zs]})},Qt=(y,m)=>{for(var T=[],N=0;N<y;N++)T.push(ke[m+N*4>>2]);return T};function Ft(y){for(var m=1;m<y.length;++m)if(y[m]!==null&&y[m].destructorFunction===void 0)return!0;return!1}function An(y,m,T,N,I,U){var G=m.length;G<2&&Jt("argTypes array size mismatch! Must at least get return value and 'this' types!");var H=m[1]!==null&&T!==null,le=Ft(m),_e=m[0].name!=="void",We=G-2,Je=new Array(We),Ut=[],Nt=[],xn=function(){Nt.length=0;var en;Ut.length=H?2:1,Ut[0]=I,H&&(en=m[1].toWireType(Nt,this),Ut[1]=en);for(var hn=0;hn<We;++hn)Je[hn]=m[hn+2].toWireType(Nt,hn<0||arguments.length<=hn?void 0:arguments[hn]),Ut.push(Je[hn]);var Fn=N(...Ut);function Qn(Er){if(le)In(Nt);else for(var Wn=H?1:2;Wn<m.length;Wn++){var Cs=Wn===1?en:Je[Wn-2];m[Wn].destructorFunction!==null&&m[Wn].destructorFunction(Cs)}if(_e)return m[0].fromWireType(Er)}return Qn(Fn)};return ft(y,xn)}var tn=(y,m,T,N,I,U)=>{var G=Qt(m,T);I=z(N,I),mr([],[y],H=>{H=H[0];var le=`constructor ${H.name}`;if(H.registeredClass.constructor_body===void 0&&(H.registeredClass.constructor_body=[]),H.registeredClass.constructor_body[m-1]!==void 0)throw new Xr(`Cannot register multiple constructors with identical number of parameters (${m-1}) for class '${H.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return H.registeredClass.constructor_body[m-1]=()=>{Gt(`Cannot construct ${H.name} due to unbound types`,G)},mr([],G,_e=>(_e.splice(1,0,null),H.registeredClass.constructor_body[m-1]=An(le,_e,null,I,U),[])),[]})},un=y=>{y=y.trim();const m=y.indexOf("(");return m===-1?y:y.slice(0,m)},Rn=(y,m,T,N,I,U,G,H,le,_e)=>{var We=Qt(T,N);m=zn(m),m=un(m),U=z(I,U),mr([],[y],Je=>{Je=Je[0];var Ut=`${Je.name}.${m}`;m.startsWith("@@")&&(m=Symbol[m.substring(2)]),H&&Je.registeredClass.pureVirtualFunctions.push(m);function Nt(){Gt(`Cannot call ${Ut} due to unbound types`,We)}var xn=Je.registeredClass.instancePrototype,en=xn[m];return en===void 0||en.overloadTable===void 0&&en.className!==Je.name&&en.argCount===T-2?(Nt.argCount=T-2,Nt.className=Je.name,xn[m]=Nt):(Ht(xn,m,Ut),xn[m].overloadTable[T-2]=Nt),mr([],We,hn=>{var Fn=An(Ut,hn,Je,U,G);return xn[m].overloadTable===void 0?(Fn.argCount=T-2,xn[m]=Fn):xn[m].overloadTable[T-2]=Fn,[]}),[]})},Mt=[],yn=[0,1,,1,null,1,!0,1,!1,1],Yn=y=>{y>9&&--yn[y+1]===0&&(yn[y]=void 0,Mt.push(y))},Mn={toValue:y=>(y||Jt(`Cannot use deleted val. handle = ${y}`),yn[y]),toHandle:y=>{switch(y){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const m=Mt.pop()||yn.length;return yn[m]=y,yn[m+1]=1,m}}}},fn={name:"emscripten::val",fromWireType:y=>{var m=Mn.toValue(y);return Yn(y),m},toWireType:(y,m)=>Mn.toHandle(m),argPackAdvance:Sn,readValueFromPointer:Tn,destructorFunction:null},oa=y=>Sr(y,fn),Or=(y,m)=>{switch(m){case 4:return function(T){return this.fromWireType(Le[T>>2])};case 8:return function(T){return this.fromWireType(Se[T>>3])};default:throw new TypeError(`invalid float width (${m}): ${y}`)}},Wr=(y,m,T)=>{m=zn(m),Sr(y,{name:m,fromWireType:N=>N,toWireType:(N,I)=>I,argPackAdvance:Sn,readValueFromPointer:Or(m,T),destructorFunction:null})},bi=(y,m,T,N,I,U,G,H)=>{var le=Qt(m,T);y=zn(y),y=un(y),I=z(N,I),ct(y,function(){Gt(`Cannot call ${y} due to unbound types`,le)},m-1),mr([],le,_e=>{var We=[_e[0],null].concat(_e.slice(1));return Ae(y,An(y,We,null,I,U),m-1),[]})},Ea=(y,m,T)=>{switch(m){case 1:return T?N=>$e[N]:N=>rt[N];case 2:return T?N=>it[N>>1]:N=>Bt[N>>1];case 4:return T?N=>Pt[N>>2]:N=>ke[N>>2];default:throw new TypeError(`invalid integer width (${m}): ${y}`)}},qn=(y,m,T,N,I)=>{m=zn(m);const U=N===0;let G=le=>le;if(U){var H=32-8*T;G=le=>le<<H>>>H,I=G(I)}Sr(y,{name:m,fromWireType:G,toWireType:(le,_e)=>_e,argPackAdvance:Sn,readValueFromPointer:Ea(m,T,N!==0),destructorFunction:null})},Kr=(y,m,T)=>{var N=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],I=N[m];function U(G){var H=ke[G>>2],le=ke[G+4>>2];return new I($e.buffer,le,H)}T=zn(T),Sr(y,{name:T,fromWireType:U,argPackAdvance:Sn,readValueFromPointer:U},{ignoreDuplicateRegistrations:!0})},Ta=Object.assign({optional:!0},fn),La=(y,m)=>{Sr(y,Ta)},Ma=(y,m,T,N)=>{if(!(N>0))return 0;for(var I=T,U=T+N-1,G=0;G<y.length;++G){var H=y.charCodeAt(G);if(H>=55296&&H<=57343){var le=y.charCodeAt(++G);H=65536+((H&1023)<<10)|le&1023}if(H<=127){if(T>=U)break;m[T++]=H}else if(H<=2047){if(T+1>=U)break;m[T++]=192|H>>6,m[T++]=128|H&63}else if(H<=65535){if(T+2>=U)break;m[T++]=224|H>>12,m[T++]=128|H>>6&63,m[T++]=128|H&63}else{if(T+3>=U)break;m[T++]=240|H>>18,m[T++]=128|H>>12&63,m[T++]=128|H>>6&63,m[T++]=128|H&63}}return m[T]=0,T-I},Kn=(y,m,T)=>Ma(y,rt,m,T),Ci=y=>{for(var m=0,T=0;T<y.length;++T){var N=y.charCodeAt(T);N<=127?m++:N<=2047?m+=2:N>=55296&&N<=57343?(m+=4,++T):m+=3}return m},vr=typeof TextDecoder<"u"?new TextDecoder:void 0,Gr=function(y){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;for(var N=m+T,I=m;y[I]&&!(I>=N);)++I;if(I-m>16&&y.buffer&&vr)return vr.decode(y.subarray(m,I));for(var U="";m<I;){var G=y[m++];if(!(G&128)){U+=String.fromCharCode(G);continue}var H=y[m++]&63;if((G&224)==192){U+=String.fromCharCode((G&31)<<6|H);continue}var le=y[m++]&63;if((G&240)==224?G=(G&15)<<12|H<<6|le:G=(G&7)<<18|H<<12|le<<6|y[m++]&63,G<65536)U+=String.fromCharCode(G);else{var _e=G-65536;U+=String.fromCharCode(55296|_e>>10,56320|_e&1023)}}return U},wi=(y,m)=>y?Gr(rt,y,m):"",za=(y,m)=>{m=zn(m),Sr(y,{name:m,fromWireType(T){for(var N=ke[T>>2],I=T+4,U,H,G=I,H=0;H<=N;++H){var le=I+H;if(H==N||rt[le]==0){var _e=le-G,We=wi(G,_e);U===void 0?U=We:(U+="\0",U+=We),G=le+1}}return $r(T),U},toWireType(T,N){N instanceof ArrayBuffer&&(N=new Uint8Array(N));var I,U=typeof N=="string";U||ArrayBuffer.isView(N)&&N.BYTES_PER_ELEMENT==1||Jt("Cannot pass non-string to std::string"),U?I=Ci(N):I=N.length;var G=ri(4+I+1),H=G+4;return ke[G>>2]=I,U?Kn(N,H,I+1):rt.set(N,H),T!==null&&T.push($r,G),G},argPackAdvance:Sn,readValueFromPointer:Tn,destructorFunction(T){$r(T)}})},_a=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Ya=(y,m)=>{for(var T=y>>1,N=T+m/2,I=T;!(I>=N)&&Bt[I];)++I;if(I-T>16&&_a)return _a.decode(Bt.subarray(T,I));for(var U="",G=T;!(G>=N);++G){var H=Bt[G];if(H==0)break;U+=String.fromCharCode(H)}return U},Wa=(y,m,T)=>{if(T!=null||(T=2147483647),T<2)return 0;T-=2;for(var N=m,I=T<y.length*2?T/2:y.length,U=0;U<I;++U){var G=y.charCodeAt(U);it[m>>1]=G,m+=2}return it[m>>1]=0,m-N},Ls=y=>y.length*2,Xn=(y,m)=>{for(var T=0,N="";!(T>=m/4);){var I=Pt[y+T*4>>2];if(I==0)break;if(++T,I>=65536){var U=I-65536;N+=String.fromCharCode(55296|U>>10,56320|U&1023)}else N+=String.fromCharCode(I)}return N},ka=(y,m,T)=>{if(T!=null||(T=2147483647),T<4)return 0;for(var N=m,I=N+T-4,U=0;U<y.length;++U){var G=y.charCodeAt(U);if(G>=55296&&G<=57343){var H=y.charCodeAt(++U);G=65536+((G&1023)<<10)|H&1023}if(Pt[m>>2]=G,m+=4,m+4>I)break}return Pt[m>>2]=0,m-N},Si=y=>{for(var m=0,T=0;T<y.length;++T){var N=y.charCodeAt(T);N>=55296&&N<=57343&&++T,m+=4}return m},ga=(y,m,T)=>{T=zn(T);var N,I,U,G;m===2?(N=Ya,I=Wa,G=Ls,U=H=>Bt[H>>1]):m===4&&(N=Xn,I=ka,G=Si,U=H=>ke[H>>2]),Sr(y,{name:T,fromWireType:H=>{for(var le=ke[H>>2],_e,We=H+4,Je=0;Je<=le;++Je){var Ut=H+4+Je*m;if(Je==le||U(Ut)==0){var Nt=Ut-We,xn=N(We,Nt);_e===void 0?_e=xn:(_e+="\0",_e+=xn),We=Ut+m}}return $r(H),_e},toWireType:(H,le)=>{typeof le!="string"&&Jt(`Cannot pass non-string to C++ string type ${T}`);var _e=G(le),We=ri(4+_e+m);return ke[We>>2]=_e/m,I(le,We+4,_e+m),H!==null&&H.push($r,We),We},argPackAdvance:Sn,readValueFromPointer:Tn,destructorFunction(H){$r(H)}})},Ai=(y,m,T,N,I,U)=>{ar[y]={name:zn(m),rawConstructor:z(T,N),rawDestructor:z(I,U),fields:[]}},$a=(y,m,T,N,I,U,G,H,le,_e)=>{ar[y].fields.push({fieldName:zn(m),getterReturnType:T,getter:z(N,I),getterContext:U,setterArgumentType:G,setter:z(H,le),setterContext:_e})},ls=(y,m)=>{m=zn(m),Sr(y,{isVoid:!0,name:m,argPackAdvance:0,fromWireType:()=>{},toWireType:(T,N)=>{}})},Ba=[],Ei=(y,m,T,N)=>(y=Ba[y],m=Mn.toValue(m),y(null,m,T,N)),Ti={},cs=y=>{var m=Ti[y];return m===void 0?zn(y):m},us=()=>{if(typeof globalThis=="object")return globalThis;function y(m){m.$$$embind_global$$$=m;var T=typeof $$$embind_global$$$=="object"&&m.$$$embind_global$$$==m;return T||delete m.$$$embind_global$$$,T}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&y(global)?$$$embind_global$$$=global:typeof self=="object"&&y(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Mi=y=>y===0?Mn.toHandle(us()):(y=cs(y),Mn.toHandle(us()[y])),Ka=y=>{var m=Ba.length;return Ba.push(y),m},ei=(y,m)=>{var T=ir[y];return T===void 0&&Jt(`${m} has unknown type ${It(y)}`),T},zs=(y,m)=>{for(var T=new Array(y),N=0;N<y;++N)T[N]=ei(ke[m+N*4>>2],`parameter ${N}`);return T},To=(y,m,T)=>{var N=[],I=y.toWireType(N,T);return N.length&&(ke[m>>2]=Mn.toHandle(N)),I},Ga=Reflect.construct,fs=(y,m,T)=>{var N=zs(y,m),I=N.shift();y--;var U=new Array(y),G=(le,_e,We,Je)=>{for(var Ut=0,Nt=0;Nt<y;++Nt)U[Nt]=N[Nt].readValueFromPointer(Je+Ut),Ut+=N[Nt].argPackAdvance;var xn=T===1?Ga(_e,U):_e.apply(le,U);return To(I,We,xn)},H=`methodCaller<(${N.map(le=>le.name).join(", ")}) => ${I.name}>`;return Ka(ft(H,G))},_i=y=>{y>9&&(yn[y+1]+=1)},ds=y=>{var m=Mn.toValue(y);In(m),Yn(y)},hs=(y,m)=>{y=ei(y,"_emval_take_value");var T=y.readValueFromPointer(m);return Mn.toHandle(T)},lr=(y,m,T,N)=>{var I=new Date().getFullYear(),U=new Date(I,0,1),G=new Date(I,6,1),H=U.getTimezoneOffset(),le=G.getTimezoneOffset(),_e=Math.max(H,le);ke[y>>2]=_e*60,Pt[m>>2]=+(H!=le);var We=Nt=>{var xn=Nt>=0?"-":"+",en=Math.abs(Nt),hn=String(Math.floor(en/60)).padStart(2,"0"),Fn=String(en%60).padStart(2,"0");return`UTC${xn}${hn}${Fn}`},Je=We(H),Ut=We(le);le<H?(Kn(Je,T,17),Kn(Ut,N,17)):(Kn(Je,N,17),Kn(Ut,T,17))},ti=()=>2147483648,Ra=(y,m)=>Math.ceil(y/m)*m,Ys=y=>{var m=He.buffer,T=(y-m.byteLength+65535)/65536|0;try{return He.grow(T),xe(),1}catch{}},ki=y=>{var m=rt.length;y>>>=0;var T=ti();if(y>T)return!1;for(var N=1;N<=4;N*=2){var I=m*(1+.2/N);I=Math.min(I,y+100663296);var U=Math.min(T,Ra(Math.max(y,I),65536)),G=Ys(U);if(G)return!0}return!1},Bi={},ps=()=>_||"./this.program",ma=()=>{if(!ma.strings){var y=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",m={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:y,_:ps()};for(var T in Bi)Bi[T]===void 0?delete m[T]:m[T]=Bi[T];var N=[];for(var T in m)N.push(`${T}=${m[T]}`);ma.strings=N}return ma.strings},gs=(y,m)=>{var T=0,N=0;for(var I of ma()){var U=m+T;ke[y+N>>2]=U,T+=Kn(I,U,1/0)+1,N+=4}return 0},Da=(y,m)=>{var T=ma();ke[y>>2]=T.length;var N=0;for(var I of T)N+=Ci(I)+1;return ke[m>>2]=N,0},ms=y=>52;function ys(y,m,T,N,I){return 70}var Ri=[null,[],[]],vs=(y,m)=>{var T=Ri[y];m===0||m===10?((y===1?Pe:pt)(Gr(T)),T.length=0):T.push(m)},Ks=(y,m,T,N)=>{for(var I=0,U=0;U<T;U++){var G=ke[m>>2],H=ke[m+4>>2];m+=8;for(var le=0;le<H;le++)vs(y,rt[G+le]);I+=H}return ke[N>>2]=I,0},Mo=y=>y;yr(),Ce(),ve(),s.noExitRuntime&&s.noExitRuntime,s.print&&(Pe=s.print),s.printErr&&(pt=s.printErr),s.wasmBinary&&(Ke=s.wasmBinary),s.arguments&&s.arguments,s.thisProgram&&(_=s.thisProgram);var ni={s:Zn,w:mn,a:Lr,j:gr,m:wr,P:Jr,p:ha,ga:Ua,d:pa,ba:zr,ua:Aa,aa:Yr,pa:vn,sa:Vt,ra:tn,H:Rn,na:oa,V:Wr,W:bi,x:qn,t:Kr,ta:La,oa:za,Q:ga,I:Ai,va:$a,qa:ls,da:Ei,wa:Yn,D:Mi,ma:fs,X:_i,Y:ds,U:hs,ca:lr,ha:ki,ea:gs,fa:Da,ia:ms,_:ys,S:Ks,K:Y,C:Q,M:Ni,R:ee,q:x,b:Un,E:q,ka:V,c:Fa,ja:ae,h:Bo,i:Qs,r:ya,O:k,v:l,F:p,L:E,z:ne,J:re,$:oe,Z:fe,k:kr,f:ai,e:ea,g:ii,N:$,l:ji,la:P,o:Ar,B:ja,u:f,T:Ha,A:J,n:Ps,G:bs,y:Mo},dn=await ze();dn.ya;var _o=dn.za,$r=s._free=dn.Aa,ri=s._malloc=dn.Ca,Gs=dn.Da,Xt=dn.Ea,Vs=dn.Fa,Na=dn.Ga,Fs=dn.Ha,ko=dn.Ia,Hs=dn.Ja,Di=dn.Ka;s.dynCall_viijii=dn.La;var xs=s.dynCall_iiijj=dn.Ma;s.dynCall_jiji=dn.Na;var Va=s.dynCall_jiiii=dn.Oa;s.dynCall_iiiiij=dn.Pa,s.dynCall_iiiiijj=dn.Qa,s.dynCall_iiiiiijj=dn.Ra;function ai(y,m){var T=Dt();try{nt(y)(m)}catch(N){if(kt(T),N!==N+0)throw N;Xt(1,0)}}function Bo(y,m,T,N){var I=Dt();try{return nt(y)(m,T,N)}catch(U){if(kt(I),U!==U+0)throw U;Xt(1,0)}}function Ni(y,m,T,N,I){var U=Dt();try{return nt(y)(m,T,N,I)}catch(G){if(kt(U),G!==G+0)throw G;Xt(1,0)}}function ii(y,m,T,N){var I=Dt();try{nt(y)(m,T,N)}catch(U){if(kt(I),U!==U+0)throw U;Xt(1,0)}}function ea(y,m,T){var N=Dt();try{nt(y)(m,T)}catch(I){if(kt(N),I!==I+0)throw I;Xt(1,0)}}function Un(y,m){var T=Dt();try{return nt(y)(m)}catch(N){if(kt(T),N!==N+0)throw N;Xt(1,0)}}function Fa(y,m,T){var N=Dt();try{return nt(y)(m,T)}catch(I){if(kt(N),I!==I+0)throw I;Xt(1,0)}}function kr(y){var m=Dt();try{nt(y)()}catch(T){if(kt(m),T!==T+0)throw T;Xt(1,0)}}function Ps(y,m,T,N,I,U,G,H,le,_e,We){var Je=Dt();try{nt(y)(m,T,N,I,U,G,H,le,_e,We)}catch(Ut){if(kt(Je),Ut!==Ut+0)throw Ut;Xt(1,0)}}function ji(y,m,T,N,I){var U=Dt();try{nt(y)(m,T,N,I)}catch(G){if(kt(U),G!==G+0)throw G;Xt(1,0)}}function Qs(y,m,T,N,I){var U=Dt();try{return nt(y)(m,T,N,I)}catch(G){if(kt(U),G!==G+0)throw G;Xt(1,0)}}function ja(y,m,T,N,I,U,G){var H=Dt();try{nt(y)(m,T,N,I,U,G)}catch(le){if(kt(H),le!==le+0)throw le;Xt(1,0)}}function bs(y,m,T,N,I,U,G,H,le,_e,We,Je,Ut,Nt,xn,en){var hn=Dt();try{nt(y)(m,T,N,I,U,G,H,le,_e,We,Je,Ut,Nt,xn,en)}catch(Fn){if(kt(hn),Fn!==Fn+0)throw Fn;Xt(1,0)}}function Ha(y,m,T,N,I,U,G,H,le){var _e=Dt();try{nt(y)(m,T,N,I,U,G,H,le)}catch(We){if(kt(_e),We!==We+0)throw We;Xt(1,0)}}function ya(y,m,T,N,I,U){var G=Dt();try{return nt(y)(m,T,N,I,U)}catch(H){if(kt(G),H!==H+0)throw H;Xt(1,0)}}function Ar(y,m,T,N,I,U){var G=Dt();try{nt(y)(m,T,N,I,U)}catch(H){if(kt(G),H!==H+0)throw H;Xt(1,0)}}function l(y,m,T,N,I,U,G){var H=Dt();try{return nt(y)(m,T,N,I,U,G)}catch(le){if(kt(H),le!==le+0)throw le;Xt(1,0)}}function f(y,m,T,N,I,U,G,H){var le=Dt();try{nt(y)(m,T,N,I,U,G,H)}catch(_e){if(kt(le),_e!==_e+0)throw _e;Xt(1,0)}}function p(y,m,T,N,I,U,G,H){var le=Dt();try{return nt(y)(m,T,N,I,U,G,H)}catch(_e){if(kt(le),_e!==_e+0)throw _e;Xt(1,0)}}function x(y){var m=Dt();try{return nt(y)()}catch(T){if(kt(m),T!==T+0)throw T;Xt(1,0)}}function E(y,m,T,N,I,U,G,H,le){var _e=Dt();try{return nt(y)(m,T,N,I,U,G,H,le)}catch(We){if(kt(_e),We!==We+0)throw We;Xt(1,0)}}function k(y,m,T,N,I,U,G){var H=Dt();try{return nt(y)(m,T,N,I,U,G)}catch(le){if(kt(H),le!==le+0)throw le;Xt(1,0)}}function q(y,m,T,N){var I=Dt();try{return nt(y)(m,T,N)}catch(U){if(kt(I),U!==U+0)throw U;Xt(1,0)}}function Y(y,m,T,N){var I=Dt();try{return nt(y)(m,T,N)}catch(U){if(kt(I),U!==U+0)throw U;Xt(1,0)}}function P(y,m,T,N,I,U,G,H){var le=Dt();try{nt(y)(m,T,N,I,U,G,H)}catch(_e){if(kt(le),_e!==_e+0)throw _e;Xt(1,0)}}function Q(y,m,T,N,I,U){var G=Dt();try{return nt(y)(m,T,N,I,U)}catch(H){if(kt(G),H!==H+0)throw H;Xt(1,0)}}function ne(y,m,T,N,I,U,G,H,le,_e){var We=Dt();try{return nt(y)(m,T,N,I,U,G,H,le,_e)}catch(Je){if(kt(We),Je!==Je+0)throw Je;Xt(1,0)}}function V(y,m,T){var N=Dt();try{return nt(y)(m,T)}catch(I){if(kt(N),I!==I+0)throw I;Xt(1,0)}}function ae(y,m,T,N,I){var U=Dt();try{return nt(y)(m,T,N,I)}catch(G){if(kt(U),G!==G+0)throw G;Xt(1,0)}}function J(y,m,T,N,I,U,G,H,le,_e){var We=Dt();try{nt(y)(m,T,N,I,U,G,H,le,_e)}catch(Je){if(kt(We),Je!==Je+0)throw Je;Xt(1,0)}}function $(y,m,T,N,I,U,G){var H=Dt();try{nt(y)(m,T,N,I,U,G)}catch(le){if(kt(H),le!==le+0)throw le;Xt(1,0)}}function ee(y,m,T,N){var I=Dt();try{return nt(y)(m,T,N)}catch(U){if(kt(I),U!==U+0)throw U;Xt(1,0)}}function re(y,m,T,N,I,U,G,H,le,_e,We,Je){var Ut=Dt();try{return nt(y)(m,T,N,I,U,G,H,le,_e,We,Je)}catch(Nt){if(kt(Ut),Nt!==Nt+0)throw Nt;Xt(1,0)}}function oe(y,m,T,N,I,U,G){var H=Dt();try{return xs(y,m,T,N,I,U,G)}catch(le){if(kt(H),le!==le+0)throw le;Xt(1,0)}}function fe(y,m,T,N,I){var U=Dt();try{return Va(y,m,T,N,I)}catch(G){if(kt(U),G!==G+0)throw G;Xt(1,0)}}function we(){if(Ue>0){Ie=we;return}if(At(),Ue>0){Ie=we;return}function y(){var m;s.calledRun=!0,!ut&&(Ze(),u(s),(m=s.onRuntimeInitialized)===null||m===void 0||m.call(s),se())}s.setStatus?(s.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>s.setStatus(""),1),y()},1)):y()}function Ne(){if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.shift()()}return Ne(),we(),r=A,r};function L1(o){return tm(nm,o)}async function z1(o,r){return U1(nm,o,r)}const rm=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["databar_limited","DataBarLimited"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"],["any","Any"]],Y1=[...rm,["unknown"]].map(o=>o[0]),ed=new Map(rm);function K1(o){for(const[r,i]of ed)if(o===i)return r;return"unknown"}function G1(o){if(am(o))return{width:o.naturalWidth,height:o.naturalHeight};if(im(o))return{width:o.width.baseVal.value,height:o.height.baseVal.value};if(sm(o))return{width:o.videoWidth,height:o.videoHeight};if(lm(o))return{width:o.width,height:o.height};if(um(o))return{width:o.displayWidth,height:o.displayHeight};if(om(o))return{width:o.width,height:o.height};if(cm(o))return{width:o.width,height:o.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function am(o){var r,i;try{return o instanceof((i=(r=o?.ownerDocument)==null?void 0:r.defaultView)==null?void 0:i.HTMLImageElement)}catch{return!1}}function im(o){var r,i;try{return o instanceof((i=(r=o?.ownerDocument)==null?void 0:r.defaultView)==null?void 0:i.SVGImageElement)}catch{return!1}}function sm(o){var r,i;try{return o instanceof((i=(r=o?.ownerDocument)==null?void 0:r.defaultView)==null?void 0:i.HTMLVideoElement)}catch{return!1}}function om(o){var r,i;try{return o instanceof((i=(r=o?.ownerDocument)==null?void 0:r.defaultView)==null?void 0:i.HTMLCanvasElement)}catch{return!1}}function lm(o){try{return o instanceof ImageBitmap||Object.prototype.toString.call(o)==="[object ImageBitmap]"}catch{return!1}}function cm(o){try{return o instanceof OffscreenCanvas||Object.prototype.toString.call(o)==="[object OffscreenCanvas]"}catch{return!1}}function um(o){try{return o instanceof VideoFrame||Object.prototype.toString.call(o)==="[object VideoFrame]"}catch{return!1}}function V1(o){try{return o instanceof Blob||Object.prototype.toString.call(o)==="[object Blob]"}catch{return!1}}function F1(o){try{return o instanceof ImageData||Object.prototype.toString.call(o)==="[object ImageData]"}catch{return!1}}function H1(o,r){try{const i=new OffscreenCanvas(o,r);if(i.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return i;throw void 0}catch{const i=document.createElement("canvas");return i.width=o,i.height=r,i}}async function fm(o){if(am(o)&&!await Z1(o))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(im(o)&&!await X1(o))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(um(o)&&W1(o))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(sm(o)&&(o.readyState===0||o.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(lm(o)&&ex(o))throw new DOMException("The image source is detached.","InvalidStateError");const{width:r,height:i}=G1(o);if(r===0||i===0)return null;const s=H1(r,i).getContext("2d");s.drawImage(o,0,0);try{return s.getImageData(0,0,r,i)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function P1(o){let r;try{r=await createImageBitmap(o)}catch{try{if(globalThis.Image){r=new Image;let i="";try{i=URL.createObjectURL(o),r.src=i,await r.decode()}finally{URL.revokeObjectURL(i)}}else return o}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}}return await fm(r)}function Q1(o){const{width:r,height:i}=o;if(r===0||i===0)return null;const s=o.getContext("2d");try{return s.getImageData(0,0,r,i)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function J1(o){if(V1(o))return await P1(o);if(F1(o)){if($1(o))throw new DOMException("The image data has been detached.","InvalidStateError");return o}return om(o)||cm(o)?Q1(o):await fm(o)}async function Z1(o){try{return await o.decode(),!0}catch{return!1}}async function X1(o){var r;try{return await((r=o.decode)==null?void 0:r.call(o)),!0}catch{return!1}}function W1(o){return o.format===null}function $1(o){return o.data.buffer.byteLength===0}function ex(o){return o.width===0&&o.height===0}function Kp(o,r){return tx(o)?new DOMException(`${r}: ${o.message}`,o.name):nx(o)?new o.constructor(`${r}: ${o.message}`):new Error(`${r}: ${o}`)}function tx(o){return o instanceof DOMException||Object.prototype.toString.call(o)==="[object DOMException]"}function nx(o){return o instanceof Error||Object.prototype.toString.call(o)==="[object Error]"}var Bc;class td{constructor(r={}){b1(this,Bc);var i;try{const s=(i=r?.formats)==null?void 0:i.filter(u=>u!=="unknown");if(s?.length===0)throw new TypeError("Hint option provided, but is empty.");for(const u of s??[])if(!ed.has(u))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${u}' is not a valid enum value of type BarcodeFormat.`);C1(this,Bc,s??[]),L1({fireImmediately:!0}).catch(()=>{})}catch(s){throw Kp(s,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return Y1.filter(r=>r!=="unknown")}async detect(r){try{const i=await J1(r);if(i===null)return[];let s;const u={tryCode39ExtendedMode:!1,textMode:"Plain",formats:x1(this,Bc).map(g=>ed.get(g))};try{s=await z1(i,u)}catch(g){throw console.error(g),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return s.map(g=>{const{topLeft:{x:A,y:M},topRight:{x:b,y:S},bottomLeft:{x:_,y:j},bottomRight:{x:L,y:X}}=g.position,ge=Math.min(A,b,_,L),de=Math.min(M,S,j,X),Pe=Math.max(A,b,_,L),pt=Math.max(M,S,j,X);return{boundingBox:new DOMRectReadOnly(ge,de,Pe-ge,pt-de),rawValue:g.text,format:K1(g.format),cornerPoints:[{x:A,y:M},{x:b,y:S},{x:L,y:X},{x:_,y:j}]}})}catch(i){throw Kp(i,"Failed to execute 'detect' on 'BarcodeDetector'")}}}Bc=new WeakMap;globalThis.BarcodeDetector!=null||(globalThis.BarcodeDetector=td);const rx={finder:!0,torch:!0,tracker:void 0,onOff:!1,zoom:!1},ax={facingMode:"environment",width:{min:640,ideal:720,max:1920},height:{min:640,ideal:720,max:1080}},ix={width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",aspectRatio:"1/1"},sx={width:"100%",height:"100%",objectFit:"cover",overflow:"hidden"};var gl=o=>o instanceof Date,dm=o=>o==null;const hm=o=>typeof o=="object";var Gp=o=>!dm(o)&&!Array.isArray(o)&&hm(o)&&!gl(o),Vp=o=>dm(o)||!hm(o);function pm(o,r){if(Vp(o)||Vp(r))return o===r;if(gl(o)&&gl(r))return o.getTime()===r.getTime();const i=o,s=r,u=Object.keys(i),g=Object.keys(s);if(u.length!==g.length)return!1;for(const A of u){const M=i[A];if(!g.includes(A))return!1;if(A!=="ref"){const b=s[A];if(gl(M)&&gl(b)||Gp(M)&&Gp(b)||Array.isArray(M)&&Array.isArray(b)?!pm(M,b):M!==b)return!1}}return!0}function ox(o){const{onClick:r,disabled:i,className:s}=o,u={cursor:i?"default":"pointer",stroke:i?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...o.style};return v.jsxs("svg",{onClick:i?void 0:r,className:s,style:u,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("title",{children:"Camera Off"}),v.jsx("path",{d:"M3 3L6.00007 6.00007M21 21L19.8455 19.8221M9.74194 4.06811C9.83646 4.04279 9.93334 4.02428 10.0319 4.01299C10.1453 4 10.2683 4 10.5141 4H13.5327C13.7786 4 13.9015 4 14.015 4.01299C14.6068 4.08078 15.1375 4.40882 15.4628 4.90782C15.5252 5.00345 15.5802 5.11345 15.6901 5.33333C15.7451 5.44329 15.7726 5.49827 15.8037 5.54609C15.9664 5.79559 16.2318 5.95961 16.5277 5.9935C16.5844 6 16.6459 6 16.7688 6H17.8234C18.9435 6 19.5036 6 19.9314 6.21799C20.3077 6.40973 20.6137 6.71569 20.8055 7.09202C21.0234 7.51984 21.0234 8.0799 21.0234 9.2V15.3496M19.8455 19.8221C19.4278 20 18.8702 20 17.8234 20H6.22344C5.10333 20 4.54328 20 4.11546 19.782C3.73913 19.5903 3.43317 19.2843 3.24142 18.908C3.02344 18.4802 3.02344 17.9201 3.02344 16.8V9.2C3.02344 8.0799 3.02344 7.51984 3.24142 7.09202C3.43317 6.71569 3.73913 6.40973 4.11546 6.21799C4.51385 6.015 5.0269 6.00103 6.00007 6.00007M19.8455 19.8221L14.5619 14.5619M14.5619 14.5619C14.0349 15.4243 13.0847 16 12 16C10.3431 16 9 14.6569 9 13C9 11.9153 9.57566 10.9651 10.4381 10.4381M14.5619 14.5619L10.4381 10.4381M10.4381 10.4381L6.00007 6.00007"})]})}function lx(o){const{onClick:r,disabled:i,className:s}=o,u={cursor:i?"default":"pointer",stroke:i?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...o.style};return v.jsxs("svg",{onClick:i?void 0:r,className:s,style:u,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("title",{children:"Camera On"}),v.jsx("path",{d:"M12 16C13.6569 16 15 14.6569 15 13C15 11.3431 13.6569 10 12 10C10.3431 10 9 11.3431 9 13C9 14.6569 10.3431 16 12 16Z"}),v.jsx("path",{d:"M3 16.8V9.2C3 8.0799 3 7.51984 3.21799 7.09202C3.40973 6.71569 3.71569 6.40973 4.09202 6.21799C4.51984 6 5.0799 6 6.2 6H7.25464C7.37758 6 7.43905 6 7.49576 5.9935C7.79166 5.95961 8.05705 5.79559 8.21969 5.54609C8.25086 5.49827 8.27836 5.44328 8.33333 5.33333C8.44329 5.11342 8.49827 5.00346 8.56062 4.90782C8.8859 4.40882 9.41668 4.08078 10.0085 4.01299C10.1219 4 10.2448 4 10.4907 4H13.5093C13.7552 4 13.8781 4 13.9915 4.01299C14.5833 4.08078 15.1141 4.40882 15.4394 4.90782C15.5017 5.00345 15.5567 5.11345 15.6667 5.33333C15.7216 5.44329 15.7491 5.49827 15.7803 5.54609C15.943 5.79559 16.2083 5.95961 16.5042 5.9935C16.561 6 16.6224 6 16.7454 6H17.8C18.9201 6 19.4802 6 19.908 6.21799C20.2843 6.40973 20.5903 6.71569 20.782 7.09202C21 7.51984 21 8.0799 21 9.2V16.8C21 17.9201 21 18.4802 20.782 18.908C20.5903 19.2843 20.2843 19.5903 19.908 19.782C19.4802 20 18.9201 20 17.8 20H6.2C5.0799 20 4.51984 20 4.09202 19.782C3.71569 19.5903 3.40973 19.2843 3.21799 18.908C3 18.4802 3 17.9201 3 16.8Z"})]})}function cx(o){const{scanning:r,startScanning:i,stopScanning:s}=o,[u,g]=Ye.useState(!1);function A(){g(!0),r?s():i(),setTimeout(()=>g(!1),1e3)}return v.jsx("div",{style:{bottom:85,right:8,position:"absolute",zIndex:2,cursor:u?"default":"pointer"},children:v.jsx(r?ox:lx,{disabled:u,onClick:A})})}function ux(o){const{onClick:r,className:i,style:s}=o;return v.jsxs("svg",{onClick:r,width:"30px",height:"30px",viewBox:"0 0 24 24",className:i,style:s,xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("title",{children:"Torch Off"}),v.jsx("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M14.516 15.158l.714.714-4.595 6.14-.75-.364L12.337 13H6.978L8.22 8.861l.803.803L8.322 12h3.036l1.793 1.792-1.475 5.16zm5.984 4.05L4.793 3.5l.707-.707 3.492 3.492L10.278 2h7.972l-5.025 7h7.149l-3.71 4.957 4.543 4.543zM12.707 10l3.243 3.243L18.376 10zM9.795 7.088l2.079 2.079L16.3 3h-5.278z"})]})}function fx(o){const{onClick:r,className:i,style:s}=o;return v.jsxs("svg",{onClick:r,width:"30px",height:"30px",viewBox:"0 0 24 24",className:i,style:s,xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("title",{children:"Torch On"}),v.jsx("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M13.225 9l5.025-7h-7.972l-3.3 11h5.359l-2.452 8.648.75.364L20.374 9zm.438 3H8.322l2.7-9H16.3l-5.025 7h7.101l-6.7 8.953z"})]})}function dx(o){const{status:r,scanning:i,torchToggle:s}=o;function u(g){s(g)}return i&&s?v.jsx("div",{style:{bottom:35,right:8,position:"absolute",zIndex:2,cursor:"pointer"},children:r?v.jsx(ux,{onClick:()=>u(!1)}):v.jsx(fx,{onClick:()=>u(!0)})}):null}function hx(o){const{onClick:r,className:i,disabled:s=!1}=o,u={cursor:s?"default":"pointer",stroke:s?"grey":"yellow",fill:s?"grey":"yellow",...o.style};return v.jsxs("svg",{onClick:s?void 0:r,width:"30px",height:"30px",viewBox:"0 0 24 24",className:i,style:u,xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("title",{children:"Zoom In"}),v.jsx("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-7.46,0.5l-1.5,0c-0.645,0 -0.643,-1 -0,-1l1.5,0l-0,-1.5c-0,-0.645 1,-0.643 1,0l-0,1.5l1.5,0c0.645,0 0.643,1 -0,1l-1.5,0l-0,1.5c-0,0.645 -1,0.643 -1,0l-0,-1.5Z"})]})}function px(o){const{onClick:r,className:i,disabled:s=!1}=o,u={cursor:s?"default":"pointer",stroke:s?"grey":"yellow",fill:s?"grey":"yellow",...o.style};return v.jsxs("svg",{onClick:s?void 0:r,width:"30px",height:"30px",viewBox:"0 0 24 24",className:i,style:u,xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("title",{children:"Zoom Out"}),v.jsx("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-4.96,-0.5c0.645,0 0.643,1 -0,1l-4,0c-0.645,0 -0.643,-1 -0,-1l4,0Z"})]})}function gx(o){const{scanning:r,capabilities:i,onZoom:s,value:u}=o;if(!r||!s)return null;const g=(i.max-i.min)/3;return v.jsxs(Ye.Fragment,{children:[v.jsx("div",{style:{bottom:130,right:8,position:"absolute",zIndex:2,cursor:"pointer"},children:v.jsx(px,{disabled:u<=i.min,onClick:function(){s(Math.max(u-g,i.min))}})}),v.jsx("div",{style:{bottom:180,right:8,position:"absolute",zIndex:2,cursor:"pointer"},children:v.jsx(hx,{disabled:u>=i.max,onClick:function(){s(Math.min(u+g,i.max))}})})]})}const as={fullContainer:{width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},innerContainer:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},overlay:{position:"absolute",top:0,right:0,bottom:0,left:0,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},borderBox:{position:"relative",width:"70%",aspectRatio:"1 / 1",border:"2px dashed rgba(239, 68, 68, 0.4)",borderRadius:"0.5rem"},cornerTopLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,left:0,borderBottomColor:"transparent",borderRightColor:"transparent",borderTopLeftRadius:"0.5rem"},cornerTopRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,right:0,borderBottomColor:"transparent",borderLeftColor:"transparent",borderTopRightRadius:"0.5rem"},cornerBottomLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,left:0,borderTopColor:"transparent",borderRightColor:"transparent",borderBottomLeftRadius:"0.5rem"},cornerBottomRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,right:0,borderTopColor:"transparent",borderLeftColor:"transparent",borderBottomRightRadius:"0.5rem"}};function mx(o){const{scanning:r,capabilities:i,onOff:s,torch:u,zoom:g,startScanning:A,stopScanning:M}=o;return v.jsx("div",{style:as.fullContainer,children:v.jsxs("div",{style:as.innerContainer,children:[v.jsx("div",{style:as.overlay,children:v.jsxs("div",{style:as.borderBox,children:[v.jsx("div",{style:as.cornerTopLeft}),v.jsx("div",{style:as.cornerTopRight}),v.jsx("div",{style:as.cornerBottomLeft}),v.jsx("div",{style:as.cornerBottomRight})]})}),s&&v.jsx(cx,{scanning:r,startScanning:A,stopScanning:M}),u&&i.torch&&v.jsx(dx,{scanning:r,status:u.status,torchToggle:u.toggle}),g&&i.zoom&&v.jsx(gx,{scanning:r,capabilities:i.zoom,value:g.value,onZoom:g.onChange})]})})}function yc(o){if(o===null)throw new Error("Canvas should always be defined when component is mounted.");const r=o.getContext("2d");if(r===null)throw new Error("Canvas 2D context should be non-null");r.clearRect(0,0,o.width,o.height)}function yx(o){const{onScan:r,constraints:i,formats:s=["any"],paused:u=!1,components:g,children:A,styles:M,classNames:b,allowMultiple:S,scanDelay:_,onError:j,sound:L}=o,X=Ye.useRef(null),ge=Ye.useRef(null),de=Ye.useRef(null),Pe=Ye.useMemo(()=>({...ax,...i}),[i]),pt=Ye.useMemo(()=>({...rx,...g}),[g]),[Ke,He]=Ye.useState(!1),[ut,$e]=Ye.useState(!0),[rt,it]=Ye.useState(Pe),Bt=(function(){const Ie=Ye.useRef(Promise.resolve({type:"stop",data:{}})),Re=Ye.useRef(null),Qe=Ye.useRef(null),[K,me]=Ye.useState({}),[De,Ge]=Ye.useState({}),Ve=Ye.useCallback(async(Fe,Rt)=>{if(!window.isSecureContext)throw new Error("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.");if(navigator?.mediaDevices?.getUserMedia===void 0)throw new Error("this browser has no Stream API support");const mt=await navigator.mediaDevices.getUserMedia({audio:!1,video:Rt});Fe.srcObject!==void 0?Fe.srcObject=mt:Fe.mozSrcObject!==void 0?Fe.mozSrcObject=mt:window.URL.createObjectURL?Fe.src=window.URL.createObjectURL(mt):window.webkitURL?Fe.src=window.webkitURL.createObjectURL(mt):Fe.src=mt.id,await Promise.race([Fe.play(),new Promise(rn=>setTimeout(rn,3e3)).then(()=>{throw new Error("Loading camera stream timed out after 3 seconds.")})]),await new Promise(rn=>setTimeout(rn,500));const[gn]=mt.getVideoTracks();return Ge(gn.getSettings()),me(gn?.getCapabilities?.()??{}),Re.current=mt,Qe.current=gn,{type:"start",data:{videoEl:Fe,stream:mt,constraints:Rt}}},[]),Me=Ye.useCallback(async(Fe,Rt)=>{Fe.src="",Fe.srcObject=null,Fe.load();for(const mt of Rt.getTracks())Rt.removeTrack(mt),mt.stop();return Re.current=null,Qe.current=null,Ge({}),{type:"stop",data:{}}},[]),gt=Ye.useCallback(async(Fe,{constraints:Rt,restart:mt=!1})=>{if(Ie.current=Ie.current.then(gn=>{if(gn.type==="start"){const{data:{videoEl:rn,stream:kt,constraints:Dt}}=gn;return mt||Fe!==rn||Rt!==Dt?Me(rn,kt).then(()=>Ve(Fe,Rt)):gn}return Ve(Fe,Rt)}),(await Ie.current).type==="stop")throw new Error("Something went wrong with the camera task queue (start task).")},[Ve,Me]),Ct=Ye.useCallback(async()=>{if(Ie.current=Ie.current.then(Fe=>{if(Fe.type==="stop")return Fe;const{data:{videoEl:Rt,stream:mt}}=Fe;return Me(Rt,mt)}),(await Ie.current).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")},[Me]),ze=Ye.useCallback(async Fe=>{const Rt=Qe.current;if(!Rt)throw new Error("No active video track found.");{Fe.advanced?.[0].zoom&&Rt.getCapabilities().torch&&await Rt.applyConstraints({advanced:[{torch:!1}]}),await Rt.applyConstraints(Fe);const mt=Rt.getCapabilities(),gn=Rt.getSettings();me(mt),Ge(gn)}},[]);return Ye.useEffect(()=>()=>{(async()=>await Ct())()},[Ct]),{capabilities:K,settings:De,startCamera:gt,stopCamera:Ct,updateConstraints:ze}})(),Pt=Ye.useRef(Bt),ke=Ye.useRef(j),Le=Ye.useRef(pt.tracker);Ye.useEffect(()=>{Pt.current=Bt},[Bt]),Ye.useEffect(()=>{ke.current=j},[j]),Ye.useEffect(()=>{Le.current=pt.tracker},[pt.tracker]);const Se=Ye.useCallback(Ie=>{(function(Re,Qe,K,me){const De=K;if(De==null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas is always defined.");const Ge=Qe;if(Ge==null)throw new Error("onFound handler should only be called when component is mounted. Thus video element is always defined.");if(Re.length===0||me===void 0)yc(De);else{const Ve=Ge.offsetWidth,Me=Ge.offsetHeight,gt=Ge.videoWidth,Ct=Ge.videoHeight,ze=Math.max(Ve/gt,Me/Ct),Fe=gt*ze,Rt=Ct*ze,mt=Fe/gt,gn=Rt/Ct,rn=(Ve-Fe)/2,kt=(Me-Rt)/2,Dt=({x:wn,y:mn})=>({x:Math.floor(wn*mt),y:Math.floor(mn*gn)}),Mr=({x:wn,y:mn})=>({x:Math.floor(wn+rn),y:Math.floor(mn+kt)}),pr=Re.map(wn=>{const{boundingBox:mn,cornerPoints:Qr}=wn,{x:Cr,y:On}=Mr(Dt({x:mn.x,y:mn.y})),{x:Lr,y:gr}=Dt({x:mn.width,y:mn.height});return{...wn,cornerPoints:Qr.map(wr=>Mr(Dt(wr))),boundingBox:DOMRectReadOnly.fromRect({x:Cr,y:On,width:Lr,height:gr})}});De.width=Ge.offsetWidth,De.height=Ge.offsetHeight;const Zn=De.getContext("2d");if(Zn===null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas 2D context is always defined.");me(pr,Zn)}})(Ie,X.current,de.current,Le.current)},[]),{startScanning:xe,stopScanning:At}=(function(Ie){const{videoElementRef:Re,onScan:Qe,onFound:K,retryDelay:me=100,scanDelay:De=0,formats:Ge=[],allowMultiple:Ve=!1,sound:Me=!0}=Ie,gt=Ye.useRef(new td({formats:Ge})),Ct=Ye.useRef(null),ze=Ye.useRef(null);Ye.useEffect(()=>{gt.current=new td({formats:Ge})},[Ge]),Ye.useEffect(()=>{typeof window<"u"&&Me&&(Ct.current=new Audio(typeof Me=="string"?Me:"data:audio/mp3;base64,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"))},[Me]);const Fe=Ye.useCallback(Rt=>async mt=>{if(Re.current!==null&&Re.current.readyState>1){const{lastScan:gn,contentBefore:rn,lastScanHadContent:kt}=Rt;if(mt-gn<me)ze.current=window.requestAnimationFrame(Fe(Rt));else{const Dt=await gt.current.detect(Re.current),Mr=Dt.some(mn=>!rn.includes(mn.rawValue)),pr=Dt.length>0;let Zn=Rt.lastOnScan;(Mr||Ve&&pr&&mt-Zn>=De)&&(Me&&Ct.current&&Ct.current.paused&&Ct.current.play().catch(mn=>console.error("Error playing the sound",mn)),Zn=mt,Qe(Dt)),pr&&K(Dt),!pr&&kt&&K(Dt);const wn={lastScan:mt,lastOnScan:Zn,lastScanHadContent:pr,contentBefore:Mr?Dt.map(mn=>mn.rawValue):rn};ze.current=window.requestAnimationFrame(Fe(wn))}}},[Re.current,Qe,K,me,Ve,De,Me]);return{startScanning:Ye.useCallback(()=>{const Rt=performance.now(),mt={lastScan:Rt,lastOnScan:Rt,contentBefore:[],lastScanHadContent:!1};ze.current=window.requestAnimationFrame(Fe(mt))},[Fe]),stopScanning:Ye.useCallback(()=>{ze.current!==null&&(window.cancelAnimationFrame(ze.current),ze.current=null)},[])}})({videoElementRef:X,onScan:r,onFound:Se,formats:s,retryDelay:pt.tracker===void 0?500:10,scanDelay:_,allowMultiple:S,sound:L});Ye.useEffect(()=>(He(!0),()=>{He(!1)}),[]),Ye.useEffect(()=>{Ke&&(At(),xe())},[Ke,xe,At]),Ye.useEffect(()=>{if(!pm(Pe,rt)){const Ie=Pe;i?.deviceId&&delete Ie.facingMode,it(Ie)}},[i,Pe,rt]);const Ze=Ye.useMemo(()=>({constraints:rt,shouldStream:Ke&&!u}),[rt,Ke,u]),se=Ye.useCallback(async()=>{const Ie=X.current;if(Ie==null)throw new Error("Video should be defined when component is mounted.");const Re=ge.current;if(Re==null)throw new Error("Canvas should be defined when component is mounted.");const Qe=Re.getContext("2d");if(Qe==null)throw new Error("Canvas should be defined when component is mounted.");if(Ze.shouldStream){await Pt.current.stopCamera(),$e(!1);try{await Pt.current.startCamera(Ie,Ze),Ie?$e(!0):await Pt.current.stopCamera()}catch(K){ke.current?.(K),console.error("error",K)}}else Re.width=Ie.videoWidth,Re.height=Ie.videoHeight,Qe.drawImage(Ie,0,0,Ie.videoWidth,Ie.videoHeight),await Pt.current.stopCamera(),$e(!1)},[Ze]);Ye.useEffect(()=>{(async()=>await se())()},[se]);const Ue=Ye.useMemo(()=>Ze.shouldStream&&ut,[Ze.shouldStream,ut]);return Ye.useEffect(()=>{if(Ue){if(ge.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus pause frame canvas is defined");if(yc(ge.current),de.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus tracking canvas is defined");if(yc(de.current),X.current==null)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus video element is defined");xe()}},[Ue,xe]),v.jsxs("div",{style:{...ix,...M?.container},className:b?.container,children:[v.jsx("video",{ref:X,style:{...sx,...M?.video,visibility:u?"hidden":"visible"},className:b?.video,autoPlay:!0,muted:!0,playsInline:!0}),v.jsx("canvas",{ref:ge,style:{display:u?"block":"none",position:"absolute",width:"100%",height:"100%"}}),v.jsx("canvas",{ref:de,style:{position:"absolute",width:"100%",height:"100%"}}),v.jsxs("div",{style:{position:"absolute",width:"100%",height:"100%"},children:[pt.finder&&v.jsx(mx,{scanning:ut,capabilities:Bt.capabilities,onOff:pt.onOff,zoom:pt.zoom&&Bt.settings.zoom?{value:Bt.settings.zoom,onChange:async Ie=>{const Re={...rt,advanced:[{zoom:Ie}]};await Bt.updateConstraints(Re)}}:void 0,torch:pt.torch?{status:Bt.settings.torch??!1,toggle:async Ie=>{const Re={...rt,advanced:[{torch:Ie}]};await Bt.updateConstraints(Re)}}:void 0,startScanning:async()=>await se(),stopScanning:async()=>{await Bt.stopCamera(),yc(de.current),$e(!1)}}),A]})]})}const jr=[];for(let o=0;o<256;++o)jr.push((o+256).toString(16).slice(1));function vx(o,r=0){return(jr[o[r+0]]+jr[o[r+1]]+jr[o[r+2]]+jr[o[r+3]]+"-"+jr[o[r+4]]+jr[o[r+5]]+"-"+jr[o[r+6]]+jr[o[r+7]]+"-"+jr[o[r+8]]+jr[o[r+9]]+"-"+jr[o[r+10]]+jr[o[r+11]]+jr[o[r+12]]+jr[o[r+13]]+jr[o[r+14]]+jr[o[r+15]]).toLowerCase()}let qf;const xx=new Uint8Array(16);function bx(){if(!qf){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");qf=crypto.getRandomValues.bind(crypto)}return qf(xx)}const Cx=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Fp={randomUUID:Cx};function wx(o,r,i){o=o||{};const s=o.random??o.rng?.()??bx();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,vx(s)}function gm(o,r,i){return Fp.randomUUID&&!o?Fp.randomUUID():wx(o)}class ml{static async createInvite(r,i=1,s,u){const g=os.getState().identity;if(!g)throw new Error("No identity found");const A=gm(),M=nn.decodeBase64(g.secretKey),b=pl(nn.decodeBase64(g.publicKey)),S=Lg(M),_=zv(g.userId,A,b,S),j={inviteId:A,nonce:_.nonce,valid:!0,useCount:0,useLimit:i>0?i:void 0,name:r,note:u,expiry:s,createdAt:Date.now()};i<=0&&delete j.useLimit,await Pn.addInvite(j);const X=`adun-app://invite?data=${btoa(JSON.stringify(_))}`;return{invite:j,link:X,psi:_}}static async getInvites(){return await Pn.getInvites()}static async revokeInvite(r){await Pn.invalidateInvite(r)}static async deleteInvite(r){await Pn.deleteInvite(r)}static parseInviteLink(r){try{const i=new URL(r);if(i.protocol!=="p2pchat:"&&i.protocol!=="adun-app:")return null;const s=i.searchParams.get("data");if(!s)return null;const u=JSON.parse(atob(s));return i.host==="add"?{type:"identity",data:u}:i.host==="invite"?{type:"invite",data:u}:null}catch(i){return console.error("Failed to parse invite link",i),null}}}function Sx({onClose:o}){const{identity:r}=os(),{addContact:i}=Hr(),[s,u]=Ye.useState("share"),[g,A]=Ye.useState("invite"),[M,b]=Ye.useState(""),[S,_]=Ye.useState(null),[j,L]=Ye.useState(!1),[X,ge]=Ye.useState("Contact added successfully!"),[de,Pe]=Ye.useState("idle"),[pt,Ke]=Ye.useState(""),[He,ut]=Ye.useState(1),[$e,rt]=Ye.useState(!0),[it,Bt]=Ye.useState("days"),[Pt,ke]=Ye.useState(10),[Le,Se]=Ye.useState(()=>{const Me=new Date;return Me.setDate(Me.getDate()+10),Me.toISOString().split("T")[0]}),[xe,At]=Ye.useState(null),[Ze,se]=Ye.useState(!1);if(!r)return null;const Ue={version:1,publicKey:r.publicKey},Ie=`adun-app://add?data=${btoa(JSON.stringify(Ue))}`,Re=async()=>{if(!pt.trim()){_("Please enter a name for the invite");return}se(!0),_(null);try{let Me;if($e)if(it==="days")Me=Date.now()+Pt*24*60*60*1e3;else{const Ct=new Date(Le);Ct.setHours(23,59,59,999),Me=Ct.getTime()}const gt=await ml.createInvite(pt.trim(),He,Me);At({link:gt.link,invite:gt.invite})}catch(Me){console.error("Failed to create invite:",Me),_("Failed to create invite")}finally{se(!1)}},Qe=async Me=>{const gt=Me.target.files?.[0];if(gt){_(null);try{const Ct=await createImageBitmap(gt);if("BarcodeDetector"in window){const Fe=await new window.BarcodeDetector({formats:["qr_code"]}).detect(Ct);if(Fe.length>0){await K(Fe[0].rawValue);return}}_("QR code not found. Try the camera scanner or paste the link manually.")}catch(Ct){_("Could not scan image. Try pasting the link manually."),console.error("QR scan failed:",Ct)}}},K=async Me=>{console.log("[AddContactModal] Processing data:",Me),_(null);try{const gt=ml.parseInviteLink(Me);if(!gt)throw new Error("Invalid link format");if(gt.type==="identity"){const Ct=gt.data;if(!Ct.publicKey)throw new Error("Incomplete contact data");const ze=Ug(Ct.publicKey);if(ze===r.userId){_("You cannot add yourself as a contact");return}i({userId:ze,publicKey:Ct.publicKey,addedAt:Date.now(),status:"offline",localProfile:{}},!0),ge("Contact added successfully!")}else if(gt.type==="invite"){const Ct=gt.data;if(Ct.invitingId===r.userId){_("You cannot use your own invite");return}await br.initiateInviteHandshake(Ct),ge("Invite accepted! Connecting to peer...")}console.log("[AddContactModal] Success"),L(!0),setTimeout(()=>{o()},2e3)}catch(gt){_("Invalid data. Please check and try again."),console.error("[AddContactModal] Error:",gt)}},me=()=>{if(console.log("[AddContactModal] Manual add clicked. Input:",M),!M.trim()){_("Please enter the link");return}K(M.trim())},De=async(Me,gt)=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(Me),gt("copied"),setTimeout(()=>gt("idle"),2e3);else{const Ct=document.createElement("textarea");Ct.value=Me,Ct.style.position="fixed",Ct.style.left="-999999px",Ct.style.top="-999999px",document.body.appendChild(Ct),Ct.focus(),Ct.select();const ze=document.execCommand("copy");if(document.body.removeChild(Ct),ze)gt("copied"),setTimeout(()=>gt("idle"),2e3);else throw new Error("Copy command failed")}}catch(Ct){console.error("Failed to copy:",Ct),gt("error"),setTimeout(()=>gt("idle"),2e3)}},Ge=async(Me,gt,Ct)=>{if(navigator.share)try{await navigator.share({title:gt,text:Ct,url:Me})}catch{console.log("Share cancelled")}else De(Me,Pe)},Ve=g==="identity"?Ie:xe?.link;return v.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in",onClick:o,children:v.jsxs("div",{className:"bg-[var(--color-bg-card)] border border-slate-700 text-slate-200 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:Me=>Me.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[v.jsxs("div",{className:"sticky top-0 bg-[var(--color-bg-card)]/95 backdrop-blur border-b border-slate-700/50 px-6 py-4 flex items-center justify-between z-10",children:[v.jsx("h2",{id:"modal-title",className:"text-xl font-bold text-white",children:"Add Contact"}),v.jsx("button",{onClick:o,"aria-label":"Close",className:"p-2 hover:bg-slate-700 rounded-full transition-colors text-slate-400 hover:text-white",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),v.jsxs("div",{className:"flex border-b border-slate-700/50",children:[v.jsx("button",{onClick:()=>{u("share"),_(null)},className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${s==="share"?"border-b-2 border-indigo-500 text-indigo-400":"text-slate-400 hover:text-slate-200"}`,children:"Share"}),v.jsx("button",{onClick:()=>{u("scan"),_(null)},className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${s==="scan"?"border-b-2 border-indigo-500 text-indigo-400":"text-slate-400 hover:text-slate-200"}`,children:"Scan"}),v.jsx("button",{onClick:()=>{u("manual"),_(null)},className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${s==="manual"?"border-b-2 border-indigo-500 text-indigo-400":"text-slate-400 hover:text-slate-200"}`,children:"Manual"})]}),v.jsxs("div",{className:"p-6",children:[j&&v.jsx("div",{className:"mb-4 p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl",children:v.jsxs("p",{className:"text-sm text-emerald-400 font-medium flex items-center",children:[v.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),X]})}),S&&v.jsx("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/20 rounded-xl",children:v.jsxs("p",{className:"text-sm text-red-400 flex items-center",children:[v.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),S]})}),s==="share"&&v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"flex bg-slate-800/50 p-1 rounded-xl",children:[v.jsx("button",{onClick:()=>A("invite"),className:`flex-1 py-2 text-sm font-medium rounded-lg transition-all ${g==="invite"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-200"}`,children:"Create Invite"}),v.jsx("button",{onClick:()=>A("identity"),className:`flex-1 py-2 text-sm font-medium rounded-lg transition-all ${g==="identity"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-200"}`,children:"My Identity"})]}),g==="invite"&&!xe&&v.jsxs("div",{className:"space-y-4 animate-fade-in",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Name (for your reference)"}),v.jsx("input",{type:"text",value:pt,onChange:Me=>Ke(Me.target.value),placeholder:"e.g. Bob, Work Colleagues",className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Use Limit"}),v.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[v.jsx("button",{onClick:()=>ut(1),className:`px-3 py-2 rounded-lg text-sm font-medium border transition-all ${He===1?"bg-indigo-500/20 border-indigo-500 text-indigo-300":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:"1 Use (Peer)"}),v.jsx("button",{onClick:()=>ut(10),className:`px-3 py-2 rounded-lg text-sm font-medium border transition-all ${He===10?"bg-indigo-500/20 border-indigo-500 text-indigo-300":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:"10 Uses (Group)"}),v.jsx("button",{onClick:()=>ut(0),className:`px-3 py-2 rounded-lg text-sm font-medium border transition-all ${He===0?"bg-indigo-500/20 border-indigo-500 text-indigo-300":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:"Unlimited"})]}),v.jsx("p",{className:"mt-2 text-xs text-slate-500",children:He===1?"Single use. The name will be used as the contact name.":"Multiple uses. The name will be used as the group name."})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Expiry"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",className:"sr-only peer",checked:$e,onChange:Me=>rt(Me.target.checked)}),v.jsx("div",{className:"w-9 h-5 bg-slate-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-indigo-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-indigo-600"}),v.jsx("span",{className:"ml-2 text-xs font-medium text-slate-300",children:$e?"Enabled":"Disabled"})]})})]}),$e&&v.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-3 space-y-3 animate-fade-in",children:[v.jsxs("div",{className:"flex space-x-2",children:[v.jsx("button",{onClick:()=>Bt("days"),className:`flex-1 py-1.5 text-xs font-medium rounded-lg transition-all ${it==="days"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-slate-200"}`,children:"Days"}),v.jsx("button",{onClick:()=>Bt("date"),className:`flex-1 py-1.5 text-xs font-medium rounded-lg transition-all ${it==="date"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-slate-200"}`,children:"Date"})]}),it==="days"?v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"flex gap-1",children:[1,10,30].map(Me=>v.jsx("button",{onClick:()=>ke(Me),className:`px-3 py-2 rounded-lg text-sm font-medium border transition-all ${Pt===Me?"bg-indigo-500/20 border-indigo-500 text-indigo-300":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:Me},Me))}),v.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[v.jsx("input",{type:"number",min:"1",value:Pt,onChange:Me=>ke(Math.max(1,parseInt(Me.target.value)||0)),className:"w-full px-3 py-2 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 text-center"}),v.jsx("span",{className:"text-sm text-slate-400 whitespace-nowrap",children:"days"})]})]}):v.jsx("input",{type:"date",value:Le,min:new Date().toISOString().split("T")[0],onChange:Me=>Se(Me.target.value),className:"w-full px-3 py-2.5 bg-slate-900/50 border border-slate-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/50"})]})]}),v.jsx("button",{onClick:Re,disabled:Ze,className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-colors font-medium shadow-lg shadow-indigo-500/20 flex items-center justify-center",children:Ze?"Generating...":"Generate Invite Link"})]}),(g==="identity"||xe)&&Ve&&v.jsxs("div",{className:"space-y-6 animate-fade-in",children:[v.jsx("div",{className:"flex justify-center",children:v.jsx("div",{className:"bg-white p-4 rounded-xl",children:v.jsx(Wg,{value:Ve,size:200,level:"H",includeMargin:!0})})}),v.jsx("p",{className:"text-center text-sm text-slate-400",children:g==="identity"?"Share this QR code to let others add you directly.":"Share this invite QR code."}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("button",{onClick:()=>De(Ve,Pe),className:`w-full px-4 py-3 rounded-xl transition-all font-medium flex items-center justify-center ${de==="copied"?"bg-emerald-600 text-white":de==="error"?"bg-red-600 text-white":"bg-slate-700 text-white hover:bg-slate-600"}`,children:de==="copied"?"Copied Link!":"Copy Link"}),"share"in navigator&&v.jsx("button",{onClick:()=>Ge(Ve,"Add Contact","Scan to add"),className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-colors font-medium shadow-lg shadow-indigo-500/20 flex items-center justify-center",children:"Share via..."}),g==="invite"&&v.jsx("button",{onClick:()=>{At(null),Ke("")},className:"w-full px-4 py-3 bg-slate-800 text-slate-300 rounded-xl hover:bg-slate-700 transition-colors font-medium",children:"Create Another Invite"})]})]})]}),s==="scan"&&v.jsxs("div",{className:"space-y-4",children:[v.jsx("div",{className:"rounded-xl overflow-hidden bg-black aspect-square",children:v.jsx(yx,{onScan:Me=>{Me?.[0]?.rawValue&&K(Me[0].rawValue)},onError:Me=>{console.error("Scanner error:",Me),_("Camera access denied or not available")},formats:["qr_code"]})}),v.jsx("p",{className:"text-sm text-slate-400 text-center",children:"Point camera at a QR code to scan"}),v.jsxs("div",{className:"border-t border-slate-700 pt-4",children:[v.jsx("input",{type:"file",accept:"image/*",onChange:Qe,className:"hidden",id:"qr-scan-input"}),v.jsxs("label",{htmlFor:"qr-scan-input",className:"flex items-center justify-center gap-2 text-sm text-slate-400 hover:text-slate-200 cursor-pointer",children:[v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Or select image from gallery"]})]})]}),s==="manual"&&v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"manual-input",className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Paste Link"}),v.jsx("textarea",{id:"manual-input",value:M,onChange:Me=>b(Me.target.value),placeholder:"adun-app://...",rows:4,className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 font-mono text-xs text-slate-300 placeholder-slate-600 resize-none"}),v.jsxs("p",{className:"mt-2 text-xs text-amber-500/80 flex items-start",children:[v.jsx("svg",{className:"w-4 h-4 mr-1.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Paste the full link starting with adun-app://"]})]}),v.jsx("button",{onClick:me,className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-colors font-medium shadow-lg shadow-indigo-500/20",children:"Add Contact"})]})]}),v.jsx("div",{className:"px-6 pb-6",children:v.jsx("button",{onClick:o,className:"w-full px-4 py-3 bg-slate-800 text-slate-300 rounded-xl hover:bg-slate-700 transition-colors font-medium",children:"Close"})})]})})}function Ax(){try{const o=br.getActiveSignalingServices();return{status:o.length>0?"connected":"disconnected",services:o}}catch{return{status:"disconnected",services:[]}}}function Ex(){const o=Ye.useMemo(()=>Ax(),[]),[r,i]=Ye.useState(o.status),[s,u]=Ye.useState(o.services);return Ye.useEffect(()=>{const A=setInterval(()=>{try{const M=br.getActiveSignalingServices();u(M),M.length>0?i("connected"):i("disconnected")}catch{i("disconnected"),u([])}},3e3);return()=>clearInterval(A)},[]),{status:r,services:s}}function Tx({status:o,onRetry:r}){return o==="offline"?null:o==="handshake"?v.jsxs("div",{className:"flex items-center space-x-1",title:"Connecting...",children:[v.jsx("div",{className:"w-2.5 h-2.5 bg-yellow-500 rounded-full animate-pulse"}),v.jsx("span",{className:"text-xs text-yellow-500",children:"Connecting"})]}):o==="online"?v.jsxs("div",{className:"flex items-center space-x-1",title:"Online",children:[v.jsx("div",{className:"w-2.5 h-2.5 bg-green-500 rounded-full shadow-[0_0_8px_rgba(34,197,94,0.6)]"}),v.jsx("span",{className:"text-xs text-green-500",children:"Online"})]}):o==="failed"?v.jsxs("div",{className:"flex items-center space-x-2",title:"Connection failed",children:[v.jsxs("div",{className:"flex items-center space-x-1",children:[v.jsx("div",{className:"w-2.5 h-2.5 bg-red-500 rounded-full"}),v.jsx("span",{className:"text-xs text-red-500",children:"Failed"})]}),r&&v.jsx("button",{onClick:i=>{i.stopPropagation(),r()},className:"px-2 py-0.5 bg-red-500/10 hover:bg-red-500/20 text-red-500 text-xs rounded transition-colors",children:"Retry"})]}):null}function Mx(o){return o.status==="online"?v.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-emerald-500 border-2 border-[var(--color-bg-card)] rounded-full"}):o.status==="handshake"?v.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-yellow-500 border-2 border-[var(--color-bg-card)] rounded-full animate-pulse"}):o.status==="failed"?v.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 border-2 border-[var(--color-bg-card)] rounded-full bg-red-500 flex items-center justify-center",children:v.jsx("svg",{className:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})}):null}function _x(){const{identity:o,activeView:r,activeContactId:i,setActiveView:s,setActiveContact:u,miniChatVisibility:g}=os(),{contacts:A,retryHandshake:M}=Hr(),{messages:b}=Eo(),[S,_]=Ye.useState(!1),{status:j,services:L}=Ex(),X=Ke=>{u(Ke),s("chat")},ge=Ke=>{M(Ke)},de=(Ke,He)=>{if(!o)return[];const ut=[o.userId,Ke].sort().join("-");return(b[ut]||[]).slice(-3)},Pe=Ke=>0,pt=Ke=>{const He=Ke.localProfile?.name,ut=Ke.peerProfile?.name,$e=!He&&!!ut;return{displayName:He||ut||`User ${Ke.userId.slice(0,8).toUpperCase()}`,isPeerProvided:$e}};return v.jsxs("div",{className:"h-screen flex flex-col bg-[var(--color-bg-dark)] text-[var(--color-text-primary)] animate-fade-in",children:[v.jsx("div",{className:"bg-[var(--color-bg-card)]/80 backdrop-blur-md border-b border-slate-700/50 px-6 py-5 sticky top-0 z-10",children:v.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto w-full",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"Messages"}),v.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[v.jsxs("p",{className:"text-xs text-slate-400 font-mono opacity-70",children:["ID: ",o?.userId.slice(0,8).toUpperCase()]}),v.jsxs("div",{className:"flex items-center gap-1.5",title:`Signaling: ${L.join(", ")||"None"}`,children:[v.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${j==="connected"?"bg-emerald-500":j==="connecting"?"bg-yellow-500 animate-pulse":"bg-red-500"}`}),v.jsx("span",{className:`text-[10px] font-medium uppercase tracking-wider ${j==="connected"?"text-emerald-400":j==="connecting"?"text-yellow-400":"text-red-400"}`,children:j==="connected"?L.join(", ")||"Connected":j==="connecting"?"Connecting":"Offline"})]})]})]}),v.jsxs("div",{className:"flex space-x-3",children:[v.jsx("button",{onClick:()=>_(!0),className:"p-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full transition-all shadow-lg shadow-indigo-500/20 hover:shadow-indigo-500/40 active:scale-95",title:"Add contact",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})}),v.jsx("button",{onClick:()=>s("settings"),className:"p-2.5 bg-slate-700/50 hover:bg-slate-700 text-slate-200 rounded-full transition-all hover:text-white active:scale-95",title:"Settings",children:v.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]})}),v.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:v.jsx("div",{className:"max-w-3xl mx-auto w-full space-y-2",children:A.length===0?v.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center",children:[v.jsx("div",{className:"w-20 h-20 bg-slate-800/50 rounded-2xl flex items-center justify-center mb-6 border border-slate-700/50",children:v.jsx("svg",{className:"w-10 h-10 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),v.jsx("h3",{className:"text-xl font-semibold text-slate-200 mb-2",children:"No contacts yet"}),v.jsx("p",{className:"text-slate-400 mb-8 max-w-xs mx-auto leading-relaxed",children:"Connect with friends by scanning their QR code or sharing your link."}),v.jsx("button",{onClick:()=>_(!0),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-all font-medium shadow-lg shadow-indigo-500/25 hover:shadow-indigo-500/40 active:scale-95",children:"Add New Contact"})]}):v.jsx("div",{className:"grid gap-2",children:A.map(Ke=>{const He=de(Ke.userId),ut=Pe(Ke.userId),{displayName:$e,isPeerProvided:rt}=pt(Ke),it=Ke.localProfile?.group;return v.jsxs("div",{onClick:()=>X(Ke.userId),className:"w-full p-4 flex items-start space-x-4 bg-[var(--color-bg-card)] hover:bg-slate-700/50 rounded-2xl transition-all border border-transparent hover:border-slate-600/50 group cursor-pointer",children:[v.jsxs("div",{className:"relative flex-shrink-0",children:[v.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg shadow-indigo-500/10 group-hover:scale-105 transition-transform duration-300",children:v.jsx("span",{className:"text-white font-bold text-lg",children:$e?.[0]?.toUpperCase()||Ke.userId.slice(0,2).toUpperCase()})}),Mx(Ke)]}),v.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsx("h3",{className:`text-lg truncate pr-4 ${rt?"text-slate-300 italic":"text-white font-semibold"}`,children:$e}),ut>0]}),v.jsxs("div",{className:"flex items-start",children:[v.jsx("div",{className:"flex-shrink-0 w-[120px] mr-4 pt-0.5",children:it?v.jsx("p",{className:"text-sm text-indigo-400 font-medium truncate",children:it}):v.jsx(Tx,{status:Ke.status,onRetry:()=>ge(Ke.userId)})}),v.jsx("div",{className:`flex-1 min-w-0 space-y-1 p-2 bg-slate-800/40 rounded-lg border border-slate-700/30 ${g==="never"?"hidden":g==="always"?"md:hidden lg:block":i===Ke.userId&&r==="chat"?"hidden":"md:hidden lg:block"}`,children:He.length>0?He.map(Bt=>{const Pt=Bt.from===o?.userId;return v.jsxs("p",{className:"text-xs text-slate-400 truncate leading-tight flex items-center",children:[v.jsx("span",{className:`mr-1 font-bold flex-shrink-0 ${Pt?"text-indigo-300":"text-slate-500"}`,children:Pt?"You:":"Them:"}),v.jsx("span",{className:"truncate opacity-90",children:Bt.content})]},Bt.msg_uuid)}):v.jsx("p",{className:"text-xs text-slate-600 italic text-center py-1",children:"No messages yet"})})]})]})]},Ke.userId)})})})}),S&&v.jsx(Sx,{onClose:()=>_(!1)})]})}const kx=()=>gm(),Ic=o=>({id:o.msg_uuid,timestamp:o.timestamp,type:"text",content:o.content}),Bx=(o,r)=>({id:o,timestamp:r,type:"ack"}),Rx=(o,r,i)=>{if(o.type==="ack")throw new Error("Cannot convert ACK to Message - ACKs are not stored");return{msg_uuid:o.id,conversationId:i,from:r,content:o.content||"",timestamp:o.timestamp,delivered:!0,firstAttemptTimestamp:o.timestamp,showAsFailedInUI:!1,type:"text"}};class Dx{userId;queues=new Map;lastActivity=new Map;minNextTime=0;timerId=null;unsubscribe=null;config;onTimeout=null;constructor(r,i){this.userId=r,this.config=i,this.unsubscribe=br.onPeerOnline((s,u)=>{console.log("[RetryService] onPeerOnline callback:",s.substring(0,8),"online:",u),u?this.loadUndeliveredForPeer(s):(this.clearQueue(s),this.lastActivity.delete(s))}),this.startTimer(),console.log("[RetryService] Initialized for user:",r.substring(0,8))}startTimer(){this.timerId||(this.timerId=setInterval(()=>this.timerTick(),this.config.timerInterval),console.log("[RetryService] Timer started"))}stopTimer(){this.timerId&&(clearInterval(this.timerId),this.timerId=null,console.log("[RetryService] Timer stopped"))}async timerTick(){const r=Date.now();for(const[i,s]of this.queues){for(;s.length>0&&r-s[0].firstAttemptTimestamp>=this.config.timeoutMs;){const g=s.shift();console.log("[RetryService] Message timed out:",g.msg_uuid.substring(0,8)),g.msg_id!==void 0&&this.onTimeout?.(g.msg_id)}if(s.length===0){this.queues.delete(i);continue}if(r<this.minNextTime)continue;const u=this.lastActivity.get(i)||0;if(r-u>=this.config.minPeerInterval){this.lastActivity.set(i,r),this.minNextTime=r+this.config.minPeerInterval;const g=s[0];try{console.log("[RetryService] Timer sending:",g.msg_uuid.substring(0,8),"to:",i.substring(0,8)),await br.sendMessage(i,Ic(g)),console.log("[RetryService] Timer  sent:",g.msg_uuid.substring(0,8))}catch(A){console.error("[RetryService] Timer  failed:",g.msg_uuid.substring(0,8),A)}return}}}setOnTimeout(r){this.onTimeout=r}async loadUndeliveredForPeer(r){console.log("[RetryService] loadUndeliveredForPeer called for:",r.substring(0,8)),console.log("[RetryService] My userId:",this.userId.substring(0,8));const i=[this.userId,r].sort().join("-");console.log("[RetryService] Looking up conversationId:",i.substring(0,24));const s=await Pn.getMessages(i);console.log("[RetryService] Found",s.length,"total messages in conversation");const u=s.filter(M=>!M.delivered&&M.from===this.userId);if(console.log("[RetryService] Loading",u.length,"undelivered messages for:",r.substring(0,8)),u.length===0)return;const g=Date.now(),A=u.map(M=>({...M,firstAttemptTimestamp:g}));this.queues.set(r,A),this.lastActivity.set(r,0)}addToQueue(r,i){const s=this.queues.get(r)||[];if(s.some(u=>u.msg_uuid===i.msg_uuid)){console.log(`[RetryService] Message ${i.msg_uuid.substring(0,8)} already in queue, skipping`);return}s.push(i),this.queues.set(r,s),console.log(`[RetryService] Added ${i.msg_uuid.substring(0,8)} to queue (size: ${s.length})`)}removeFromQueue(r,i){const s=this.queues.get(r);if(!s)return;const u=s.findIndex(g=>g.msg_uuid===i);u>-1&&(s.splice(u,1),console.log(`[RetryService] Removed ${i.substring(0,8)} from queue (size: ${s.length})`)),s.length===0&&this.queues.delete(r)}async sendNextForPeer(r){const i=this.queues.get(r);if(!i||i.length===0)return;const s=Date.now();this.lastActivity.set(r,s),this.minNextTime=s+this.config.minPeerInterval;const u=i[0];try{console.log("[RetryService] Sending next:",u.msg_uuid.substring(0,8)),await br.sendMessage(r,Ic(u)),console.log("[RetryService]  Sent:",u.msg_uuid.substring(0,8))}catch(g){console.error("[RetryService]  Failed to send next:",u.msg_uuid.substring(0,8),g)}}getQueue(r){return this.queues.get(r)||[]}clearQueue(r){this.queues.has(r)&&(this.queues.delete(r),console.log(`[RetryService] Cleared queue for ${r.substring(0,8)}`))}destroy(){this.stopTimer(),this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),this.queues.clear(),this.lastActivity.clear(),console.log("[RetryService] Destroyed")}}let qa=null;const Nx=(o,r)=>(qa&&qa.destroy(),qa=new Dx(o,r),qa),jx=o=>{qa?.setOnTimeout(o)},mm=()=>{qa&&(qa.destroy(),qa=null)},nd=(o,r)=>{qa?.addToQueue(o,r)},ym=(o,r)=>{qa?.removeFromQueue(o,r)},vm=o=>{qa?.sendNextForPeer(o)},Ox=Object.freeze(Object.defineProperty({__proto__:null,addToRetryQueue:nd,destroyRetryService:mm,initRetryService:Nx,removeFromRetryQueue:ym,sendNextMessage:vm,setRetryTimeoutCallback:jx},Symbol.toStringTag,{value:"Module"}));function Ix(){const{identity:o,setActiveView:r,clearIdentity:i,updateProfile:s,miniChatVisibility:u,setMiniChatVisibility:g}=os(),{contacts:A}=Hr(),[M,b]=Ye.useState(!1),[S,_]=Ye.useState(!1),[j,L]=Ye.useState(!1),[X,ge]=Ye.useState(!1),[de,Pe]=Ye.useState(""),[pt,Ke]=Ye.useState(null),[He,ut]=Ye.useState(!1),$e=Ye.useRef(null),[rt,it]=Ye.useState(o?.profile?.name||""),[Bt,Pt]=Ye.useState(o?.profile?.description||""),[ke,Le]=Ye.useState(!1),[Se,xe]=Ye.useState(!1),[At,Ze]=Ye.useState([]),[se,Ue]=Ye.useState(!1);Ye.useEffect(()=>{Ie()},[]);const Ie=async()=>{Ue(!0);try{const Fe=await ml.getInvites();Ze(Fe.sort((Rt,mt)=>mt.createdAt-Rt.createdAt))}catch(Fe){console.error("Failed to load invites",Fe)}finally{Ue(!1)}},Re=async Fe=>{try{await ml.revokeInvite(Fe),await Ie()}catch(Rt){console.error("Failed to revoke invite",Rt)}},Qe=async Fe=>{try{await ml.deleteInvite(Fe),await Ie()}catch(Rt){console.error("Failed to delete invite",Rt)}},K=async()=>{if(o){Le(!0);try{const Fe={...o.profile,name:rt,description:Bt};s(Fe);const Rt={...o,profile:Fe};js.save(Rt),xe(!0),setTimeout(()=>xe(!1),2e3)}catch(Fe){console.error("Failed to save profile",Fe)}finally{Le(!1)}}},me=async()=>{if(o){if(!de){Ke("Password is required to encrypt your identity");return}try{const Fe={version:1,encrypted:!0,data:js.exportToJSON(o),passwordHint:"Password protected"},Rt=JSON.stringify(Fe,null,2),mt=new Blob([Rt],{type:"application/json"}),gn=URL.createObjectURL(mt),rn=document.createElement("a");rn.href=gn,rn.download=`chat-identity-${o.userId.slice(0,8)}.json`,document.body.appendChild(rn),rn.click(),document.body.removeChild(rn),URL.revokeObjectURL(gn),b(!1),Pe(""),Ke(null)}catch(Fe){Ke("Failed to export identity"),console.error(Fe)}}},De=()=>{const Fe={version:1,type:"contacts",timestamp:Date.now(),contacts:A.map(kt=>({userId:kt.userId,publicKey:kt.publicKey,displayName:kt.displayName,addedAt:kt.addedAt}))},Rt=JSON.stringify(Fe,null,2),mt=new Blob([Rt],{type:"application/json"}),gn=URL.createObjectURL(mt),rn=document.createElement("a");rn.href=gn,rn.download=`chat-contacts-${Date.now()}.json`,document.body.appendChild(rn),rn.click(),document.body.removeChild(rn),URL.revokeObjectURL(gn)},Ge=()=>{o&&(navigator.clipboard.writeText(o.userId),L(!0),setTimeout(()=>L(!1),2e3))},Ve=()=>{mm(),br.destroyAll(),js.delete(),i(),r("setup")},Me=Fe=>{const Rt=document.getElementById(Fe);Rt&&Rt.scrollIntoView({behavior:"smooth"})},gt=()=>{if($e.current){const{scrollTop:Fe}=$e.current;ut(Fe>200)}},Ct=()=>{$e.current&&$e.current.scrollTo({top:0,behavior:"smooth"})};if(!o)return null;const ze=()=>v.jsxs("nav",{className:"space-y-1",children:[v.jsxs("button",{onClick:()=>Me("public-profile"),className:"w-full flex items-center px-3 py-2 text-sm font-medium text-slate-300 rounded-lg hover:bg-slate-800 hover:text-white transition-colors group",children:[v.jsx("svg",{className:"w-5 h-5 mr-3 text-indigo-400 group-hover:text-indigo-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Public Profile"]}),v.jsxs("button",{onClick:()=>Me("identity"),className:"w-full flex items-center px-3 py-2 text-sm font-medium text-slate-300 rounded-lg hover:bg-slate-800 hover:text-white transition-colors group",children:[v.jsx("svg",{className:"w-5 h-5 mr-3 text-indigo-400 group-hover:text-indigo-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0c0 .884-.956 1.676-2 2.5-1.044-.824-2-1.616-2-2.5s.956-1.676 2-2.5c1.044.824 2 1.616 2 2.5z"})}),"Identity"]}),v.jsxs("button",{onClick:()=>Me("invites"),className:"w-full flex items-center px-3 py-2 text-sm font-medium text-slate-300 rounded-lg hover:bg-slate-800 hover:text-white transition-colors group",children:[v.jsx("svg",{className:"w-5 h-5 mr-3 text-indigo-400 group-hover:text-indigo-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})}),"Invites"]}),v.jsxs("button",{onClick:()=>Me("features"),className:"w-full flex items-center px-3 py-2 text-sm font-medium text-slate-300 rounded-lg hover:bg-slate-800 hover:text-white transition-colors group",children:[v.jsx("svg",{className:"w-5 h-5 mr-3 text-indigo-400 group-hover:text-indigo-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Features"]}),v.jsxs("button",{onClick:()=>Me("danger-zone"),className:"w-full flex items-center px-3 py-2 text-sm font-medium text-red-400 rounded-lg hover:bg-red-500/10 transition-colors group",children:[v.jsx("svg",{className:"w-5 h-5 mr-3 text-red-500 group-hover:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Danger Zone"]})]});return v.jsxs("div",{className:"h-screen flex flex-col bg-[var(--color-bg-dark)] text-slate-200",children:[v.jsx("div",{className:"bg-[var(--color-bg-card)] border-b border-slate-700/50 px-4 py-4 shadow-sm z-10 flex-shrink-0",children:v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsxs("button",{onClick:()=>r("contacts"),"aria-label":"Back to contacts",className:"flex items-center px-3 py-2 -ml-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:[v.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),v.jsx("span",{className:"font-medium",children:"Back"})]}),v.jsx("h1",{className:"text-xl font-bold text-white",children:"Settings"})]})}),v.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[v.jsx("div",{className:"hidden md:block w-64 bg-[var(--color-bg-card)] border-r border-slate-700/50 p-4 overflow-y-auto flex-shrink-0",children:v.jsx(ze,{})}),v.jsxs("div",{ref:$e,onScroll:gt,className:"flex-1 overflow-y-auto p-4 md:p-8 scroll-smooth relative",children:[v.jsxs("div",{className:"md:hidden mb-8 bg-[var(--color-bg-card)]/50 rounded-2xl border border-slate-700/50 p-4",children:[v.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:"Table of Contents"}),v.jsx(ze,{})]}),v.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 pb-20",children:[v.jsxs("section",{id:"public-profile",className:"bg-[var(--color-bg-card)] rounded-2xl border border-slate-700/50 p-6 shadow-xl scroll-mt-6",children:[v.jsxs("h2",{className:"text-lg font-bold text-white mb-6 flex items-center",children:[v.jsx("svg",{className:"w-5 h-5 mr-2 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Public Profile"]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Display Name"}),v.jsx("input",{type:"text",value:rt,onChange:Fe=>it(Fe.target.value),placeholder:"Your Name",className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Description"}),v.jsx("textarea",{value:Bt,onChange:Fe=>Pt(Fe.target.value),placeholder:"Tell others about yourself...",rows:3,className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all resize-none"})]}),v.jsx("div",{className:"pt-2 flex justify-end",children:v.jsx("button",{onClick:K,disabled:ke,className:`px-6 py-2.5 rounded-xl font-medium transition-all flex items-center ${Se?"bg-green-500/20 text-green-400 border border-green-500/50":"bg-indigo-600 text-white hover:bg-indigo-500 shadow-lg shadow-indigo-500/20"}`,children:ke?v.jsxs(v.Fragment,{children:[v.jsx("svg",{className:"w-4 h-4 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Saving..."]}):Se?v.jsxs(v.Fragment,{children:[v.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Saved!"]}):"Save Profile"})})]})]}),v.jsxs("section",{id:"identity",className:"bg-[var(--color-bg-card)] rounded-2xl border border-slate-700/50 p-6 shadow-xl scroll-mt-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsxs("h2",{className:"text-lg font-bold text-white flex items-center",children:[v.jsx("svg",{className:"w-5 h-5 mr-2 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0c0 .884-.956 1.676-2 2.5-1.044-.824-2-1.616-2-2.5s.956-1.676 2-2.5c1.044.824 2 1.616 2 2.5z"})}),"Identity"]}),v.jsx("button",{onClick:()=>ge(!X),className:"text-xs font-medium text-indigo-400 hover:text-indigo-300 transition-colors",children:X?"Hide Keys":"Show Keys"})]}),v.jsxs("div",{className:"space-y-5",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"User ID"}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("input",{type:"text",value:o.userId,readOnly:!0,className:"flex-1 px-3 py-2.5 bg-slate-900/50 border border-slate-700 rounded-xl font-mono text-sm text-slate-300 focus:outline-none"}),v.jsx("button",{onClick:Ge,className:"px-4 py-2.5 bg-slate-700 hover:bg-slate-600 text-white rounded-xl transition-colors font-medium",children:j?"Copied!":"Copy"})]})]}),X&&v.jsx("div",{className:"space-y-4 pt-4 border-t border-slate-700/50 animate-fade-in",children:v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Public Key (Signing)"}),v.jsx("input",{type:"text",value:o.publicKey,readOnly:!0,className:"w-full px-3 py-2 bg-slate-900/50 border border-slate-700 rounded-xl font-mono text-xs text-slate-400"})]})})]}),v.jsx("div",{className:"mt-6 pt-6 border-t border-slate-700/50",children:v.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[v.jsxs("button",{onClick:()=>b(!0),className:"px-2 py-3 bg-slate-800 text-slate-200 rounded-xl hover:bg-slate-700 transition-colors font-medium flex flex-col items-center justify-center text-center text-xs sm:text-sm",children:[v.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Identity"]}),v.jsxs("button",{onClick:De,className:"px-2 py-3 bg-slate-800 text-slate-200 rounded-xl hover:bg-slate-700 transition-colors font-medium flex flex-col items-center justify-center text-center text-xs sm:text-sm",children:[v.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Export Contacts"]}),v.jsxs("button",{disabled:!0,className:"px-2 py-3 bg-slate-800/50 text-slate-500 rounded-xl cursor-not-allowed font-medium flex flex-col items-center justify-center border border-slate-700/30 text-center text-xs sm:text-sm",children:[v.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),"Export Messages"]})]})})]}),v.jsxs("section",{id:"invites",className:"bg-[var(--color-bg-card)] rounded-2xl border border-slate-700/50 p-6 shadow-xl scroll-mt-6",children:[v.jsxs("h2",{className:"text-lg font-bold text-white mb-6 flex items-center",children:[v.jsx("svg",{className:"w-5 h-5 mr-2 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})}),"Active Invites"]}),se?v.jsx("div",{className:"text-center py-4 text-slate-400",children:"Loading invites..."}):At.length===0?v.jsxs("div",{className:"text-center py-8 bg-slate-800/30 rounded-xl border border-slate-700/30",children:[v.jsx("p",{className:"text-slate-400 text-sm",children:"No active invites found."}),v.jsx("p",{className:"text-slate-500 text-xs mt-1",children:'Create invites from the "Add Contact" screen.'})]}):v.jsx("div",{className:"space-y-3",children:At.map(Fe=>v.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl p-4 flex items-center justify-between group hover:border-indigo-500/30 transition-colors",children:[v.jsxs("div",{className:"min-w-0 flex-1 mr-4",children:[v.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[v.jsx("h3",{className:"text-white font-medium truncate",children:Fe.name||"Unnamed Invite"}),v.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${Fe.valid?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"}`,children:Fe.valid?"Active":"Revoked"})]}),v.jsxs("div",{className:"text-xs text-slate-400 flex items-center space-x-3",children:[v.jsxs("span",{children:["Uses: ",Fe.useCount," / ",Fe.useLimit===void 0?"":Fe.useLimit]}),v.jsxs("span",{children:["Created: ",new Date(Fe.createdAt).toLocaleDateString()]}),Fe.expiry&&v.jsxs("span",{className:Date.now()>Fe.expiry?"text-red-400":"",children:["Expires: ",new Date(Fe.expiry).toLocaleDateString()]})]})]}),v.jsx("div",{className:"flex items-center space-x-2",children:Fe.valid?v.jsx("button",{onClick:()=>Re(Fe.inviteId),className:"p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Revoke Invite",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}):v.jsx("button",{onClick:()=>Qe(Fe.inviteId),className:"p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete Invite",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},Fe.inviteId))})]}),v.jsxs("section",{id:"features",className:"bg-[var(--color-bg-card)] rounded-2xl border border-slate-700/50 p-6 shadow-xl scroll-mt-6",children:[v.jsxs("h2",{className:"text-lg font-bold text-white mb-6 flex items-center",children:[v.jsx("svg",{className:"w-5 h-5 mr-2 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Features"]}),v.jsx("div",{className:"space-y-6",children:v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-white mb-3",children:"Mini-chats visible"}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[v.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center transition-colors ${u==="never"?"border-indigo-500 bg-indigo-500":"border-slate-600 bg-slate-800 group-hover:border-slate-500"}`,children:u==="never"&&v.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})}),v.jsx("input",{type:"radio",name:"miniChatVisibility",value:"never",checked:u==="never",onChange:Fe=>g(Fe.target.value),className:"hidden"}),v.jsxs("span",{className:"text-slate-300 group-hover:text-white transition-colors",children:["Never ",v.jsx("span",{className:"text-slate-500 text-sm ml-1",children:"(minichats are never shown)"})]})]}),v.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[v.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center transition-colors ${u==="contacts"?"border-indigo-500 bg-indigo-500":"border-slate-600 bg-slate-800 group-hover:border-slate-500"}`,children:u==="contacts"&&v.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})}),v.jsx("input",{type:"radio",name:"miniChatVisibility",value:"contacts",checked:u==="contacts",onChange:Fe=>g(Fe.target.value),className:"hidden"}),v.jsxs("span",{className:"text-slate-300 group-hover:text-white transition-colors",children:["Contacts ",v.jsx("span",{className:"text-slate-500 text-sm ml-1",children:"(shown when space available and chat closed)"})]})]}),v.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[v.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center transition-colors ${u==="always"?"border-indigo-500 bg-indigo-500":"border-slate-600 bg-slate-800 group-hover:border-slate-500"}`,children:u==="always"&&v.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})}),v.jsx("input",{type:"radio",name:"miniChatVisibility",value:"always",checked:u==="always",onChange:Fe=>g(Fe.target.value),className:"hidden"}),v.jsxs("span",{className:"text-slate-300 group-hover:text-white transition-colors",children:["Always ",v.jsx("span",{className:"text-slate-500 text-sm ml-1",children:"(shown when space available)"})]})]})]})]})})]}),v.jsxs("section",{id:"danger-zone",className:"bg-[var(--color-bg-card)] rounded-2xl border border-red-500/30 p-6 shadow-xl scroll-mt-6",children:[v.jsxs("h2",{className:"text-lg font-bold text-red-400 mb-6 flex items-center",children:[v.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Danger Zone"]}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("button",{onClick:()=>_(!0),className:"w-full px-4 py-3 bg-red-500/10 text-red-400 border border-red-500/50 rounded-xl hover:bg-red-500 hover:text-white transition-all font-medium",children:"Delete Identity"}),v.jsx("p",{className:"text-xs text-slate-500 text-center",children:"This will permanently delete your identity and all local data"})]})]})]}),v.jsx("button",{onClick:Ct,className:`fixed bottom-6 right-6 p-3 bg-indigo-600 text-white rounded-full shadow-lg shadow-indigo-500/30 hover:bg-indigo-500 transition-all duration-300 z-20 ${He?"opacity-100 translate-y-0":"opacity-0 translate-y-10 pointer-events-none"}`,"aria-label":"Back to top",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]})]}),M&&v.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in",children:v.jsxs("div",{className:"bg-[var(--color-bg-card)] border border-slate-700 rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[v.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Export Identity"}),v.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4 mb-6",children:v.jsxs("div",{className:"flex items-start",children:[v.jsx("svg",{className:"w-5 h-5 text-yellow-500 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),v.jsx("p",{className:"text-sm text-yellow-200",children:"Your identity file contains your private key. Anyone with this file and password can impersonate you."})]})}),v.jsxs("div",{className:"mb-6",children:[v.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Encryption Password"}),v.jsx("input",{type:"password",value:de,onChange:Fe=>Pe(Fe.target.value),placeholder:"Enter a strong password",className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50"}),pt&&v.jsx("p",{className:"mt-2 text-sm text-red-400",children:pt})]}),v.jsxs("div",{className:"flex space-x-3",children:[v.jsx("button",{onClick:()=>{b(!1),Pe(""),Ke(null)},className:"flex-1 px-4 py-3 bg-slate-800 text-slate-300 rounded-xl hover:bg-slate-700 transition-colors font-medium",children:"Cancel"}),v.jsx("button",{onClick:me,className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-colors font-medium",children:"Export"})]})]})}),S&&v.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in",children:v.jsxs("div",{className:"bg-[var(--color-bg-card)] border border-red-500/30 rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[v.jsx("h2",{className:"text-xl font-bold text-red-500 mb-4",children:"Delete Identity?"}),v.jsx("p",{className:"text-slate-400 mb-6",children:"This action cannot be undone. Your identity and all local messages will be permanently deleted."}),v.jsxs("div",{className:"flex space-x-3",children:[v.jsx("button",{onClick:()=>_(!1),className:"flex-1 px-4 py-3 bg-slate-800 text-slate-300 rounded-xl hover:bg-slate-700 transition-colors font-medium",children:"Cancel"}),v.jsx("button",{onClick:Ve,className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-xl hover:bg-red-500 transition-colors font-medium",children:"Delete"})]})]})})]})}function qx({contactId:o,onClose:r}){const{getContact:i,updateLocalProfile:s}=Hr(),u=i(o),[g,A]=Ye.useState(""),[M,b]=Ye.useState(""),[S,_]=Ye.useState(""),[j,L]=Ye.useState(!1);if(Ye.useEffect(()=>{u&&(A(u.localProfile?.name||u.displayName||""),b(u.localProfile?.description||""),_(u.localProfile?.group||""))},[u]),!u)return null;const X=async()=>{L(!0);try{await s(o,{name:g,description:M,group:S}),r()}catch(de){console.error("Failed to update profile:",de)}finally{L(!1)}},ge=()=>{u.peerProfile&&(A(u.peerProfile.name||""),b(u.peerProfile.description||""),_(u.peerProfile.group||""))};return v.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in",children:v.jsxs("div",{className:"bg-[var(--color-bg-card)] border border-slate-700 rounded-2xl max-w-4xl w-full shadow-2xl flex flex-col max-h-[90vh] overflow-hidden",children:[v.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700/50",children:[v.jsx("h2",{className:"text-xl font-bold text-white",children:"Edit Contact Profile"}),v.jsx("button",{onClick:r,className:"text-slate-400 hover:text-white transition-colors",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 p-6",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[v.jsxs("div",{className:"space-y-6",children:[v.jsxs("h3",{className:"text-lg font-semibold text-indigo-400 flex items-center",children:[v.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Local Profile"]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Display Name"}),v.jsx("input",{type:"text",value:g,onChange:de=>A(de.target.value),className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all",placeholder:"Name for this contact"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Description"}),v.jsx("textarea",{value:M,onChange:de=>b(de.target.value),rows:4,className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all resize-none",placeholder:"Add notes or description..."})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Group"}),v.jsx("input",{type:"text",value:S,onChange:de=>_(de.target.value),className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all",placeholder:"e.g. Friends, Work"})]})]})]}),v.jsxs("div",{className:"space-y-6 md:border-l md:border-slate-700/50 md:pl-8",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("h3",{className:"text-lg font-semibold text-emerald-400 flex items-center",children:[v.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Peer's Public Profile"]}),v.jsxs("button",{onClick:ge,disabled:!u.peerProfile,className:"text-xs px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-indigo-400 rounded-lg transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",title:"Copy details from peer's public profile",children:[v.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Pull from Peer"]})]}),u.peerProfile?v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wider mb-2",children:"Public Name"}),v.jsx("div",{className:"px-4 py-3 bg-slate-800/30 border border-slate-700/30 rounded-xl text-slate-300",children:u.peerProfile.name||v.jsx("span",{className:"text-slate-600 italic",children:"Not set"})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wider mb-2",children:"Public Description"}),v.jsx("div",{className:"px-4 py-3 bg-slate-800/30 border border-slate-700/30 rounded-xl text-slate-300 min-h-[100px] whitespace-pre-wrap",children:u.peerProfile.description||v.jsx("span",{className:"text-slate-600 italic",children:"Not set"})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wider mb-2",children:"Public Group"}),v.jsx("div",{className:"px-4 py-3 bg-slate-800/30 border border-slate-700/30 rounded-xl text-slate-300",children:u.peerProfile.group||v.jsx("span",{className:"text-slate-600 italic",children:"Not set"})})]})]}):v.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center p-6 bg-slate-800/20 rounded-2xl border border-slate-700/30 border-dashed",children:[v.jsx("svg",{className:"w-12 h-12 text-slate-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),v.jsx("p",{className:"text-slate-400 font-medium",children:"No public profile available"}),v.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"The peer hasn't shared their profile yet."})]})]})]})}),v.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-slate-700/50 bg-slate-800/20",children:[v.jsx("button",{onClick:r,className:"px-6 py-2.5 bg-slate-800 text-slate-300 rounded-xl hover:bg-slate-700 transition-colors font-medium",children:"Cancel"}),v.jsx("button",{onClick:X,disabled:j,className:"px-6 py-2.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-colors font-medium shadow-lg shadow-indigo-500/20 flex items-center",children:j?v.jsxs(v.Fragment,{children:[v.jsx("svg",{className:"w-4 h-4 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Saving..."]}):"Save Changes"})]})]})})}const vc=100;function Ux(){const{identity:o,activeContactId:r,setActiveView:i}=os(),{getContact:s}=Hr(),{messages:u,addMessage:g,setMessages:A,prependMessages:M,updateMessageDelivery:b}=Eo(),[S,_]=Ye.useState(""),[j,L]=Ye.useState(!1),[X,ge]=Ye.useState(!0),[de,Pe]=Ye.useState(!1),[pt,Ke]=Ye.useState(!1),He=Ye.useRef(null),ut=Ye.useRef(null),$e=r?s(r):null,rt=o&&$e?[o.userId,$e.userId].sort().join("-"):"";Ye.useEffect(()=>{if(!rt)return;(async()=>{const Qe=await Pn.getRecentMessages(rt,vc);A(rt,Qe),ge(Qe.length===vc)})()},[rt,A]);const it=Ye.useCallback(async()=>{if(!rt||de||!X)return;const Re=u[rt]||[];if(Re.length===0)return;const Qe=Re[0].msg_id;if(Qe!==void 0){Pe(!0);try{const K=await Pn.getMessagesBefore(rt,Qe,vc);if(K.length>0){const me=ut.current,De=me?.scrollHeight||0;M(rt,K),requestAnimationFrame(()=>{if(me){const Ge=me.scrollHeight;me.scrollTop=Ge-De}})}ge(K.length===vc)}finally{Pe(!1)}}},[rt,u,de,X,M]),Bt=Ye.useCallback(Re=>{const{scrollTop:Qe}=Re.currentTarget;Qe<100&&X&&!de&&it()},[X,de,it]);Ye.useEffect(()=>{He.current?.scrollIntoView({behavior:"smooth"})},[u[rt]]);const Pt=async()=>{if(!S.trim()||!o||!$e||j)return;L(!0);const Re=kx();try{const Qe={msg_uuid:Re,conversationId:rt,from:o.userId,content:S.trim(),timestamp:Date.now(),delivered:!1,firstAttemptTimestamp:Date.now(),showAsFailedInUI:!1,type:"text"};console.log("[ChatView] Saving message to db, conversationId:",rt,"msgUuid:",Re);const K=await Pn.addMessage(Qe);Qe.msg_id=K,g(rt,Qe),_(""),nd($e.userId,Qe),console.log("[ChatView] Sending message to",$e.userId,"status:",$e.status);try{await br.sendMessage($e.userId,Ic(Qe)),console.log("[ChatView]  Message sent (waiting for ACK)")}catch(me){const De=me instanceof Error?me.message:"Unknown error";console.log("[ChatView] Send pending:",De)}}catch(Qe){console.error("Failed to create/send message:",Qe)}finally{L(!1)}},ke=async Re=>{if(!(!o||!$e)){if(Re.msg_id===void 0){console.error("Cannot retry message without msg_id");return}console.log("[ChatView] Manual retry for message:",Re.msg_uuid);try{const Qe=Date.now();await Pn.updateMessageDelivery(Re.msg_id,!1,!1,Qe),b(Re.msg_id,!1,!1);const K={...Re,firstAttemptTimestamp:Qe,showAsFailedInUI:!1};nd($e.userId,K),await br.sendMessage($e.userId,Ic(K)),console.log("[ChatView]  Retry sent (waiting for ACK)")}catch(Qe){console.error("[ChatView]  Manual retry failed:",Qe)}}},Le=async Re=>{if(confirm("Are you sure you want to delete this message?")){await Pn.deleteMessage(Re);const{deleteMessage:Qe}=Eo.getState();Qe(Re)}},Se=Re=>{Re.key==="Enter"&&!Re.shiftKey&&(Re.preventDefault(),Pt())},xe=Re=>{const Qe=Re.localProfile?.name,K=Re.peerProfile?.name,me=!Qe&&!!K;return{displayName:Qe||K||`User ${Re.userId.slice(0,8).toUpperCase()}`,isPeerProvided:me}},At=Re=>Re.status==="online"?v.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-emerald-500 border-2 border-[var(--color-bg-card)] rounded-full"}):Re.status==="handshake"?v.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-yellow-500 border-2 border-[var(--color-bg-card)] rounded-full animate-pulse"}):Re.status==="failed"?v.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 border-2 border-[var(--color-bg-card)] rounded-full bg-red-500 flex items-center justify-center",children:v.jsx("svg",{className:"w-1.5 h-1.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})}):null;if(!o||!$e)return v.jsx("div",{className:"h-screen flex items-center justify-center bg-[var(--color-bg-dark)]",children:v.jsxs("div",{className:"text-center",children:[v.jsx("p",{className:"text-slate-400",children:"No contact selected"}),v.jsx("button",{onClick:()=>i("contacts"),className:"mt-4 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-500 transition-colors",children:"Back to Contacts"})]})});const Ze=u[rt]||[],{displayName:se,isPeerProvided:Ue}=xe($e),Ie=$e.localProfile?.group;return v.jsxs("div",{className:"h-screen flex flex-col bg-[var(--color-bg-dark)] animate-fade-in",children:[v.jsxs("div",{className:"bg-[var(--color-bg-card)]/80 backdrop-blur-md border-b border-slate-700/50 px-4 py-3 flex items-center space-x-4 sticky top-0 z-10",children:[v.jsx("button",{onClick:()=>i("contacts"),"aria-label":"Back to Contacts",className:"p-2 hover:bg-slate-700/50 rounded-full transition-colors text-slate-300 hover:text-white",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-500/20",children:v.jsx("span",{className:"text-white font-bold",children:se?.[0]?.toUpperCase()||$e.userId.slice(0,2).toUpperCase()})}),At($e)]}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("h2",{className:`font-semibold truncate ${Ue?"text-slate-300 italic":"text-slate-100"}`,children:se}),v.jsx("div",{className:"flex items-center space-x-2",children:Ie?v.jsx("span",{className:"text-xs text-indigo-400 font-medium",children:Ie}):v.jsx(v.Fragment,{children:$e.status==="online"?v.jsxs("div",{className:"flex items-center space-x-1.5",children:[v.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),v.jsx("span",{className:"text-xs text-emerald-400 font-medium",children:"Online"})]}):$e.status==="handshake"?v.jsxs("div",{className:"flex items-center space-x-1.5",children:[v.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),v.jsx("span",{className:"text-xs text-yellow-400 font-medium",children:"Connecting"})]}):$e.status==="failed"?v.jsxs("div",{className:"flex items-center space-x-1.5",children:[v.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),v.jsx("span",{className:"text-xs text-red-400 font-medium",children:"Failed"})]}):v.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Offline"})})})]}),v.jsxs("div",{className:"flex space-x-1",children:[v.jsx("button",{onClick:()=>Ke(!0),className:"p-2 hover:bg-slate-700/50 rounded-full transition-colors text-slate-400 hover:text-white",title:"Edit Profile",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),v.jsx("button",{className:"p-2 hover:bg-slate-700/50 rounded-full transition-colors text-slate-400 hover:text-white",title:"Voice call",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),v.jsx("button",{className:"p-2 hover:bg-slate-700/50 rounded-full transition-colors text-slate-400 hover:text-white",title:"Video call",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),v.jsxs("div",{ref:ut,onScroll:Bt,className:"flex-1 overflow-y-auto p-4 space-y-6",children:[de&&v.jsx("div",{className:"flex justify-center py-2",children:v.jsxs("svg",{className:"w-5 h-5 animate-spin text-slate-400",fill:"none",viewBox:"0 0 24 24",children:[v.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),v.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})}),Ze.length===0?v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center opacity-50",children:[v.jsx("div",{className:"w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mb-4 border border-slate-700",children:v.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),v.jsx("h3",{className:"text-lg font-semibold text-slate-300 mb-2",children:"No messages yet"}),v.jsx("p",{className:"text-slate-500 text-sm",children:"Send a message to start the conversation"})]}):v.jsxs(v.Fragment,{children:[Ze.map(Re=>{const Qe=Re.from===o.userId;return v.jsx("div",{className:`flex ${Qe?"justify-end":"justify-start"} animate-fade-in group`,children:v.jsxs("div",{className:`max-w-xs lg:max-w-md xl:max-w-lg ${Qe?"order-2":"order-1"}`,children:[v.jsx("div",{className:`rounded-2xl px-5 py-3 shadow-sm ${Qe?"bg-indigo-600 text-white rounded-br-sm shadow-indigo-500/10":"bg-[var(--color-bg-card)] text-slate-200 rounded-bl-sm border border-slate-700/50"}`,children:v.jsx("p",{className:"text-sm whitespace-pre-wrap break-words leading-relaxed",children:Re.content})}),v.jsxs("div",{className:`flex items-center space-x-2 mt-1.5 px-1 ${Qe?"justify-end":"justify-start"}`,children:[v.jsx("span",{className:"text-[11px] text-slate-500 font-medium",children:Lx(Re.timestamp)}),Qe&&Re.msg_id!==void 0&&v.jsx("button",{onClick:()=>Le(Re.msg_id),className:"opacity-0 group-hover:opacity-100 p-1 text-slate-500 hover:text-red-400 transition-all",title:"Delete message",children:v.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),Qe&&v.jsxs(v.Fragment,{children:[Re.delivered&&v.jsx("span",{className:"text-[11px] text-indigo-400",children:"Received"}),!Re.delivered&&!Re.showAsFailedInUI&&v.jsxs("span",{className:"text-[11px] text-slate-500 flex items-center",children:[v.jsx("svg",{className:"w-3 h-3 animate-spin mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Pending"]}),!Re.delivered&&Re.showAsFailedInUI&&v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsxs("span",{className:"text-[11px] text-red-400 flex items-center",title:Re.error,children:[v.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"Failed"]}),v.jsx("button",{onClick:()=>ke(Re),className:"text-[11px] text-indigo-400 hover:text-indigo-300 underline",children:"Retry"})]})]})]})]})},Re.msg_uuid)}),v.jsx("div",{ref:He})]})]}),v.jsxs("div",{className:"bg-[var(--color-bg-card)] border-t border-slate-700/50 p-4",children:[$e.status!=="online"&&v.jsxs("div",{className:"flex items-center justify-center py-2 px-4 bg-yellow-900/20 border border-yellow-700/50 rounded-lg mb-3 max-w-4xl mx-auto",children:[v.jsx("svg",{className:"w-5 h-5 text-yellow-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),v.jsx("span",{className:"text-sm text-yellow-400",children:$e.status==="handshake"?"Establishing secure connection...":$e.status==="failed"?"Connection failed. Messages will be queued.":"Contact is disconnected. Messages might be delayed."})]}),v.jsxs("div",{className:"flex items-end space-x-3 max-w-4xl mx-auto",children:[v.jsx("div",{className:"flex-1 relative",children:v.jsx("textarea",{value:S,onChange:Re=>_(Re.target.value),onKeyPress:Se,placeholder:"Type a message...",rows:1,className:"w-full px-5 py-3.5 bg-slate-900/50 border border-slate-700 rounded-2xl focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 text-slate-200 placeholder-slate-500 resize-none transition-all",style:{minHeight:"50px",maxHeight:"120px"}})}),v.jsx("button",{onClick:Pt,disabled:!S.trim()||j,className:`p-3.5 rounded-xl transition-all shadow-lg ${S.trim()&&!j?"bg-indigo-600 hover:bg-indigo-500 text-white shadow-indigo-500/20 hover:shadow-indigo-500/40 active:scale-95":"bg-slate-800 text-slate-600 cursor-not-allowed"}`,children:j?v.jsx("svg",{className:"w-6 h-6 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}):v.jsx("svg",{className:"w-6 h-6 transform rotate-90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),v.jsxs("p",{className:"text-[10px] text-slate-500 mt-3 text-center flex items-center justify-center gap-1.5 uppercase tracking-widest font-medium opacity-60",children:[v.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"End-to-End Encrypted"]})]}),pt&&v.jsx(qx,{contactId:$e.userId,onClose:()=>Ke(!1)})]})}function Lx(o){const r=new Date(o),i=new Date,s=i.getTime()-r.getTime();return r.toDateString()===i.toDateString()?r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):s<10080*60*1e3?r.toLocaleDateString("en-US",{weekday:"short"})+" "+r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):r.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" "+r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}const zx=()=>typeof window<"u"&&window.__TEST_MODE__===!0;function Yx(){const{identity:o,activeView:r,setIdentity:i,setActiveView:s,setInitialized:u}=os(),[,g]=Ye.useState(null),A=Ye.useRef(null);return Ye.useEffect(()=>{const M=js.load();M?(i(M),window.history.replaceState({view:"contacts"},""),s("contacts")):u(!0)},[i,s,u]),Ye.useEffect(()=>{const M=b=>{b.state?.view?s(b.state.view):o&&s("contacts")};return window.addEventListener("popstate",M),()=>window.removeEventListener("popstate",M)},[s,o]),Ye.useEffect(()=>{if(!o)return;window.history.state?.view!==r&&window.history.pushState({view:r},"",`#${r}`)},[r,o]),Ye.useEffect(()=>((async()=>{if(o){if(A.current===o.userId){console.log("[App] Transport already initialized for this identity (React guard)");const{useContactStore:b}=await _f(async()=>{const{useContactStore:S}=await Promise.resolve().then(()=>Up);return{useContactStore:S}},void 0);b.getState().loaded||(console.log("[App] Reloading contacts after HMR"),await b.getState().loadContacts());return}console.log("[App] Initializing transport for identity:",o.userId.substring(0,8)),A.current=o.userId;try{await br.initialize(o);const{initRetryService:b,setRetryTimeoutCallback:S}=await _f(async()=>{const{initRetryService:L,setRetryTimeoutCallback:X}=await Promise.resolve().then(()=>Ox);return{initRetryService:L,setRetryTimeoutCallback:X}},void 0);b(o.userId,zx()?{minPeerInterval:2e3,timerInterval:100,timeoutMs:5e3}:{minPeerInterval:5e3,timerInterval:300,timeoutMs:3e4}),S(async L=>{const{updateMessageDelivery:X}=Eo.getState();await Pn.updateMessageDelivery(L,!1,!0),X(L,!1,!0)});const{useContactStore:_}=await _f(async()=>{const{useContactStore:L}=await Promise.resolve().then(()=>Up);return{useContactStore:L}},void 0);await _.getState().loadContacts(),console.log("[App]  Contacts loaded and registered with transport");const{addMessage:j}=Eo.getState();br.onMessage(async(L,X)=>{if(X.type==="ack"){console.log("[App] Received ACK for message:",X.id);const{getMessage:Pe,updateMessageDelivery:pt}=Eo.getState();let Ke=Pe(X.id);Ke||(Ke=await Pn.getMessageByUuid(X.id)),Ke?.msg_id!==void 0&&(await Pn.updateMessageDelivery(Ke.msg_id,!0),pt(Ke.msg_id,!0,!1)),ym(L,X.id),vm(L);return}const ge=[o.userId,L].sort().join("-"),de=Rx(X,L,ge);if(await Pn.addMessage(de),j(ge,de),o)try{await br.sendMessage(L,Bx(X.id,X.timestamp)),console.log("[App] Sent ACK for:",X.id)}catch(Pe){console.error("[App] Failed to send ACK:",Pe)}})}catch(b){console.error("[App] Transport initialization failed:",b),A.current=null,g(b instanceof Error?b.message:"Failed to initialize network connection")}}})(),()=>{console.log("[App] Component unmount - preserving all state")}),[o]),!o||r==="setup"?v.jsx(c1,{}):v.jsxs("div",{className:"flex h-screen overflow-hidden bg-[var(--color-bg-dark)]",children:[v.jsx("div",{className:`
        ${r==="contacts"?"flex w-full":r==="settings"?"hidden":"hidden md:flex md:w-80 lg:w-96 border-r border-slate-700/50"}
        flex-col h-full z-20 bg-[var(--color-bg-dark)] transition-all duration-300
      `,children:v.jsx(_x,{})}),v.jsxs("div",{className:`
        ${r==="contacts"?"hidden":"flex"}
        flex-1 flex-col h-full relative z-10 bg-[var(--color-bg-dark)]
      `,children:[r==="settings"&&v.jsx(Ix,{}),r==="chat"&&v.jsx(Ux,{})]})]})}Py.createRoot(document.getElementById("root")).render(v.jsx(Ye.StrictMode,{children:v.jsx(Yx,{})}));
